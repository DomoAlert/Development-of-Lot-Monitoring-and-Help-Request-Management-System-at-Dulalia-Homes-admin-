/*! For license information please see main.57edb0ed.js.LICENSE.txt */
(()=>{"use strict";var e={49:(e,t)=>{var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator;var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},p=Object.assign,g={};function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||m}function v(){}function x(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||m}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var b=x.prototype=new v;b.constructor=x,p(b,y.prototype),b.isPureReactComponent=!0;var w=Array.isArray,_=Object.prototype.hasOwnProperty,k={current:null},N={key:!0,ref:!0,__self:!0,__source:!0};function S(e,t,r){var s,i={},a=null,o=null;if(null!=t)for(s in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(a=""+t.key),t)_.call(t,s)&&!N.hasOwnProperty(s)&&(i[s]=t[s]);var l=arguments.length-2;if(1===l)i.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];i.children=c}if(e&&e.defaultProps)for(s in l=e.defaultProps)void 0===i[s]&&(i[s]=l[s]);return{$$typeof:n,type:e,key:a,ref:o,props:i,_owner:k.current}}function E(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var j=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function T(e,t,s,i,a){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l=!1;if(null===e)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return a=a(l=e),e=""===i?"."+C(l,0):i,w(a)?(s="",null!=e&&(s=e.replace(j,"$&/")+"/"),T(a,t,s,"",(function(e){return e}))):null!=a&&(E(a)&&(a=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,s+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(j,"$&/")+"/")+e)),t.push(a)),1;if(l=0,i=""===i?".":i+":",w(e))for(var c=0;c<e.length;c++){var u=i+C(o=e[c],c);l+=T(o,t,s,u,a)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(o=e.next()).done;)l+=T(o=o.value,t,s,u=i+C(o,c++),a);else if("object"===o)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function A(e,t,n){if(null==e)return e;var r=[],s=0;return T(e,r,"","",(function(e){return t.call(n,e,s++)})),r}function I(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var M={current:null},P={transition:null},R={ReactCurrentDispatcher:M,ReactCurrentBatchConfig:P,ReactCurrentOwner:k};function L(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:A,forEach:function(e,t,n){A(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return A(e,(function(){t++})),t},toArray:function(e){return A(e,(function(e){return e}))||[]},only:function(e){if(!E(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=s,t.Profiler=a,t.PureComponent=x,t.StrictMode=i,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=R,t.act=L,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=p({},e.props),i=e.key,a=e.ref,o=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,o=k.current),void 0!==t.key&&(i=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)_.call(t,c)&&!N.hasOwnProperty(c)&&(s[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)s.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];s.children=l}return{$$typeof:n,type:e.type,key:i,ref:a,props:s,_owner:o}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=S,t.createFactory=function(e){var t=S.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=E,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:I}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=P.transition;P.transition={};try{e()}finally{P.transition=t}},t.unstable_act=L,t.useCallback=function(e,t){return M.current.useCallback(e,t)},t.useContext=function(e){return M.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return M.current.useDeferredValue(e)},t.useEffect=function(e,t){return M.current.useEffect(e,t)},t.useId=function(){return M.current.useId()},t.useImperativeHandle=function(e,t,n){return M.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return M.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return M.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return M.current.useMemo(e,t)},t.useReducer=function(e,t,n){return M.current.useReducer(e,t,n)},t.useRef=function(e){return M.current.useRef(e)},t.useState=function(e){return M.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return M.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return M.current.useTransition()},t.version="18.3.1"},119:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(345)},340:(e,t,n)=>{e.exports=n(761)},345:(e,t,n)=>{var r=n(950),s=n(340);function i(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,o={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(o[e]=t,e=0;e<t.length;e++)a.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},m={};function p(e,t,n,r,s,i,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=a}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new p(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new p(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new p(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new p(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new p(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new p(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new p(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new p(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new p(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function x(e,t,n,r){var s=g.hasOwnProperty(t)?g[t]:null;(null!==s?0!==s.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,s,r)&&(n=null),r||null===s?function(e){return!!d.call(m,e)||!d.call(f,e)&&(h.test(e)?m[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=null===n?3!==s.type&&"":n:(t=s.attributeName,r=s.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(s=s.type)||4===s&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,v);g[t]=new p(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,v);g[t]=new p(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,v);g[t]=new p(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new p(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new p("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new p(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),_=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),N=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),E=Symbol.for("react.provider"),j=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),T=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),M=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var P=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var R=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=R&&e[R]||e["@@iterator"])?e:null}var D,O=Object.assign;function F(e){if(void 0===D)try{throw Error()}catch(GD){var t=GD.stack.trim().match(/\n( *(at )?)/);D=t&&t[1]||""}return"\n"+D+e}var V=!1;function z(e,t){if(!e||V)return"";V=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var s=c.stack.split("\n"),i=r.stack.split("\n"),a=s.length-1,o=i.length-1;1<=a&&0<=o&&s[a]!==i[o];)o--;for(;1<=a&&0<=o;a--,o--)if(s[a]!==i[o]){if(1!==a||1!==o)do{if(a--,0>--o||s[a]!==i[o]){var l="\n"+s[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=a&&0<=o);break}}}finally{V=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?F(e):""}function U(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=z(e.type,!1);case 11:return e=z(e.type.render,!1);case 1:return e=z(e.type,!0);default:return""}}function B(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case k:return"Fragment";case _:return"Portal";case S:return"Profiler";case N:return"StrictMode";case T:return"Suspense";case A:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case j:return(e.displayName||"Context")+".Consumer";case E:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case I:return null!==(t=e.displayName||null)?t:B(e.type)||"Memo";case M:t=e._payload,e=e._init;try{return B(e(t))}catch(GD){}}return null}function $(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(t);case 8:return t===N?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function H(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function W(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function q(e){e._valueTracker||(e._valueTracker=function(e){var t=W(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var s=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(e){r=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function K(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=W(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function G(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return O({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Q(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=H(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function X(e,t){null!=(t=t.checked)&&x(e,"checked",t,!1)}function J(e,t){X(e,t);var n=H(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,H(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&G(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+H(n),t=null,s=0;s<e.length;s++){if(e[s].value===n)return e[s].selected=!0,void(r&&(e[s].defaultSelected=!0));null!==t||e[s].disabled||(t=e[s])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(i(91));return O({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function se(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(i(92));if(te(n)){if(1<n.length)throw Error(i(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:H(n)}}function ie(e,t){var n=H(t.value),r=H(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ae(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function oe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?oe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue=function(e){return"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction((function(){return e(t,n)}))}:e}((function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}}));function de(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var he={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||he.hasOwnProperty(e)&&he[e]?(""+t).trim():t+"px"}function pe(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),s=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}Object.keys(he).forEach((function(e){fe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),he[t]=he[e]}))}));var ge=O({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ge[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(i(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(i(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(i(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(i(62))}}function ve(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xe=null;function be(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var we=null,_e=null,ke=null;function Ne(e){if(e=ys(e)){if("function"!==typeof we)throw Error(i(280));var t=e.stateNode;t&&(t=xs(t),we(e.stateNode,e.type,t))}}function Se(e){_e?ke?ke.push(e):ke=[e]:_e=e}function Ee(){if(_e){var e=_e,t=ke;if(ke=_e=null,Ne(e),t)for(e=0;e<t.length;e++)Ne(t[e])}}function je(e,t){return e(t)}function Ce(){}var Te=!1;function Ae(e,t,n){if(Te)return e(t,n);Te=!0;try{return je(e,t,n)}finally{Te=!1,(null!==_e||null!==ke)&&(Ce(),Ee())}}function Ie(e,t){var n=e.stateNode;if(null===n)return null;var r=xs(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(i(231,t,typeof n));return n}var Me=!1;if(u)try{var Pe={};Object.defineProperty(Pe,"passive",{get:function(){Me=!0}}),window.addEventListener("test",Pe,Pe),window.removeEventListener("test",Pe,Pe)}catch(ru){Me=!1}function Re(e,t,n,r,s,i,a,o,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Le=!1,De=null,Oe=!1,Fe=null,Ve={onError:function(e){Le=!0,De=e}};function ze(e,t,n,r,s,i,a,o,l){Le=!1,De=null,Re.apply(Ve,arguments)}function Ue(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Be(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function $e(e){if(Ue(e)!==e)throw Error(i(188))}function He(e){return e=function(e){var t=e.alternate;if(!t){if(null===(t=Ue(e)))throw Error(i(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(null===s)break;var a=s.alternate;if(null===a){if(null!==(r=s.return)){n=r;continue}break}if(s.child===a.child){for(a=s.child;a;){if(a===n)return $e(s),e;if(a===r)return $e(s),t;a=a.sibling}throw Error(i(188))}if(n.return!==r.return)n=s,r=a;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=a;break}if(l===r){o=!0,r=s,n=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===n){o=!0,n=a,r=s;break}if(l===r){o=!0,r=a,n=s;break}l=l.sibling}if(!o)throw Error(i(189))}}if(n.alternate!==r)throw Error(i(190))}if(3!==n.tag)throw Error(i(188));return n.stateNode.current===n?e:t}(e),null!==e?We(e):null}function We(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=We(e);if(null!==t)return t;e=e.sibling}return null}var qe=s.unstable_scheduleCallback,Ke=s.unstable_cancelCallback,Ge=s.unstable_shouldYield,Ye=s.unstable_requestPaint,Qe=s.unstable_now,Xe=s.unstable_getCurrentPriorityLevel,Je=s.unstable_ImmediatePriority,Ze=s.unstable_UserBlockingPriority,et=s.unstable_NormalPriority,tt=s.unstable_LowPriority,nt=s.unstable_IdlePriority,rt=null,st=null;var it=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(at(e)/ot|0)|0},at=Math.log,ot=Math.LN2;var lt=64,ct=4194304;function ut(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dt(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,s=e.suspendedLanes,i=e.pingedLanes,a=268435455&n;if(0!==a){var o=a&~s;0!==o?r=ut(o):0!==(i&=a)&&(r=ut(i))}else 0!==(a=n&~s)?r=ut(a):0!==i&&(r=ut(i));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&s)&&((s=r&-r)>=(i=t&-t)||16===s&&0!==(4194240&i)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)s=1<<(n=31-it(t)),r|=e[n],t&=~s;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function mt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function pt(){var e=lt;return 0===(4194240&(lt<<=1))&&(lt=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-it(t)]=n}function vt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-it(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var xt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,_t,kt,Nt,St,Et=!1,jt=[],Tt=null,At=null,It=null,Mt=new Map,Pt=new Map,Rt=[],Lt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Dt(e,t){switch(e){case"focusin":case"focusout":Tt=null;break;case"dragenter":case"dragleave":At=null;break;case"mouseover":case"mouseout":It=null;break;case"pointerover":case"pointerout":Mt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pt.delete(t.pointerId)}}function Ot(e,t,n,r,s,i){return null===e||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},null!==t&&(null!==(t=ys(t))&&_t(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==s&&-1===t.indexOf(s)&&t.push(s),e)}function Ft(e){var t=gs(e.target);if(null!==t){var n=Ue(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Be(n)))return e.blockedOn=t,void St(e.priority,(function(){kt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Vt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Qt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ys(n))&&_t(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);xe=r,n.target.dispatchEvent(r),xe=null,t.shift()}return!0}function zt(e,t,n){Vt(e)&&n.delete(t)}function Ut(){Et=!1,null!==Tt&&Vt(Tt)&&(Tt=null),null!==At&&Vt(At)&&(At=null),null!==It&&Vt(It)&&(It=null),Mt.forEach(zt),Pt.forEach(zt)}function Bt(e,t){e.blockedOn===t&&(e.blockedOn=null,Et||(Et=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,Ut)))}function $t(e){function t(t){return Bt(t,e)}if(0<jt.length){Bt(jt[0],e);for(var n=1;n<jt.length;n++){var r=jt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Tt&&Bt(Tt,e),null!==At&&Bt(At,e),null!==It&&Bt(It,e),Mt.forEach(t),Pt.forEach(t),n=0;n<Rt.length;n++)(r=Rt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Rt.length&&null===(n=Rt[0]).blockedOn;)Ft(n),null===n.blockedOn&&Rt.shift()}var Ht=b.ReactCurrentBatchConfig,Wt=!0;function qt(e,t,n,r){var s=xt,i=Ht.transition;Ht.transition=null;try{xt=1,Gt(e,t,n,r)}finally{xt=s,Ht.transition=i}}function Kt(e,t,n,r){var s=xt,i=Ht.transition;Ht.transition=null;try{xt=4,Gt(e,t,n,r)}finally{xt=s,Ht.transition=i}}function Gt(e,t,n,r){if(Wt){var s=Qt(e,t,n,r);if(null===s)Br(e,t,r,Yt,n),Dt(e,r);else if(function(e,t,n,r,s){switch(t){case"focusin":return Tt=Ot(Tt,e,t,n,r,s),!0;case"dragenter":return At=Ot(At,e,t,n,r,s),!0;case"mouseover":return It=Ot(It,e,t,n,r,s),!0;case"pointerover":var i=s.pointerId;return Mt.set(i,Ot(Mt.get(i)||null,e,t,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Pt.set(i,Ot(Pt.get(i)||null,e,t,n,r,s)),!0}return!1}(s,e,t,n,r))r.stopPropagation();else if(Dt(e,r),4&t&&-1<Lt.indexOf(e)){for(;null!==s;){var i=ys(s);if(null!==i&&wt(i),null===(i=Qt(e,t,n,r))&&Br(e,t,r,Yt,n),i===s)break;s=i}null!==s&&r.stopPropagation()}else Br(e,t,r,null,n)}}var Yt=null;function Qt(e,t,n,r){if(Yt=null,null!==(e=gs(e=be(r))))if(null===(t=Ue(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Be(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Yt=e,null}function Xt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case Je:return 1;case Ze:return 4;case et:case tt:return 16;case nt:return 536870912;default:return 16}default:return 16}}var Jt=null,Zt=null,en=null;function tn(){if(en)return en;var e,t,n=Zt,r=n.length,s="value"in Jt?Jt.value:Jt.textContent,i=s.length;for(e=0;e<r&&n[e]===s[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===s[i-t];t++);return en=s.slice(e,1<t?1-t:void 0)}function nn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function rn(){return!0}function sn(){return!1}function an(e){function t(t,n,r,s,i){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=s,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(null!=s.defaultPrevented?s.defaultPrevented:!1===s.returnValue)?rn:sn,this.isPropagationStopped=sn,this}return O(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=rn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=rn)},persist:function(){},isPersistent:rn}),t}var on,ln,cn,un={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dn=an(un),hn=O({},un,{view:0,detail:0}),fn=an(hn),mn=O({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==cn&&(cn&&"mousemove"===e.type?(on=e.screenX-cn.screenX,ln=e.screenY-cn.screenY):ln=on=0,cn=e),on)},movementY:function(e){return"movementY"in e?e.movementY:ln}}),pn=an(mn),gn=an(O({},mn,{dataTransfer:0})),yn=an(O({},hn,{relatedTarget:0})),vn=an(O({},un,{animationName:0,elapsedTime:0,pseudoElement:0})),xn=an(O({},un,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),bn=an(O({},un,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_n={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Nn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=kn[e])&&!!t[e]}function Sn(){return Nn}var En=an(O({},hn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=nn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?_n[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sn,charCode:function(e){return"keypress"===e.type?nn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?nn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),jn=an(O({},mn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Cn=an(O({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sn})),Tn=an(O({},un,{propertyName:0,elapsedTime:0,pseudoElement:0})),An=an(O({},mn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),In=[9,13,27,32],Mn=u&&"CompositionEvent"in window,Pn=null;u&&"documentMode"in document&&(Pn=document.documentMode);var Rn=u&&"TextEvent"in window&&!Pn,Ln=u&&(!Mn||Pn&&8<Pn&&11>=Pn),Dn=String.fromCharCode(32),On=!1;function Fn(e,t){switch(e){case"keyup":return-1!==In.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var zn=!1;var Un={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Bn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Un[e.type]:"textarea"===t}function $n(e,t,n,r){Se(r),0<(t=Hr(t,"onChange")).length&&(n=new dn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Hn=null,Wn=null;function qn(e){Dr(e,0)}function Kn(e){if(K(vs(e)))return e}function Gn(e,t){if("change"===e)return t}var Yn=!1;if(u){var Qn;if(u){var Xn="oninput"in document;if(!Xn){var Jn=document.createElement("div");Jn.setAttribute("oninput","return;"),Xn="function"===typeof Jn.oninput}Qn=Xn}else Qn=!1;Yn=Qn&&(!document.documentMode||9<document.documentMode)}function Zn(){Hn&&(Hn.detachEvent("onpropertychange",er),Wn=Hn=null)}function er(e){if("value"===e.propertyName&&Kn(Wn)){var t=[];$n(t,Wn,e,be(e)),Ae(qn,t)}}function tr(e,t,n){"focusin"===e?(Zn(),Wn=n,(Hn=t).attachEvent("onpropertychange",er)):"focusout"===e&&Zn()}function nr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Kn(Wn)}function rr(e,t){if("click"===e)return Kn(t)}function sr(e,t){if("input"===e||"change"===e)return Kn(t)}var ir="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function ar(e,t){if(ir(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!d.call(t,s)||!ir(e[s],t[s]))return!1}return!0}function or(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function lr(e,t){var n,r=or(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=or(r)}}function cr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?cr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function ur(){for(var e=window,t=G();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=G((e=t.contentWindow).document)}return t}function dr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function hr(e){var t=ur(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&cr(n.ownerDocument.documentElement,n)){if(null!==r&&dr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=void 0===r.end?i:Math.min(r.end,s),!e.extend&&i>r&&(s=r,r=i,i=s),s=lr(n,i);var a=lr(n,r);s&&a&&(1!==e.rangeCount||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(s.node,s.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var fr=u&&"documentMode"in document&&11>=document.documentMode,mr=null,pr=null,gr=null,yr=!1;function vr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;yr||null==mr||mr!==G(r)||("selectionStart"in(r=mr)&&dr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},gr&&ar(gr,r)||(gr=r,0<(r=Hr(pr,"onSelect")).length&&(t=new dn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=mr)))}function xr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var br={animationend:xr("Animation","AnimationEnd"),animationiteration:xr("Animation","AnimationIteration"),animationstart:xr("Animation","AnimationStart"),transitionend:xr("Transition","TransitionEnd")},wr={},_r={};function kr(e){if(wr[e])return wr[e];if(!br[e])return e;var t,n=br[e];for(t in n)if(n.hasOwnProperty(t)&&t in _r)return wr[e]=n[t];return e}u&&(_r=document.createElement("div").style,"AnimationEvent"in window||(delete br.animationend.animation,delete br.animationiteration.animation,delete br.animationstart.animation),"TransitionEvent"in window||delete br.transitionend.transition);var Nr=kr("animationend"),Sr=kr("animationiteration"),Er=kr("animationstart"),jr=kr("transitionend"),Cr=new Map,Tr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ar(e,t){Cr.set(e,t),l(t,[e])}for(var Ir=0;Ir<Tr.length;Ir++){var Mr=Tr[Ir];Ar(Mr.toLowerCase(),"on"+(Mr[0].toUpperCase()+Mr.slice(1)))}Ar(Nr,"onAnimationEnd"),Ar(Sr,"onAnimationIteration"),Ar(Er,"onAnimationStart"),Ar("dblclick","onDoubleClick"),Ar("focusin","onFocus"),Ar("focusout","onBlur"),Ar(jr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Pr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Rr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Pr));function Lr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,s,a,o,l,c){if(ze.apply(this,arguments),Le){if(!Le)throw Error(i(198));var u=De;Le=!1,De=null,Oe||(Oe=!0,Fe=u)}}(r,t,void 0,e),e.currentTarget=null}function Dr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var a=r.length-1;0<=a;a--){var o=r[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==i&&s.isPropagationStopped())break e;Lr(s,o,c),i=l}else for(a=0;a<r.length;a++){if(l=(o=r[a]).instance,c=o.currentTarget,o=o.listener,l!==i&&s.isPropagationStopped())break e;Lr(s,o,c),i=l}}}if(Oe)throw e=Fe,Oe=!1,Fe=null,e}function Or(e,t){var n=t[fs];void 0===n&&(n=t[fs]=new Set);var r=e+"__bubble";n.has(r)||(Ur(t,e,2,!1),n.add(r))}function Fr(e,t,n){var r=0;t&&(r|=4),Ur(n,e,r,t)}var Vr="_reactListening"+Math.random().toString(36).slice(2);function zr(e){if(!e[Vr]){e[Vr]=!0,a.forEach((function(t){"selectionchange"!==t&&(Rr.has(t)||Fr(t,!1,e),Fr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Vr]||(t[Vr]=!0,Fr("selectionchange",!1,t))}}function Ur(e,t,n,r){switch(Xt(t)){case 1:var s=qt;break;case 4:s=Kt;break;default:s=Gt}n=s.bind(null,t,n,e),s=void 0,!Me||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(s=!0),r?void 0!==s?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):void 0!==s?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function Br(e,t,n,r,s){var i=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var o=r.stateNode.containerInfo;if(o===s||8===o.nodeType&&o.parentNode===s)break;if(4===a)for(a=r.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===s||8===l.nodeType&&l.parentNode===s))return;a=a.return}for(;null!==o;){if(null===(a=gs(o)))return;if(5===(l=a.tag)||6===l){r=i=a;continue e}o=o.parentNode}}r=r.return}Ae((function(){var r=i,s=be(n),a=[];e:{var o=Cr.get(e);if(void 0!==o){var l=dn,c=e;switch(e){case"keypress":if(0===nn(n))break e;case"keydown":case"keyup":l=En;break;case"focusin":c="focus",l=yn;break;case"focusout":c="blur",l=yn;break;case"beforeblur":case"afterblur":l=yn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=gn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Cn;break;case Nr:case Sr:case Er:l=vn;break;case jr:l=Tn;break;case"scroll":l=fn;break;case"wheel":l=An;break;case"copy":case"cut":case"paste":l=xn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=jn}var u=0!==(4&t),d=!u&&"scroll"===e,h=u?null!==o?o+"Capture":null:o;u=[];for(var f,m=r;null!==m;){var p=(f=m).stateNode;if(5===f.tag&&null!==p&&(f=p,null!==h&&(null!=(p=Ie(m,h))&&u.push($r(m,p,f)))),d)break;m=m.return}0<u.length&&(o=new l(o,c,null,n,s),a.push({event:o,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===xe||!(c=n.relatedTarget||n.fromElement)||!gs(c)&&!c[hs])&&(l||o)&&(o=s.window===s?s:(o=s.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?gs(c):null)&&(c!==(d=Ue(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=pn,p="onMouseLeave",h="onMouseEnter",m="mouse","pointerout"!==e&&"pointerover"!==e||(u=jn,p="onPointerLeave",h="onPointerEnter",m="pointer"),d=null==l?o:vs(l),f=null==c?o:vs(c),(o=new u(p,m+"leave",l,n,s)).target=d,o.relatedTarget=f,p=null,gs(s)===r&&((u=new u(h,m+"enter",c,n,s)).target=f,u.relatedTarget=d,p=u),d=p,l&&c)e:{for(h=c,m=0,f=u=l;f;f=Wr(f))m++;for(f=0,p=h;p;p=Wr(p))f++;for(;0<m-f;)u=Wr(u),m--;for(;0<f-m;)h=Wr(h),f--;for(;m--;){if(u===h||null!==h&&u===h.alternate)break e;u=Wr(u),h=Wr(h)}u=null}else u=null;null!==l&&qr(a,o,l,u,!1),null!==c&&null!==d&&qr(a,d,c,u,!0)}if("select"===(l=(o=r?vs(r):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var g=Gn;else if(Bn(o))if(Yn)g=sr;else{g=nr;var y=tr}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(g=rr);switch(g&&(g=g(e,r))?$n(a,g,n,s):(y&&y(e,o,r),"focusout"===e&&(y=o._wrapperState)&&y.controlled&&"number"===o.type&&ee(o,"number",o.value)),y=r?vs(r):window,e){case"focusin":(Bn(y)||"true"===y.contentEditable)&&(mr=y,pr=r,gr=null);break;case"focusout":gr=pr=mr=null;break;case"mousedown":yr=!0;break;case"contextmenu":case"mouseup":case"dragend":yr=!1,vr(a,n,s);break;case"selectionchange":if(fr)break;case"keydown":case"keyup":vr(a,n,s)}var v;if(Mn)e:{switch(e){case"compositionstart":var x="onCompositionStart";break e;case"compositionend":x="onCompositionEnd";break e;case"compositionupdate":x="onCompositionUpdate";break e}x=void 0}else zn?Fn(e,n)&&(x="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(x="onCompositionStart");x&&(Ln&&"ko"!==n.locale&&(zn||"onCompositionStart"!==x?"onCompositionEnd"===x&&zn&&(v=tn()):(Zt="value"in(Jt=s)?Jt.value:Jt.textContent,zn=!0)),0<(y=Hr(r,x)).length&&(x=new bn(x,e,null,n,s),a.push({event:x,listeners:y}),v?x.data=v:null!==(v=Vn(n))&&(x.data=v))),(v=Rn?function(e,t){switch(e){case"compositionend":return Vn(t);case"keypress":return 32!==t.which?null:(On=!0,Dn);case"textInput":return(e=t.data)===Dn&&On?null:e;default:return null}}(e,n):function(e,t){if(zn)return"compositionend"===e||!Mn&&Fn(e,t)?(e=tn(),en=Zt=Jt=null,zn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ln&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Hr(r,"onBeforeInput")).length&&(s=new bn("onBeforeInput","beforeinput",null,n,s),a.push({event:s,listeners:r}),s.data=v))}Dr(a,t)}))}function $r(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Hr(e,t){for(var n=t+"Capture",r=[];null!==e;){var s=e,i=s.stateNode;5===s.tag&&null!==i&&(s=i,null!=(i=Ie(e,n))&&r.unshift($r(e,i,s)),null!=(i=Ie(e,t))&&r.push($r(e,i,s))),e=e.return}return r}function Wr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function qr(e,t,n,r,s){for(var i=t._reactName,a=[];null!==n&&n!==r;){var o=n,l=o.alternate,c=o.stateNode;if(null!==l&&l===r)break;5===o.tag&&null!==c&&(o=c,s?null!=(l=Ie(n,i))&&a.unshift($r(n,l,o)):s||null!=(l=Ie(n,i))&&a.push($r(n,l,o))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var Kr=/\r\n?/g,Gr=/\u0000|\uFFFD/g;function Yr(e){return("string"===typeof e?e:""+e).replace(Kr,"\n").replace(Gr,"")}function Qr(e,t,n){if(t=Yr(t),Yr(e)!==t&&n)throw Error(i(425))}function Xr(){}var Jr=null,Zr=null;function es(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ts="function"===typeof setTimeout?setTimeout:void 0,ns="function"===typeof clearTimeout?clearTimeout:void 0,rs="function"===typeof Promise?Promise:void 0,ss="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof rs?function(e){return rs.resolve(null).then(e).catch(is)}:ts;function is(e){setTimeout((function(){throw e}))}function as(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&8===s.nodeType)if("/$"===(n=s.data)){if(0===r)return e.removeChild(s),void $t(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=s}while(n);$t(t)}function os(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ls(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var cs=Math.random().toString(36).slice(2),us="__reactFiber$"+cs,ds="__reactProps$"+cs,hs="__reactContainer$"+cs,fs="__reactEvents$"+cs,ms="__reactListeners$"+cs,ps="__reactHandles$"+cs;function gs(e){var t=e[us];if(t)return t;for(var n=e.parentNode;n;){if(t=n[hs]||n[us]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ls(e);null!==e;){if(n=e[us])return n;e=ls(e)}return t}n=(e=n).parentNode}return null}function ys(e){return!(e=e[us]||e[hs])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function vs(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(i(33))}function xs(e){return e[ds]||null}var bs=[],ws=-1;function _s(e){return{current:e}}function ks(e){0>ws||(e.current=bs[ws],bs[ws]=null,ws--)}function Ns(e,t){ws++,bs[ws]=e.current,e.current=t}var Ss={},Es=_s(Ss),js=_s(!1),Cs=Ss;function Ts(e,t){var n=e.type.contextTypes;if(!n)return Ss;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s,i={};for(s in n)i[s]=t[s];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function As(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Is(){ks(js),ks(Es)}function Ms(e,t,n){if(Es.current!==Ss)throw Error(i(168));Ns(Es,t),Ns(js,n)}function Ps(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var s in r=r.getChildContext())if(!(s in t))throw Error(i(108,$(e)||"Unknown",s));return O({},n,r)}function Rs(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ss,Cs=Es.current,Ns(Es,e),Ns(js,js.current),!0}function Ls(e,t,n){var r=e.stateNode;if(!r)throw Error(i(169));n?(e=Ps(e,t,Cs),r.__reactInternalMemoizedMergedChildContext=e,ks(js),ks(Es),Ns(Es,e)):ks(js),Ns(js,n)}var Ds=null,Os=!1,Fs=!1;function Vs(e){null===Ds?Ds=[e]:Ds.push(e)}function zs(){if(!Fs&&null!==Ds){Fs=!0;var e=0,t=xt;try{var n=Ds;for(xt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Ds=null,Os=!1}catch(hF){throw null!==Ds&&(Ds=Ds.slice(e+1)),qe(Je,zs),hF}finally{xt=t,Fs=!1}}return null}var Us=[],Bs=0,$s=null,Hs=0,Ws=[],qs=0,Ks=null,Gs=1,Ys="";function Qs(e,t){Us[Bs++]=Hs,Us[Bs++]=$s,$s=e,Hs=t}function Xs(e,t,n){Ws[qs++]=Gs,Ws[qs++]=Ys,Ws[qs++]=Ks,Ks=e;var r=Gs;e=Ys;var s=32-it(r)-1;r&=~(1<<s),n+=1;var i=32-it(t)+s;if(30<i){var a=s-s%5;i=(r&(1<<a)-1).toString(32),r>>=a,s-=a,Gs=1<<32-it(t)+s|n<<s|r,Ys=i+e}else Gs=1<<i|n<<s|r,Ys=e}function Js(e){null!==e.return&&(Qs(e,1),Xs(e,1,0))}function Zs(e){for(;e===$s;)$s=Us[--Bs],Us[Bs]=null,Hs=Us[--Bs],Us[Bs]=null;for(;e===Ks;)Ks=Ws[--qs],Ws[qs]=null,Ys=Ws[--qs],Ws[qs]=null,Gs=Ws[--qs],Ws[qs]=null}var ei=null,ti=null,ni=!1,ri=null;function si(e,t){var n=Ac(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ii(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ei=e,ti=os(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ei=e,ti=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Ks?{id:Gs,overflow:Ys}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Ac(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ei=e,ti=null,!0);default:return!1}}function ai(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function oi(e){if(ni){var t=ti;if(t){var n=t;if(!ii(e,t)){if(ai(e))throw Error(i(418));t=os(n.nextSibling);var r=ei;t&&ii(e,t)?si(r,n):(e.flags=-4097&e.flags|2,ni=!1,ei=e)}}else{if(ai(e))throw Error(i(418));e.flags=-4097&e.flags|2,ni=!1,ei=e}}}function li(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ei=e}function ci(e){if(e!==ei)return!1;if(!ni)return li(e),ni=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!es(e.type,e.memoizedProps)),t&&(t=ti)){if(ai(e))throw ui(),Error(i(418));for(;t;)si(e,t),t=os(t.nextSibling)}if(li(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(i(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ti=os(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ti=null}}else ti=ei?os(e.stateNode.nextSibling):null;return!0}function ui(){for(var e=ti;e;)e=os(e.nextSibling)}function di(){ti=ei=null,ni=!1}function hi(e){null===ri?ri=[e]:ri.push(e)}var fi=b.ReactCurrentBatchConfig;function mi(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(i(309));var r=n.stateNode}if(!r)throw Error(i(147,e));var s=r,a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=s.refs;null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!==typeof e)throw Error(i(284));if(!n._owner)throw Error(i(290,e))}return e}function pi(e,t){throw e=Object.prototype.toString.call(t),Error(i(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function gi(e){return(0,e._init)(e._payload)}function yi(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function s(e,t){return(e=Mc(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Dc(n,e.mode,r)).return=e,t):((t=s(t,n)).return=e,t)}function c(e,t,n,r){var i=n.type;return i===k?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===i||"object"===typeof i&&null!==i&&i.$$typeof===M&&gi(i)===t.type)?((r=s(t,n.props)).ref=mi(e,t,n),r.return=e,r):((r=Pc(n.type,n.key,n.props,null,e.mode,r)).ref=mi(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Oc(n,e.mode,r)).return=e,t):((t=s(t,n.children||[])).return=e,t)}function d(e,t,n,r,i){return null===t||7!==t.tag?((t=Rc(n,e.mode,r,i)).return=e,t):((t=s(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Dc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Pc(t.type,t.key,t.props,null,e.mode,n)).ref=mi(e,null,t),n.return=e,n;case _:return(t=Oc(t,e.mode,n)).return=e,t;case M:return h(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Rc(t,e.mode,n,null)).return=e,t;pi(e,t)}return null}function f(e,t,n,r){var s=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==s?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===s?c(e,t,n,r):null;case _:return n.key===s?u(e,t,n,r):null;case M:return f(e,t,(s=n._init)(n._payload),r)}if(te(n)||L(n))return null!==s?null:d(e,t,n,r,null);pi(e,n)}return null}function m(e,t,n,r,s){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,s);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,s);case _:return u(t,e=e.get(null===r.key?n:r.key)||null,r,s);case M:return m(e,t,n,(0,r._init)(r._payload),s)}if(te(r)||L(r))return d(t,e=e.get(n)||null,r,s,null);pi(t,r)}return null}function p(s,i,o,l){for(var c=null,u=null,d=i,p=i=0,g=null;null!==d&&p<o.length;p++){d.index>p?(g=d,d=null):g=d.sibling;var y=f(s,d,o[p],l);if(null===y){null===d&&(d=g);break}e&&d&&null===y.alternate&&t(s,d),i=a(y,i,p),null===u?c=y:u.sibling=y,u=y,d=g}if(p===o.length)return n(s,d),ni&&Qs(s,p),c;if(null===d){for(;p<o.length;p++)null!==(d=h(s,o[p],l))&&(i=a(d,i,p),null===u?c=d:u.sibling=d,u=d);return ni&&Qs(s,p),c}for(d=r(s,d);p<o.length;p++)null!==(g=m(d,s,p,o[p],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?p:g.key),i=a(g,i,p),null===u?c=g:u.sibling=g,u=g);return e&&d.forEach((function(e){return t(s,e)})),ni&&Qs(s,p),c}function g(s,o,l,c){var u=L(l);if("function"!==typeof u)throw Error(i(150));if(null==(l=u.call(l)))throw Error(i(151));for(var d=u=null,p=o,g=o=0,y=null,v=l.next();null!==p&&!v.done;g++,v=l.next()){p.index>g?(y=p,p=null):y=p.sibling;var x=f(s,p,v.value,c);if(null===x){null===p&&(p=y);break}e&&p&&null===x.alternate&&t(s,p),o=a(x,o,g),null===d?u=x:d.sibling=x,d=x,p=y}if(v.done)return n(s,p),ni&&Qs(s,g),u;if(null===p){for(;!v.done;g++,v=l.next())null!==(v=h(s,v.value,c))&&(o=a(v,o,g),null===d?u=v:d.sibling=v,d=v);return ni&&Qs(s,g),u}for(p=r(s,p);!v.done;g++,v=l.next())null!==(v=m(p,s,g,v.value,c))&&(e&&null!==v.alternate&&p.delete(null===v.key?g:v.key),o=a(v,o,g),null===d?u=v:d.sibling=v,d=v);return e&&p.forEach((function(e){return t(s,e)})),ni&&Qs(s,g),u}return function e(r,i,a,l){if("object"===typeof a&&null!==a&&a.type===k&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case w:e:{for(var c=a.key,u=i;null!==u;){if(u.key===c){if((c=a.type)===k){if(7===u.tag){n(r,u.sibling),(i=s(u,a.props.children)).return=r,r=i;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===M&&gi(c)===u.type){n(r,u.sibling),(i=s(u,a.props)).ref=mi(r,u,a),i.return=r,r=i;break e}n(r,u);break}t(r,u),u=u.sibling}a.type===k?((i=Rc(a.props.children,r.mode,l,a.key)).return=r,r=i):((l=Pc(a.type,a.key,a.props,null,r.mode,l)).ref=mi(r,i,a),l.return=r,r=l)}return o(r);case _:e:{for(u=a.key;null!==i;){if(i.key===u){if(4===i.tag&&i.stateNode.containerInfo===a.containerInfo&&i.stateNode.implementation===a.implementation){n(r,i.sibling),(i=s(i,a.children||[])).return=r,r=i;break e}n(r,i);break}t(r,i),i=i.sibling}(i=Oc(a,r.mode,l)).return=r,r=i}return o(r);case M:return e(r,i,(u=a._init)(a._payload),l)}if(te(a))return p(r,i,a,l);if(L(a))return g(r,i,a,l);pi(r,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==i&&6===i.tag?(n(r,i.sibling),(i=s(i,a)).return=r,r=i):(n(r,i),(i=Dc(a,r.mode,l)).return=r,r=i),o(r)):n(r,i)}}var vi=yi(!0),xi=yi(!1),bi=_s(null),wi=null,_i=null,ki=null;function Ni(){ki=_i=wi=null}function Si(e){var t=bi.current;ks(bi),e._currentValue=t}function Ei(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function ji(e,t){wi=e,ki=_i=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(yo=!0),e.firstContext=null)}function Ci(e){var t=e._currentValue;if(ki!==e)if(e={context:e,memoizedValue:t,next:null},null===_i){if(null===wi)throw Error(i(308));_i=e,wi.dependencies={lanes:0,firstContext:e}}else _i=_i.next=e;return t}var Ti=null;function Ai(e){null===Ti?Ti=[e]:Ti.push(e)}function Ii(e,t,n,r){var s=t.interleaved;return null===s?(n.next=n,Ai(t)):(n.next=s.next,s.next=n),t.interleaved=n,Mi(e,r)}function Mi(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Pi=!1;function Ri(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Li(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Di(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Oi(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&El)){var s=r.pending;return null===s?t.next=t:(t.next=s.next,s.next=t),r.pending=t,Mi(e,n)}return null===(s=r.interleaved)?(t.next=t,Ai(r)):(t.next=s.next,s.next=t),r.interleaved=t,Mi(e,n)}function Fi(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}function Vi(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var s=null,i=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===i?s=i=a:i=i.next=a,n=n.next}while(null!==n);null===i?s=i=t:i=i.next=t}else s=i=t;return n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function zi(e,t,n,r){var s=e.updateQueue;Pi=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,o=s.shared.pending;if(null!==o){s.shared.pending=null;var l=o,c=l.next;l.next=null,null===a?i=c:a.next=c,a=l;var u=e.alternate;null!==u&&((o=(u=u.updateQueue).lastBaseUpdate)!==a&&(null===o?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(null!==i){var d=s.baseState;for(a=0,u=c=l=null,o=i;;){var h=o.lane,f=o.eventTime;if((r&h)===h){null!==u&&(u=u.next={eventTime:f,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var m=e,p=o;switch(h=t,f=n,p.tag){case 1:if("function"===typeof(m=p.payload)){d=m.call(f,d,h);break e}d=m;break e;case 3:m.flags=-65537&m.flags|128;case 0:if(null===(h="function"===typeof(m=p.payload)?m.call(f,d,h):m)||void 0===h)break e;d=O({},d,h);break e;case 2:Pi=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(h=s.effects)?s.effects=[o]:h.push(o))}else f={eventTime:f,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===u?(c=u=f,l=d):u=u.next=f,a|=h;if(null===(o=o.next)){if(null===(o=s.shared.pending))break;o=(h=o).next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}if(null===u&&(l=d),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=u,null!==(t=s.shared.interleaved)){s=t;do{a|=s.lane,s=s.next}while(s!==t)}else null===i&&(s.shared.lanes=0);Rl|=a,e.lanes=a,e.memoizedState=d}}function Ui(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(null!==s){if(r.callback=null,r=n,"function"!==typeof s)throw Error(i(191,s));s.call(r)}}}var Bi={},$i=_s(Bi),Hi=_s(Bi),Wi=_s(Bi);function qi(e){if(e===Bi)throw Error(i(174));return e}function Ki(e,t){switch(Ns(Wi,t),Ns(Hi,e),Ns($i,Bi),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}ks($i),Ns($i,t)}function Gi(){ks($i),ks(Hi),ks(Wi)}function Yi(e){qi(Wi.current);var t=qi($i.current),n=le(t,e.type);t!==n&&(Ns(Hi,e),Ns($i,n))}function Qi(e){Hi.current===e&&(ks($i),ks(Hi))}var Xi=_s(0);function Ji(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Zi=[];function ea(){for(var e=0;e<Zi.length;e++)Zi[e]._workInProgressVersionPrimary=null;Zi.length=0}var ta=b.ReactCurrentDispatcher,na=b.ReactCurrentBatchConfig,ra=0,sa=null,ia=null,aa=null,oa=!1,la=!1,ca=0,ua=0;function da(){throw Error(i(321))}function ha(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ir(e[n],t[n]))return!1;return!0}function fa(e,t,n,r,s,a){if(ra=a,sa=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ta.current=null===e||null===e.memoizedState?Qa:Xa,e=n(r,s),la){a=0;do{if(la=!1,ca=0,25<=a)throw Error(i(301));a+=1,aa=ia=null,t.updateQueue=null,ta.current=Ja,e=n(r,s)}while(la)}if(ta.current=Ya,t=null!==ia&&null!==ia.next,ra=0,aa=ia=sa=null,oa=!1,t)throw Error(i(300));return e}function ma(){var e=0!==ca;return ca=0,e}function pa(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===aa?sa.memoizedState=aa=e:aa=aa.next=e,aa}function ga(){if(null===ia){var e=sa.alternate;e=null!==e?e.memoizedState:null}else e=ia.next;var t=null===aa?sa.memoizedState:aa.next;if(null!==t)aa=t,ia=e;else{if(null===e)throw Error(i(310));e={memoizedState:(ia=e).memoizedState,baseState:ia.baseState,baseQueue:ia.baseQueue,queue:ia.queue,next:null},null===aa?sa.memoizedState=aa=e:aa=aa.next=e}return aa}function ya(e,t){return"function"===typeof t?t(e):t}function va(e){var t=ga(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=ia,s=r.baseQueue,a=n.pending;if(null!==a){if(null!==s){var o=s.next;s.next=a.next,a.next=o}r.baseQueue=s=a,n.pending=null}if(null!==s){a=s.next,r=r.baseState;var l=o=null,c=null,u=a;do{var d=u.lane;if((ra&d)===d)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=h,o=r):c=c.next=h,sa.lanes|=d,Rl|=d}u=u.next}while(null!==u&&u!==a);null===c?o=r:c.next=l,ir(r,t.memoizedState)||(yo=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){s=e;do{a=s.lane,sa.lanes|=a,Rl|=a,s=s.next}while(s!==e)}else null===s&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function xa(e){var t=ga(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,a=t.memoizedState;if(null!==s){n.pending=null;var o=s=s.next;do{a=e(a,o.action),o=o.next}while(o!==s);ir(a,t.memoizedState)||(yo=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function ba(){}function wa(e,t){var n=sa,r=ga(),s=t(),a=!ir(r.memoizedState,s);if(a&&(r.memoizedState=s,yo=!0),r=r.queue,Pa(Na.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||null!==aa&&1&aa.memoizedState.tag){if(n.flags|=2048,Ca(9,ka.bind(null,n,r,s,t),void 0,null),null===jl)throw Error(i(349));0!==(30&ra)||_a(n,t,s)}return s}function _a(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=sa.updateQueue)?(t={lastEffect:null,stores:null},sa.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function ka(e,t,n,r){t.value=n,t.getSnapshot=r,Sa(t)&&Ea(e)}function Na(e,t,n){return n((function(){Sa(t)&&Ea(e)}))}function Sa(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ir(e,n)}catch(r){return!0}}function Ea(e){var t=Mi(e,1);null!==t&&tc(t,e,1,-1)}function ja(e){var t=pa();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ya,lastRenderedState:e},t.queue=e,e=e.dispatch=Wa.bind(null,sa,e),[t.memoizedState,e]}function Ca(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=sa.updateQueue)?(t={lastEffect:null,stores:null},sa.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Ta(){return ga().memoizedState}function Aa(e,t,n,r){var s=pa();sa.flags|=e,s.memoizedState=Ca(1|t,n,void 0,void 0===r?null:r)}function Ia(e,t,n,r){var s=ga();r=void 0===r?null:r;var i=void 0;if(null!==ia){var a=ia.memoizedState;if(i=a.destroy,null!==r&&ha(r,a.deps))return void(s.memoizedState=Ca(t,n,i,r))}sa.flags|=e,s.memoizedState=Ca(1|t,n,i,r)}function Ma(e,t){return Aa(8390656,8,e,t)}function Pa(e,t){return Ia(2048,8,e,t)}function Ra(e,t){return Ia(4,2,e,t)}function La(e,t){return Ia(4,4,e,t)}function Da(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Oa(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ia(4,4,Da.bind(null,t,e),n)}function Fa(){}function Va(e,t){var n=ga();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ha(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function za(e,t){var n=ga();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ha(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Ua(e,t,n){return 0===(21&ra)?(e.baseState&&(e.baseState=!1,yo=!0),e.memoizedState=n):(ir(n,t)||(n=pt(),sa.lanes|=n,Rl|=n,e.baseState=!0),t)}function Ba(e,t){var n=xt;xt=0!==n&&4>n?n:4,e(!0);var r=na.transition;na.transition={};try{e(!1),t()}finally{xt=n,na.transition=r}}function $a(){return ga().memoizedState}function Ha(e,t,n){var r=ec(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},qa(e))Ka(t,n);else if(null!==(n=Ii(e,t,n,r))){tc(n,e,r,Zl()),Ga(n,t,r)}}function Wa(e,t,n){var r=ec(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(qa(e))Ka(t,s);else{var i=e.alternate;if(0===e.lanes&&(null===i||0===i.lanes)&&null!==(i=t.lastRenderedReducer))try{var a=t.lastRenderedState,o=i(a,n);if(s.hasEagerState=!0,s.eagerState=o,ir(o,a)){var l=t.interleaved;return null===l?(s.next=s,Ai(t)):(s.next=l.next,l.next=s),void(t.interleaved=s)}}catch(c){}null!==(n=Ii(e,t,s,r))&&(tc(n,e,r,s=Zl()),Ga(n,t,r))}}function qa(e){var t=e.alternate;return e===sa||null!==t&&t===sa}function Ka(e,t){la=oa=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Ga(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}var Ya={readContext:Ci,useCallback:da,useContext:da,useEffect:da,useImperativeHandle:da,useInsertionEffect:da,useLayoutEffect:da,useMemo:da,useReducer:da,useRef:da,useState:da,useDebugValue:da,useDeferredValue:da,useTransition:da,useMutableSource:da,useSyncExternalStore:da,useId:da,unstable_isNewReconciler:!1},Qa={readContext:Ci,useCallback:function(e,t){return pa().memoizedState=[e,void 0===t?null:t],e},useContext:Ci,useEffect:Ma,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Aa(4194308,4,Da.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Aa(4194308,4,e,t)},useInsertionEffect:function(e,t){return Aa(4,2,e,t)},useMemo:function(e,t){var n=pa();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=pa();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Ha.bind(null,sa,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},pa().memoizedState=e},useState:ja,useDebugValue:Fa,useDeferredValue:function(e){return pa().memoizedState=e},useTransition:function(){var e=ja(!1),t=e[0];return e=Ba.bind(null,e[1]),pa().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=sa,s=pa();if(ni){if(void 0===n)throw Error(i(407));n=n()}else{if(n=t(),null===jl)throw Error(i(349));0!==(30&ra)||_a(r,t,n)}s.memoizedState=n;var a={value:n,getSnapshot:t};return s.queue=a,Ma(Na.bind(null,r,a,e),[e]),r.flags|=2048,Ca(9,ka.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=pa(),t=jl.identifierPrefix;if(ni){var n=Ys;t=":"+t+"R"+(n=(Gs&~(1<<32-it(Gs)-1)).toString(32)+n),0<(n=ca++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=ua++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Xa={readContext:Ci,useCallback:Va,useContext:Ci,useEffect:Pa,useImperativeHandle:Oa,useInsertionEffect:Ra,useLayoutEffect:La,useMemo:za,useReducer:va,useRef:Ta,useState:function(){return va(ya)},useDebugValue:Fa,useDeferredValue:function(e){return Ua(ga(),ia.memoizedState,e)},useTransition:function(){return[va(ya)[0],ga().memoizedState]},useMutableSource:ba,useSyncExternalStore:wa,useId:$a,unstable_isNewReconciler:!1},Ja={readContext:Ci,useCallback:Va,useContext:Ci,useEffect:Pa,useImperativeHandle:Oa,useInsertionEffect:Ra,useLayoutEffect:La,useMemo:za,useReducer:xa,useRef:Ta,useState:function(){return xa(ya)},useDebugValue:Fa,useDeferredValue:function(e){var t=ga();return null===ia?t.memoizedState=e:Ua(t,ia.memoizedState,e)},useTransition:function(){return[xa(ya)[0],ga().memoizedState]},useMutableSource:ba,useSyncExternalStore:wa,useId:$a,unstable_isNewReconciler:!1};function Za(e,t){if(e&&e.defaultProps){for(var n in t=O({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function eo(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:O({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var to={isMounted:function(e){return!!(e=e._reactInternals)&&Ue(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Zl(),s=ec(e),i=Di(r,s);i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=Oi(e,i,s))&&(tc(t,e,s,r),Fi(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Zl(),s=ec(e),i=Di(r,s);i.tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=Oi(e,i,s))&&(tc(t,e,s,r),Fi(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Zl(),r=ec(e),s=Di(n,r);s.tag=2,void 0!==t&&null!==t&&(s.callback=t),null!==(t=Oi(e,s,r))&&(tc(t,e,r,n),Fi(t,e,r))}};function no(e,t,n,r,s,i,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,i,a):!t.prototype||!t.prototype.isPureReactComponent||(!ar(n,r)||!ar(s,i))}function ro(e,t,n){var r=!1,s=Ss,i=t.contextType;return"object"===typeof i&&null!==i?i=Ci(i):(s=As(t)?Cs:Es.current,i=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ts(e,s):Ss),t=new t(n,i),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=to,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function so(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&to.enqueueReplaceState(t,t.state,null)}function io(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},Ri(e);var i=t.contextType;"object"===typeof i&&null!==i?s.context=Ci(i):(i=As(t)?Cs:Es.current,s.context=Ts(e,i)),s.state=e.memoizedState,"function"===typeof(i=t.getDerivedStateFromProps)&&(eo(e,t,i,n),s.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof s.getSnapshotBeforeUpdate||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||(t=s.state,"function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount(),t!==s.state&&to.enqueueReplaceState(s,s.state,null),zi(e,n,s,r),s.state=e.memoizedState),"function"===typeof s.componentDidMount&&(e.flags|=4194308)}function ao(e,t){try{var n="",r=t;do{n+=U(r),r=r.return}while(r);var s=n}catch(oO){s="\nError generating stack: "+oO.message+"\n"+oO.stack}return{value:e,source:t,stack:s,digest:null}}function oo(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function lo(e,t){try{console.error(t.value)}catch(GD){setTimeout((function(){throw GD}))}}var co="function"===typeof WeakMap?WeakMap:Map;function uo(e,t,n){(n=Di(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){$l||($l=!0,Hl=r),lo(0,t)},n}function ho(e,t,n){(n=Di(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){lo(0,t)}}var i=e.stateNode;return null!==i&&"function"===typeof i.componentDidCatch&&(n.callback=function(){lo(0,t),"function"!==typeof r&&(null===Wl?Wl=new Set([this]):Wl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function fo(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new co;var s=new Set;r.set(t,s)}else void 0===(s=r.get(t))&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=Nc.bind(null,e,t,n),t.then(e,e))}function mo(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function po(e,t,n,r,s){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Di(-1,1)).tag=2,Oi(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=s,e)}var go=b.ReactCurrentOwner,yo=!1;function vo(e,t,n,r){t.child=null===e?xi(t,null,n,r):vi(t,e.child,n,r)}function xo(e,t,n,r,s){n=n.render;var i=t.ref;return ji(t,s),r=fa(e,t,n,r,i,s),n=ma(),null===e||yo?(ni&&n&&Js(t),t.flags|=1,vo(e,t,r,s),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Bo(e,t,s))}function bo(e,t,n,r,s){if(null===e){var i=n.type;return"function"!==typeof i||Ic(i)||void 0!==i.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Pc(n.type,null,r,t,t.mode,s)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=i,wo(e,t,i,r,s))}if(i=e.child,0===(e.lanes&s)){var a=i.memoizedProps;if((n=null!==(n=n.compare)?n:ar)(a,r)&&e.ref===t.ref)return Bo(e,t,s)}return t.flags|=1,(e=Mc(i,r)).ref=t.ref,e.return=t,t.child=e}function wo(e,t,n,r,s){if(null!==e){var i=e.memoizedProps;if(ar(i,r)&&e.ref===t.ref){if(yo=!1,t.pendingProps=r=i,0===(e.lanes&s))return t.lanes=e.lanes,Bo(e,t,s);0!==(131072&e.flags)&&(yo=!0)}}return No(e,t,n,r,s)}function _o(e,t,n){var r=t.pendingProps,s=r.children,i=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ns(Il,Al),Al|=n;else{if(0===(1073741824&n))return e=null!==i?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ns(Il,Al),Al|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==i?i.baseLanes:n,Ns(Il,Al),Al|=r}else null!==i?(r=i.baseLanes|n,t.memoizedState=null):r=n,Ns(Il,Al),Al|=r;return vo(e,t,s,n),t.child}function ko(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function No(e,t,n,r,s){var i=As(n)?Cs:Es.current;return i=Ts(t,i),ji(t,s),n=fa(e,t,n,r,i,s),r=ma(),null===e||yo?(ni&&r&&Js(t),t.flags|=1,vo(e,t,n,s),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Bo(e,t,s))}function So(e,t,n,r,s){if(As(n)){var i=!0;Rs(t)}else i=!1;if(ji(t,s),null===t.stateNode)Uo(e,t),ro(t,n,r),io(t,n,r,s),r=!0;else if(null===e){var a=t.stateNode,o=t.memoizedProps;a.props=o;var l=a.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ci(c):c=Ts(t,c=As(n)?Cs:Es.current);var u=n.getDerivedStateFromProps,d="function"===typeof u||"function"===typeof a.getSnapshotBeforeUpdate;d||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==r||l!==c)&&so(t,a,r,c),Pi=!1;var h=t.memoizedState;a.state=h,zi(t,r,a,s),l=t.memoizedState,o!==r||h!==l||js.current||Pi?("function"===typeof u&&(eo(t,n,u,r),l=t.memoizedState),(o=Pi||no(t,n,o,r,h,l,c))?(d||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=c,r=o):("function"===typeof a.componentDidMount&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Li(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:Za(t.type,o),a.props=c,d=t.pendingProps,h=a.context,"object"===typeof(l=n.contextType)&&null!==l?l=Ci(l):l=Ts(t,l=As(n)?Cs:Es.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==d||h!==l)&&so(t,a,r,l),Pi=!1,h=t.memoizedState,a.state=h,zi(t,r,a,s);var m=t.memoizedState;o!==d||h!==m||js.current||Pi?("function"===typeof f&&(eo(t,n,f,r),m=t.memoizedState),(c=Pi||no(t,n,c,r,h,m,l)||!1)?(u||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,m,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,m,l)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=m),a.props=r,a.state=m,a.context=l,r=c):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Eo(e,t,n,r,i,s)}function Eo(e,t,n,r,s,i){ko(e,t);var a=0!==(128&t.flags);if(!r&&!a)return s&&Ls(t,n,!1),Bo(e,t,i);r=t.stateNode,go.current=t;var o=a&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&a?(t.child=vi(t,e.child,null,i),t.child=vi(t,null,o,i)):vo(e,t,o,i),t.memoizedState=r.state,s&&Ls(t,n,!0),t.child}function jo(e){var t=e.stateNode;t.pendingContext?Ms(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ms(0,t.context,!1),Ki(e,t.containerInfo)}function Co(e,t,n,r,s){return di(),hi(s),t.flags|=256,vo(e,t,n,r),t.child}var To,Ao,Io,Mo,Po={dehydrated:null,treeContext:null,retryLane:0};function Ro(e){return{baseLanes:e,cachePool:null,transitions:null}}function Lo(e,t,n){var r,s=t.pendingProps,a=Xi.current,o=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&a)),r?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),Ns(Xi,1&a),null===e)return oi(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=s.children,e=s.fallback,o?(s=t.mode,o=t.child,l={mode:"hidden",children:l},0===(1&s)&&null!==o?(o.childLanes=0,o.pendingProps=l):o=Lc(l,s,0,null),e=Rc(e,s,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Ro(n),t.memoizedState=Po,e):Do(t,l));if(null!==(a=e.memoizedState)&&null!==(r=a.dehydrated))return function(e,t,n,r,s,a,o){if(n)return 256&t.flags?(t.flags&=-257,Oo(e,t,o,r=oo(Error(i(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=r.fallback,s=t.mode,r=Lc({mode:"visible",children:r.children},s,0,null),(a=Rc(a,s,o,null)).flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,0!==(1&t.mode)&&vi(t,e.child,null,o),t.child.memoizedState=Ro(o),t.memoizedState=Po,a);if(0===(1&t.mode))return Oo(e,t,o,null);if("$!"===s.data){if(r=s.nextSibling&&s.nextSibling.dataset)var l=r.dgst;return r=l,Oo(e,t,o,r=oo(a=Error(i(419)),r,void 0))}if(l=0!==(o&e.childLanes),yo||l){if(null!==(r=jl)){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}0!==(s=0!==(s&(r.suspendedLanes|o))?0:s)&&s!==a.retryLane&&(a.retryLane=s,Mi(e,s),tc(r,e,s,-1))}return mc(),Oo(e,t,o,r=oo(Error(i(421))))}return"$?"===s.data?(t.flags|=128,t.child=e.child,t=Ec.bind(null,e),s._reactRetry=t,null):(e=a.treeContext,ti=os(s.nextSibling),ei=t,ni=!0,ri=null,null!==e&&(Ws[qs++]=Gs,Ws[qs++]=Ys,Ws[qs++]=Ks,Gs=e.id,Ys=e.overflow,Ks=t),t=Do(t,r.children),t.flags|=4096,t)}(e,t,l,s,r,a,n);if(o){o=s.fallback,l=t.mode,r=(a=e.child).sibling;var c={mode:"hidden",children:s.children};return 0===(1&l)&&t.child!==a?((s=t.child).childLanes=0,s.pendingProps=c,t.deletions=null):(s=Mc(a,c)).subtreeFlags=14680064&a.subtreeFlags,null!==r?o=Mc(r,o):(o=Rc(o,l,n,null)).flags|=2,o.return=t,s.return=t,s.sibling=o,t.child=s,s=o,o=t.child,l=null===(l=e.child.memoizedState)?Ro(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=e.childLanes&~n,t.memoizedState=Po,s}return e=(o=e.child).sibling,s=Mc(o,{mode:"visible",children:s.children}),0===(1&t.mode)&&(s.lanes=n),s.return=t,s.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=s,t.memoizedState=null,s}function Do(e,t){return(t=Lc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Oo(e,t,n,r){return null!==r&&hi(r),vi(t,e.child,null,n),(e=Do(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Fo(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ei(e.return,t,n)}function Vo(e,t,n,r,s){var i=e.memoizedState;null===i?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function zo(e,t,n){var r=t.pendingProps,s=r.revealOrder,i=r.tail;if(vo(e,t,r.children,n),0!==(2&(r=Xi.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Fo(e,n,t);else if(19===e.tag)Fo(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ns(Xi,r),0===(1&t.mode))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;null!==n;)null!==(e=n.alternate)&&null===Ji(e)&&(s=n),n=n.sibling;null===(n=s)?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),Vo(t,!1,s,n,i);break;case"backwards":for(n=null,s=t.child,t.child=null;null!==s;){if(null!==(e=s.alternate)&&null===Ji(e)){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}Vo(t,!0,n,null,i);break;case"together":Vo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Uo(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Bo(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Rl|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(i(153));if(null!==t.child){for(n=Mc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Mc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function $o(e,t){if(!ni)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ho(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;null!==s;)n|=s.lanes|s.childLanes,r|=14680064&s.subtreeFlags,r|=14680064&s.flags,s.return=e,s=s.sibling;else for(s=e.child;null!==s;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Wo(e,t,n){var r=t.pendingProps;switch(Zs(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ho(t),null;case 1:case 17:return As(t.type)&&Is(),Ho(t),null;case 3:return r=t.stateNode,Gi(),ks(js),ks(Es),ea(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ci(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ri&&(ic(ri),ri=null))),Ao(e,t),Ho(t),null;case 5:Qi(t);var s=qi(Wi.current);if(n=t.type,null!==e&&null!=t.stateNode)Io(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(i(166));return Ho(t),null}if(e=qi($i.current),ci(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[us]=t,r[ds]=a,e=0!==(1&t.mode),n){case"dialog":Or("cancel",r),Or("close",r);break;case"iframe":case"object":case"embed":Or("load",r);break;case"video":case"audio":for(s=0;s<Pr.length;s++)Or(Pr[s],r);break;case"source":Or("error",r);break;case"img":case"image":case"link":Or("error",r),Or("load",r);break;case"details":Or("toggle",r);break;case"input":Q(r,a),Or("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Or("invalid",r);break;case"textarea":se(r,a),Or("invalid",r)}for(var l in ye(n,a),s=null,a)if(a.hasOwnProperty(l)){var c=a[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==a.suppressHydrationWarning&&Qr(r.textContent,c,e),s=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==a.suppressHydrationWarning&&Qr(r.textContent,c,e),s=["children",""+c]):o.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Or("scroll",r)}switch(n){case"input":q(r),Z(r,a,!0);break;case"textarea":q(r),ae(r);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(r.onclick=Xr)}r=s,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===s.nodeType?s:s.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=oe(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[us]=t,e[ds]=r,To(e,t,!1,!1),t.stateNode=e;e:{switch(l=ve(n,r),n){case"dialog":Or("cancel",e),Or("close",e),s=r;break;case"iframe":case"object":case"embed":Or("load",e),s=r;break;case"video":case"audio":for(s=0;s<Pr.length;s++)Or(Pr[s],e);s=r;break;case"source":Or("error",e),s=r;break;case"img":case"image":case"link":Or("error",e),Or("load",e),s=r;break;case"details":Or("toggle",e),s=r;break;case"input":Q(e,r),s=Y(e,r),Or("invalid",e);break;case"option":default:s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=O({},r,{value:void 0}),Or("invalid",e);break;case"textarea":se(e,r),s=re(e,r),Or("invalid",e)}for(a in ye(n,s),c=s)if(c.hasOwnProperty(a)){var u=c[a];"style"===a?pe(e,u):"dangerouslySetInnerHTML"===a?null!=(u=u?u.__html:void 0)&&ue(e,u):"children"===a?"string"===typeof u?("textarea"!==n||""!==u)&&de(e,u):"number"===typeof u&&de(e,""+u):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(o.hasOwnProperty(a)?null!=u&&"onScroll"===a&&Or("scroll",e):null!=u&&x(e,a,u,l))}switch(n){case"input":q(e),Z(e,r,!1);break;case"textarea":q(e),ae(e);break;case"option":null!=r.value&&e.setAttribute("value",""+H(r.value));break;case"select":e.multiple=!!r.multiple,null!=(a=r.value)?ne(e,!!r.multiple,a,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof s.onClick&&(e.onclick=Xr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ho(t),null;case 6:if(e&&null!=t.stateNode)Mo(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(i(166));if(n=qi(Wi.current),qi($i.current),ci(t)){if(r=t.stateNode,n=t.memoizedProps,r[us]=t,(a=r.nodeValue!==n)&&null!==(e=ei))switch(e.tag){case 3:Qr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Qr(r.nodeValue,n,0!==(1&e.mode))}a&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[us]=t,t.stateNode=r}return Ho(t),null;case 13:if(ks(Xi),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ni&&null!==ti&&0!==(1&t.mode)&&0===(128&t.flags))ui(),di(),t.flags|=98560,a=!1;else if(a=ci(t),null!==r&&null!==r.dehydrated){if(null===e){if(!a)throw Error(i(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(i(317));a[us]=t}else di(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ho(t),a=!1}else null!==ri&&(ic(ri),ri=null),a=!0;if(!a)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&Xi.current)?0===Ml&&(Ml=3):mc())),null!==t.updateQueue&&(t.flags|=4),Ho(t),null);case 4:return Gi(),Ao(e,t),null===e&&zr(t.stateNode.containerInfo),Ho(t),null;case 10:return Si(t.type._context),Ho(t),null;case 19:if(ks(Xi),null===(a=t.memoizedState))return Ho(t),null;if(r=0!==(128&t.flags),null===(l=a.rendering))if(r)$o(a,!1);else{if(0!==Ml||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=Ji(e))){for(t.flags|=128,$o(a,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(a=n).flags&=14680066,null===(l=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,e=l.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ns(Xi,1&Xi.current|2),t.child}e=e.sibling}null!==a.tail&&Qe()>Ul&&(t.flags|=128,r=!0,$o(a,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=Ji(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),$o(a,!0),null===a.tail&&"hidden"===a.tailMode&&!l.alternate&&!ni)return Ho(t),null}else 2*Qe()-a.renderingStartTime>Ul&&1073741824!==n&&(t.flags|=128,r=!0,$o(a,!1),t.lanes=4194304);a.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=a.last)?n.sibling=l:t.child=l,a.last=l)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Qe(),t.sibling=null,n=Xi.current,Ns(Xi,r?1&n|2:1&n),t):(Ho(t),null);case 22:case 23:return uc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Al)&&(Ho(t),6&t.subtreeFlags&&(t.flags|=8192)):Ho(t),null;case 24:case 25:return null}throw Error(i(156,t.tag))}function qo(e,t){switch(Zs(t),t.tag){case 1:return As(t.type)&&Is(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Gi(),ks(js),ks(Es),ea(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Qi(t),null;case 13:if(ks(Xi),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(i(340));di()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return ks(Xi),null;case 4:return Gi(),null;case 10:return Si(t.type._context),null;case 22:case 23:return uc(),null;default:return null}}To=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ao=function(){},Io=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,qi($i.current);var i,a=null;switch(n){case"input":s=Y(e,s),r=Y(e,r),a=[];break;case"select":s=O({},s,{value:void 0}),r=O({},r,{value:void 0}),a=[];break;case"textarea":s=re(e,s),r=re(e,r),a=[];break;default:"function"!==typeof s.onClick&&"function"===typeof r.onClick&&(e.onclick=Xr)}for(u in ye(n,r),n=null,s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&null!=s[u])if("style"===u){var l=s[u];for(i in l)l.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(o.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=s?s[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(i in l)!l.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in c)c.hasOwnProperty(i)&&l[i]!==c[i]&&(n||(n={}),n[i]=c[i])}else n||(a||(a=[]),a.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(a=a||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(a=a||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(o.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Or("scroll",e),a||l===c||(a=[])):(a=a||[]).push(u,c))}n&&(a=a||[]).push("style",n);var u=a;(t.updateQueue=u)&&(t.flags|=4)}},Mo=function(e,t,n,r){n!==r&&(t.flags|=4)};var Ko=!1,Go=!1,Yo="function"===typeof WeakSet?WeakSet:Set,Qo=null;function Xo(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){kc(e,t,r)}else n.current=null}function Jo(e,t,n){try{n()}catch(r){kc(e,t,r)}}var Zo=!1;function el(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var s=r=r.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,void 0!==i&&Jo(t,n,i)}s=s.next}while(s!==r)}}function tl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function nl(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function rl(e){var t=e.alternate;null!==t&&(e.alternate=null,rl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[us],delete t[ds],delete t[fs],delete t[ms],delete t[ps])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function sl(e){return 5===e.tag||3===e.tag||4===e.tag}function il(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||sl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function al(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Xr));else if(4!==r&&null!==(e=e.child))for(al(e,t,n),e=e.sibling;null!==e;)al(e,t,n),e=e.sibling}function ol(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(ol(e,t,n),e=e.sibling;null!==e;)ol(e,t,n),e=e.sibling}var ll=null,cl=!1;function ul(e,t,n){for(n=n.child;null!==n;)dl(e,t,n),n=n.sibling}function dl(e,t,n){if(st&&"function"===typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(rt,n)}catch(GO){}switch(n.tag){case 5:Go||Xo(n,t);case 6:var r=ll,s=cl;ll=null,ul(e,t,n),cl=s,null!==(ll=r)&&(cl?(e=ll,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):ll.removeChild(n.stateNode));break;case 18:null!==ll&&(cl?(e=ll,n=n.stateNode,8===e.nodeType?as(e.parentNode,n):1===e.nodeType&&as(e,n),$t(e)):as(ll,n.stateNode));break;case 4:r=ll,s=cl,ll=n.stateNode.containerInfo,cl=!0,ul(e,t,n),ll=r,cl=s;break;case 0:case 11:case 14:case 15:if(!Go&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){s=r=r.next;do{var i=s,a=i.destroy;i=i.tag,void 0!==a&&(0!==(2&i)||0!==(4&i))&&Jo(n,t,a),s=s.next}while(s!==r)}ul(e,t,n);break;case 1:if(!Go&&(Xo(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(GO){kc(n,t,GO)}ul(e,t,n);break;case 21:ul(e,t,n);break;case 22:1&n.mode?(Go=(r=Go)||null!==n.memoizedState,ul(e,t,n),Go=r):ul(e,t,n);break;default:ul(e,t,n)}}function hl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Yo),t.forEach((function(t){var r=jc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function fl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var s=n[r];try{var a=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 5:ll=l.stateNode,cl=!1;break e;case 3:case 4:ll=l.stateNode.containerInfo,cl=!0;break e}l=l.return}if(null===ll)throw Error(i(160));dl(a,o,s),ll=null,cl=!1;var c=s.alternate;null!==c&&(c.return=null),s.return=null}catch(u){kc(s,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)ml(t,e),t=t.sibling}function ml(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(fl(t,e),pl(e),4&r){try{el(3,e,e.return),tl(3,e)}catch(g){kc(e,e.return,g)}try{el(5,e,e.return)}catch(g){kc(e,e.return,g)}}break;case 1:fl(t,e),pl(e),512&r&&null!==n&&Xo(n,n.return);break;case 5:if(fl(t,e),pl(e),512&r&&null!==n&&Xo(n,n.return),32&e.flags){var s=e.stateNode;try{de(s,"")}catch(g){kc(e,e.return,g)}}if(4&r&&null!=(s=e.stateNode)){var a=e.memoizedProps,o=null!==n?n.memoizedProps:a,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===a.type&&null!=a.name&&X(s,a),ve(l,o);var u=ve(l,a);for(o=0;o<c.length;o+=2){var d=c[o],h=c[o+1];"style"===d?pe(s,h):"dangerouslySetInnerHTML"===d?ue(s,h):"children"===d?de(s,h):x(s,d,h,u)}switch(l){case"input":J(s,a);break;case"textarea":ie(s,a);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!a.multiple;var m=a.value;null!=m?ne(s,!!a.multiple,m,!1):f!==!!a.multiple&&(null!=a.defaultValue?ne(s,!!a.multiple,a.defaultValue,!0):ne(s,!!a.multiple,a.multiple?[]:"",!1))}s[ds]=a}catch(g){kc(e,e.return,g)}}break;case 6:if(fl(t,e),pl(e),4&r){if(null===e.stateNode)throw Error(i(162));s=e.stateNode,a=e.memoizedProps;try{s.nodeValue=a}catch(g){kc(e,e.return,g)}}break;case 3:if(fl(t,e),pl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{$t(t.containerInfo)}catch(g){kc(e,e.return,g)}break;case 4:default:fl(t,e),pl(e);break;case 13:fl(t,e),pl(e),8192&(s=e.child).flags&&(a=null!==s.memoizedState,s.stateNode.isHidden=a,!a||null!==s.alternate&&null!==s.alternate.memoizedState||(zl=Qe())),4&r&&hl(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(Go=(u=Go)||d,fl(t,e),Go=u):fl(t,e),pl(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!d&&0!==(1&e.mode))for(Qo=e,d=e.child;null!==d;){for(h=Qo=d;null!==Qo;){switch(m=(f=Qo).child,f.tag){case 0:case 11:case 14:case 15:el(4,f,f.return);break;case 1:Xo(f,f.return);var p=f.stateNode;if("function"===typeof p.componentWillUnmount){r=f,n=f.return;try{t=r,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(g){kc(r,n,g)}}break;case 5:Xo(f,f.return);break;case 22:if(null!==f.memoizedState){xl(h);continue}}null!==m?(m.return=f,Qo=m):xl(h)}d=d.sibling}e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{s=h.stateNode,u?"function"===typeof(a=s.style).setProperty?a.setProperty("display","none","important"):a.display="none":(l=h.stateNode,o=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=me("display",o))}catch(g){kc(e,e.return,g)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(g){kc(e,e.return,g)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:fl(t,e),pl(e),4&r&&hl(e);case 21:}}function pl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(sl(n)){var r=n;break e}n=n.return}throw Error(i(160))}switch(r.tag){case 5:var s=r.stateNode;32&r.flags&&(de(s,""),r.flags&=-33),ol(e,il(e),s);break;case 3:case 4:var a=r.stateNode.containerInfo;al(e,il(e),a);break;default:throw Error(i(161))}}catch(Vl){kc(e,e.return,Vl)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function gl(e,t,n){Qo=e,yl(e,t,n)}function yl(e,t,n){for(var r=0!==(1&e.mode);null!==Qo;){var s=Qo,i=s.child;if(22===s.tag&&r){var a=null!==s.memoizedState||Ko;if(!a){var o=s.alternate,l=null!==o&&null!==o.memoizedState||Go;o=Ko;var c=Go;if(Ko=a,(Go=l)&&!c)for(Qo=s;null!==Qo;)l=(a=Qo).child,22===a.tag&&null!==a.memoizedState?bl(s):null!==l?(l.return=a,Qo=l):bl(s);for(;null!==i;)Qo=i,yl(i,t,n),i=i.sibling;Qo=s,Ko=o,Go=c}vl(e)}else 0!==(8772&s.subtreeFlags)&&null!==i?(i.return=s,Qo=i):vl(e)}}function vl(e){for(;null!==Qo;){var t=Qo;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Go||tl(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Go)if(null===n)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:Za(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&Ui(t,a,r);break;case 3:var o=t.updateQueue;if(null!==o){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Ui(t,o,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&$t(h)}}}break;default:throw Error(i(163))}Go||512&t.flags&&nl(t)}catch(ht){kc(t,t.return,ht)}}if(t===e){Qo=null;break}if(null!==(n=t.sibling)){n.return=t.return,Qo=n;break}Qo=t.return}}function xl(e){for(;null!==Qo;){var t=Qo;if(t===e){Qo=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Qo=n;break}Qo=t.return}}function bl(e){for(;null!==Qo;){var t=Qo;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{tl(4,t)}catch(Vl){kc(t,n,Vl)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var s=t.return;try{r.componentDidMount()}catch(Vl){kc(t,s,Vl)}}var i=t.return;try{nl(t)}catch(Vl){kc(t,i,Vl)}break;case 5:var a=t.return;try{nl(t)}catch(Vl){kc(t,a,Vl)}}}catch(Vl){kc(t,t.return,Vl)}if(t===e){Qo=null;break}var o=t.sibling;if(null!==o){o.return=t.return,Qo=o;break}Qo=t.return}}var wl,_l=Math.ceil,kl=b.ReactCurrentDispatcher,Nl=b.ReactCurrentOwner,Sl=b.ReactCurrentBatchConfig,El=0,jl=null,Cl=null,Tl=0,Al=0,Il=_s(0),Ml=0,Pl=null,Rl=0,Ll=0,Dl=0,Ol=null,Fl=null,zl=0,Ul=1/0,Bl=null,$l=!1,Hl=null,Wl=null,ql=!1,Kl=null,Gl=0,Yl=0,Ql=null,Xl=-1,Jl=0;function Zl(){return 0!==(6&El)?Qe():-1!==Xl?Xl:Xl=Qe()}function ec(e){return 0===(1&e.mode)?1:0!==(2&El)&&0!==Tl?Tl&-Tl:null!==fi.transition?(0===Jl&&(Jl=pt()),Jl):0!==(e=xt)?e:e=void 0===(e=window.event)?16:Xt(e.type)}function tc(e,t,n,r){if(50<Yl)throw Yl=0,Ql=null,Error(i(185));yt(e,n,r),0!==(2&El)&&e===jl||(e===jl&&(0===(2&El)&&(Ll|=n),4===Ml&&ac(e,Tl)),nc(e,r),1===n&&0===El&&0===(1&t.mode)&&(Ul=Qe()+500,Os&&zs()))}function nc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var a=31-it(i),o=1<<a,l=s[a];-1===l?0!==(o&n)&&0===(o&r)||(s[a]=ft(o,t)):l<=t&&(e.expiredLanes|=o),i&=~o}}(e,t);var r=dt(e,e===jl?Tl:0);if(0===r)null!==n&&Ke(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ke(n),1===t)0===e.tag?function(e){Os=!0,Vs(e)}(oc.bind(null,e)):Vs(oc.bind(null,e)),ss((function(){0===(6&El)&&zs()})),n=null;else{switch(bt(r)){case 1:n=Je;break;case 4:n=Ze;break;case 16:default:n=et;break;case 536870912:n=nt}n=Cc(n,rc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function rc(e,t){if(Xl=-1,Jl=0,0!==(6&El))throw Error(i(327));var n=e.callbackNode;if(wc()&&e.callbackNode!==n)return null;var r=dt(e,e===jl?Tl:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=pc(e,r);else{t=r;var s=El;El|=2;var a=fc();for(jl===e&&Tl===t||(Bl=null,Ul=Qe()+500,dc(e,t));;)try{yc();break}catch(GO){hc(e,GO)}Ni(),kl.current=a,El=s,null!==Cl?t=0:(jl=null,Tl=0,t=Ml)}if(0!==t){if(2===t&&(0!==(s=mt(e))&&(r=s,t=sc(e,s))),1===t)throw n=Pl,dc(e,0),ac(e,r),nc(e,Qe()),n;if(6===t)ac(e,r);else{if(s=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!ir(i(),s))return!1}catch(o){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(s)&&(2===(t=pc(e,r))&&(0!==(a=mt(e))&&(r=a,t=sc(e,a))),1===t))throw n=Pl,dc(e,0),ac(e,r),nc(e,Qe()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(i(345));case 2:case 5:bc(e,Fl,Bl);break;case 3:if(ac(e,r),(130023424&r)===r&&10<(t=zl+500-Qe())){if(0!==dt(e,0))break;if(((s=e.suspendedLanes)&r)!==r){Zl(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=ts(bc.bind(null,e,Fl,Bl),t);break}bc(e,Fl,Bl);break;case 4:if(ac(e,r),(4194240&r)===r)break;for(t=e.eventTimes,s=-1;0<r;){var o=31-it(r);a=1<<o,(o=t[o])>s&&(s=o),r&=~a}if(r=s,10<(r=(120>(r=Qe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*_l(r/1960))-r)){e.timeoutHandle=ts(bc.bind(null,e,Fl,Bl),r);break}bc(e,Fl,Bl);break;default:throw Error(i(329))}}}return nc(e,Qe()),e.callbackNode===n?rc.bind(null,e):null}function sc(e,t){var n=Ol;return e.current.memoizedState.isDehydrated&&(dc(e,t).flags|=256),2!==(e=pc(e,t))&&(t=Fl,Fl=n,null!==t&&ic(t)),e}function ic(e){null===Fl?Fl=e:Fl.push.apply(Fl,e)}function ac(e,t){for(t&=~Dl,t&=~Ll,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-it(t),r=1<<n;e[n]=-1,t&=~r}}function oc(e){if(0!==(6&El))throw Error(i(327));wc();var t=dt(e,0);if(0===(1&t))return nc(e,Qe()),null;var n=pc(e,t);if(0!==e.tag&&2===n){var r=mt(e);0!==r&&(t=r,n=sc(e,r))}if(1===n)throw n=Pl,dc(e,0),ac(e,t),nc(e,Qe()),n;if(6===n)throw Error(i(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,bc(e,Fl,Bl),nc(e,Qe()),null}function lc(e,t){var n=El;El|=1;try{return e(t)}finally{0===(El=n)&&(Ul=Qe()+500,Os&&zs())}}function cc(e){null!==Kl&&0===Kl.tag&&0===(6&El)&&wc();var t=El;El|=1;var n=Sl.transition,r=xt;try{if(Sl.transition=null,xt=1,e)return e()}finally{xt=r,Sl.transition=n,0===(6&(El=t))&&zs()}}function uc(){Al=Il.current,ks(Il)}function dc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ns(n)),null!==Cl)for(n=Cl.return;null!==n;){var r=n;switch(Zs(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Is();break;case 3:Gi(),ks(js),ks(Es),ea();break;case 5:Qi(r);break;case 4:Gi();break;case 13:case 19:ks(Xi);break;case 10:Si(r.type._context);break;case 22:case 23:uc()}n=n.return}if(jl=e,Cl=e=Mc(e.current,null),Tl=Al=t,Ml=0,Pl=null,Dl=Ll=Rl=0,Fl=Ol=null,null!==Ti){for(t=0;t<Ti.length;t++)if(null!==(r=(n=Ti[t]).interleaved)){n.interleaved=null;var s=r.next,i=n.pending;if(null!==i){var a=i.next;i.next=s,r.next=a}n.pending=r}Ti=null}return e}function hc(e,t){for(;;){var n=Cl;try{if(Ni(),ta.current=Ya,oa){for(var r=sa.memoizedState;null!==r;){var s=r.queue;null!==s&&(s.pending=null),r=r.next}oa=!1}if(ra=0,aa=ia=sa=null,la=!1,ca=0,Nl.current=null,null===n||null===n.return){Ml=1,Pl=t,Cl=null;break}e:{var a=e,o=n.return,l=n,c=t;if(t=Tl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,d=l,h=d.tag;if(0===(1&d.mode)&&(0===h||11===h||15===h)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=mo(o);if(null!==m){m.flags&=-257,po(m,o,l,0,t),1&m.mode&&fo(a,u,t),c=u;var p=(t=m).updateQueue;if(null===p){var g=new Set;g.add(c),t.updateQueue=g}else p.add(c);break e}if(0===(1&t)){fo(a,u,t),mc();break e}c=Error(i(426))}else if(ni&&1&l.mode){var y=mo(o);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),po(y,o,l,0,t),hi(ao(c,l));break e}}a=c=ao(c,l),4!==Ml&&(Ml=2),null===Ol?Ol=[a]:Ol.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t,Vi(a,uo(0,c,t));break e;case 1:l=c;var v=a.type,x=a.stateNode;if(0===(128&a.flags)&&("function"===typeof v.getDerivedStateFromError||null!==x&&"function"===typeof x.componentDidCatch&&(null===Wl||!Wl.has(x)))){a.flags|=65536,t&=-t,a.lanes|=t,Vi(a,ho(a,l,t));break e}}a=a.return}while(null!==a)}xc(n)}catch(b){t=b,Cl===n&&null!==n&&(Cl=n=n.return);continue}break}}function fc(){var e=kl.current;return kl.current=Ya,null===e?Ya:e}function mc(){0!==Ml&&3!==Ml&&2!==Ml||(Ml=4),null===jl||0===(268435455&Rl)&&0===(268435455&Ll)||ac(jl,Tl)}function pc(e,t){var n=El;El|=2;var r=fc();for(jl===e&&Tl===t||(Bl=null,dc(e,t));;)try{gc();break}catch(hF){hc(e,hF)}if(Ni(),El=n,kl.current=r,null!==Cl)throw Error(i(261));return jl=null,Tl=0,Ml}function gc(){for(;null!==Cl;)vc(Cl)}function yc(){for(;null!==Cl&&!Ge();)vc(Cl)}function vc(e){var t=wl(e.alternate,e,Al);e.memoizedProps=e.pendingProps,null===t?xc(e):Cl=t,Nl.current=null}function xc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Wo(n,t,Al)))return void(Cl=n)}else{if(null!==(n=qo(n,t)))return n.flags&=32767,void(Cl=n);if(null===e)return Ml=6,void(Cl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Cl=t);Cl=t=e}while(null!==t);0===Ml&&(Ml=5)}function bc(e,t,n){var r=xt,s=Sl.transition;try{Sl.transition=null,xt=1,function(e,t,n,r){do{wc()}while(null!==Kl);if(0!==(6&El))throw Error(i(327));n=e.finishedWork;var s=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(i(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-it(n),i=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~i}}(e,a),e===jl&&(Cl=jl=null,Tl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||ql||(ql=!0,Cc(et,(function(){return wc(),null}))),a=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||a){a=Sl.transition,Sl.transition=null;var o=xt;xt=1;var l=El;El|=4,Nl.current=null,function(e,t){if(Jr=Wt,dr(e=ur())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var s=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch(Ct){n=null;break e}var o=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var m;h!==n||0!==s&&3!==h.nodeType||(l=o+s),h!==a||0!==r&&3!==h.nodeType||(c=o+r),3===h.nodeType&&(o+=h.nodeValue.length),null!==(m=h.firstChild);)f=h,h=m;for(;;){if(h===e)break t;if(f===n&&++u===s&&(l=o),f===a&&++d===r&&(c=o),null!==(m=h.nextSibling))break;f=(h=f).parentNode}h=m}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Zr={focusedElem:e,selectionRange:n},Wt=!1,Qo=t;null!==Qo;)if(e=(t=Qo).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Qo=e;else for(;null!==Qo;){t=Qo;try{var p=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==p){var g=p.memoizedProps,y=p.memoizedState,v=t.stateNode,x=v.getSnapshotBeforeUpdate(t.elementType===t.type?g:Za(t.type,g),y);v.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(i(163))}}catch(Ct){kc(t,t.return,Ct)}if(null!==(e=t.sibling)){e.return=t.return,Qo=e;break}Qo=t.return}p=Zo,Zo=!1}(e,n),ml(n,e),hr(Zr),Wt=!!Jr,Zr=Jr=null,e.current=n,gl(n,e,s),Ye(),El=l,xt=o,Sl.transition=a}else e.current=n;if(ql&&(ql=!1,Kl=e,Gl=s),a=e.pendingLanes,0===a&&(Wl=null),function(e){if(st&&"function"===typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(rt,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),nc(e,Qe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if($l)throw $l=!1,e=Hl,Hl=null,e;0!==(1&Gl)&&0!==e.tag&&wc(),a=e.pendingLanes,0!==(1&a)?e===Ql?Yl++:(Yl=0,Ql=e):Yl=0,zs()}(e,t,n,r)}finally{Sl.transition=s,xt=r}return null}function wc(){if(null!==Kl){var e=bt(Gl),t=Sl.transition,n=xt;try{if(Sl.transition=null,xt=16>e?16:e,null===Kl)var r=!1;else{if(e=Kl,Kl=null,Gl=0,0!==(6&El))throw Error(i(331));var s=El;for(El|=4,Qo=e.current;null!==Qo;){var a=Qo,o=a.child;if(0!==(16&Qo.flags)){var l=a.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Qo=u;null!==Qo;){var d=Qo;switch(d.tag){case 0:case 11:case 15:el(8,d,a)}var h=d.child;if(null!==h)h.return=d,Qo=h;else for(;null!==Qo;){var f=(d=Qo).sibling,m=d.return;if(rl(d),d===u){Qo=null;break}if(null!==f){f.return=m,Qo=f;break}Qo=m}}}var p=a.alternate;if(null!==p){var g=p.child;if(null!==g){p.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(null!==g)}}Qo=a}}if(0!==(2064&a.subtreeFlags)&&null!==o)o.return=a,Qo=o;else e:for(;null!==Qo;){if(0!==(2048&(a=Qo).flags))switch(a.tag){case 0:case 11:case 15:el(9,a,a.return)}var v=a.sibling;if(null!==v){v.return=a.return,Qo=v;break e}Qo=a.return}}var x=e.current;for(Qo=x;null!==Qo;){var b=(o=Qo).child;if(0!==(2064&o.subtreeFlags)&&null!==b)b.return=o,Qo=b;else e:for(o=x;null!==Qo;){if(0!==(2048&(l=Qo).flags))try{switch(l.tag){case 0:case 11:case 15:tl(9,l)}}catch(_){kc(l,l.return,_)}if(l===o){Qo=null;break e}var w=l.sibling;if(null!==w){w.return=l.return,Qo=w;break e}Qo=l.return}}if(El=s,zs(),st&&"function"===typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(rt,e)}catch(_){}r=!0}return r}finally{xt=n,Sl.transition=t}}return!1}function _c(e,t,n){e=Oi(e,t=uo(0,t=ao(n,t),1),1),t=Zl(),null!==e&&(yt(e,1,t),nc(e,t))}function kc(e,t,n){if(3===e.tag)_c(e,e,n);else for(;null!==t;){if(3===t.tag){_c(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Wl||!Wl.has(r))){t=Oi(t,e=ho(t,e=ao(n,e),1),1),e=Zl(),null!==t&&(yt(t,1,e),nc(t,e));break}}t=t.return}}function Nc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=Zl(),e.pingedLanes|=e.suspendedLanes&n,jl===e&&(Tl&n)===n&&(4===Ml||3===Ml&&(130023424&Tl)===Tl&&500>Qe()-zl?dc(e,0):Dl|=n),nc(e,t)}function Sc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ct,0===(130023424&(ct<<=1))&&(ct=4194304)));var n=Zl();null!==(e=Mi(e,t))&&(yt(e,t,n),nc(e,n))}function Ec(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Sc(e,n)}function jc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;null!==s&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(i(314))}null!==r&&r.delete(t),Sc(e,n)}function Cc(e,t){return qe(e,t)}function Tc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ac(e,t,n,r){return new Tc(e,t,n,r)}function Ic(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Mc(e,t){var n=e.alternate;return null===n?((n=Ac(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Pc(e,t,n,r,s,a){var o=2;if(r=e,"function"===typeof e)Ic(e)&&(o=1);else if("string"===typeof e)o=5;else e:switch(e){case k:return Rc(n.children,s,a,t);case N:o=8,s|=8;break;case S:return(e=Ac(12,n,t,2|s)).elementType=S,e.lanes=a,e;case T:return(e=Ac(13,n,t,s)).elementType=T,e.lanes=a,e;case A:return(e=Ac(19,n,t,s)).elementType=A,e.lanes=a,e;case P:return Lc(n,s,a,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case E:o=10;break e;case j:o=9;break e;case C:o=11;break e;case I:o=14;break e;case M:o=16,r=null;break e}throw Error(i(130,null==e?e:typeof e,""))}return(t=Ac(o,n,t,s)).elementType=e,t.type=r,t.lanes=a,t}function Rc(e,t,n,r){return(e=Ac(7,e,r,t)).lanes=n,e}function Lc(e,t,n,r){return(e=Ac(22,e,r,t)).elementType=P,e.lanes=n,e.stateNode={isHidden:!1},e}function Dc(e,t,n){return(e=Ac(6,e,null,t)).lanes=n,e}function Oc(e,t,n){return(t=Ac(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Fc(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Vc(e,t,n,r,s,i,a,o,l){return e=new Fc(e,t,n,o,l),1===t?(t=1,!0===i&&(t|=8)):t=0,i=Ac(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ri(i),e}function zc(e){if(!e)return Ss;e:{if(Ue(e=e._reactInternals)!==e||1!==e.tag)throw Error(i(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(As(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(i(171))}if(1===e.tag){var n=e.type;if(As(n))return Ps(e,n,t)}return t}function Uc(e,t,n,r,s,i,a,o,l){return(e=Vc(n,r,!0,e,0,i,0,o,l)).context=zc(null),n=e.current,(i=Di(r=Zl(),s=ec(n))).callback=void 0!==t&&null!==t?t:null,Oi(n,i,s),e.current.lanes=s,yt(e,s,r),nc(e,r),e}function Bc(e,t,n,r){var s=t.current,i=Zl(),a=ec(s);return n=zc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Di(i,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Oi(s,t,a))&&(tc(e,s,a,i),Fi(e,s,a)),a}function $c(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Hc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Wc(e,t){Hc(e,t),(e=e.alternate)&&Hc(e,t)}wl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||js.current)yo=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return yo=!1,function(e,t,n){switch(t.tag){case 3:jo(t),di();break;case 5:Yi(t);break;case 1:As(t.type)&&Rs(t);break;case 4:Ki(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;Ns(bi,r._currentValue),r._currentValue=s;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ns(Xi,1&Xi.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Lo(e,t,n):(Ns(Xi,1&Xi.current),null!==(e=Bo(e,t,n))?e.sibling:null);Ns(Xi,1&Xi.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return zo(e,t,n);t.flags|=128}if(null!==(s=t.memoizedState)&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ns(Xi,Xi.current),r)break;return null;case 22:case 23:return t.lanes=0,_o(e,t,n)}return Bo(e,t,n)}(e,t,n);yo=0!==(131072&e.flags)}else yo=!1,ni&&0!==(1048576&t.flags)&&Xs(t,Hs,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Uo(e,t),e=t.pendingProps;var s=Ts(t,Es.current);ji(t,n),s=fa(null,t,r,e,s,n);var a=ma();return t.flags|=1,"object"===typeof s&&null!==s&&"function"===typeof s.render&&void 0===s.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,As(r)?(a=!0,Rs(t)):a=!1,t.memoizedState=null!==s.state&&void 0!==s.state?s.state:null,Ri(t),s.updater=to,t.stateNode=s,s._reactInternals=t,io(t,r,e,n),t=Eo(null,t,r,!0,a,n)):(t.tag=0,ni&&a&&Js(t),vo(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Uo(e,t),e=t.pendingProps,r=(s=r._init)(r._payload),t.type=r,s=t.tag=function(e){if("function"===typeof e)return Ic(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===I)return 14}return 2}(r),e=Za(r,e),s){case 0:t=No(null,t,r,e,n);break e;case 1:t=So(null,t,r,e,n);break e;case 11:t=xo(null,t,r,e,n);break e;case 14:t=bo(null,t,r,Za(r.type,e),n);break e}throw Error(i(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,No(e,t,r,s=t.elementType===r?s:Za(r,s),n);case 1:return r=t.type,s=t.pendingProps,So(e,t,r,s=t.elementType===r?s:Za(r,s),n);case 3:e:{if(jo(t),null===e)throw Error(i(387));r=t.pendingProps,s=(a=t.memoizedState).element,Li(e,t),zi(t,r,null,n);var o=t.memoizedState;if(r=o.element,a.isDehydrated){if(a={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=Co(e,t,r,n,s=ao(Error(i(423)),t));break e}if(r!==s){t=Co(e,t,r,n,s=ao(Error(i(424)),t));break e}for(ti=os(t.stateNode.containerInfo.firstChild),ei=t,ni=!0,ri=null,n=xi(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(di(),r===s){t=Bo(e,t,n);break e}vo(e,t,r,n)}t=t.child}return t;case 5:return Yi(t),null===e&&oi(t),r=t.type,s=t.pendingProps,a=null!==e?e.memoizedProps:null,o=s.children,es(r,s)?o=null:null!==a&&es(r,a)&&(t.flags|=32),ko(e,t),vo(e,t,o,n),t.child;case 6:return null===e&&oi(t),null;case 13:return Lo(e,t,n);case 4:return Ki(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=vi(t,null,r,n):vo(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,xo(e,t,r,s=t.elementType===r?s:Za(r,s),n);case 7:return vo(e,t,t.pendingProps,n),t.child;case 8:case 12:return vo(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,a=t.memoizedProps,o=s.value,Ns(bi,r._currentValue),r._currentValue=o,null!==a)if(ir(a.value,o)){if(a.children===s.children&&!js.current){t=Bo(e,t,n);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var l=a.dependencies;if(null!==l){o=a.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===a.tag){(c=Di(-1,n&-n)).tag=2;var u=a.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}a.lanes|=n,null!==(c=a.alternate)&&(c.lanes|=n),Ei(a.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===a.tag)o=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(o=a.return))throw Error(i(341));o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),Ei(o,n,t),o=a.sibling}else o=a.child;if(null!==o)o.return=a;else for(o=a;null!==o;){if(o===t){o=null;break}if(null!==(a=o.sibling)){a.return=o.return,o=a;break}o=o.return}a=o}vo(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,ji(t,n),r=r(s=Ci(s)),t.flags|=1,vo(e,t,r,n),t.child;case 14:return s=Za(r=t.type,t.pendingProps),bo(e,t,r,s=Za(r.type,s),n);case 15:return wo(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Za(r,s),Uo(e,t),t.tag=1,As(r)?(e=!0,Rs(t)):e=!1,ji(t,n),ro(t,r,s),io(t,r,s,n),Eo(null,t,r,!0,e,n);case 19:return zo(e,t,n);case 22:return _o(e,t,n)}throw Error(i(156,t.tag))};var qc="function"===typeof reportError?reportError:function(e){console.error(e)};function Kc(e){this._internalRoot=e}function Gc(e){this._internalRoot=e}function Yc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Qc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Xc(){}function Jc(e,t,n,r,s){var i=n._reactRootContainer;if(i){var a=i;if("function"===typeof s){var o=s;s=function(){var e=$c(a);o.call(e)}}Bc(t,a,e,s)}else a=function(e,t,n,r,s){if(s){if("function"===typeof r){var i=r;r=function(){var e=$c(a);i.call(e)}}var a=Uc(t,r,e,0,null,!1,0,"",Xc);return e._reactRootContainer=a,e[hs]=a.current,zr(8===e.nodeType?e.parentNode:e),cc(),a}for(;s=e.lastChild;)e.removeChild(s);if("function"===typeof r){var o=r;r=function(){var e=$c(l);o.call(e)}}var l=Vc(e,0,!1,null,0,!1,0,"",Xc);return e._reactRootContainer=l,e[hs]=l.current,zr(8===e.nodeType?e.parentNode:e),cc((function(){Bc(t,l,n,r)})),l}(n,t,e,s,r);return $c(a)}Gc.prototype.render=Kc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(i(409));Bc(e,t,null,null)},Gc.prototype.unmount=Kc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;cc((function(){Bc(null,e,null,null)})),t[hs]=null}},Gc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Nt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Rt.length&&0!==t&&t<Rt[n].priority;n++);Rt.splice(n,0,e),0===n&&Ft(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ut(t.pendingLanes);0!==n&&(vt(t,1|n),nc(t,Qe()),0===(6&El)&&(Ul=Qe()+500,zs()))}break;case 13:cc((function(){var t=Mi(e,1);if(null!==t){var n=Zl();tc(t,e,1,n)}})),Wc(e,1)}},_t=function(e){if(13===e.tag){var t=Mi(e,134217728);if(null!==t)tc(t,e,134217728,Zl());Wc(e,134217728)}},kt=function(e){if(13===e.tag){var t=ec(e),n=Mi(e,t);if(null!==n)tc(n,e,t,Zl());Wc(e,t)}},Nt=function(){return xt},St=function(e,t){var n=xt;try{return xt=e,t()}finally{xt=n}},we=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=xs(r);if(!s)throw Error(i(90));K(r),J(r,s)}}}break;case"textarea":ie(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},je=lc,Ce=cc;var Zc={usingClientEntryPoint:!1,Events:[ys,vs,xs,Se,Ee,lc]},eu={findFiberByHostInstance:gs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},tu={bundleType:eu.bundleType,version:eu.version,rendererPackageName:eu.rendererPackageName,rendererConfig:eu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=He(e))?null:e.stateNode},findFiberByHostInstance:eu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var nu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!nu.isDisabled&&nu.supportsFiber)try{rt=nu.inject(tu),st=nu}catch(ru){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Zc,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Yc(t))throw Error(i(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:_,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Yc(e))throw Error(i(299));var n=!1,r="",s=qc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(s=t.onRecoverableError)),t=Vc(e,1,!1,null,0,n,0,r,s),e[hs]=t.current,zr(8===e.nodeType?e.parentNode:e),new Kc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(i(188));throw e=Object.keys(e).join(","),Error(i(268,e))}return e=null===(e=He(t))?null:e.stateNode},t.flushSync=function(e){return cc(e)},t.hydrate=function(e,t,n){if(!Qc(t))throw Error(i(200));return Jc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Yc(e))throw Error(i(405));var r=null!=n&&n.hydratedSources||null,s=!1,a="",o=qc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(s=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onRecoverableError&&(o=n.onRecoverableError)),t=Uc(t,null,e,1,null!=n?n:null,s,0,a,o),e[hs]=t.current,zr(e),r)for(e=0;e<r.length;e++)s=(s=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new Gc(t)},t.render=function(e,t,n){if(!Qc(t))throw Error(i(200));return Jc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Qc(e))throw Error(i(40));return!!e._reactRootContainer&&(cc((function(){Jc(null,null,e,!1,(function(){e._reactRootContainer=null,e[hs]=null}))})),!0)},t.unstable_batchedUpdates=lc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Qc(n))throw Error(i(200));if(null==e||void 0===e._reactInternals)throw Error(i(38));return Jc(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},352:(e,t,n)=>{var r=n(119);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},414:(e,t,n)=>{e.exports=n(654)},599:(e,t)=>{const n=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,r=/^[\u0021-\u003A\u003C-\u007E]*$/,s=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,i=/^[\u0020-\u003A\u003D-\u007E]*$/,a=Object.prototype.toString,o=(()=>{const e=function(){};return e.prototype=Object.create(null),e})();function l(e,t,n){do{const n=e.charCodeAt(t);if(32!==n&&9!==n)return t}while(++t<n);return n}function c(e,t,n){for(;t>n;){const n=e.charCodeAt(--t);if(32!==n&&9!==n)return t+1}return n}function u(e){if(-1===e.indexOf("%"))return e;try{return decodeURIComponent(e)}catch(hF){return e}}},654:(e,t,n)=>{var r=n(950),s=Symbol.for("react.element"),i=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,i={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)a.call(t,r)&&!l.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===i[r]&&(i[r]=t[r]);return{$$typeof:s,type:e,key:c,ref:u,props:i,_owner:o.current}}t.Fragment=i,t.jsx=c,t.jsxs=c},761:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,s=e[r];if(!(0<i(s,t)))break e;e[r]=t,e[n]=s,n=r}}function r(e){return 0===e.length?null:e[0]}function s(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,s=e.length,a=s>>>1;r<a;){var o=2*(r+1)-1,l=e[o],c=o+1,u=e[c];if(0>i(l,n))c<s&&0>i(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[o]=n,r=o);else{if(!(c<s&&0>i(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,h=null,f=3,m=!1,p=!1,g=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,x="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(u);null!==t;){if(null===t.callback)s(u);else{if(!(t.startTime<=e))break;s(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function w(e){if(g=!1,b(e),!p)if(null!==r(c))p=!0,P(_);else{var t=r(u);null!==t&&R(w,t.startTime-e)}}function _(e,n){p=!1,g&&(g=!1,v(E),E=-1),m=!0;var i=f;try{for(b(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!T());){var a=h.callback;if("function"===typeof a){h.callback=null,f=h.priorityLevel;var o=a(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof o?h.callback=o:h===r(c)&&s(c),b(n)}else s(c);h=r(c)}if(null!==h)var l=!0;else{var d=r(u);null!==d&&R(w,d.startTime-n),l=!1}return l}finally{h=null,f=i,m=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var k,N=!1,S=null,E=-1,j=5,C=-1;function T(){return!(t.unstable_now()-C<j)}function A(){if(null!==S){var e=t.unstable_now();C=e;var n=!0;try{n=S(!0,e)}finally{n?k():(N=!1,S=null)}}else N=!1}if("function"===typeof x)k=function(){x(A)};else if("undefined"!==typeof MessageChannel){var I=new MessageChannel,M=I.port2;I.port1.onmessage=A,k=function(){M.postMessage(null)}}else k=function(){y(A,0)};function P(e){S=e,N||(N=!0,k())}function R(e,n){E=y((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){p||m||(p=!0,P(_))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,s,i){var a=t.unstable_now();switch("object"===typeof i&&null!==i?i="number"===typeof(i=i.delay)&&0<i?a+i:a:i=a,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:d++,callback:s,priorityLevel:e,startTime:i,expirationTime:o=i+o,sortIndex:-1},i>a?(e.sortIndex=i,n(u,e),null===r(c)&&e===r(u)&&(g?(v(E),E=-1):g=!0,R(w,i-a))):(e.sortIndex=o,n(c,e),p||m||(p=!0,P(_))),e},t.unstable_shouldYield=T,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},950:(e,t,n)=>{e.exports=n(49)}},t={};function n(r){var s=t[r];if(void 0!==s)return s.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,s){if(1&s&&(r=this(r)),8&s)return r;if("object"===typeof r&&r){if(4&s&&r.__esModule)return r;if(16&s&&"function"===typeof r.then)return r}var i=Object.create(null);n.r(i);var a={};e=e||[null,t({}),t([]),t(t)];for(var o=2&s&&r;"object"==typeof o&&!~e.indexOf(o);o=t(o))Object.getOwnPropertyNames(o).forEach((e=>a[e]=()=>r[e]));return a.default=()=>r,n.d(i,a),i}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(hF){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/";var r=n(950),s=n.t(r,2),i=n(352),a=(n(599),"popstate");function o(){return m((function(e,t){let{pathname:n,search:r,hash:s}=e.location;return d("",{pathname:n,search:r,hash:s},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:h(t)}),null,arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}function l(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function c(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(hF){}}}function u(e,t){return{usr:e.state,key:e.key,idx:t}}function d(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3?arguments[3]:void 0;return{pathname:"string"===typeof e?e:e.pathname,search:"",hash:"",..."string"===typeof t?f(t):t,state:n,key:t&&t.key||r||Math.random().toString(36).substring(2,10)}}function h(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function f(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function m(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,l="POP",c=null,h=f();function f(){return(o.state||{idx:null}).idx}function m(){l="POP";let e=f(),t=null==e?null:e-h;h=e,c&&c({action:l,location:y.location,delta:t})}function g(e){return p(e)}null==h&&(h=0,o.replaceState({...o.state,idx:h},""));let y={get action(){return l},get location(){return e(s,o)},listen(e){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(a,m),c=e,()=>{s.removeEventListener(a,m),c=null}},createHref:e=>t(s,e),createURL:g,encodeLocation(e){let t=g(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){l="PUSH";let r=d(y.location,e,t);n&&n(r,e),h=f()+1;let a=u(r,h),m=y.createHref(r);try{o.pushState(a,"",m)}catch(p){if(p instanceof DOMException&&"DataCloneError"===p.name)throw p;s.location.assign(m)}i&&c&&c({action:l,location:y.location,delta:1})},replace:function(e,t){l="REPLACE";let r=d(y.location,e,t);n&&n(r,e),h=f();let s=u(r,h),a=y.createHref(r);o.replaceState(s,"",a),i&&c&&c({action:l,location:y.location,delta:0})},go:e=>o.go(e)};return y}function p(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n="http://localhost";"undefined"!==typeof window&&(n="null"!==window.location.origin?window.location.origin:window.location.href),l(n,"No window.location.(origin|href) available to create URL");let r="string"===typeof e?e:h(e);return r=r.replace(/ $/,"%20"),!t&&r.startsWith("//")&&(r=n+r),new URL(r,n)}new WeakMap;function g(e,t){return y(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"/",!1)}function y(e,t,n,r){let s=M(("string"===typeof t?f(t):t).pathname||"/",n);if(null==s)return null;let i=v(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every(((e,n)=>e===t[n]));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(i);let a=null;for(let o=0;null==a&&o<i.length;++o){let e=I(s);a=C(i[o],e,r)}return a}function v(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",s=(e,s,i)=>{let a={relativePath:void 0===i?e.path||"":i,caseSensitive:!0===e.caseSensitive,childrenIndex:s,route:e};a.relativePath.startsWith("/")&&(l(a.relativePath.startsWith(r),`Absolute route path "${a.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),a.relativePath=a.relativePath.slice(r.length));let o=O([r,a.relativePath]),c=n.concat(a);e.children&&e.children.length>0&&(l(!0!==e.index,`Index routes must not have child routes. Please remove all child routes from route path "${o}".`),v(e.children,t,c,o)),(null!=e.path||e.index)&&t.push({path:o,score:j(o,e.index),routesMeta:c})};return e.forEach(((e,t)=>{if(""!==e.path&&e.path?.includes("?"))for(let n of x(e.path))s(e,t,n);else s(e,t)})),t}function x(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(0===r.length)return s?[i,""]:[i];let a=x(r.join("/")),o=[];return o.push(...a.map((e=>""===e?i:[i,e].join("/")))),s&&o.push(...a),o.map((t=>e.startsWith("/")&&""===t?"/":t))}var b=/^:[\w-]+$/,w=3,_=2,k=1,N=10,S=-2,E=e=>"*"===e;function j(e,t){let n=e.split("/"),r=n.length;return n.some(E)&&(r+=S),t&&(r+=_),n.filter((e=>!E(e))).reduce(((e,t)=>e+(b.test(t)?w:""===t?k:N)),r)}function C(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],{routesMeta:r}=e,s={},i="/",a=[];for(let o=0;o<r.length;++o){let e=r[o],l=o===r.length-1,c="/"===i?t:t.slice(i.length)||"/",u=T({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),d=e.route;if(!u&&l&&n&&!r[r.length-1].route.index&&(u=T({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!u)return null;Object.assign(s,u.params),a.push({params:s,pathname:O([i,u.pathname]),pathnameBase:F(O([i,u.pathnameBase])),route:d}),"/"!==u.pathnameBase&&(i=O([i,u.pathnameBase]))}return a}function T(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=A(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let i=s[0],a=i.replace(/(.)\/+$/,"$1"),o=s.slice(1),l=r.reduce(((e,t,n)=>{let{paramName:r,isOptional:s}=t;if("*"===r){let e=o[n]||"";a=i.slice(0,i.length-e.length).replace(/(.)\/+$/,"$1")}const l=o[n];return e[r]=s&&!l?void 0:(l||"").replace(/%2F/g,"/"),e}),{});return{params:l,pathname:i,pathnameBase:a,pattern:e}}function A(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];c("*"===e||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let r=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,((e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")));return e.endsWith("*")?(r.push({paramName:"*"}),s+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":""!==e&&"/"!==e&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),r]}function I(e){try{return e.split("/").map((e=>decodeURIComponent(e).replace(/\//g,"%2F"))).join("/")}catch(t){return c(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function M(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function P(e,t,n,r){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function R(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}function L(e){let t=R(e);return t.map(((e,n)=>n===t.length-1?e.pathname:e.pathnameBase))}function D(e,t,n){let r,s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];"string"===typeof e?r=f(e):(r={...e},l(!r.pathname||!r.pathname.includes("?"),P("?","pathname","search",r)),l(!r.pathname||!r.pathname.includes("#"),P("#","pathname","hash",r)),l(!r.search||!r.search.includes("#"),P("#","search","hash",r)));let i,a=""===e||""===r.pathname,o=a?"/":r.pathname;if(null==o)i=n;else{let e=t.length-1;if(!s&&o.startsWith("..")){let t=o.split("/");for(;".."===t[0];)t.shift(),e-=1;r.pathname=t.join("/")}i=e>=0?t[e]:"/"}let c=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/",{pathname:n,search:r="",hash:s=""}="string"===typeof e?f(e):e,i=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:i,search:V(r),hash:z(s)}}(r,i),u=o&&"/"!==o&&o.endsWith("/"),d=(a||"."===o)&&n.endsWith("/");return c.pathname.endsWith("/")||!u&&!d||(c.pathname+="/"),c}var O=e=>e.join("/").replace(/\/\/+/g,"/"),F=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),V=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",z=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";function U(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}var B=["POST","PUT","PATCH","DELETE"],$=(new Set(B),["GET",...B]);new Set($),Symbol("ResetLoaderData");var H=r.createContext(null);H.displayName="DataRouter";var W=r.createContext(null);W.displayName="DataRouterState";var q=r.createContext({isTransitioning:!1});q.displayName="ViewTransition";var K=r.createContext(new Map);K.displayName="Fetchers";var G=r.createContext(null);G.displayName="Await";var Y=r.createContext(null);Y.displayName="Navigation";var Q=r.createContext(null);Q.displayName="Location";var X=r.createContext({outlet:null,matches:[],isDataRoute:!1});X.displayName="Route";var J=r.createContext(null);J.displayName="RouteError";function Z(){return null!=r.useContext(Q)}function ee(){return l(Z(),"useLocation() may be used only in the context of a <Router> component."),r.useContext(Q).location}var te="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function ne(e){r.useContext(Y).static||r.useLayoutEffect(e)}function re(){let{isDataRoute:e}=r.useContext(X);return e?function(){let{router:e}=he("useNavigate"),t=me("useNavigate"),n=r.useRef(!1);ne((()=>{n.current=!0}));let s=r.useCallback((async function(r){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};c(n.current,te),n.current&&("number"===typeof r?e.navigate(r):await e.navigate(r,{fromRouteId:t,...s}))}),[e,t]);return s}():function(){l(Z(),"useNavigate() may be used only in the context of a <Router> component.");let e=r.useContext(H),{basename:t,navigator:n}=r.useContext(Y),{matches:s}=r.useContext(X),{pathname:i}=ee(),a=JSON.stringify(L(s)),o=r.useRef(!1);ne((()=>{o.current=!0}));let u=r.useCallback((function(r){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(c(o.current,te),!o.current)return;if("number"===typeof r)return void n.go(r);let l=D(r,JSON.parse(a),i,"path"===s.relative);null==e&&"/"!==t&&(l.pathname="/"===l.pathname?t:O([t,l.pathname])),(s.replace?n.replace:n.push)(l,s.state,s)}),[t,n,a,i,e]);return u}()}r.createContext(null);function se(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{matches:n}=r.useContext(X),{pathname:s}=ee(),i=JSON.stringify(L(n));return r.useMemo((()=>D(e,JSON.parse(i),s,"path"===t)),[e,i,s,t])}function ie(e,t,n,s){l(Z(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i,static:a}=r.useContext(Y),{matches:o}=r.useContext(X),u=o[o.length-1],d=u?u.params:{},h=u?u.pathname:"/",m=u?u.pathnameBase:"/",p=u&&u.route;{let e=p&&p.path||"";ye(h,!p||e.endsWith("*")||e.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${e}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.\n\nPlease change the parent <Route path="${e}"> to <Route path="${"/"===e?"*":`${e}/*`}">.`)}let y,v=ee();if(t){let e="string"===typeof t?f(t):t;l("/"===m||e.pathname?.startsWith(m),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${m}" but pathname "${e.pathname}" was given in the \`location\` prop.`),y=e}else y=v;let x=y.pathname||"/",b=x;if("/"!==m){let e=m.replace(/^\//,"").split("/");b="/"+x.replace(/^\//,"").split("/").slice(e.length).join("/")}let w=!a&&n&&n.matches&&n.matches.length>0?n.matches:g(e,{pathname:b});c(p||null!=w,`No routes matched location "${y.pathname}${y.search}${y.hash}" `),c(null==w||void 0!==w[w.length-1].route.element||void 0!==w[w.length-1].route.Component||void 0!==w[w.length-1].route.lazy,`Matched leaf route at location "${y.pathname}${y.search}${y.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let _=ue(w&&w.map((e=>Object.assign({},e,{params:Object.assign({},d,e.params),pathname:O([m,i.encodeLocation?i.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?m:O([m,i.encodeLocation?i.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),o,n,s);return t&&_?r.createElement(Q.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...y},navigationType:"POP"}},_):_}function ae(){let e=pe(),t=U(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,s="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:s},a={padding:"2px 4px",backgroundColor:s},o=null;return console.error("Error handled by React Router default ErrorBoundary:",e),o=r.createElement(r.Fragment,null,r.createElement("p",null,"\ud83d\udcbf Hey developer \ud83d\udc4b"),r.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",r.createElement("code",{style:a},"ErrorBoundary")," or"," ",r.createElement("code",{style:a},"errorElement")," prop on your route.")),r.createElement(r.Fragment,null,r.createElement("h2",null,"Unexpected Application Error!"),r.createElement("h3",{style:{fontStyle:"italic"}},t),n?r.createElement("pre",{style:i},n):null,o)}var oe=r.createElement(ae,null),le=class extends r.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?r.createElement(X.Provider,{value:this.props.routeContext},r.createElement(J.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function ce(e){let{routeContext:t,match:n,children:s}=e,i=r.useContext(H);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),r.createElement(X.Provider,{value:t},s)}function ue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(null==e){if(!n)return null;if(n.errors)e=n.matches;else{if(0!==t.length||n.initialized||!(n.matches.length>0))return null;e=n.matches}}let s=e,i=n?.errors;if(null!=i){let e=s.findIndex((e=>e.route.id&&void 0!==i?.[e.route.id]));l(e>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(i).join(",")}`),s=s.slice(0,Math.min(s.length,e+1))}let a=!1,o=-1;if(n)for(let r=0;r<s.length;r++){let e=s[r];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(o=r),e.route.id){let{loaderData:t,errors:r}=n,i=e.route.loader&&!t.hasOwnProperty(e.route.id)&&(!r||void 0===r[e.route.id]);if(e.route.lazy||i){a=!0,s=o>=0?s.slice(0,o+1):[s[0]];break}}}return s.reduceRight(((e,l,c)=>{let u,d=!1,h=null,f=null;n&&(u=i&&l.route.id?i[l.route.id]:void 0,h=l.route.errorElement||oe,a&&(o<0&&0===c?(ye("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),d=!0,f=null):o===c&&(d=!0,f=l.route.hydrateFallbackElement||null)));let m=t.concat(s.slice(0,c+1)),p=()=>{let t;return t=u?h:d?f:l.route.Component?r.createElement(l.route.Component,null):l.route.element?l.route.element:e,r.createElement(ce,{match:l,routeContext:{outlet:e,matches:m,isDataRoute:null!=n},children:t})};return n&&(l.route.ErrorBoundary||l.route.errorElement||0===c)?r.createElement(le,{location:n.location,revalidation:n.revalidation,component:h,error:u,children:p(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):p()}),null)}function de(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function he(e){let t=r.useContext(H);return l(t,de(e)),t}function fe(e){let t=r.useContext(W);return l(t,de(e)),t}function me(e){let t=function(e){let t=r.useContext(X);return l(t,de(e)),t}(e),n=t.matches[t.matches.length-1];return l(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}function pe(){let e=r.useContext(J),t=fe("useRouteError"),n=me("useRouteError");return void 0!==e?e:t.errors?.[n]}var ge={};function ye(e,t,n){t||ge[e]||(ge[e]=!0,c(!1,n))}r.memo((function(e){let{routes:t,future:n,state:r}=e;return ie(t,void 0,r,n)}));function ve(e){let{to:t,replace:n,state:s,relative:i}=e;l(Z(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=r.useContext(Y);c(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=r.useContext(X),{pathname:u}=ee(),d=re(),h=D(t,L(o),u,"path"===i),f=JSON.stringify(h);return r.useEffect((()=>{d(JSON.parse(f),{replace:n,state:s,relative:i})}),[d,f,i,n,s]),null}function xe(e){l(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function be(e){let{basename:t="/",children:n=null,location:s,navigationType:i="POP",navigator:a,static:o=!1}=e;l(!Z(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=t.replace(/^\/*/,"/"),d=r.useMemo((()=>({basename:u,navigator:a,static:o,future:{}})),[u,a,o]);"string"===typeof s&&(s=f(s));let{pathname:h="/",search:m="",hash:p="",state:g=null,key:y="default"}=s,v=r.useMemo((()=>{let e=M(h,u);return null==e?null:{location:{pathname:e,search:m,hash:p,state:g,key:y},navigationType:i}}),[u,h,m,p,g,y,i]);return c(null!=v,`<Router basename="${u}"> is not able to match the URL "${h}${m}${p}" because it does not start with the basename, so the <Router> won't render anything.`),null==v?null:r.createElement(Y.Provider,{value:d},r.createElement(Q.Provider,{children:n,value:v}))}function we(e){let{children:t,location:n}=e;return ie(_e(t),n)}r.Component;function _e(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[];return r.Children.forEach(e,((e,s)=>{if(!r.isValidElement(e))return;let i=[...t,s];if(e.type===r.Fragment)return void n.push.apply(n,_e(e.props.children,i));l(e.type===xe,`[${"string"===typeof e.type?e.type:e.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),l(!e.props.index||!e.props.children,"An index route cannot have child routes.");let a={id:e.props.id||i.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,hydrateFallbackElement:e.props.hydrateFallbackElement,HydrateFallback:e.props.HydrateFallback,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:!0===e.props.hasErrorBoundary||null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(a.children=_e(e.props.children,i)),n.push(a)})),n}var ke="get",Ne="application/x-www-form-urlencoded";function Se(e){return null!=e&&"string"===typeof e.tagName}var Ee=null;var je=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Ce(e){return null==e||je.has(e)?e:(c(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Ne}"`),null)}function Te(e,t){let n,r,s,i,a;if(Se(o=e)&&"form"===o.tagName.toLowerCase()){let a=e.getAttribute("action");r=a?M(a,t):null,n=e.getAttribute("method")||ke,s=Ce(e.getAttribute("enctype"))||Ne,i=new FormData(e)}else if(function(e){return Se(e)&&"button"===e.tagName.toLowerCase()}(e)||function(e){return Se(e)&&"input"===e.tagName.toLowerCase()}(e)&&("submit"===e.type||"image"===e.type)){let a=e.form;if(null==a)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let o=e.getAttribute("formaction")||a.getAttribute("action");if(r=o?M(o,t):null,n=e.getAttribute("formmethod")||a.getAttribute("method")||ke,s=Ce(e.getAttribute("formenctype"))||Ce(a.getAttribute("enctype"))||Ne,i=new FormData(a,e),!function(){if(null===Ee)try{new FormData(document.createElement("form"),0),Ee=!1}catch(hF){Ee=!0}return Ee}()){let{name:t,type:n,value:r}=e;if("image"===n){let e=t?`${t}.`:"";i.append(`${e}x`,"0"),i.append(`${e}y`,"0")}else t&&i.append(t,r)}}else{if(Se(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=ke,r=null,s=Ne,a=e}var o;return i&&"text/plain"===s&&(a=i,i=void 0),{action:r,method:n.toLowerCase(),encType:s,formData:i,body:a}}function Ae(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}async function Ie(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise((()=>{}))}}function Me(e){return null!=e&&"string"===typeof e.page}function Pe(e){return null!=e&&(null==e.href?"preload"===e.rel&&"string"===typeof e.imageSrcSet&&"string"===typeof e.imageSizes:"string"===typeof e.rel&&"string"===typeof e.href)}function Re(e,t,n,r,s,i){let a=(e,t)=>!n[t]||e.route.id!==n[t].route.id,o=(e,t)=>n[t].pathname!==e.pathname||n[t].route.path?.endsWith("*")&&n[t].params["*"]!==e.params["*"];return"assets"===i?t.filter(((e,t)=>a(e,t)||o(e,t))):"data"===i?t.filter(((t,i)=>{let l=r.routes[t.route.id];if(!l||!l.hasLoader)return!1;if(a(t,i)||o(t,i))return!0;if(t.route.shouldRevalidate){let r=t.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:t.params,defaultShouldRevalidate:!0});if("boolean"===typeof r)return r}return!0})):[]}function Le(e,t){let{includeHydrateFallback:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return r=e.map((e=>{let r=t.routes[e.route.id];if(!r)return[];let s=[r.module];return r.clientActionModule&&(s=s.concat(r.clientActionModule)),r.clientLoaderModule&&(s=s.concat(r.clientLoaderModule)),n&&r.hydrateFallbackModule&&(s=s.concat(r.hydrateFallbackModule)),r.imports&&(s=s.concat(r.imports)),s})).flat(1),[...new Set(r)];var r}function De(e,t){let n=new Set,r=new Set(t);return e.reduce(((e,s)=>{if(t&&!Me(s)&&"script"===s.as&&s.href&&r.has(s.href))return e;let i=JSON.stringify(function(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}(s));return n.has(i)||(n.add(i),e.push({key:i,link:s})),e}),[])}function Oe(e){return{__html:e}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");"undefined"!==typeof window?window:"undefined"!==typeof globalThis&&globalThis;Symbol("SingleFetchRedirect");var Fe=new Set([100,101,204,205]);function Ve(e,t){let n="string"===typeof e?new URL(e,"undefined"===typeof window?"server://singlefetch/":window.location.origin):e;return"/"===n.pathname?n.pathname="_root.data":t&&"/"===M(n.pathname,t)?n.pathname=`${t.replace(/\/$/,"")}/_root.data`:n.pathname=`${n.pathname.replace(/\/$/,"")}.data`,n}r.Component;function ze(e){let{error:t,isOutsideRemixApp:n}=e;console.error(t);let s,i=r.createElement("script",{dangerouslySetInnerHTML:{__html:'\n        console.log(\n          "\ud83d\udcbf Hey developer \ud83d\udc4b. You can provide a way better UX than this when your app throws errors. Check out https://reactrouter.com/how-to/error-boundary for more information."\n        );\n      '}});if(U(t))return r.createElement(Ue,{title:"Unhandled Thrown Response!"},r.createElement("h1",{style:{fontSize:"24px"}},t.status," ",t.statusText),i);if(t instanceof Error)s=t;else{let e=null==t?"Unknown Error":"object"===typeof t&&"toString"in t?t.toString():JSON.stringify(t);s=new Error(e)}return r.createElement(Ue,{title:"Application Error!",isOutsideRemixApp:n},r.createElement("h1",{style:{fontSize:"24px"}},"Application Error"),r.createElement("pre",{style:{padding:"2rem",background:"hsla(10, 50%, 50%, 0.1)",color:"red",overflow:"auto"}},s.stack),i)}function Ue(e){let{title:t,renderScripts:n,isOutsideRemixApp:s,children:i}=e,{routeModules:a}=qe();return a.root?.Layout&&!s?i:r.createElement("html",{lang:"en"},r.createElement("head",null,r.createElement("meta",{charSet:"utf-8"}),r.createElement("meta",{name:"viewport",content:"width=device-width,initial-scale=1,viewport-fit=cover"}),r.createElement("title",null,t)),r.createElement("body",null,r.createElement("main",{style:{fontFamily:"system-ui, sans-serif",padding:"2rem"}},i,n?r.createElement(Ze,null):null)))}function Be(e,t){return"lazy"===e.mode&&!0===t}function $e(){let e=r.useContext(H);return Ae(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function He(){let e=r.useContext(W);return Ae(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var We=r.createContext(void 0);function qe(){let e=r.useContext(We);return Ae(e,"You must render this element inside a <HydratedRouter> element"),e}function Ke(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function Ge(e,t,n){if(n&&!Je)return[e[0]];if(t){let n=e.findIndex((e=>void 0!==t[e.route.id]));return e.slice(0,n+1)}return e}function Ye(e){let{page:t,...n}=e,{router:s}=$e(),i=r.useMemo((()=>g(s.routes,t,s.basename)),[s.routes,t,s.basename]);return i?r.createElement(Xe,{page:t,matches:i,...n}):null}function Qe(e){let{manifest:t,routeModules:n}=qe(),[s,i]=r.useState([]);return r.useEffect((()=>{let r=!1;return async function(e,t,n){let r=await Promise.all(e.map((async e=>{let r=t.routes[e.route.id];if(r){let e=await Ie(r,n);return e.links?e.links():[]}return[]})));return De(r.flat(1).filter(Pe).filter((e=>"stylesheet"===e.rel||"preload"===e.rel)).map((e=>"stylesheet"===e.rel?{...e,rel:"prefetch",as:"style"}:{...e,rel:"prefetch"})))}(e,t,n).then((e=>{r||i(e)})),()=>{r=!0}}),[e,t,n]),s}function Xe(e){let{page:t,matches:n,...s}=e,i=ee(),{manifest:a,routeModules:o}=qe(),{basename:l}=$e(),{loaderData:c,matches:u}=He(),d=r.useMemo((()=>Re(t,n,u,a,i,"data")),[t,n,u,a,i]),h=r.useMemo((()=>Re(t,n,u,a,i,"assets")),[t,n,u,a,i]),f=r.useMemo((()=>{if(t===i.pathname+i.search+i.hash)return[];let e=new Set,r=!1;if(n.forEach((t=>{let n=a.routes[t.route.id];n&&n.hasLoader&&(!d.some((e=>e.route.id===t.route.id))&&t.route.id in c&&o[t.route.id]?.shouldRevalidate||n.hasClientLoader?r=!0:e.add(t.route.id))})),0===e.size)return[];let s=Ve(t,l);return r&&e.size>0&&s.searchParams.set("_routes",n.filter((t=>e.has(t.route.id))).map((e=>e.route.id)).join(",")),[s.pathname+s.search]}),[l,c,i,a,d,n,t,o]),m=r.useMemo((()=>Le(h,a)),[h,a]),p=Qe(h);return r.createElement(r.Fragment,null,f.map((e=>r.createElement("link",{key:e,rel:"prefetch",as:"fetch",href:e,...s}))),m.map((e=>r.createElement("link",{key:e,rel:"modulepreload",href:e,...s}))),p.map((e=>{let{key:t,link:n}=e;return r.createElement("link",{key:t,...n})})))}We.displayName="FrameworkContext";var Je=!1;function Ze(e){let{manifest:t,serverHandoffString:n,isSpaMode:s,renderMeta:i,routeDiscovery:a,ssr:o}=qe(),{router:l,static:c,staticContext:u}=$e(),{matches:d}=He(),h=Be(a,o);i&&(i.didRenderScripts=!0);let f=Ge(d,null,s);r.useEffect((()=>{Je=!0}),[]);let m=r.useMemo((()=>{let s=u?`window.__reactRouterContext = ${n};window.__reactRouterContext.stream = new ReadableStream({start(controller){window.__reactRouterContext.streamController = controller;}}).pipeThrough(new TextEncoderStream());`:" ",i=c?`${t.hmr?.runtime?`import ${JSON.stringify(t.hmr.runtime)};`:""}${h?"":`import ${JSON.stringify(t.url)}`};\n${f.map(((e,n)=>{let r=`route${n}`,s=t.routes[e.route.id];Ae(s,`Route ${e.route.id} not found in manifest`);let{clientActionModule:i,clientLoaderModule:a,clientMiddlewareModule:o,hydrateFallbackModule:l,module:c}=s,u=[...i?[{module:i,varName:`${r}_clientAction`}]:[],...a?[{module:a,varName:`${r}_clientLoader`}]:[],...o?[{module:o,varName:`${r}_clientMiddleware`}]:[],...l?[{module:l,varName:`${r}_HydrateFallback`}]:[],{module:c,varName:`${r}_main`}];return 1===u.length?`import * as ${r} from ${JSON.stringify(c)};`:[u.map((e=>`import * as ${e.varName} from "${e.module}";`)).join("\n"),`const ${r} = {${u.map((e=>`...${e.varName}`)).join(",")}};`].join("\n")})).join("\n")}\n  ${h?`window.__reactRouterManifest = ${JSON.stringify(function(e,t){let{sri:n,...r}=e,s=new Set(t.state.matches.map((e=>e.route.id))),i=t.state.location.pathname.split("/").filter(Boolean),a=["/"];for(i.pop();i.length>0;)a.push(`/${i.join("/")}`),i.pop();a.forEach((e=>{let n=g(t.routes,e,t.basename);n&&n.forEach((e=>s.add(e.route.id)))}));let o=[...s].reduce(((e,t)=>Object.assign(e,{[t]:r.routes[t]})),{});return{...r,routes:o,sri:!!n||void 0}}(t,l),null,2)};`:""}\n  window.__reactRouterRouteModules = {${f.map(((e,t)=>`${JSON.stringify(e.route.id)}:route${t}`)).join(",")}};\n\nimport(${JSON.stringify(t.entry.module)});`:" ";return r.createElement(r.Fragment,null,r.createElement("script",{...e,suppressHydrationWarning:!0,dangerouslySetInnerHTML:Oe(s),type:void 0}),r.createElement("script",{...e,suppressHydrationWarning:!0,dangerouslySetInnerHTML:Oe(i),type:"module",async:!0}))}),[]),p=Je?[]:(y=t.entry.imports.concat(Le(f,t,{includeHydrateFallback:!0})),[...new Set(y)]);var y;let v="object"===typeof t.sri?t.sri:{};return Je?null:r.createElement(r.Fragment,null,"object"===typeof t.sri?r.createElement("script",{"rr-importmap":"",type:"importmap",suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:JSON.stringify({integrity:v})}}):null,h?null:r.createElement("link",{rel:"modulepreload",href:t.url,crossOrigin:e.crossOrigin,integrity:v[t.url],suppressHydrationWarning:!0}),r.createElement("link",{rel:"modulepreload",href:t.entry.module,crossOrigin:e.crossOrigin,integrity:v[t.entry.module],suppressHydrationWarning:!0}),p.map((t=>r.createElement("link",{key:t,rel:"modulepreload",href:t,crossOrigin:e.crossOrigin,integrity:v[t],suppressHydrationWarning:!0}))),m)}function et(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>{t.forEach((t=>{"function"===typeof t?t(e):null!=t&&(t.current=e)}))}}var tt="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement;try{tt&&(window.__reactRouterVersion="7.6.0")}catch(hF){}function nt(e){let{basename:t,children:n,window:s}=e,i=r.useRef();null==i.current&&(i.current=o({window:s,v5Compat:!0}));let a=i.current,[l,c]=r.useState({action:a.action,location:a.location}),u=r.useCallback((e=>{r.startTransition((()=>c(e)))}),[c]);return r.useLayoutEffect((()=>a.listen(u)),[a,u]),r.createElement(be,{basename:t,children:n,location:l.location,navigationType:l.action,navigator:a})}var rt=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,st=r.forwardRef((function(e,t){let n,{onClick:s,discover:i="render",prefetch:a="none",relative:o,reloadDocument:u,replace:d,state:f,target:m,to:p,preventScrollReset:g,viewTransition:y,...v}=e,{basename:x}=r.useContext(Y),b="string"===typeof p&&rt.test(p),w=!1;if("string"===typeof p&&b&&(n=p,tt))try{let e=new URL(window.location.href),t=p.startsWith("//")?new URL(e.protocol+p):new URL(p),n=M(t.pathname,x);t.origin===e.origin&&null!=n?p=n+t.search+t.hash:w=!0}catch(hF){c(!1,`<Link to="${p}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let _=function(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};l(Z(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:s}=r.useContext(Y),{hash:i,pathname:a,search:o}=se(e,{relative:t}),c=a;return"/"!==n&&(c="/"===a?n:O([n,a])),s.createHref({pathname:c,search:o,hash:i})}(p,{relative:o}),[k,N,S]=function(e,t){let n=r.useContext(We),[s,i]=r.useState(!1),[a,o]=r.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:u,onMouseLeave:d,onTouchStart:h}=t,f=r.useRef(null);r.useEffect((()=>{if("render"===e&&o(!0),"viewport"===e){let e=new IntersectionObserver((e=>{e.forEach((e=>{o(e.isIntersecting)}))}),{threshold:.5});return f.current&&e.observe(f.current),()=>{e.disconnect()}}}),[e]),r.useEffect((()=>{if(s){let e=setTimeout((()=>{o(!0)}),100);return()=>{clearTimeout(e)}}}),[s]);let m=()=>{i(!0)},p=()=>{i(!1),o(!1)};return n?"intent"!==e?[a,f,{}]:[a,f,{onFocus:Ke(l,m),onBlur:Ke(c,p),onMouseEnter:Ke(u,m),onMouseLeave:Ke(d,p),onTouchStart:Ke(h,m)}]:[!1,f,{}]}(a,v),E=function(e){let{target:t,replace:n,state:s,preventScrollReset:i,relative:a,viewTransition:o}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=re(),c=ee(),u=se(e,{relative:a});return r.useCallback((r=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(r,t)){r.preventDefault();let t=void 0!==n?n:h(c)===h(u);l(e,{replace:t,state:s,preventScrollReset:i,relative:a,viewTransition:o})}}),[c,l,u,n,s,t,e,i,a,o])}(p,{replace:d,state:f,target:m,preventScrollReset:g,relative:o,viewTransition:y});let j=r.createElement("a",{...v,...S,href:n||_,onClick:w||u?s:function(e){s&&s(e),e.defaultPrevented||E(e)},ref:et(t,N),target:m,"data-discover":b||"render"!==i?void 0:"true"});return k&&!b?r.createElement(r.Fragment,null,j,r.createElement(Ye,{page:_})):j}));st.displayName="Link";var it=r.forwardRef((function(e,t){let{"aria-current":n="page",caseSensitive:s=!1,className:i="",end:a=!1,style:o,to:c,viewTransition:u,children:d,...h}=e,f=se(c,{relative:h.relative}),m=ee(),p=r.useContext(W),{navigator:g,basename:y}=r.useContext(Y),v=null!=p&&function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.useContext(q);l(null!=n,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=lt("useViewTransitionState"),i=se(e,{relative:t.relative});if(!n.isTransitioning)return!1;let a=M(n.currentLocation.pathname,s)||n.currentLocation.pathname,o=M(n.nextLocation.pathname,s)||n.nextLocation.pathname;return null!=T(i.pathname,o)||null!=T(i.pathname,a)}(f)&&!0===u,x=g.encodeLocation?g.encodeLocation(f).pathname:f.pathname,b=m.pathname,w=p&&p.navigation&&p.navigation.location?p.navigation.location.pathname:null;s||(b=b.toLowerCase(),w=w?w.toLowerCase():null,x=x.toLowerCase()),w&&y&&(w=M(w,y)||w);const _="/"!==x&&x.endsWith("/")?x.length-1:x.length;let k,N=b===x||!a&&b.startsWith(x)&&"/"===b.charAt(_),S=null!=w&&(w===x||!a&&w.startsWith(x)&&"/"===w.charAt(x.length)),E={isActive:N,isPending:S,isTransitioning:v},j=N?n:void 0;k="function"===typeof i?i(E):[i,N?"active":null,S?"pending":null,v?"transitioning":null].filter(Boolean).join(" ");let C="function"===typeof o?o(E):o;return r.createElement(st,{...h,"aria-current":j,className:k,ref:t,style:C,to:c,viewTransition:u},"function"===typeof d?d(E):d)}));it.displayName="NavLink";var at=r.forwardRef(((e,t)=>{let{discover:n="render",fetcherKey:s,navigate:i,reloadDocument:a,replace:o,state:c,method:u=ke,action:d,onSubmit:f,relative:m,preventScrollReset:p,viewTransition:g,...y}=e,v=dt(),x=function(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{basename:n}=r.useContext(Y),s=r.useContext(X);l(s,"useFormAction must be used inside a RouteContext");let[i]=s.matches.slice(-1),a={...se(e||".",{relative:t})},o=ee();if(null==e){a.search=o.search;let e=new URLSearchParams(a.search),t=e.getAll("index"),n=t.some((e=>""===e));if(n){e.delete("index"),t.filter((e=>e)).forEach((t=>e.append("index",t)));let n=e.toString();a.search=n?`?${n}`:""}}e&&"."!==e||!i.route.index||(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index");"/"!==n&&(a.pathname="/"===a.pathname?n:O([n,a.pathname]));return h(a)}(d,{relative:m}),b="get"===u.toLowerCase()?"get":"post",w="string"===typeof d&&rt.test(d);return r.createElement("form",{ref:t,method:b,action:x,onSubmit:a?f:e=>{if(f&&f(e),e.defaultPrevented)return;e.preventDefault();let t=e.nativeEvent.submitter,n=t?.getAttribute("formmethod")||u;v(t||e.currentTarget,{fetcherKey:s,method:n,navigate:i,replace:o,state:c,relative:m,preventScrollReset:p,viewTransition:g})},...y,"data-discover":w||"render"!==n?void 0:"true"})}));function ot(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function lt(e){let t=r.useContext(H);return l(t,ot(e)),t}at.displayName="Form";var ct=0,ut=()=>`__${String(++ct)}__`;function dt(){let{router:e}=lt("useSubmit"),{basename:t}=r.useContext(Y),n=me("useRouteId");return r.useCallback((async function(r){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{action:i,method:a,encType:o,formData:l,body:c}=Te(r,t);if(!1===s.navigate){let t=s.fetcherKey||ut();await e.fetch(t,n,s.action||i,{preventScrollReset:s.preventScrollReset,formData:l,body:c,formMethod:s.method||a,formEncType:s.encType||o,flushSync:s.flushSync})}else await e.navigate(s.action||i,{preventScrollReset:s.preventScrollReset,formData:l,body:c,formMethod:s.method||a,formEncType:s.encType||o,replace:s.replace,state:s.state,fromRouteId:n,flushSync:s.flushSync,viewTransition:s.viewTransition})}),[e,t,n])}function ht(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(n=ht(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}const ft=function(){for(var e,t,n=0,r="",s=arguments.length;n<s;n++)(e=arguments[n])&&(t=ht(e))&&(r&&(r+=" "),r+=t);return r};!function(e){if(!e||"undefined"==typeof document)return;let t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t.firstChild?t.insertBefore(n,t.firstChild):t.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}(':root{--toastify-color-light: #fff;--toastify-color-dark: #121212;--toastify-color-info: #3498db;--toastify-color-success: #07bc0c;--toastify-color-warning: #f1c40f;--toastify-color-error: hsl(6, 78%, 57%);--toastify-color-transparent: rgba(255, 255, 255, .7);--toastify-icon-color-info: var(--toastify-color-info);--toastify-icon-color-success: var(--toastify-color-success);--toastify-icon-color-warning: var(--toastify-color-warning);--toastify-icon-color-error: var(--toastify-color-error);--toastify-container-width: fit-content;--toastify-toast-width: 320px;--toastify-toast-offset: 16px;--toastify-toast-top: max(var(--toastify-toast-offset), env(safe-area-inset-top));--toastify-toast-right: max(var(--toastify-toast-offset), env(safe-area-inset-right));--toastify-toast-left: max(var(--toastify-toast-offset), env(safe-area-inset-left));--toastify-toast-bottom: max(var(--toastify-toast-offset), env(safe-area-inset-bottom));--toastify-toast-background: #fff;--toastify-toast-padding: 14px;--toastify-toast-min-height: 64px;--toastify-toast-max-height: 800px;--toastify-toast-bd-radius: 6px;--toastify-toast-shadow: 0px 4px 12px rgba(0, 0, 0, .1);--toastify-font-family: sans-serif;--toastify-z-index: 9999;--toastify-text-color-light: #757575;--toastify-text-color-dark: #fff;--toastify-text-color-info: #fff;--toastify-text-color-success: #fff;--toastify-text-color-warning: #fff;--toastify-text-color-error: #fff;--toastify-spinner-color: #616161;--toastify-spinner-color-empty-area: #e0e0e0;--toastify-color-progress-light: linear-gradient(to right, #4cd964, #5ac8fa, #007aff, #34aadc, #5856d6, #ff2d55);--toastify-color-progress-dark: #bb86fc;--toastify-color-progress-info: var(--toastify-color-info);--toastify-color-progress-success: var(--toastify-color-success);--toastify-color-progress-warning: var(--toastify-color-warning);--toastify-color-progress-error: var(--toastify-color-error);--toastify-color-progress-bgo: .2}.Toastify__toast-container{z-index:var(--toastify-z-index);-webkit-transform:translate3d(0,0,var(--toastify-z-index));position:fixed;width:var(--toastify-container-width);box-sizing:border-box;color:#fff;display:flex;flex-direction:column}.Toastify__toast-container--top-left{top:var(--toastify-toast-top);left:var(--toastify-toast-left)}.Toastify__toast-container--top-center{top:var(--toastify-toast-top);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--top-right{top:var(--toastify-toast-top);right:var(--toastify-toast-right);align-items:end}.Toastify__toast-container--bottom-left{bottom:var(--toastify-toast-bottom);left:var(--toastify-toast-left)}.Toastify__toast-container--bottom-center{bottom:var(--toastify-toast-bottom);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--bottom-right{bottom:var(--toastify-toast-bottom);right:var(--toastify-toast-right);align-items:end}.Toastify__toast{--y: 0;position:relative;touch-action:none;width:var(--toastify-toast-width);min-height:var(--toastify-toast-min-height);box-sizing:border-box;margin-bottom:1rem;padding:var(--toastify-toast-padding);border-radius:var(--toastify-toast-bd-radius);box-shadow:var(--toastify-toast-shadow);max-height:var(--toastify-toast-max-height);font-family:var(--toastify-font-family);z-index:0;display:flex;flex:1 auto;align-items:center;word-break:break-word}@media only screen and (max-width: 480px){.Toastify__toast-container{width:100vw;left:env(safe-area-inset-left);margin:0}.Toastify__toast-container--top-left,.Toastify__toast-container--top-center,.Toastify__toast-container--top-right{top:env(safe-area-inset-top);transform:translate(0)}.Toastify__toast-container--bottom-left,.Toastify__toast-container--bottom-center,.Toastify__toast-container--bottom-right{bottom:env(safe-area-inset-bottom);transform:translate(0)}.Toastify__toast-container--rtl{right:env(safe-area-inset-right);left:initial}.Toastify__toast{--toastify-toast-width: 100%;margin-bottom:0;border-radius:0}}.Toastify__toast-container[data-stacked=true]{width:var(--toastify-toast-width)}.Toastify__toast--stacked{position:absolute;width:100%;transform:translate3d(0,var(--y),0) scale(var(--s));transition:transform .3s}.Toastify__toast--stacked[data-collapsed] .Toastify__toast-body,.Toastify__toast--stacked[data-collapsed] .Toastify__close-button{transition:opacity .1s}.Toastify__toast--stacked[data-collapsed=false]{overflow:visible}.Toastify__toast--stacked[data-collapsed=true]:not(:last-child)>*{opacity:0}.Toastify__toast--stacked:after{content:"";position:absolute;left:0;right:0;height:calc(var(--g) * 1px);bottom:100%}.Toastify__toast--stacked[data-pos=top]{top:0}.Toastify__toast--stacked[data-pos=bot]{bottom:0}.Toastify__toast--stacked[data-pos=bot].Toastify__toast--stacked:before{transform-origin:top}.Toastify__toast--stacked[data-pos=top].Toastify__toast--stacked:before{transform-origin:bottom}.Toastify__toast--stacked:before{content:"";position:absolute;left:0;right:0;bottom:0;height:100%;transform:scaleY(3);z-index:-1}.Toastify__toast--rtl{direction:rtl}.Toastify__toast--close-on-click{cursor:pointer}.Toastify__toast-icon{margin-inline-end:10px;width:22px;flex-shrink:0;display:flex}.Toastify--animate{animation-fill-mode:both;animation-duration:.5s}.Toastify--animate-icon{animation-fill-mode:both;animation-duration:.3s}.Toastify__toast-theme--dark{background:var(--toastify-color-dark);color:var(--toastify-text-color-dark)}.Toastify__toast-theme--light,.Toastify__toast-theme--colored.Toastify__toast--default{background:var(--toastify-color-light);color:var(--toastify-text-color-light)}.Toastify__toast-theme--colored.Toastify__toast--info{color:var(--toastify-text-color-info);background:var(--toastify-color-info)}.Toastify__toast-theme--colored.Toastify__toast--success{color:var(--toastify-text-color-success);background:var(--toastify-color-success)}.Toastify__toast-theme--colored.Toastify__toast--warning{color:var(--toastify-text-color-warning);background:var(--toastify-color-warning)}.Toastify__toast-theme--colored.Toastify__toast--error{color:var(--toastify-text-color-error);background:var(--toastify-color-error)}.Toastify__progress-bar-theme--light{background:var(--toastify-color-progress-light)}.Toastify__progress-bar-theme--dark{background:var(--toastify-color-progress-dark)}.Toastify__progress-bar--info{background:var(--toastify-color-progress-info)}.Toastify__progress-bar--success{background:var(--toastify-color-progress-success)}.Toastify__progress-bar--warning{background:var(--toastify-color-progress-warning)}.Toastify__progress-bar--error{background:var(--toastify-color-progress-error)}.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--success,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--error{background:var(--toastify-color-transparent)}.Toastify__close-button{color:#fff;position:absolute;top:6px;right:6px;background:transparent;outline:none;border:none;padding:0;cursor:pointer;opacity:.7;transition:.3s ease;z-index:1}.Toastify__toast--rtl .Toastify__close-button{left:6px;right:unset}.Toastify__close-button--light{color:#000;opacity:.3}.Toastify__close-button>svg{fill:currentColor;height:16px;width:14px}.Toastify__close-button:hover,.Toastify__close-button:focus{opacity:1}@keyframes Toastify__trackProgress{0%{transform:scaleX(1)}to{transform:scaleX(0)}}.Toastify__progress-bar{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:1;opacity:.7;transform-origin:left}.Toastify__progress-bar--animated{animation:Toastify__trackProgress linear 1 forwards}.Toastify__progress-bar--controlled{transition:transform .2s}.Toastify__progress-bar--rtl{right:0;left:initial;transform-origin:right;border-bottom-left-radius:initial}.Toastify__progress-bar--wrp{position:absolute;overflow:hidden;bottom:0;left:0;width:100%;height:5px;border-bottom-left-radius:var(--toastify-toast-bd-radius);border-bottom-right-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp[data-hidden=true]{opacity:0}.Toastify__progress-bar--bg{opacity:var(--toastify-color-progress-bgo);width:100%;height:100%}.Toastify__spinner{width:20px;height:20px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:var(--toastify-spinner-color-empty-area);border-right-color:var(--toastify-spinner-color);animation:Toastify__spin .65s linear infinite}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,var(--y),0)}to{opacity:0;transform:translate3d(2000px,var(--y),0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,var(--y),0)}to{opacity:0;transform:translate3d(-2000px,var(--y),0)}}@keyframes Toastify__bounceInUp{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutUp{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}@keyframes Toastify__bounceInDown{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutDown{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,2000px,0)}}.Toastify__bounce-enter--top-left,.Toastify__bounce-enter--bottom-left{animation-name:Toastify__bounceInLeft}.Toastify__bounce-enter--top-right,.Toastify__bounce-enter--bottom-right{animation-name:Toastify__bounceInRight}.Toastify__bounce-enter--top-center{animation-name:Toastify__bounceInDown}.Toastify__bounce-enter--bottom-center{animation-name:Toastify__bounceInUp}.Toastify__bounce-exit--top-left,.Toastify__bounce-exit--bottom-left{animation-name:Toastify__bounceOutLeft}.Toastify__bounce-exit--top-right,.Toastify__bounce-exit--bottom-right{animation-name:Toastify__bounceOutRight}.Toastify__bounce-exit--top-center{animation-name:Toastify__bounceOutUp}.Toastify__bounce-exit--bottom-center{animation-name:Toastify__bounceOutDown}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}50%{opacity:0;transform:translate3d(0,var(--y),0) scale3d(.3,.3,.3)}to{opacity:0}}.Toastify__zoom-enter{animation-name:Toastify__zoomIn}.Toastify__zoom-exit{animation-name:Toastify__zoomOut}@keyframes Toastify__flipIn{0%{transform:perspective(400px) rotateX(90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotateX(-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotateX(10deg);opacity:1}80%{transform:perspective(400px) rotateX(-5deg)}to{transform:perspective(400px)}}@keyframes Toastify__flipOut{0%{transform:translate3d(0,var(--y),0) perspective(400px)}30%{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(-20deg);opacity:1}to{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(90deg);opacity:0}}.Toastify__flip-enter{animation-name:Toastify__flipIn}.Toastify__flip-exit{animation-name:Toastify__flipOut}@keyframes Toastify__slideInRight{0%{transform:translate3d(110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInLeft{0%{transform:translate3d(-110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInUp{0%{transform:translate3d(0,110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInDown{0%{transform:translate3d(0,-110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideOutRight{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(110%,var(--y),0)}}@keyframes Toastify__slideOutLeft{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(-110%,var(--y),0)}}@keyframes Toastify__slideOutDown{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,500px,0)}}@keyframes Toastify__slideOutUp{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,-500px,0)}}.Toastify__slide-enter--top-left,.Toastify__slide-enter--bottom-left{animation-name:Toastify__slideInLeft}.Toastify__slide-enter--top-right,.Toastify__slide-enter--bottom-right{animation-name:Toastify__slideInRight}.Toastify__slide-enter--top-center{animation-name:Toastify__slideInDown}.Toastify__slide-enter--bottom-center{animation-name:Toastify__slideInUp}.Toastify__slide-exit--top-left,.Toastify__slide-exit--bottom-left{animation-name:Toastify__slideOutLeft;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-right,.Toastify__slide-exit--bottom-right{animation-name:Toastify__slideOutRight;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-center{animation-name:Toastify__slideOutUp;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--bottom-center{animation-name:Toastify__slideOutDown;animation-timing-function:ease-in;animation-duration:.3s}@keyframes Toastify__spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}\n');var mt=e=>"number"==typeof e&&!isNaN(e),pt=e=>"string"==typeof e,gt=e=>"function"==typeof e,yt=e=>pt(e)||gt(e)?e:null,vt=(e,t)=>!1===e||mt(e)&&e>0?e:t,xt=e=>(0,r.isValidElement)(e)||pt(e)||gt(e)||mt(e);function bt(e){let{enter:t,exit:n,appendPosition:s=!1,collapse:i=!0,collapseDuration:a=300}=e;return function(e){let{children:o,position:l,preventExitTransition:c,done:u,nodeRef:d,isIn:h,playToast:f}=e,m=s?`${t}--${l}`:t,p=s?`${n}--${l}`:n,g=(0,r.useRef)(0);return(0,r.useLayoutEffect)((()=>{let e=d.current,t=m.split(" "),n=r=>{r.target===d.current&&(f(),e.removeEventListener("animationend",n),e.removeEventListener("animationcancel",n),0===g.current&&"animationcancel"!==r.type&&e.classList.remove(...t))};e.classList.add(...t),e.addEventListener("animationend",n),e.addEventListener("animationcancel",n)}),[]),(0,r.useEffect)((()=>{let e=d.current,t=()=>{e.removeEventListener("animationend",t),i?function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:300,{scrollHeight:r,style:s}=e;requestAnimationFrame((()=>{s.minHeight="initial",s.height=r+"px",s.transition=`all ${n}ms`,requestAnimationFrame((()=>{s.height="0",s.padding="0",s.margin="0",setTimeout(t,n)}))}))}(e,u,a):u()};h||(c?t():(g.current=1,e.className+=` ${p}`,e.addEventListener("animationend",t)))}),[h]),r.createElement(r.Fragment,null,o)}}function wt(e,t){return{content:_t(e.content,e.props),containerId:e.props.containerId,id:e.props.toastId,theme:e.props.theme,type:e.props.type,data:e.props.data||{},isLoading:e.props.isLoading,icon:e.props.icon,reason:e.removalReason,status:t}}function _t(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return(0,r.isValidElement)(e)&&!pt(e.type)?(0,r.cloneElement)(e,{closeToast:t.closeToast,toastProps:t,data:t.data,isPaused:n}):gt(e)?e({closeToast:t.closeToast,toastProps:t,data:t.data,isPaused:n}):e}function kt(e){let{delay:t,isRunning:n,closeToast:s,type:i="default",hide:a,className:o,controlledProgress:l,progress:c,rtl:u,isIn:d,theme:h}=e,f=a||l&&0===c,m={animationDuration:`${t}ms`,animationPlayState:n?"running":"paused"};l&&(m.transform=`scaleX(${c})`);let p=ft("Toastify__progress-bar",l?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${h}`,`Toastify__progress-bar--${i}`,{"Toastify__progress-bar--rtl":u}),g=gt(o)?o({rtl:u,type:i,defaultClassName:p}):ft(p,o),y={[l&&c>=1?"onTransitionEnd":"onAnimationEnd"]:l&&c<1?null:()=>{d&&s()}};return r.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":f},r.createElement("div",{className:`Toastify__progress-bar--bg Toastify__progress-bar-theme--${h} Toastify__progress-bar--${i}`}),r.createElement("div",{role:"progressbar","aria-hidden":f?"true":"false","aria-label":"notification timer",className:g,style:m,...y}))}var Nt=1,St=()=>""+Nt++;function Et(e,t,n){let r=1,s=0,i=[],a=[],o=t,l=new Map,c=new Set,u=()=>{a=Array.from(l.values()),c.forEach((e=>e()))},d=e=>{var t,n;null==(n=null==(t=e.props)?void 0:t.onClose)||n.call(t,e.removalReason),e.isActive=!1},h=e=>{if(null==e)l.forEach(d);else{let t=l.get(e);t&&d(t)}u()},f=e=>{var t,r;let{toastId:s,updateId:i}=e.props,a=null==i;e.staleId&&l.delete(e.staleId),e.isActive=!0,l.set(s,e),u(),n(wt(e,a?"added":"updated")),a&&(null==(r=(t=e.props).onOpen)||r.call(t))};return{id:e,props:o,observe:e=>(c.add(e),()=>c.delete(e)),toggle:(e,t)=>{l.forEach((n=>{var r;(null==t||t===n.props.toastId)&&(null==(r=n.toggle)||r.call(n,e))}))},removeToast:h,toasts:l,clearQueue:()=>{s-=i.length,i=[]},buildToast:(t,a)=>{if((t=>{let{containerId:n,toastId:r,updateId:s}=t,i=n?n!==e:1!==e,a=l.has(r)&&null==s;return i||a})(a))return;let{toastId:c,updateId:d,data:m,staleId:p,delay:g}=a,y=null==d;y&&s++;let v={...o,style:o.toastStyle,key:r++,...Object.fromEntries(Object.entries(a).filter((e=>{let[t,n]=e;return null!=n}))),toastId:c,updateId:d,data:m,isIn:!1,className:yt(a.className||o.toastClassName),progressClassName:yt(a.progressClassName||o.progressClassName),autoClose:!a.isLoading&&vt(a.autoClose,o.autoClose),closeToast(e){l.get(c).removalReason=e,h(c)},deleteToast(){let e=l.get(c);if(null!=e){if(n(wt(e,"removed")),l.delete(c),s--,s<0&&(s=0),i.length>0)return void f(i.shift());u()}}};v.closeButton=o.closeButton,!1===a.closeButton||xt(a.closeButton)?v.closeButton=a.closeButton:!0===a.closeButton&&(v.closeButton=!xt(o.closeButton)||o.closeButton);let x={content:t,props:v,staleId:p};o.limit&&o.limit>0&&s>o.limit&&y?i.push(x):mt(g)?setTimeout((()=>{f(x)}),g):f(x)},setProps(e){o=e},setToggle:(e,t)=>{let n=l.get(e);n&&(n.toggle=t)},isToastActive:e=>{var t;return null==(t=l.get(e))?void 0:t.isActive},getSnapshot:()=>a}}var jt=new Map,Ct=[],Tt=new Set,At=e=>Tt.forEach((t=>t(e))),It=()=>jt.size>0;function Mt(e,t){var n;if(t)return!(null==(n=jt.get(t))||!n.isToastActive(e));let r=!1;return jt.forEach((t=>{t.isToastActive(e)&&(r=!0)})),r}function Pt(e){if(It()){if(null==e||(e=>pt(e)||mt(e))(e))jt.forEach((t=>{t.removeToast(e)}));else if(e&&("containerId"in e||"id"in e)){let t=jt.get(e.containerId);t?t.removeToast(e.id):jt.forEach((t=>{t.removeToast(e.id)}))}}else Ct=Ct.filter((t=>null!=e&&t.options.toastId!==e))}function Rt(e,t){xt(e)&&(It()||Ct.push({content:e,options:t}),jt.forEach((n=>{n.buildToast(e,t)})))}function Lt(e,t){jt.forEach((n=>{(null==t||null==t||!t.containerId||(null==t?void 0:t.containerId)===n.id)&&n.toggle(e,null==t?void 0:t.id)}))}function Dt(e){let t=e.containerId||1;return{subscribe(n){let r=Et(t,e,At);jt.set(t,r);let s=r.observe(n);return Ct.forEach((e=>Rt(e.content,e.options))),Ct=[],()=>{s(),jt.delete(t)}},setProps(e){var n;null==(n=jt.get(t))||n.setProps(e)},getSnapshot(){var e;return null==(e=jt.get(t))?void 0:e.getSnapshot()}}}function Ot(e){return e&&(pt(e.toastId)||mt(e.toastId))?e.toastId:St()}function Ft(e,t){return Rt(e,t),t.toastId}function Vt(e,t){return{...t,type:t&&t.type||e,toastId:Ot(t)}}function zt(e){return(t,n)=>Ft(t,Vt(e,n))}function Ut(e,t){return Ft(e,Vt("default",t))}function Bt(e){let[t,n]=(0,r.useState)(!1),[s,i]=(0,r.useState)(!1),a=(0,r.useRef)(null),o=(0,r.useRef)({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:l,pauseOnHover:c,closeToast:u,onClick:d,closeOnClick:h}=e;function f(){n(!0)}function m(){n(!1)}function p(n){let r=a.current;if(o.canDrag&&r){o.didMove=!0,t&&m(),"x"===e.draggableDirection?o.delta=n.clientX-o.start:o.delta=n.clientY-o.start,o.start!==n.clientX&&(o.canCloseOnClick=!1);let s="x"===e.draggableDirection?`${o.delta}px, var(--y)`:`0, calc(${o.delta}px + var(--y))`;r.style.transform=`translate3d(${s},0)`,r.style.opacity=""+(1-Math.abs(o.delta/o.removalDistance))}}function g(){document.removeEventListener("pointermove",p),document.removeEventListener("pointerup",g);let t=a.current;if(o.canDrag&&o.didMove&&t){if(o.canDrag=!1,Math.abs(o.delta)>o.removalDistance)return i(!0),e.closeToast(!0),void e.collapseAll();t.style.transition="transform 0.2s, opacity 0.2s",t.style.removeProperty("transform"),t.style.removeProperty("opacity")}}(function(e){var t;null==(t=jt.get(e.containerId||1))||t.setToggle(e.id,e.fn)})({id:e.toastId,containerId:e.containerId,fn:n}),(0,r.useEffect)((()=>{if(e.pauseOnFocusLoss)return document.hasFocus()||m(),window.addEventListener("focus",f),window.addEventListener("blur",m),()=>{window.removeEventListener("focus",f),window.removeEventListener("blur",m)}}),[e.pauseOnFocusLoss]);let y={onPointerDown:function(t){if(!0===e.draggable||e.draggable===t.pointerType){o.didMove=!1,document.addEventListener("pointermove",p),document.addEventListener("pointerup",g);let n=a.current;o.canCloseOnClick=!0,o.canDrag=!0,n.style.transition="none","x"===e.draggableDirection?(o.start=t.clientX,o.removalDistance=n.offsetWidth*(e.draggablePercent/100)):(o.start=t.clientY,o.removalDistance=n.offsetHeight*(80===e.draggablePercent?1.5*e.draggablePercent:e.draggablePercent)/100)}},onPointerUp:function(t){let{top:n,bottom:r,left:s,right:i}=a.current.getBoundingClientRect();"touchend"!==t.nativeEvent.type&&e.pauseOnHover&&t.clientX>=s&&t.clientX<=i&&t.clientY>=n&&t.clientY<=r?m():f()}};return l&&c&&(y.onMouseEnter=m,e.stacked||(y.onMouseLeave=f)),h&&(y.onClick=e=>{d&&d(e),o.canCloseOnClick&&u(!0)}),{playToast:f,pauseToast:m,isRunning:t,preventExitTransition:s,toastRef:a,eventHandlers:y}}Ut.loading=(e,t)=>Ft(e,Vt("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...t})),Ut.promise=function(e,t,n){let r,{pending:s,error:i,success:a}=t;s&&(r=pt(s)?Ut.loading(s,n):Ut.loading(s.render,{...n,...s}));let o={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},l=(e,t,s)=>{if(null==t)return void Ut.dismiss(r);let i={type:e,...o,...n,data:s},a=pt(t)?{render:t}:t;return r?Ut.update(r,{...i,...a}):Ut(a.render,{...i,...a}),s},c=gt(e)?e():e;return c.then((e=>l("success",a,e))).catch((e=>l("error",i,e))),c},Ut.success=zt("success"),Ut.info=zt("info"),Ut.error=zt("error"),Ut.warning=zt("warning"),Ut.warn=Ut.warning,Ut.dark=(e,t)=>Ft(e,Vt("default",{theme:"dark",...t})),Ut.dismiss=function(e){Pt(e)},Ut.clearWaitingQueue=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};jt.forEach((t=>{t.props.limit&&(!e.containerId||t.id===e.containerId)&&t.clearQueue()}))},Ut.isActive=Mt,Ut.update=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=((e,t)=>{let{containerId:n}=t;var r;return null==(r=jt.get(n||1))?void 0:r.toasts.get(e)})(e,t);if(n){let{props:r,content:s}=n,i={delay:100,...r,...t,toastId:t.toastId||e,updateId:St()};i.toastId!==e&&(i.staleId=e);let a=i.render||s;delete i.render,Ft(a,i)}},Ut.done=e=>{Ut.update(e,{progress:1})},Ut.onChange=function(e){return Tt.add(e),()=>{Tt.delete(e)}},Ut.play=e=>Lt(!0,e),Ut.pause=e=>Lt(!1,e);var $t="undefined"!=typeof window?r.useLayoutEffect:r.useEffect,Ht=e=>{let{theme:t,type:n,isLoading:s,...i}=e;return r.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:"colored"===t?"currentColor":`var(--toastify-icon-color-${n})`,...i})};var Wt={info:function(e){return r.createElement(Ht,{...e},r.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))},warning:function(e){return r.createElement(Ht,{...e},r.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))},success:function(e){return r.createElement(Ht,{...e},r.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))},error:function(e){return r.createElement(Ht,{...e},r.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))},spinner:function(){return r.createElement("div",{className:"Toastify__spinner"})}};function qt(e){let{theme:t,type:n,isLoading:s,icon:i}=e,a=null,o={theme:t,type:n};return!1===i||(gt(i)?a=i({...o,isLoading:s}):(0,r.isValidElement)(i)?a=(0,r.cloneElement)(i,o):s?a=Wt.spinner():(e=>e in Wt)(n)&&(a=Wt[n](o))),a}var Kt=e=>{let{isRunning:t,preventExitTransition:n,toastRef:s,eventHandlers:i,playToast:a}=Bt(e),{closeButton:o,children:l,autoClose:c,onClick:u,type:d,hideProgressBar:h,closeToast:f,transition:m,position:p,className:g,style:y,progressClassName:v,updateId:x,role:b,progress:w,rtl:_,toastId:k,deleteToast:N,isIn:S,isLoading:E,closeOnClick:j,theme:C,ariaLabel:T}=e,A=ft("Toastify__toast",`Toastify__toast-theme--${C}`,`Toastify__toast--${d}`,{"Toastify__toast--rtl":_},{"Toastify__toast--close-on-click":j}),I=gt(g)?g({rtl:_,position:p,type:d,defaultClassName:A}):ft(A,g),M=qt(e),P=!!w||!c,R={closeToast:f,type:d,theme:C},L=null;return!1===o||(L=gt(o)?o(R):(0,r.isValidElement)(o)?(0,r.cloneElement)(o,R):function(e){let{closeToast:t,theme:n,ariaLabel:s="close"}=e;return r.createElement("button",{className:`Toastify__close-button Toastify__close-button--${n}`,type:"button",onClick:e=>{e.stopPropagation(),t(!0)},"aria-label":s},r.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},r.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}(R)),r.createElement(m,{isIn:S,done:N,position:p,preventExitTransition:n,nodeRef:s,playToast:a},r.createElement("div",{id:k,tabIndex:0,onClick:u,"data-in":S,className:I,...i,style:y,ref:s,...S&&{role:b,"aria-label":T}},null!=M&&r.createElement("div",{className:ft("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!E})},M),_t(l,e,!t),L,!e.customProgressBar&&r.createElement(kt,{...x&&!P?{key:`p-${x}`}:{},rtl:_,theme:C,delay:c,isRunning:t,isIn:S,closeToast:f,hide:h,type:d,className:v,controlledProgress:P,progress:w||0})))},Gt=function(e){return{enter:`Toastify--animate Toastify__${e}-enter`,exit:`Toastify--animate Toastify__${e}-exit`,appendPosition:arguments.length>1&&void 0!==arguments[1]&&arguments[1]}},Yt=bt(Gt("bounce",!0)),Qt=(bt(Gt("slide",!0)),bt(Gt("zoom")),bt(Gt("flip")),{position:"top-right",transition:Yt,autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light","aria-label":"Notifications Alt+T",hotKeys:e=>e.altKey&&"KeyT"===e.code});function Xt(e){let t={...Qt,...e},n=e.stacked,[s,i]=(0,r.useState)(!0),a=(0,r.useRef)(null),{getToastToRender:o,isToastActive:l,count:c}=function(e){var t;let{subscribe:n,getSnapshot:s,setProps:i}=(0,r.useRef)(Dt(e)).current;i(e);let a=null==(t=(0,r.useSyncExternalStore)(n,s,s))?void 0:t.slice();return{getToastToRender:function(t){if(!a)return[];let n=new Map;return e.newestOnTop&&a.reverse(),a.forEach((e=>{let{position:t}=e.props;n.has(t)||n.set(t,[]),n.get(t).push(e)})),Array.from(n,(e=>t(e[0],e[1])))},isToastActive:Mt,count:null==a?void 0:a.length}}(t),{className:u,style:d,rtl:h,containerId:f,hotKeys:m}=t;function p(e){let t=ft("Toastify__toast-container",`Toastify__toast-container--${e}`,{"Toastify__toast-container--rtl":h});return gt(u)?u({position:e,rtl:h,defaultClassName:t}):ft(t,yt(u))}function g(){n&&(i(!0),Ut.play())}return $t((()=>{var e;if(n){let n=a.current.querySelectorAll('[data-in="true"]'),r=12,i=null==(e=t.position)?void 0:e.includes("top"),o=0,l=0;Array.from(n).reverse().forEach(((e,t)=>{let n=e;n.classList.add("Toastify__toast--stacked"),t>0&&(n.dataset.collapsed=`${s}`),n.dataset.pos||(n.dataset.pos=i?"top":"bot");let a=o*(s?.2:1)+(s?0:r*t);n.style.setProperty("--y",`${i?a:-1*a}px`),n.style.setProperty("--g",`${r}`),n.style.setProperty("--s",""+(1-(s?l:0))),o+=n.offsetHeight,l+=.025}))}}),[s,c,n]),(0,r.useEffect)((()=>{function e(e){var t;let n=a.current;m(e)&&(null==(t=n.querySelector('[tabIndex="0"]'))||t.focus(),i(!1),Ut.pause()),"Escape"===e.key&&(document.activeElement===n||null!=n&&n.contains(document.activeElement))&&(i(!0),Ut.play())}return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}}),[m]),r.createElement("section",{ref:a,className:"Toastify",id:f,onMouseEnter:()=>{n&&(i(!1),Ut.pause())},onMouseLeave:g,"aria-live":"polite","aria-atomic":"false","aria-relevant":"additions text","aria-label":t["aria-label"]},o(((e,t)=>{let s=t.length?{...d}:{...d,pointerEvents:"none"};return r.createElement("div",{tabIndex:-1,className:p(e),"data-stacked":n,style:s,key:`c-${e}`},t.map((e=>{let{content:t,props:s}=e;return r.createElement(Kt,{...s,stacked:n,collapseAll:g,isIn:l(s.toastId,s.containerId),key:`t-${s.key}`},t)})))})))}var Jt=n(414);const Zt=(0,r.createContext)(),en=e=>{let{children:t}=e;const[n,s]=(0,r.useState)((()=>"true"===localStorage.getItem("darkMode")));(0,r.useEffect)((()=>{n?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),localStorage.setItem("darkMode",n)}),[n]);return(0,Jt.jsx)(Zt.Provider,{value:{darkMode:n,toggleDarkMode:()=>{s((e=>!e))}},children:t})},tn=()=>(0,r.useContext)(Zt),nn=(0,r.createContext)(),rn=e=>{let{children:t}=e;const[n,s]=(0,r.useState)({username:"",isLoading:!0});return(0,r.useEffect)((()=>{(async()=>{try{const t=localStorage.getItem("adminToken");if(!t)return void s({username:"",isLoading:!1});try{const e=JSON.parse(atob(t.split(".")[1]));s({username:e.name||"Admin User",isLoading:!1})}catch(e){s({username:"Admin User",isLoading:!1})}}catch(e){console.error("Error fetching user info:",e),s({username:"",isLoading:!1})}})()}),[]),(0,Jt.jsx)(nn.Provider,{value:{user:n,setUser:s},children:t})},sn=(0,r.createContext)(),an=e=>{let{children:t}=e;const n=ee();return(0,r.useEffect)((()=>{document.title={"/login":"Dulalia Homes Admin - Login","/admin/dashboard":"Dulalia Homes Admin - Dashboard","/":"Dulalia Homes Admin"}[n.pathname]||"Dulalia Homes Admin"}),[n]),(0,Jt.jsx)(sn.Provider,{value:{},children:t})},on=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let s=e.charCodeAt(r);s<128?t[n++]=s:s<2048?(t[n++]=s>>6|192,t[n++]=63&s|128):55296===(64512&s)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(s=65536+((1023&s)<<10)+(1023&e.charCodeAt(++r)),t[n++]=s>>18|240,t[n++]=s>>12&63|128,t[n++]=s>>6&63|128,t[n++]=63&s|128):(t[n++]=s>>12|224,t[n++]=s>>6&63|128,t[n++]=63&s|128)}return t},ln={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<e.length;s+=3){const t=e[s],i=s+1<e.length,a=i?e[s+1]:0,o=s+2<e.length,l=o?e[s+2]:0,c=t>>2,u=(3&t)<<4|a>>4;let d=(15&a)<<2|l>>6,h=63&l;o||(h=64,i||(d=64)),r.push(n[c],n[u],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(on(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const s=e[n++];if(s<128)t[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=e[n++];t[r++]=String.fromCharCode((31&s)<<6|63&i)}else if(s>239&&s<365){const i=((7&s)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(i>>10)),t[r++]=String.fromCharCode(56320+(1023&i))}else{const i=e[n++],a=e[n++];t[r++]=String.fromCharCode((15&s)<<12|(63&i)<<6|63&a)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<e.length;){const t=n[e.charAt(s++)],i=s<e.length?n[e.charAt(s)]:0;++s;const a=s<e.length?n[e.charAt(s)]:64;++s;const o=s<e.length?n[e.charAt(s)]:64;if(++s,null==t||null==i||null==a||null==o)throw new cn;const l=t<<2|i>>4;if(r.push(l),64!==a){const e=i<<4&240|a>>2;if(r.push(e),64!==o){const e=a<<6&192|o;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class cn extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const un=function(e){return function(e){const t=on(e);return ln.encodeByteArray(t,!0)}(e).replace(/\./g,"")},dn=function(e){try{return ln.decodeString(e,!0)}catch(hF){console.error("base64Decode failed: ",hF)}return null};function hn(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}const fn=()=>{try{return hn().__FIREBASE_DEFAULTS__||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_PUBLIC_URL:""}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(hF){return}const t=e&&dn(e[1]);return t&&JSON.parse(t)})()}catch(hF){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${hF}`)}},mn=e=>{var t,n;return null===(n=null===(t=fn())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},pn=e=>{const t=mn(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]},gn=()=>{var e;return null===(e=fn())||void 0===e?void 0:e.config},yn=e=>{var t;return null===(t=fn())||void 0===t?void 0:t[`_${e}`]};class vn{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function xn(e){return e.endsWith(".cloudworkstations.dev")}async function bn(e){return(await fetch(e,{credentials:"include"})).ok}function wn(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const i=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},e);return[un(JSON.stringify({alg:"none",type:"JWT"})),un(JSON.stringify(i)),""].join(".")}const _n={};let kn=!1;function Nn(e,t){if("undefined"===typeof window||"undefined"===typeof document||!xn(window.location.host)||_n[e]===t||_n[e]||kn)return;function n(e){return`__firebase__banner__${e}`}_n[e]=t;const r="__firebase__banner",s=function(){const e={prod:[],emulator:[]};for(const t of Object.keys(_n))_n[t]?e.emulator.push(t):e.prod.push(t);return e}().prod.length>0;function i(){const e=document.createElement("span");return e.style.cursor="pointer",e.style.marginLeft="16px",e.style.fontSize="24px",e.innerHTML=" &times;",e.onclick=()=>{kn=!0,function(){const e=document.getElementById(r);e&&e.remove()}()},e}function a(){const e=function(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}(r),t=n("text"),a=document.getElementById(t)||document.createElement("span"),o=n("learnmore"),l=document.getElementById(o)||document.createElement("a"),c=n("preprendIcon"),u=document.getElementById(c)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(e.created){const t=e.element;!function(e){e.style.display="flex",e.style.background="#7faaf0",e.style.position="fixed",e.style.bottom="5px",e.style.left="5px",e.style.padding=".5em",e.style.borderRadius="5px",e.style.alignItems="center"}(t),function(e,t){e.setAttribute("id",t),e.innerText="Learn more",e.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",e.setAttribute("target","__blank"),e.style.paddingLeft="5px",e.style.textDecoration="underline"}(l,o);const n=i();!function(e,t){e.setAttribute("width","24"),e.setAttribute("id",t),e.setAttribute("height","24"),e.setAttribute("viewBox","0 0 24 24"),e.setAttribute("fill","none"),e.style.marginLeft="-6px"}(u,c),t.append(u,a,l,n),document.body.appendChild(t)}s?(a.innerText="Preview backend disconnected.",u.innerHTML='<g clip-path="url(#clip0_6013_33858)">\n<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6013_33858">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>'):(u.innerHTML='<g clip-path="url(#clip0_6083_34804)">\n<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6083_34804">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>',a.innerText="Preview backend running in this workspace."),a.setAttribute("id",t)}"loading"===document.readyState?window.addEventListener("DOMContentLoaded",a):a()}function Sn(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function En(){return!function(){var e;const t=null===(e=fn())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(hF){return!1}}()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function jn(){try{return"object"===typeof indexedDB}catch(hF){return!1}}class Cn extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,Cn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Tn.prototype.create)}}class Tn{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n=`${this.service}/${e}`,r=this.errors[e],s=r?function(e,t){return e.replace(An,((e,n)=>{const r=t[n];return null!=r?String(r):`<${n}?>`}))}(r,t):"Error",i=`${this.serviceName}: ${s} (${n}).`;return new Cn(n,i,t)}}const An=/\{\$([^}]+)}/g;function In(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const s of n){if(!r.includes(s))return!1;const n=e[s],i=t[s];if(Mn(n)&&Mn(i)){if(!In(n,i))return!1}else if(n!==i)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Mn(e){return null!==e&&"object"===typeof e}function Pn(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function Rn(e){const t={};return e.replace(/^\?/,"").split("&").forEach((e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}})),t}function Ln(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class Dn{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=On),void 0===r.error&&(r.error=On),void 0===r.complete&&(r.complete=On);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(hF){}})),this.observers.push(r),s}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(hF){"undefined"!==typeof console&&console.error&&console.error(hF)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function On(){}function Fn(e){return e&&e._delegate?e._delegate:e}class Vn{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const zn="[DEFAULT]";class Un{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new vn;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(hF){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(hF){if(r)return null;throw hF}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:zn})}catch(hF){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(hF){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:zn;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:zn;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:zn;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[s,i]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(s)&&i.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),s=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const s of n)try{s(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(s=t,s===zn?void 0:s),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(i){}var s;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:zn;return this.component?this.component.multipleInstances?e:zn:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Bn{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Un(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const $n=[];var Hn;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Hn||(Hn={}));const Wn={debug:Hn.DEBUG,verbose:Hn.VERBOSE,info:Hn.INFO,warn:Hn.WARN,error:Hn.ERROR,silent:Hn.SILENT},qn=Hn.INFO,Kn={[Hn.DEBUG]:"log",[Hn.VERBOSE]:"log",[Hn.INFO]:"info",[Hn.WARN]:"warn",[Hn.ERROR]:"error"},Gn=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=Kn[t];if(!r)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);for(var s=arguments.length,i=new Array(s>2?s-2:0),a=2;a<s;a++)i[a-2]=arguments[a];console[r](`[${n}]  ${e.name}:`,...i)};class Yn{constructor(e){this.name=e,this._logLevel=qn,this._logHandler=Gn,this._userLogHandler=null,$n.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Hn))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?Wn[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Hn.DEBUG,...t),this._logHandler(this,Hn.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Hn.VERBOSE,...t),this._logHandler(this,Hn.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Hn.INFO,...t),this._logHandler(this,Hn.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Hn.WARN,...t),this._logHandler(this,Hn.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Hn.ERROR,...t),this._logHandler(this,Hn.ERROR,...t)}}let Qn,Xn;const Jn=new WeakMap,Zn=new WeakMap,er=new WeakMap,tr=new WeakMap,nr=new WeakMap;let rr={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Zn.get(e);if("objectStoreNames"===t)return e.objectStoreNames||er.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ar(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function sr(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Xn||(Xn=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(or(this),n),ar(Jn.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return ar(e.apply(or(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];const i=e.call(or(this),t,...r);return er.set(i,t.sort?t.sort():[t]),ar(i)}}function ir(e){return"function"===typeof e?sr(e):(e instanceof IDBTransaction&&function(e){if(Zn.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",i),e.removeEventListener("abort",i)},s=()=>{t(),r()},i=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",s),e.addEventListener("error",i),e.addEventListener("abort",i)}));Zn.set(e,t)}(e),t=e,(Qn||(Qn=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((e=>t instanceof e))?new Proxy(e,rr):e);var t}function ar(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",s),e.removeEventListener("error",i)},s=()=>{t(ar(e.result)),r()},i=()=>{n(e.error),r()};e.addEventListener("success",s),e.addEventListener("error",i)}));return t.then((t=>{t instanceof IDBCursor&&Jn.set(t,e)})).catch((()=>{})),nr.set(t,e),t}(e);if(tr.has(e))return tr.get(e);const t=ir(e);return t!==e&&(tr.set(e,t),nr.set(t,e)),t}const or=e=>nr.get(e);const lr=["get","getKey","getAll","getAllKeys","count"],cr=["put","add","delete","clear"],ur=new Map;function dr(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(ur.get(t))return ur.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,s=cr.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!s&&!lr.includes(n))return;const i=async function(e){const t=this.transaction(e,s?"readwrite":"readonly");let i=t.store;for(var a=arguments.length,o=new Array(a>1?a-1:0),l=1;l<a;l++)o[l-1]=arguments[l];return r&&(i=i.index(o.shift())),(await Promise.all([i[n](...o),s&&t.done]))[0]};return ur.set(t,i),i}!function(e){rr=e(rr)}((e=>({...e,get:(t,n,r)=>dr(t,n)||e.get(t,n,r),has:(t,n)=>!!dr(t,n)||e.has(t,n)})));class hr{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null})).filter((e=>e)).join(" ")}}const fr="@firebase/app",mr="0.12.3",pr=new Yn("@firebase/app"),gr="@firebase/app-compat",yr="@firebase/analytics-compat",vr="@firebase/analytics",xr="@firebase/app-check-compat",br="@firebase/app-check",wr="@firebase/auth",_r="@firebase/auth-compat",kr="@firebase/database",Nr="@firebase/data-connect",Sr="@firebase/database-compat",Er="@firebase/functions",jr="@firebase/functions-compat",Cr="@firebase/installations",Tr="@firebase/installations-compat",Ar="@firebase/messaging",Ir="@firebase/messaging-compat",Mr="@firebase/performance",Pr="@firebase/performance-compat",Rr="@firebase/remote-config",Lr="@firebase/remote-config-compat",Dr="@firebase/storage",Or="@firebase/storage-compat",Fr="@firebase/firestore",Vr="@firebase/vertexai",zr="@firebase/firestore-compat",Ur="firebase",Br="[DEFAULT]",$r={[fr]:"fire-core",[gr]:"fire-core-compat",[vr]:"fire-analytics",[yr]:"fire-analytics-compat",[br]:"fire-app-check",[xr]:"fire-app-check-compat",[wr]:"fire-auth",[_r]:"fire-auth-compat",[kr]:"fire-rtdb",[Nr]:"fire-data-connect",[Sr]:"fire-rtdb-compat",[Er]:"fire-fn",[jr]:"fire-fn-compat",[Cr]:"fire-iid",[Tr]:"fire-iid-compat",[Ar]:"fire-fcm",[Ir]:"fire-fcm-compat",[Mr]:"fire-perf",[Pr]:"fire-perf-compat",[Rr]:"fire-rc",[Lr]:"fire-rc-compat",[Dr]:"fire-gcs",[Or]:"fire-gcs-compat",[Fr]:"fire-fst",[zr]:"fire-fst-compat",[Vr]:"fire-vertex","fire-js":"fire-js",[Ur]:"fire-js-all"},Hr=new Map,Wr=new Map,qr=new Map;function Kr(e,t){try{e.container.addComponent(t)}catch(hF){pr.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,hF)}}function Gr(e){const t=e.name;if(qr.has(t))return pr.debug(`There were multiple attempts to register component ${t}.`),!1;qr.set(t,e);for(const n of Hr.values())Kr(n,e);for(const n of Wr.values())Kr(n,e);return!0}function Yr(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Qr(e){return null!==e&&void 0!==e&&void 0!==e.settings}const Xr=new Tn("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class Jr{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Vn("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Xr.create("app-deleted",{appName:this._name})}}const Zr="11.7.3";function es(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:Br,automaticDataCollectionEnabled:!1},t),s=r.name;if("string"!==typeof s||!s)throw Xr.create("bad-app-name",{appName:String(s)});if(n||(n=gn()),!n)throw Xr.create("no-options");const i=Hr.get(s);if(i){if(In(n,i.options)&&In(r,i.config))return i;throw Xr.create("duplicate-app",{appName:s})}const a=new Bn(s);for(const l of qr.values())a.addComponent(l);const o=new Jr(n,r,a);return Hr.set(s,o),o}function ts(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Br;const t=Hr.get(e);if(!t&&e===Br&&gn())return es();if(!t)throw Xr.create("no-app",{appName:e});return t}function ns(e,t,n){var r;let s=null!==(r=$r[e])&&void 0!==r?r:e;n&&(s+=`-${n}`);const i=s.match(/\s|\//),a=t.match(/\s|\//);if(i||a){const e=[`Unable to register library "${s}" with version "${t}":`];return i&&e.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&a&&e.push("and"),a&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void pr.warn(e.join(" "))}Gr(new Vn(`${s}-version`,(()=>({library:s,version:t})),"VERSION"))}const rs="firebase-heartbeat-store";let ss=null;function is(){return ss||(ss=function(e,t){let{blocked:n,upgrade:r,blocking:s,terminated:i}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=indexedDB.open(e,t),o=ar(a);return r&&a.addEventListener("upgradeneeded",(e=>{r(ar(a.result),e.oldVersion,e.newVersion,ar(a.transaction),e)})),n&&a.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),o.then((e=>{i&&e.addEventListener("close",(()=>i())),s&&e.addEventListener("versionchange",(e=>s(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),o}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(rs)}catch(hF){console.warn(hF)}}}).catch((e=>{throw Xr.create("idb-open",{originalErrorMessage:e.message})}))),ss}async function as(e,t){try{const n=(await is()).transaction(rs,"readwrite"),r=n.objectStore(rs);await r.put(t,os(e)),await n.done}catch(hF){if(hF instanceof Cn)pr.warn(hF.message);else{const t=Xr.create("idb-set",{originalErrorMessage:null===hF||void 0===hF?void 0:hF.message});pr.warn(t.message)}}}function os(e){return`${e.name}!${e.options.appId}`}class ls{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new us(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){var e,t;try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=cs();if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some((e=>e.date===r)))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>30){const e=function(e){if(0===e.length)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(hF){pr.warn(hF)}}async getHeartbeatsHeader(){var e;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=cs(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const s of e){const e=n.find((e=>e.agent===s.agent));if(e){if(e.dates.push(s.date),ds(n)>t){e.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),ds(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),s=un(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(hF){return pr.warn(hF),""}}}function cs(){return(new Date).toISOString().substring(0,10)}class us{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!jn()&&new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var e;t((null===(e=s.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}})).then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await is()).transaction(rs),n=await t.objectStore(rs).get(os(e));return await t.done,n}catch(hF){if(hF instanceof Cn)pr.warn(hF.message);else{const t=Xr.create("idb-get",{originalErrorMessage:null===hF||void 0===hF?void 0:hF.message});pr.warn(t.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return as(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return as(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function ds(e){return un(JSON.stringify({version:2,heartbeats:e})).length}var hs;hs="",Gr(new Vn("platform-logger",(e=>new hr(e)),"PRIVATE")),Gr(new Vn("heartbeat",(e=>new ls(e)),"PRIVATE")),ns(fr,mr,hs),ns(fr,mr,"esm2017"),ns("fire-js","");function fs(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;function ms(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const ps=ms,gs=new Tn("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),ys=new Yn("@firebase/auth");function vs(e){if(ys.logLevel<=Hn.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];ys.error(`Auth (${Zr}): ${e}`,...n)}}function xs(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw ks(e,...n)}function bs(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return ks(e,...n)}function ws(e,t,n){const r=Object.assign(Object.assign({},ps()),{[t]:n});return new Tn("auth","Firebase",r).create(t,{appName:e.name})}function _s(e){return ws(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function ks(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return gs.create(e,...n)}function Ns(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];throw ks(t,...r)}}function Ss(e){const t="INTERNAL ASSERTION FAILED: "+e;throw vs(t),new Error(t)}function Es(e,t){e||Ss(t)}function js(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Cs(){return"http:"===Ts()||"https:"===Ts()}function Ts(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}function As(){return!("undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(Cs()||function(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}()||"connection"in navigator))||navigator.onLine}class Is{constructor(e,t){this.shortDelay=e,this.longDelay=t,Es(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Sn())||"object"===typeof navigator&&"ReactNative"===navigator.product}get(){return As()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Ms(e,t){Es(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}class Ps{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void Ss("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void Ss("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void Ss("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Rs={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Ls=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Ds=new Is(3e4,6e4);function Os(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function Fs(e,t,n,r){return Vs(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},(async()=>{let s={},i={};r&&("GET"===t?i=r:s={body:JSON.stringify(r)});const a=Pn(Object.assign({key:e.config.apiKey},i)).slice(1),o=await e._getAdditionalHeaders();o["Content-Type"]="application/json",e.languageCode&&(o["X-Firebase-Locale"]=e.languageCode);const l=Object.assign({method:t,headers:o},s);return"undefined"!==typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||(l.referrerPolicy="no-referrer"),e.emulatorConfig&&xn(e.emulatorConfig.host)&&(l.credentials="include"),Ps.fetch()(await Us(e,e.config.apiHost,n,a),l)}))}async function Vs(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},Rs),t);try{const t=new $s(e),s=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const i=await s.json();if("needConfirmation"in i)throw Hs(e,"account-exists-with-different-credential",i);if(s.ok&&!("errorMessage"in i))return i;{const t=s.ok?i.errorMessage:i.error.message,[n,a]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw Hs(e,"credential-already-in-use",i);if("EMAIL_EXISTS"===n)throw Hs(e,"email-already-in-use",i);if("USER_DISABLED"===n)throw Hs(e,"user-disabled",i);const o=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(a)throw ws(e,o,a);xs(e,o)}}catch(hF){if(hF instanceof Cn)throw hF;xs(e,"network-request-failed",{message:String(hF)})}}async function zs(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const i=await Fs(e,t,n,r,s);return"mfaPendingCredential"in i&&xs(e,"multi-factor-auth-required",{_serverResponse:i}),i}async function Us(e,t,n,r){const s=`${t}${n}?${r}`,i=e,a=i.config.emulator?Ms(e.config,s):`${e.config.apiScheme}://${s}`;if(Ls.includes(n)&&(await i._persistenceManagerAvailable,"COOKIE"===i._getPersistenceType())){return i._getPersistence()._getFinalTarget(a).toString()}return a}function Bs(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class $s{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(bs(this.auth,"network-request-failed"))),Ds.get())}))}}function Hs(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=bs(e,t,r);return s.customData._tokenResponse=n,s}function Ws(e){return void 0!==e&&void 0!==e.enterprise}class qs{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Bs(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Ks(e,t){return Fs(e,"GET","/v2/recaptchaConfig",Os(e,t))}async function Gs(e,t){return Fs(e,"POST","/v1/accounts:lookup",t)}function Ys(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(hF){}}function Qs(e){return 1e3*Number(e)}function Xs(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return vs("JWT malformed, contained fewer than 3 sections"),null;try{const e=dn(n);return e?JSON.parse(e):(vs("Failed to decode base64 JWT payload"),null)}catch(hF){return vs("Caught error parsing JWT payload as JSON",null===hF||void 0===hF?void 0:hF.toString()),null}}function Js(e){const t=Xs(e);return Ns(t,"internal-error"),Ns("undefined"!==typeof t.exp,"internal-error"),Ns("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function Zs(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(hF){throw hF instanceof Cn&&function(e){let{code:t}=e;return"auth/user-disabled"===t||"auth/user-token-expired"===t}(hF)&&e.auth.currentUser===e&&await e.auth.signOut(),hF}}class ei{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(hF){return void("auth/network-request-failed"===(null===hF||void 0===hF?void 0:hF.code)&&this.schedule(!0))}this.schedule()}}class ti{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ys(this.lastLoginAt),this.creationTime=Ys(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function ni(e){var t;const n=e.auth,r=await e.getIdToken(),s=await Zs(e,Gs(n,{idToken:r}));Ns(null===s||void 0===s?void 0:s.users.length,n,"internal-error");const i=s.users[0];e._notifyReloadListener(i);const a=(null===(t=i.providerUserInfo)||void 0===t?void 0:t.length)?ri(i.providerUserInfo):[],o=function(e,t){const n=e.filter((e=>!t.some((t=>t.providerId===e.providerId))));return[...n,...t]}(e.providerData,a),l=e.isAnonymous,c=!(e.email&&i.passwordHash)&&!(null===o||void 0===o?void 0:o.length),u=!!l&&c,d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new ti(i.createdAt,i.lastLoginAt),isAnonymous:u};Object.assign(e,d)}function ri(e){return e.map((e=>{var{providerId:t}=e,n=fs(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}class si{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ns(e.idToken,"internal-error"),Ns("undefined"!==typeof e.idToken,"internal-error"),Ns("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):Js(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ns(0!==e.length,"internal-error");const t=Js(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(Ns(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:s}=await async function(e,t){const n=await Vs(e,{},(async()=>{const n=Pn({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:s}=e.config,i=await Us(e,r,"/v1/token",`key=${s}`),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",Ps.fetch()(i,{method:"POST",headers:a,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(s))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:s}=t,i=new si;return n&&(Ns("string"===typeof n,"internal-error",{appName:e}),i.refreshToken=n),r&&(Ns("string"===typeof r,"internal-error",{appName:e}),i.accessToken=r),s&&(Ns("number"===typeof s,"internal-error",{appName:e}),i.expirationTime=s),i}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new si,this.toJSON())}_performRefresh(){return Ss("not implemented")}}function ii(e,t){Ns("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class ai{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,s=fs(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ei(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new ti(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await Zs(this,this.stsTokenManager.getToken(this.auth,e));return Ns(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=Fn(e),r=await n.getIdToken(t),s=Xs(r);Ns(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i="object"===typeof s.firebase?s.firebase:void 0,a=null===i||void 0===i?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:Ys(Qs(s.auth_time)),issuedAtTime:Ys(Qs(s.iat)),expirationTime:Ys(Qs(s.exp)),signInProvider:a||null,signInSecondFactor:(null===i||void 0===i?void 0:i.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=Fn(e);await ni(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(Ns(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ai(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Ns(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await ni(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Qr(this.auth.app))return Promise.reject(_s(this.auth));const e=await this.getIdToken();return await Zs(this,async function(e,t){return Fs(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,s,i,a,o,l,c;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,d=null!==(r=t.email)&&void 0!==r?r:void 0,h=null!==(s=t.phoneNumber)&&void 0!==s?s:void 0,f=null!==(i=t.photoURL)&&void 0!==i?i:void 0,m=null!==(a=t.tenantId)&&void 0!==a?a:void 0,p=null!==(o=t._redirectEventId)&&void 0!==o?o:void 0,g=null!==(l=t.createdAt)&&void 0!==l?l:void 0,y=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:v,emailVerified:x,isAnonymous:b,providerData:w,stsTokenManager:_}=t;Ns(v&&_,e,"internal-error");const k=si.fromJSON(this.name,_);Ns("string"===typeof v,e,"internal-error"),ii(u,e.name),ii(d,e.name),Ns("boolean"===typeof x,e,"internal-error"),Ns("boolean"===typeof b,e,"internal-error"),ii(h,e.name),ii(f,e.name),ii(m,e.name),ii(p,e.name),ii(g,e.name),ii(y,e.name);const N=new ai({uid:v,auth:e,email:d,emailVerified:x,displayName:u,isAnonymous:b,photoURL:f,phoneNumber:h,tenantId:m,stsTokenManager:k,createdAt:g,lastLoginAt:y});return w&&Array.isArray(w)&&(N.providerData=w.map((e=>Object.assign({},e)))),p&&(N._redirectEventId=p),N}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new si;r.updateFromServerResponse(t);const s=new ai({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await ni(s),s}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];Ns(void 0!==r.localId,"internal-error");const s=void 0!==r.providerUserInfo?ri(r.providerUserInfo):[],i=!(r.email&&r.passwordHash)&&!(null===s||void 0===s?void 0:s.length),a=new si;a.updateFromIdToken(n);const o=new ai({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:i}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new ti(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(null===s||void 0===s?void 0:s.length)};return Object.assign(o,l),o}}const oi=new Map;function li(e){Es(e instanceof Function,"Expected a class definition");let t=oi.get(e);return t?(Es(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,oi.set(e,t),t)}class ci{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}ci.type="NONE";const ui=ci;function di(e,t,n){return`firebase:${e}:${t}:${n}`}class hi{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:s}=this.auth;this.fullUserKey=di(this.userKey,r.apiKey,s),this.fullPersistenceKey=di("persistence",r.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if("string"===typeof e){const t=await Gs(this.auth,{idToken:e}).catch((()=>{}));return t?ai._fromGetAccountInfoResponse(this.auth,t,e):null}return ai._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new hi(li(ui),e,n);const r=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let s=r[0]||li(ui);const i=di(n,e.config.apiKey,e.name);let a=null;for(const c of t)try{const t=await c._get(i);if(t){let n;if("string"===typeof t){const r=await Gs(e,{idToken:t}).catch((()=>{}));if(!r)break;n=await ai._fromGetAccountInfoResponse(e,r,t)}else n=ai._fromJSON(e,t);c!==s&&(a=n),s=c;break}}catch(l){}const o=r.filter((e=>e._shouldAllowMigration));return s._shouldAllowMigration&&o.length?(s=o[0],a&&await s._set(i,a.toJSON()),await Promise.all(t.map((async e=>{if(e!==s)try{await e._remove(i)}catch(l){}}))),new hi(s,e,n)):new hi(s,e,n)}}function fi(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(yi(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(mi(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(xi(t))return"Blackberry";if(bi(t))return"Webos";if(pi(t))return"Safari";if((t.includes("chrome/")||gi(t))&&!t.includes("edge/"))return"Chrome";if(vi(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function mi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Sn();return/firefox\//i.test(e)}function pi(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Sn()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function gi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Sn();return/crios\//i.test(e)}function yi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Sn();return/iemobile/i.test(e)}function vi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Sn();return/android/i.test(e)}function xi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Sn();return/blackberry/i.test(e)}function bi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Sn();return/webos/i.test(e)}function wi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Sn();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function _i(){return function(){const e=Sn();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function ki(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Sn();return wi(e)||vi(e)||bi(e)||xi(e)||/windows phone/i.test(e)||yi(e)}function Ni(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=fi(Sn());break;case"Worker":t=`${fi(Sn())}-${e}`;break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return`${t}/JsCore/${Zr}/${r}`}class Si{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise(((n,r)=>{try{n(e(t))}catch(hF){r(hF)}}));n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(hF){t.reverse();for(const n of t)try{n()}catch(_O){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===hF||void 0===hF?void 0:hF.message})}}}class Ei{constructor(e){var t,n,r,s;const i=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=i.minPasswordLength)&&void 0!==t?t:6,i.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=i.maxPasswordLength),void 0!==i.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=i.containsLowercaseCharacter),void 0!==i.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=i.containsUppercaseCharacter),void 0!==i.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=i.containsNumericCharacter),void 0!==i.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=i.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(s=e.forceUpgradeOnSignin)&&void 0!==s&&s,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,s,i,a;const o={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,o),this.validatePasswordCharacterOptions(e,o),o.isValid&&(o.isValid=null===(t=o.meetsMinPasswordLength)||void 0===t||t),o.isValid&&(o.isValid=null===(n=o.meetsMaxPasswordLength)||void 0===n||n),o.isValid&&(o.isValid=null===(r=o.containsLowercaseLetter)||void 0===r||r),o.isValid&&(o.isValid=null===(s=o.containsUppercaseLetter)||void 0===s||s),o.isValid&&(o.isValid=null===(i=o.containsNumericCharacter)||void 0===i||i),o.isValid&&(o.isValid=null===(a=o.containsNonAlphanumericCharacter)||void 0===a||a),o}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}class ji{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ti(this),this.idTokenSubscription=new Ti(this),this.beforeStateQueue=new Si(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=gs,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise((e=>this._resolvePersistenceManagerAvailable=e))}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=li(t)),this._initializationPromise=this.queue((async()=>{var n,r,s;if(!this._deleted&&(this.persistenceManager=await hi.create(this,e),null===(n=this._resolvePersistenceManagerAvailable)||void 0===n||n.call(this),!this._deleted)){if(null===(r=this._popupRedirectResolver)||void 0===r?void 0:r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(hF){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(s=this.currentUser)||void 0===s?void 0:s.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await Gs(this,{idToken:e}),n=await ai._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Qr(this.app)){const e=this.app.settings.authIdToken;return e?new Promise((t=>{setTimeout((()=>this.initializeCurrentUserFromIdToken(e).then(t,t)))})):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,i=null===r||void 0===r?void 0:r._redirectEventId,a=await this.tryRedirectSignIn(e);n&&n!==i||!(null===a||void 0===a?void 0:a.user)||(r=a.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(hF){r=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(hF)))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Ns(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(hF){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await ni(e)}catch(hF){if("auth/network-request-failed"!==(null===hF||void 0===hF?void 0:hF.code))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Qr(this.app))return Promise.reject(_s(this));const t=e?Fn(e):null;return t&&Ns(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&Ns(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return Qr(this.app)?Promise.reject(_s(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Qr(this.app)?Promise.reject(_s(this)):this.queue((async()=>{await this.assertedPersistence.setPersistence(li(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return Fs(e,"GET","/v2/passwordPolicy",Os(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new Ei(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Tn("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise(((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged((()=>{n(),e()}),t)}}))}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return Fs(e,"POST","/v2/accounts:revokeToken",Os(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&li(e)||this._popupRedirectResolver;Ns(t,this,"argument-error"),this.redirectPersistenceManager=await hi.create(this,[li(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const s="function"===typeof t?t:t.next.bind(t);let i=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ns(a,this,"internal-error"),a.then((()=>{i||s(this.currentUser)})),"function"===typeof t){const s=e.addObserver(t,n,r);return()=>{i=!0,s()}}{const n=e.addObserver(t);return()=>{i=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ns(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Ni(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;if(Qr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(ys.logLevel<=Hn.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];ys.warn(`Auth (${Zr}): ${e}`,...n)}}(`Error while retrieving App Check token: ${t.error}`),null===t||void 0===t?void 0:t.token}}function Ci(e){return Fn(e)}class Ti{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new Dn(e,t);return n.subscribe.bind(n)}((e=>this.observer=e))}get next(){return Ns(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Ai={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Ii(e){return Ai.loadJS(e)}function Mi(e){return`__${e}${Math.floor(1e6*Math.random())}`}class Pi{constructor(){this.enterprise=new Ri}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class Ri{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const Li="NO_RECAPTCHA";class Di{constructor(e){this.type="recaptcha-enterprise",this.auth=Ci(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const s=window.grecaptcha;Ws(s)?s.enterprise.ready((()=>{s.enterprise.execute(t,{action:e}).then((e=>{n(e)})).catch((()=>{n(Li)}))})):r(Error("No reCAPTCHA enterprise script loaded."))}if(this.auth.settings.appVerificationDisabledForTesting){return(new Pi).execute("siteKey",{action:"verify"})}return new Promise(((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise((async(t,n)=>{Ks(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((r=>{if(void 0!==r.recaptchaKey){const n=new qs(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))})).catch((e=>{n(e)}))}))})(this.auth).then((s=>{if(!t&&Ws(window.grecaptcha))n(s,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=Ai.recaptchaEnterpriseScript;0!==t.length&&(t+=s),Ii(t).then((()=>{n(s,e,r)})).catch((e=>{r(e)}))}})).catch((e=>{r(e)}))}))}}async function Oi(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const i=new Di(e);let a;if(s)a=Li;else try{a=await i.verify(n)}catch(l){a=await i.verify(n,!0)}const o=Object.assign({},t);if("mfaSmsEnrollment"===n||"mfaSmsSignIn"===n){if("phoneEnrollmentInfo"in o){const e=o.phoneEnrollmentInfo.phoneNumber,t=o.phoneEnrollmentInfo.recaptchaToken;Object.assign(o,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:t,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in o){const e=o.phoneSignInInfo.recaptchaToken;Object.assign(o,{phoneSignInInfo:{recaptchaToken:e,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return o}return r?Object.assign(o,{captchaResp:a}):Object.assign(o,{captchaResponse:a}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Fi(e,t,n,r,s){var i,a;if("EMAIL_PASSWORD_PROVIDER"===s){if(null===(i=e._getRecaptchaConfig())||void 0===i?void 0:i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await Oi(e,t,n,"getOobCode"===n);return r(e,s)}return r(e,t).catch((async s=>{if("auth/missing-recaptcha-token"===s.code){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const s=await Oi(e,t,n,"getOobCode"===n);return r(e,s)}return Promise.reject(s)}))}if("PHONE_PROVIDER"===s){if(null===(a=e._getRecaptchaConfig())||void 0===a?void 0:a.isProviderEnabled("PHONE_PROVIDER")){const s=await Oi(e,t,n);return r(e,s).catch((async s=>{var i;if("AUDIT"===(null===(i=e._getRecaptchaConfig())||void 0===i?void 0:i.getProviderEnforcementState("PHONE_PROVIDER"))&&("auth/missing-recaptcha-token"===s.code||"auth/invalid-app-credential"===s.code)){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`);const s=await Oi(e,t,n,!1,!0);return r(e,s)}return Promise.reject(s)}))}{const s=await Oi(e,t,n,!1,!0);return r(e,s)}}return Promise.reject(s+" provider is not supported.")}async function Vi(e){const t=Ci(e),n=await Ks(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new qs(n);if(null==t.tenantId?t._agentRecaptchaConfig=r:t._tenantRecaptchaConfigs[t.tenantId]=r,r.isAnyProviderEnabled()){new Di(t).verify()}}function zi(e,t,n){const r=Ci(e);Ns(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const s=!!(null===n||void 0===n?void 0:n.disableWarnings),i=Ui(t),{host:a,port:o}=function(e){const t=Ui(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const e=s[1];return{host:e,port:Bi(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:Bi(t)}}}(t),l=null===o?"":`:${o}`,c={url:`${i}//${a}${l}/`},u=Object.freeze({host:a,port:o,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator)return Ns(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),void Ns(In(c,r.config.emulator)&&In(u,r.emulatorConfig),r,"emulator-config-failed");r.config.emulator=c,r.emulatorConfig=u,r.settings.appVerificationDisabledForTesting=!0,xn(a)?(Nn("Auth",!0),bn(`${i}//${a}${l}`)):s||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Ui(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Bi(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class $i{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ss("not implemented")}_getIdTokenResponse(e){return Ss("not implemented")}_linkToIdToken(e,t){return Ss("not implemented")}_getReauthenticationResolver(e){return Ss("not implemented")}}async function Hi(e,t){return Fs(e,"POST","/v1/accounts:signUp",t)}async function Wi(e,t){return zs(e,"POST","/v1/accounts:signInWithPassword",Os(e,t))}class qi extends $i{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new qi(e,t,"password")}static _fromEmailAndCode(e,t){return new qi(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return Fi(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Wi,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return zs(e,"POST","/v1/accounts:signInWithEmailLink",Os(e,t))}(e,{email:this._email,oobCode:this._password});default:xs(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return Fi(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Hi,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return zs(e,"POST","/v1/accounts:signInWithEmailLink",Os(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:xs(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Ki(e,t){return zs(e,"POST","/v1/accounts:signInWithIdp",Os(e,t))}class Gi extends $i{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Gi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):xs("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,s=fs(t,["providerId","signInMethod"]);if(!n||!r)return null;const i=new Gi(n,r);return i.idToken=s.idToken||void 0,i.accessToken=s.accessToken||void 0,i.secret=s.secret,i.nonce=s.nonce,i.pendingToken=s.pendingToken||null,i}_getIdTokenResponse(e){return Ki(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Ki(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ki(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Pn(t)}return e}}async function Yi(e,t){return Fs(e,"POST","/v1/accounts:sendVerificationCode",Os(e,t))}const Qi={USER_NOT_FOUND:"user-not-found"};class Xi extends $i{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Xi({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Xi({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return zs(e,"POST","/v1/accounts:signInWithPhoneNumber",Os(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await zs(e,"POST","/v1/accounts:signInWithPhoneNumber",Os(e,t));if(n.temporaryProof)throw Hs(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return zs(e,"POST","/v1/accounts:signInWithPhoneNumber",Os(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),Qi)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:s}=e;return n||t||r||s?new Xi({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:s}):null}}class Ji{constructor(e){var t,n,r,s,i,a;const o=Rn(Ln(e)),l=null!==(t=o.apiKey)&&void 0!==t?t:null,c=null!==(n=o.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=o.mode)&&void 0!==r?r:null);Ns(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(s=o.continueUrl)&&void 0!==s?s:null,this.languageCode=null!==(i=o.lang)&&void 0!==i?i:null,this.tenantId=null!==(a=o.tenantId)&&void 0!==a?a:null}static parseLink(e){const t=function(e){const t=Rn(Ln(e)).link,n=t?Rn(Ln(t)).deep_link_id:null,r=Rn(Ln(e)).deep_link_id;return(r?Rn(Ln(r)).link:null)||r||n||t||e}(e);try{return new Ji(t)}catch(n){return null}}}class Zi{constructor(){this.providerId=Zi.PROVIDER_ID}static credential(e,t){return qi._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=Ji.parseLink(t);return Ns(n,"argument-error"),qi._fromEmailAndCode(e,n.code,n.tenantId)}}Zi.PROVIDER_ID="password",Zi.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Zi.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class ea{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class ta extends ea{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class na extends ta{constructor(){super("facebook.com")}static credential(e){return Gi._fromParams({providerId:na.PROVIDER_ID,signInMethod:na.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return na.credentialFromTaggedObject(e)}static credentialFromError(e){return na.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return na.credential(t.oauthAccessToken)}catch(n){return null}}}na.FACEBOOK_SIGN_IN_METHOD="facebook.com",na.PROVIDER_ID="facebook.com";class ra extends ta{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Gi._fromParams({providerId:ra.PROVIDER_ID,signInMethod:ra.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return ra.credentialFromTaggedObject(e)}static credentialFromError(e){return ra.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return ra.credential(n,r)}catch(s){return null}}}ra.GOOGLE_SIGN_IN_METHOD="google.com",ra.PROVIDER_ID="google.com";class sa extends ta{constructor(){super("github.com")}static credential(e){return Gi._fromParams({providerId:sa.PROVIDER_ID,signInMethod:sa.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return sa.credentialFromTaggedObject(e)}static credentialFromError(e){return sa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return sa.credential(t.oauthAccessToken)}catch(n){return null}}}sa.GITHUB_SIGN_IN_METHOD="github.com",sa.PROVIDER_ID="github.com";class ia extends ta{constructor(){super("twitter.com")}static credential(e,t){return Gi._fromParams({providerId:ia.PROVIDER_ID,signInMethod:ia.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ia.credentialFromTaggedObject(e)}static credentialFromError(e){return ia.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return ia.credential(n,r)}catch(s){return null}}}async function aa(e,t){return zs(e,"POST","/v1/accounts:signUp",Os(e,t))}ia.TWITTER_SIGN_IN_METHOD="twitter.com",ia.PROVIDER_ID="twitter.com";class oa{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const s=await ai._fromIdTokenResponse(e,n,r),i=la(n);return new oa({user:s,providerId:i,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=la(n);return new oa({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function la(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class ca extends Cn{constructor(e,t,n,r){var s;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,ca.prototype),this.customData={appName:e.name,tenantId:null!==(s=e.tenantId)&&void 0!==s?s:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new ca(e,t,n,r)}}function ua(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if("auth/multi-factor-auth-required"===n.code)throw ca._fromErrorAndOperation(e,n,t,r);throw n}))}async function da(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await Zs(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return oa._forOperation(e,"link",r)}async function ha(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e;if(Qr(r.app))return Promise.reject(_s(r));const s="reauthenticate";try{const i=await Zs(e,ua(r,s,t,e),n);Ns(i.idToken,r,"internal-error");const a=Xs(i.idToken);Ns(a,r,"internal-error");const{sub:o}=a;return Ns(e.uid===o,r,"user-mismatch"),oa._forOperation(e,s,i)}catch(hF){throw"auth/user-not-found"===(null===hF||void 0===hF?void 0:hF.code)&&xs(r,"user-mismatch"),hF}}async function fa(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Qr(e.app))return Promise.reject(_s(e));const r="signIn",s=await ua(e,r,t),i=await oa._fromIdTokenResponse(e,r,s);return n||await e._updateCurrentUser(i.user),i}async function ma(e,t){return fa(Ci(e),t)}async function pa(e){const t=Ci(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function ga(e,t,n){if(Qr(e.app))return Promise.reject(_s(e));const r=Ci(e),s=Fi(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",aa,"EMAIL_PASSWORD_PROVIDER"),i=await s.catch((t=>{throw"auth/password-does-not-meet-requirements"===t.code&&pa(e),t})),a=await oa._fromIdTokenResponse(r,"signIn",i);return await r._updateCurrentUser(a.user),a}function ya(e,t){return Fs(e,"POST","/v2/accounts/mfaEnrollment:start",Os(e,t))}new WeakMap;const va="__sak";class xa{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(va,"1"),this.storage.removeItem(va),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class ba extends xa{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=ki(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},s=this.storage.getItem(n);_i()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}ba.type="LOCAL";const wa=ba;function _a(e){var t,n;const r=e.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),s=RegExp(`${r}=([^;]+)`);return null!==(n=null===(t=document.cookie.match(s))||void 0===t?void 0:t[1])&&void 0!==n?n:null}function ka(e){return`${"http:"===window.location.protocol?"__dev_":"__HOST-"}FIREBASE_${e.split(":")[3]}`}class Na{constructor(){this.type="COOKIE",this.listenerUnsubscribes=new Map}_getFinalTarget(e){if(void 0===typeof window)return e;const t=new URL(`${window.location.origin}/__cookies__`);return t.searchParams.set("finalTarget",e),t}async _isAvailable(){var e;return!("boolean"===typeof isSecureContext&&!isSecureContext)&&("undefined"!==typeof navigator&&"undefined"!==typeof document&&(null===(e=navigator.cookieEnabled)||void 0===e||e))}async _set(e,t){}async _get(e){if(!this._isAvailable())return null;const t=ka(e);if(window.cookieStore){const e=await window.cookieStore.get(t);return null===e||void 0===e?void 0:e.value}return _a(t)}async _remove(e){if(!this._isAvailable())return;if(!await this._get(e))return;const t=ka(e);document.cookie=`${t}=;Max-Age=34560000;Partitioned;Secure;SameSite=Strict;Path=/;Priority=High`,await fetch("/__cookies__",{method:"DELETE"}).catch((()=>{}))}_addListener(e,t){if(!this._isAvailable())return;const n=ka(e);if(window.cookieStore){const e=e=>{const r=e.changed.find((e=>e.name===n));r&&t(r.value);e.deleted.find((e=>e.name===n))&&t(null)},r=()=>window.cookieStore.removeEventListener("change",e);return this.listenerUnsubscribes.set(t,r),window.cookieStore.addEventListener("change",e)}let r=_a(n);const s=setInterval((()=>{const e=_a(n);e!==r&&(t(e),r=e)}),1e3);this.listenerUnsubscribes.set(t,(()=>clearInterval(s)))}_removeListener(e,t){const n=this.listenerUnsubscribes.get(t);n&&(n(),this.listenerUnsubscribes.delete(t))}}Na.type="COOKIE";class Sa extends xa{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Sa.type="SESSION";const Ea=Sa;class ja{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new ja(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:s}=t.data,i=this.handlersMap[r];if(!(null===i||void 0===i?void 0:i.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const a=Array.from(i).map((async e=>e(t.origin,s))),o=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}})))}(a);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:o})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function Ca(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}ja.receivers=[];class Ta{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,i;return new Promise(((a,o)=>{const l=Ca("",20);r.port1.start();const c=setTimeout((()=>{o(new Error("unsupported_event"))}),n);i={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),s=setTimeout((()=>{o(new Error("timeout"))}),3e3);break;case"done":clearTimeout(s),a(t.data.response);break;default:clearTimeout(c),clearTimeout(s),o(new Error("invalid_response"))}}},this.handlers.add(i),r.port1.addEventListener("message",i.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])})).finally((()=>{i&&this.removeMessageHandler(i)}))}}function Aa(){return window}function Ia(){return"undefined"!==typeof Aa().WorkerGlobalScope&&"function"===typeof Aa().importScripts}const Ma="firebaseLocalStorageDb",Pa="firebaseLocalStorage",Ra="fbase_key";class La{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function Da(e,t){return e.transaction([Pa],t?"readwrite":"readonly").objectStore(Pa)}function Oa(){const e=indexedDB.open(Ma,1);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(Pa,{keyPath:Ra})}catch(hF){n(hF)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(Pa)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(Ma);return new La(e).toPromise()}(),t(await Oa()))}))}))}async function Fa(e,t,n){const r=Da(e,!0).put({[Ra]:t,value:n});return new La(r).toPromise()}function Va(e,t){const n=Da(e,!0).delete(t);return new La(n).toPromise()}class za{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await Oa()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(hF){if(t++>3)throw hF;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Ia()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ja._getInstance(Ia()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new Ta(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Oa();return await Fa(e,va,"1"),await Va(e,va),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>Fa(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=Da(e,!1).get(t),r=await new La(n).toPromise();return void 0===r?null:r.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>Va(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=Da(e,!1).getAll();return new La(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:s}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(s)&&(this.notifyListeners(r,s),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}za.type="LOCAL";const Ua=za;function Ba(e,t){return Fs(e,"POST","/v2/accounts/mfaSignIn:start",Os(e,t))}Mi("rcb"),new Is(3e4,6e4);const $a="recaptcha";async function Ha(e,t,n){var r;if(!e._getRecaptchaConfig())try{await Vi(e)}catch(s){console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let s;if(s="string"===typeof t?{phoneNumber:t}:t,"session"in s){const t=s.session;if("phoneNumber"in s){Ns("enroll"===t.type,e,"internal-error");const r={idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,clientType:"CLIENT_TYPE_WEB"}},i=Fi(e,r,"mfaSmsEnrollment",(async(e,t)=>{if(t.phoneEnrollmentInfo.captchaResponse===Li){Ns((null===n||void 0===n?void 0:n.type)===$a,e,"argument-error");return ya(e,await Wa(e,t,n))}return ya(e,t)}),"PHONE_PROVIDER");return(await i.catch((e=>Promise.reject(e)))).phoneSessionInfo.sessionInfo}{Ns("signin"===t.type,e,"internal-error");const i=(null===(r=s.multiFactorHint)||void 0===r?void 0:r.uid)||s.multiFactorUid;Ns(i,e,"missing-multi-factor-info");const a={mfaPendingCredential:t.credential,mfaEnrollmentId:i,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}},o=Fi(e,a,"mfaSmsSignIn",(async(e,t)=>{if(t.phoneSignInInfo.captchaResponse===Li){Ns((null===n||void 0===n?void 0:n.type)===$a,e,"argument-error");return Ba(e,await Wa(e,t,n))}return Ba(e,t)}),"PHONE_PROVIDER");return(await o.catch((e=>Promise.reject(e)))).phoneResponseInfo.sessionInfo}}{const t={phoneNumber:s.phoneNumber,clientType:"CLIENT_TYPE_WEB"},r=Fi(e,t,"sendVerificationCode",(async(e,t)=>{if(t.captchaResponse===Li){Ns((null===n||void 0===n?void 0:n.type)===$a,e,"argument-error");return Yi(e,await Wa(e,t,n))}return Yi(e,t)}),"PHONE_PROVIDER");return(await r.catch((e=>Promise.reject(e)))).sessionInfo}}finally{null===n||void 0===n||n._reset()}}async function Wa(e,t,n){Ns(n.type===$a,e,"argument-error");const r=await n.verify();Ns("string"===typeof r,e,"argument-error");const s=Object.assign({},t);if("phoneEnrollmentInfo"in s){const e=s.phoneEnrollmentInfo.phoneNumber,t=s.phoneEnrollmentInfo.captchaResponse,n=s.phoneEnrollmentInfo.clientType,i=s.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(s,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:r,captchaResponse:t,clientType:n,recaptchaVersion:i}}),s}if("phoneSignInInfo"in s){const e=s.phoneSignInInfo.captchaResponse,t=s.phoneSignInInfo.clientType,n=s.phoneSignInInfo.recaptchaVersion;return Object.assign(s,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:e,clientType:t,recaptchaVersion:n}}),s}return Object.assign(s,{recaptchaToken:r}),s}class qa{constructor(e){this.providerId=qa.PROVIDER_ID,this.auth=Ci(e)}verifyPhoneNumber(e,t){return Ha(this.auth,e,Fn(t))}static credential(e,t){return Xi._fromVerification(e,t)}static credentialFromResult(e){const t=e;return qa.credentialFromTaggedObject(t)}static credentialFromError(e){return qa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?Xi._fromTokenResponse(n,r):null}}function Ka(e,t){return t?li(t):(Ns(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}qa.PROVIDER_ID="phone",qa.PHONE_SIGN_IN_METHOD="phone";class Ga extends $i{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ki(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ki(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ki(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Ya(e){return fa(e.auth,new Ga(e),e.bypassAuthState)}function Qa(e){const{auth:t,user:n}=e;return Ns(n,t,"internal-error"),ha(n,new Ga(e),e.bypassAuthState)}async function Xa(e){const{auth:t,user:n}=e;return Ns(n,t,"internal-error"),da(n,new Ga(e),e.bypassAuthState)}class Ja{constructor(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(hF){this.reject(hF)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:s,error:i,type:a}=e;if(i)return void this.reject(i);const o={auth:this.auth,requestUri:t,sessionId:n,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(o))}catch(hF){this.reject(hF)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Ya;case"linkViaPopup":case"linkViaRedirect":return Xa;case"reauthViaPopup":case"reauthViaRedirect":return Qa;default:xs(this.auth,"internal-error")}}resolve(e){Es(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Es(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Za=new Is(2e3,1e4);class eo extends Ja{constructor(e,t,n,r,s){super(e,t,r,s),this.provider=n,this.authWindow=null,this.pollId=null,eo.currentPopupAction&&eo.currentPopupAction.cancel(),eo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ns(e,this.auth,"internal-error"),e}async onExecution(){Es(1===this.filter.length,"Popup operations only handle one event");const e=Ca();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(bs(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(bs(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,eo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(bs(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(e,Za.get())};e()}}eo.currentPopupAction=null;const to=new Map;class no extends Ja{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=to.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=io(t),r=so(e);if(!await r._isAvailable())return!1;const s="true"===await r._get(n);return await r._remove(n),s}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(hF){e=()=>Promise.reject(hF)}to.set(this.auth._key(),e)}return this.bypassAuthState||to.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function ro(e,t){to.set(e._key(),t)}function so(e){return li(e._redirectPersistence)}function io(e){return di("pendingRedirect",e.config.apiKey,e.name)}async function ao(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Qr(e.app))return Promise.reject(_s(e));const r=Ci(e),s=Ka(r,t),i=new no(r,s,n),a=await i.execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,t)),a}class oo{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return co(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!co(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(bs(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(lo(e))}saveEventToCache(e){this.cachedEventUids.add(lo(e)),this.lastProcessedEventTime=Date.now()}}function lo(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function co(e){let{type:t,error:n}=e;return"unknown"===t&&"auth/no-auth-event"===(null===n||void 0===n?void 0:n.code)}const uo=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ho=/^https?/;async function fo(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return Fs(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const r of t)try{if(mo(r))return}catch(n){}xs(e,"unauthorized-domain")}function mo(e){const t=js(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const s=new URL(e);return""===s.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&s.hostname===r}if(!ho.test(n))return!1;if(uo.test(e))return r===e;const s=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}const po=new Is(3e4,6e4);function go(){const e=Aa().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function yo(e){return new Promise(((t,n)=>{var r,s,i;function a(){go(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{go(),n(bs(e,"network-request-failed"))},timeout:po.get()})}if(null===(s=null===(r=Aa().gapi)||void 0===r?void 0:r.iframes)||void 0===s?void 0:s.Iframe)t(gapi.iframes.getContext());else{if(!(null===(i=Aa().gapi)||void 0===i?void 0:i.load)){const t=Mi("iframefcb");return Aa()[t]=()=>{gapi.load?a():n(bs(e,"network-request-failed"))},Ii(`${Ai.gapiScript}?onload=${t}`).catch((e=>n(e)))}a()}})).catch((e=>{throw vo=null,e}))}let vo=null;const xo=new Is(5e3,15e3),bo={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},wo=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function _o(e){const t=e.config;Ns(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Ms(t,"emulator/auth/iframe"):`https://${e.config.authDomain}/__/auth/iframe`,r={apiKey:t.apiKey,appName:e.name,v:Zr},s=wo.get(e.config.apiHost);s&&(r.eid=s);const i=e._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${Pn(r).slice(1)}`}async function ko(e){const t=await function(e){return vo=vo||yo(e),vo}(e),n=Aa().gapi;return Ns(n,e,"internal-error"),t.open({where:document.body,url:_o(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:bo,dontclear:!0},(t=>new Promise((async(n,r)=>{await t.restyle({setHideOnLeave:!1});const s=bs(e,"network-request-failed"),i=Aa().setTimeout((()=>{r(s)}),xo.get());function a(){Aa().clearTimeout(i),n(t)}t.ping(a).then(a,(()=>{r(s)}))}))))}const No={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class So{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(hF){}}}function Eo(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const i=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let o="";const l=Object.assign(Object.assign({},No),{width:r.toString(),height:s.toString(),top:i,left:a}),c=Sn().toLowerCase();n&&(o=gi(c)?"_blank":n),mi(c)&&(t=t||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce(((e,t)=>{let[n,r]=t;return`${e}${n}=${r},`}),"");if(function(){var e;return wi(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Sn())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==o)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",o),new So(null);const d=window.open(t||"",o,u);Ns(d,e,"popup-blocked");try{d.focus()}catch(hF){}return new So(d)}const jo="__/auth/handler",Co="emulator/auth/handler",To=encodeURIComponent("fac");async function Ao(e,t,n,r,s,i){Ns(e.config.authDomain,e,"auth-domain-config-required"),Ns(e.config.apiKey,e,"invalid-api-key");const a={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Zr,eventId:s};if(t instanceof ea){t.setDefaultLanguage(e.languageCode),a.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(a.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(i||{}))a[e]=t}if(t instanceof ta){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(a.scopes=e.join(","))}e.tenantId&&(a.tid=e.tenantId);const o=a;for(const u of Object.keys(o))void 0===o[u]&&delete o[u];const l=await e._getAppCheckToken(),c=l?`#${To}=${encodeURIComponent(l)}`:"";return`${function(e){let{config:t}=e;if(!t.emulator)return`https://${t.authDomain}/${jo}`;return Ms(t,Co)}(e)}?${Pn(o).slice(1)}${c}`}const Io="webStorageSupport";const Mo=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ea,this._completeRedirectFn=ao,this._overrideRedirectResult=ro}async _openPopup(e,t,n,r){var s;Es(null===(s=this.eventManagers[e._key()])||void 0===s?void 0:s.manager,"_initialize() not called before _openPopup()");return Eo(e,await Ao(e,t,n,js(),r),Ca())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){Aa().location.href=e}(await Ao(e,t,n,js(),r)),new Promise((()=>{}))}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(Es(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch((()=>{delete this.eventManagers[t]})),n}async initAndGetManager(e){const t=await ko(e),n=new oo(e);return t.register("authEvent",(t=>{Ns(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Io,{type:Io},(n=>{var r;const s=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[Io];void 0!==s&&t(!!s),xs(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=fo(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return ki()||pi()||wi()}};var Po="@firebase/auth",Ro="1.10.4";class Lo{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ns(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const Do=yn("authIdTokenMaxAge")||300;let Oo=null;var Fo;!function(e){Ai=e}({loadJS:e=>new Promise(((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=bs("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)})),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),Fo="Browser",Gr(new Vn("auth",((e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=r.options;Ns(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:a,authDomain:o,clientPlatform:Fo,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ni(Fo)},c=new ji(r,s,i,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(li);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),Gr(new Vn("auth-internal",(e=>(e=>new Lo(e))(Ci(e.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),ns(Po,Ro,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(Fo)),ns(Po,Ro,"esm2017");ns("firebase","11.7.3","app");var Vo,zo,Uo="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Bo={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function n(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var s=0;16>s;++s)r[s]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(s=0;16>s;++s)r[s]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],s=e.g[2];var i=e.g[3],a=t+(i^n&(s^i))+r[0]+3614090360&4294967295;a=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=n+(a<<7&4294967295|a>>>25))+((a=i+(s^t&(n^s))+r[1]+3905402710&4294967295)<<12&4294967295|a>>>20))+((a=s+(n^i&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^s&(i^t))+r[3]+3250441966&4294967295)<<22&4294967295|a>>>10))+((a=t+(i^n&(s^i))+r[4]+4118548399&4294967295)<<7&4294967295|a>>>25))+((a=i+(s^t&(n^s))+r[5]+1200080426&4294967295)<<12&4294967295|a>>>20))+((a=s+(n^i&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^s&(i^t))+r[7]+4249261313&4294967295)<<22&4294967295|a>>>10))+((a=t+(i^n&(s^i))+r[8]+1770035416&4294967295)<<7&4294967295|a>>>25))+((a=i+(s^t&(n^s))+r[9]+2336552879&4294967295)<<12&4294967295|a>>>20))+((a=s+(n^i&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^s&(i^t))+r[11]+2304563134&4294967295)<<22&4294967295|a>>>10))+((a=t+(i^n&(s^i))+r[12]+1804603682&4294967295)<<7&4294967295|a>>>25))+((a=i+(s^t&(n^s))+r[13]+4254626195&4294967295)<<12&4294967295|a>>>20))+((a=s+(n^i&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^s&(i^t))+r[15]+1236535329&4294967295)<<22&4294967295|a>>>10))+((a=t+(s^i&(n^s))+r[1]+4129170786&4294967295)<<5&4294967295|a>>>27))+((a=i+(n^s&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|a>>>23))+((a=s+(t^n&(i^t))+r[11]+643717713&4294967295)<<14&4294967295|a>>>18))+((a=n+(i^t&(s^i))+r[0]+3921069994&4294967295)<<20&4294967295|a>>>12))+((a=t+(s^i&(n^s))+r[5]+3593408605&4294967295)<<5&4294967295|a>>>27))+((a=i+(n^s&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|a>>>23))+((a=s+(t^n&(i^t))+r[15]+3634488961&4294967295)<<14&4294967295|a>>>18))+((a=n+(i^t&(s^i))+r[4]+3889429448&4294967295)<<20&4294967295|a>>>12))+((a=t+(s^i&(n^s))+r[9]+568446438&4294967295)<<5&4294967295|a>>>27))+((a=i+(n^s&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|a>>>23))+((a=s+(t^n&(i^t))+r[3]+4107603335&4294967295)<<14&4294967295|a>>>18))+((a=n+(i^t&(s^i))+r[8]+1163531501&4294967295)<<20&4294967295|a>>>12))+((a=t+(s^i&(n^s))+r[13]+2850285829&4294967295)<<5&4294967295|a>>>27))+((a=i+(n^s&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|a>>>23))+((a=s+(t^n&(i^t))+r[7]+1735328473&4294967295)<<14&4294967295|a>>>18))+((a=n+(i^t&(s^i))+r[12]+2368359562&4294967295)<<20&4294967295|a>>>12))+((a=t+(n^s^i)+r[5]+4294588738&4294967295)<<4&4294967295|a>>>28))+((a=i+(t^n^s)+r[8]+2272392833&4294967295)<<11&4294967295|a>>>21))+((a=s+(i^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|a>>>16))+((a=n+(s^i^t)+r[14]+4259657740&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^s^i)+r[1]+2763975236&4294967295)<<4&4294967295|a>>>28))+((a=i+(t^n^s)+r[4]+1272893353&4294967295)<<11&4294967295|a>>>21))+((a=s+(i^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|a>>>16))+((a=n+(s^i^t)+r[10]+3200236656&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^s^i)+r[13]+681279174&4294967295)<<4&4294967295|a>>>28))+((a=i+(t^n^s)+r[0]+3936430074&4294967295)<<11&4294967295|a>>>21))+((a=s+(i^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|a>>>16))+((a=n+(s^i^t)+r[6]+76029189&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^s^i)+r[9]+3654602809&4294967295)<<4&4294967295|a>>>28))+((a=i+(t^n^s)+r[12]+3873151461&4294967295)<<11&4294967295|a>>>21))+((a=s+(i^t^n)+r[15]+530742520&4294967295)<<16&4294967295|a>>>16))+((a=n+(s^i^t)+r[2]+3299628645&4294967295)<<23&4294967295|a>>>9))+((a=t+(s^(n|~i))+r[0]+4096336452&4294967295)<<6&4294967295|a>>>26))+((a=i+(n^(t|~s))+r[7]+1126891415&4294967295)<<10&4294967295|a>>>22))+((a=s+(t^(i|~n))+r[14]+2878612391&4294967295)<<15&4294967295|a>>>17))+((a=n+(i^(s|~t))+r[5]+4237533241&4294967295)<<21&4294967295|a>>>11))+((a=t+(s^(n|~i))+r[12]+1700485571&4294967295)<<6&4294967295|a>>>26))+((a=i+(n^(t|~s))+r[3]+2399980690&4294967295)<<10&4294967295|a>>>22))+((a=s+(t^(i|~n))+r[10]+4293915773&4294967295)<<15&4294967295|a>>>17))+((a=n+(i^(s|~t))+r[1]+2240044497&4294967295)<<21&4294967295|a>>>11))+((a=t+(s^(n|~i))+r[8]+1873313359&4294967295)<<6&4294967295|a>>>26))+((a=i+(n^(t|~s))+r[15]+4264355552&4294967295)<<10&4294967295|a>>>22))+((a=s+(t^(i|~n))+r[6]+2734768916&4294967295)<<15&4294967295|a>>>17))+((a=n+(i^(s|~t))+r[13]+1309151649&4294967295)<<21&4294967295|a>>>11))+((i=(t=n+((a=t+(s^(n|~i))+r[4]+4149444226&4294967295)<<6&4294967295|a>>>26))+((a=i+(n^(t|~s))+r[11]+3174756917&4294967295)<<10&4294967295|a>>>22))^((s=i+((a=s+(t^(i|~n))+r[2]+718787259&4294967295)<<15&4294967295|a>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(s+(a<<21&4294967295|a>>>11))&4294967295,e.g[2]=e.g[2]+s&4294967295,e.g[3]=e.g[3]+i&4294967295}function r(e,t){this.h=t;for(var n=[],r=!0,s=e.length-1;0<=s;s--){var i=0|e[s];r&&i==t||(n[s]=i,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.D=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.C=function(e,n,r){for(var s=Array(arguments.length-2),i=2;i<arguments.length;i++)s[i-2]=arguments[i];return t.prototype[n].apply(e,s)}}(t,(function(){this.blockSize=-1})),t.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.u=function(e,t){void 0===t&&(t=e.length);for(var r=t-this.blockSize,s=this.B,i=this.h,a=0;a<t;){if(0==i)for(;a<=r;)n(this,e,a),a+=this.blockSize;if("string"===typeof e){for(;a<t;)if(s[i++]=e.charCodeAt(a++),i==this.blockSize){n(this,s),i=0;break}}else for(;a<t;)if(s[i++]=e[a++],i==this.blockSize){n(this,s),i=0;break}}this.h=i,this.o+=t},t.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.u(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var s={};function i(e){return-128<=e&&128>e?function(e,t){var n=s;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new r([0|e],0>e?-1:0)})):new r([0|e],0>e?-1:0)}function a(e){if(isNaN(e)||!isFinite(e))return o;if(0>e)return h(a(-e));for(var t=[],n=1,s=0;e>=n;s++)t[s]=e/n|0,n*=4294967296;return new r(t,0)}var o=i(0),l=i(1),c=i(16777216);function u(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function d(e){return-1==e.h}function h(e){for(var t=e.g.length,n=[],s=0;s<t;s++)n[s]=~e.g[s];return new r(n,~e.h).add(l)}function f(e,t){return e.add(h(t))}function m(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function p(e,t){this.g=e,this.h=t}function g(e,t){if(u(t))throw Error("division by zero");if(u(e))return new p(o,o);if(d(e))return t=g(h(e),t),new p(h(t.g),h(t.h));if(d(t))return t=g(e,h(t)),new p(h(t.g),t.h);if(30<e.g.length){if(d(e)||d(t))throw Error("slowDivide_ only works with positive integers.");for(var n=l,r=t;0>=r.l(e);)n=y(n),r=y(r);var s=v(n,1),i=v(r,1);for(r=v(r,2),n=v(n,2);!u(r);){var c=i.add(r);0>=c.l(e)&&(s=s.add(n),i=c),r=v(r,1),n=v(n,1)}return t=f(e,s.j(t)),new p(s,t)}for(s=o;0<=e.l(t);){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),c=(i=a(n)).j(t);d(c)||0<c.l(e);)c=(i=a(n-=r)).j(t);u(i)&&(i=l),s=s.add(i),e=f(e,c)}return new p(s,e)}function y(e){for(var t=e.g.length+1,n=[],s=0;s<t;s++)n[s]=e.i(s)<<1|e.i(s-1)>>>31;return new r(n,e.h)}function v(e,t){var n=t>>5;t%=32;for(var s=e.g.length-n,i=[],a=0;a<s;a++)i[a]=0<t?e.i(a+n)>>>t|e.i(a+n+1)<<32-t:e.i(a+n);return new r(i,e.h)}(e=r.prototype).m=function(){if(d(this))return-h(this).m();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.i(n);e+=(0<=r?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(u(this))return"0";if(d(this))return"-"+h(this).toString(e);for(var t=a(Math.pow(e,6)),n=this,r="";;){var s=g(n,t).g,i=((0<(n=f(n,s.j(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(u(n=s))return i+r;for(;6>i.length;)i="0"+i;r=i+r}},e.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return d(e=f(this,e))?-1:u(e)?0:1},e.abs=function(){return d(this)?h(this):this},e.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],s=0,i=0;i<=t;i++){var a=s+(65535&this.i(i))+(65535&e.i(i)),o=(a>>>16)+(this.i(i)>>>16)+(e.i(i)>>>16);s=o>>>16,a&=65535,o&=65535,n[i]=o<<16|a}return new r(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(u(this)||u(e))return o;if(d(this))return d(e)?h(this).j(h(e)):h(h(this).j(e));if(d(e))return h(this.j(h(e)));if(0>this.l(c)&&0>e.l(c))return a(this.m()*e.m());for(var t=this.g.length+e.g.length,n=[],s=0;s<2*t;s++)n[s]=0;for(s=0;s<this.g.length;s++)for(var i=0;i<e.g.length;i++){var l=this.i(s)>>>16,f=65535&this.i(s),p=e.i(i)>>>16,g=65535&e.i(i);n[2*s+2*i]+=f*g,m(n,2*s+2*i),n[2*s+2*i+1]+=l*g,m(n,2*s+2*i+1),n[2*s+2*i+1]+=f*p,m(n,2*s+2*i+1),n[2*s+2*i+2]+=l*p,m(n,2*s+2*i+2)}for(s=0;s<t;s++)n[s]=n[2*s+1]<<16|n[2*s];for(s=t;s<2*t;s++)n[s]=0;return new r(n,0)},e.A=function(e){return g(this,e).h},e.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],s=0;s<t;s++)n[s]=this.i(s)&e.i(s);return new r(n,this.h&e.h)},e.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],s=0;s<t;s++)n[s]=this.i(s)|e.i(s);return new r(n,this.h|e.h)},e.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],s=0;s<t;s++)n[s]=this.i(s)^e.i(s);return new r(n,this.h^e.h)},t.prototype.digest=t.prototype.v,t.prototype.reset=t.prototype.s,t.prototype.update=t.prototype.u,zo=Bo.Md5=t,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.A,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=a,r.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return h(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=a(Math.pow(n,8)),s=o,i=0;i<t.length;i+=8){var l=Math.min(8,t.length-i),c=parseInt(t.substring(i,i+l),n);8>l?(l=a(Math.pow(n,l)),s=s.j(l).add(a(c))):s=(s=s.j(r)).add(a(c))}return s},Vo=Bo.Integer=r}).apply("undefined"!==typeof Uo?Uo:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var $o,Ho,Wo,qo,Ko,Go,Yo,Qo,Xo="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Jo={};(function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof Xo&&Xo];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(e,r){if(r)e:{var s=n;e=e.split(".");for(var i=0;i<e.length-1;i++){var a=e[i];if(!(a in s))break e;s=s[a]}(r=r(i=s[e=e[e.length-1]]))!=i&&null!=r&&t(s,e,{configurable:!0,writable:!0,value:r})}}("Array.prototype.values",(function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,r=!1,s={next:function(){if(!r&&n<e.length){var s=n++;return{value:t(s,e[s]),done:!1}}return r=!0,{done:!0,value:void 0}}};return s[Symbol.iterator]=function(){return s},s}(this,(function(e,t){return t}))}}));var r=r||{},s=this||self;function i(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function a(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function o(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function c(e,t,n){return(c=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?o:l).apply(null,arguments)}function u(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function d(e,t){function n(){}n.prototype=t.prototype,e.aa=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Qb=function(e,n,r){for(var s=Array(arguments.length-2),i=2;i<arguments.length;i++)s[i-2]=arguments[i];return t.prototype[n].apply(e,s)}}function h(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function f(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(i(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let s=0;s<r;s++)e[n+s]=t[s]}else e.push(t)}}function m(e){return/^[\s\xa0]*$/.test(e)}function p(){var e=s.navigator;return e&&(e=e.userAgent)?e:""}function g(e){return g[" "](e),e}g[" "]=function(){};var y=-1!=p().indexOf("Gecko")&&!(-1!=p().toLowerCase().indexOf("webkit")&&-1==p().indexOf("Edge"))&&!(-1!=p().indexOf("Trident")||-1!=p().indexOf("MSIE"))&&-1==p().indexOf("Edge");function v(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function x(e){const t={};for(const n in e)t[n]=e[n];return t}const b="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function w(e,t){let n,r;for(let s=1;s<arguments.length;s++){for(n in r=arguments[s],r)e[n]=r[n];for(let t=0;t<b.length;t++)n=b[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function _(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function k(e){s.setTimeout((()=>{throw e}),0)}function N(){var e=T;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var S=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new E),(e=>e.reset()));class E{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let j,C=!1,T=new class{constructor(){this.h=this.g=null}add(e,t){const n=S.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},A=()=>{const e=s.Promise.resolve(void 0);j=()=>{e.then(I)}};var I=()=>{for(var e;e=N();){try{e.h.call(e.g)}catch(GD){k(GD)}var t=S;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}C=!1};function M(){this.s=this.s,this.C=this.C}function P(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}M.prototype.s=!1,M.prototype.ma=function(){this.s||(this.s=!0,this.N())},M.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},P.prototype.h=function(){this.defaultPrevented=!0};var R=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};s.addEventListener("test",e,t),s.removeEventListener("test",e,t)}catch(GD){}return e}();function L(e,t){if(P.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(y){e:{try{g(t.nodeName);var s=!0;break e}catch(oO){}s=!1}s||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:D[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&L.aa.h.call(this)}}d(L,P);var D={2:"touch",3:"pen",4:"mouse"};L.prototype.h=function(){L.aa.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var O="closure_listenable_"+(1e6*Math.random()|0),F=0;function V(e,t,n,r,s){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=s,this.key=++F,this.da=this.fa=!1}function z(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function U(e){this.src=e,this.g={},this.h=0}function B(e,t){var n=t.type;if(n in e.g){var r,s=e.g[n],i=Array.prototype.indexOf.call(s,t,void 0);(r=0<=i)&&Array.prototype.splice.call(s,i,1),r&&(z(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function $(e,t,n,r){for(var s=0;s<e.length;++s){var i=e[s];if(!i.da&&i.listener==t&&i.capture==!!n&&i.ha==r)return s}return-1}U.prototype.add=function(e,t,n,r,s){var i=e.toString();(e=this.g[i])||(e=this.g[i]=[],this.h++);var a=$(e,t,r,s);return-1<a?(t=e[a],n||(t.fa=!1)):((t=new V(t,this.src,i,!!r,s)).fa=n,e.push(t)),t};var H="closure_lm_"+(1e6*Math.random()|0),W={};function q(e,t,n,r,s){if(r&&r.once)return G(e,t,n,r,s);if(Array.isArray(t)){for(var i=0;i<t.length;i++)q(e,t[i],n,r,s);return null}return n=te(n),e&&e[O]?e.K(t,n,a(r)?!!r.capture:!!r,s):K(e,t,n,!1,r,s)}function K(e,t,n,r,s,i){if(!t)throw Error("Invalid event type");var o=a(s)?!!s.capture:!!s,l=Z(e);if(l||(e[H]=l=new U(e)),(n=l.add(t,n,r,o,i)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=J;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)R||(s=o),void 0===s&&(s=!1),e.addEventListener(t.toString(),r,s);else if(e.attachEvent)e.attachEvent(X(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function G(e,t,n,r,s){if(Array.isArray(t)){for(var i=0;i<t.length;i++)G(e,t[i],n,r,s);return null}return n=te(n),e&&e[O]?e.L(t,n,a(r)?!!r.capture:!!r,s):K(e,t,n,!0,r,s)}function Y(e,t,n,r,s){if(Array.isArray(t))for(var i=0;i<t.length;i++)Y(e,t[i],n,r,s);else r=a(r)?!!r.capture:!!r,n=te(n),e&&e[O]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=$(i=e.g[t],n,r,s))&&(z(i[n]),Array.prototype.splice.call(i,n,1),0==i.length&&(delete e.g[t],e.h--)))):e&&(e=Z(e))&&(t=e.g[t.toString()],e=-1,t&&(e=$(t,n,r,s)),(n=-1<e?t[e]:null)&&Q(n))}function Q(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[O])B(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(X(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Z(t))?(B(n,e),0==n.h&&(n.src=null,t[H]=null)):z(e)}}}function X(e){return e in W?W[e]:W[e]="on"+e}function J(e,t){if(e.da)e=!0;else{t=new L(t,this);var n=e.listener,r=e.ha||e.src;e.fa&&Q(e),e=n.call(r,t)}return e}function Z(e){return(e=e[H])instanceof U?e:null}var ee="__closure_events_fn_"+(1e9*Math.random()>>>0);function te(e){return"function"===typeof e?e:(e[ee]||(e[ee]=function(t){return e.handleEvent(t)}),e[ee])}function ne(){M.call(this),this.i=new U(this),this.M=this,this.F=null}function re(e,t){var n,r=e.F;if(r)for(n=[];r;r=r.F)n.push(r);if(e=e.M,r=t.type||t,"string"===typeof t)t=new P(t,e);else if(t instanceof P)t.target=t.target||e;else{var s=t;w(t=new P(r,e),s)}if(s=!0,n)for(var i=n.length-1;0<=i;i--){var a=t.g=n[i];s=se(a,r,!0,t)&&s}if(s=se(a=t.g=e,r,!0,t)&&s,s=se(a,r,!1,t)&&s,n)for(i=0;i<n.length;i++)s=se(a=t.g=n[i],r,!1,t)&&s}function se(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var s=!0,i=0;i<t.length;++i){var a=t[i];if(a&&!a.da&&a.capture==n){var o=a.listener,l=a.ha||a.src;a.fa&&B(e.i,a),s=!1!==o.call(l,r)&&s}}return s&&!r.defaultPrevented}function ie(e,t,n){if("function"===typeof e)n&&(e=c(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=c(e.handleEvent,e)}return 2147483647<Number(t)?-1:s.setTimeout(e,t||0)}function ae(e){e.g=ie((()=>{e.g=null,e.i&&(e.i=!1,ae(e))}),e.l);const t=e.h;e.h=null,e.m.apply(null,t)}d(ne,M),ne.prototype[O]=!0,ne.prototype.removeEventListener=function(e,t,n,r){Y(this,e,t,n,r)},ne.prototype.N=function(){if(ne.aa.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)z(n[r]);delete t.g[e],t.h--}}this.F=null},ne.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},ne.prototype.L=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class oe extends M{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:ae(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function le(e){M.call(this),this.h=e,this.g={}}d(le,M);var ce=[];function ue(e){v(e.g,(function(e,t){this.g.hasOwnProperty(t)&&Q(e)}),e),e.g={}}le.prototype.N=function(){le.aa.N.call(this),ue(this)},le.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var de=s.JSON.stringify,he=s.JSON.parse,fe=class{stringify(e){return s.JSON.stringify(e,void 0)}parse(e){return s.JSON.parse(e,void 0)}};function me(){}function pe(e){return e.h||(e.h=e.i())}function ge(){}me.prototype.h=null;var ye={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ve(){P.call(this,"d")}function xe(){P.call(this,"c")}d(ve,P),d(xe,P);var be={},we=null;function _e(){return we=we||new ne}function ke(e){P.call(this,be.La,e)}function Ne(e){const t=_e();re(t,new ke(t))}function Se(e,t){P.call(this,be.STAT_EVENT,e),this.stat=t}function Ee(e){const t=_e();re(t,new Se(t,e))}function je(e,t){P.call(this,be.Ma,e),this.size=t}function Ce(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return s.setTimeout((function(){e()}),t)}function Te(){this.g=!0}function Ae(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var i=s[0];if("noop"!=i&&"stop"!=i&&"close"!=i)for(var a=1;a<s.length;a++)s[a]=""}}}return de(n)}catch(o){return t}}(e,n)+(r?" "+r:"")}))}be.La="serverreachability",d(ke,P),be.STAT_EVENT="statevent",d(Se,P),be.Ma="timingevent",d(je,P),Te.prototype.xa=function(){this.g=!1},Te.prototype.info=function(){};var Ie,Me={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Pe={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function Re(){}function Le(e,t,n,r){this.j=e,this.i=t,this.l=n,this.R=r||1,this.U=new le(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new De}function De(){this.i=null,this.g="",this.h=!1}d(Re,me),Re.prototype.g=function(){return new XMLHttpRequest},Re.prototype.i=function(){return{}},Ie=new Re;var Oe={},Fe={};function Ve(e,t,n){e.L=1,e.v=dt(at(t)),e.m=n,e.P=!0,ze(e,null)}function ze(e,t){e.F=Date.now(),$e(e),e.A=at(e.v);var n=e.A,r=e.R;Array.isArray(r)||(r=[String(r)]),Nt(n.i,"t",r),e.C=0,n=e.j.J,e.h=new De,e.g=hn(e.j,n?t:null,!e.m),0<e.O&&(e.M=new oe(c(e.Y,e,e.g),e.O)),t=e.U,n=e.g,r=e.ca;var s="readystatechange";Array.isArray(s)||(s&&(ce[0]=s.toString()),s=ce);for(var i=0;i<s.length;i++){var a=q(n,s[i],r||t.handleEvent,!1,t.h||t);if(!a)break;t.g[a.key]=a}t=e.H?x(e.H):{},e.m?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.m,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Ne(),function(e,t,n,r,s,i){e.info((function(){if(e.g)if(i)for(var a="",o=i.split("&"),l=0;l<o.length;l++){var c=o[l].split("=");if(1<c.length){var u=c[0];c=c[1];var d=u.split("_");a=2<=d.length&&"type"==d[1]?a+(u+"=")+c+"&":a+(u+"=redacted&")}}else a=null;else a=i;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+t+"\n"+n+"\n"+a}))}(e.i,e.u,e.A,e.l,e.R,e.m)}function Ue(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.j.Ca)}function Be(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Fe:(n=Number(t.substring(n,r)),isNaN(n)?Oe:(r+=1)+n>t.length?Fe:(t=t.slice(r,r+n),e.C=r+n,t))}function $e(e){e.S=Date.now()+e.I,He(e,e.I)}function He(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Ce(c(e.ba,e),t)}function We(e){e.B&&(s.clearTimeout(e.B),e.B=null)}function qe(e){0==e.j.G||e.J||on(e.j,e)}function Ke(e){We(e);var t=e.M;t&&"function"==typeof t.ma&&t.ma(),e.M=null,ue(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ma())}function Ge(e,t){try{var n=e.j;if(0!=n.G&&(n.g==e||Ze(n.h,e)))if(!e.K&&Ze(n.h,e)&&3==n.G){try{var r=n.Da.g.parse(t)}catch(u){r=null}if(Array.isArray(r)&&3==r.length){var s=r;if(0==s[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;an(n),Yt(n)}nn(n),Ee(18)}}else n.za=s[1],0<n.za-n.T&&37500>s[2]&&n.F&&0==n.v&&!n.C&&(n.C=Ce(c(n.Za,n),6e3));if(1>=Je(n.h)&&n.ca){try{n.ca()}catch(u){}n.ca=void 0}}else cn(n,11)}else if((e.K||n.g==e)&&an(n),!m(t))for(s=n.Da.g.parse(t),t=0;t<s.length;t++){let c=s[t];if(n.T=c[0],c=c[1],2==n.G)if("c"==c[0]){n.K=c[1],n.ia=c[2];const t=c[3];null!=t&&(n.la=t,n.j.info("VER="+n.la));const s=c[4];null!=s&&(n.Aa=s,n.j.info("SVER="+n.Aa));const u=c[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const d=e.g;if(d){const e=d.g?d.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var i=r.h;i.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(i.j=i.l,i.g=new Set,i.h&&(et(i,i.h),i.h=null))}if(r.D){const e=d.g?d.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.ya=e,ut(r.I,r.D,e))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-e.F,n.j.info("Handshake RTT: "+n.R+"ms"));var a=e;if((r=n).qa=dn(r,r.J?r.ia:null,r.W),a.K){tt(r.h,a);var o=a,l=r.L;l&&(o.I=l),o.B&&(We(o),$e(o)),r.g=a}else tn(r);0<n.i.length&&Xt(n)}else"stop"!=c[0]&&"close"!=c[0]||cn(n,7);else 3==n.G&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?cn(n,7):Gt(n):"noop"!=c[0]&&n.l&&n.l.ta(c),n.v=0)}Ne()}catch(u){}}Le.prototype.ca=function(e){e=e.target;const t=this.M;t&&3==Ht(e)?t.j():this.Y(e)},Le.prototype.Y=function(e){try{if(e==this.g)e:{const h=Ht(this.g);var t=this.g.Ba();this.g.Z();if(!(3>h)&&(3!=h||this.g&&(this.h.h||this.g.oa()||Wt(this.g)))){this.J||4!=h||7==t||Ne(),We(this);var n=this.g.Z();this.X=n;t:if(Ue(this)){var r=Wt(this.g);e="";var i=r.length,a=4==Ht(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Ke(this),qe(this);var o="";break t}this.h.i=new s.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:!(a&&t==i-1)});r.length=0,this.h.g+=e,this.C=0,o=this.h.g}else o=this.g.oa();if(this.o=200==n,function(e,t,n,r,s,i,a){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+t+"\n"+n+"\n"+i+" "+a}))}(this.i,this.u,this.A,this.l,this.R,h,n),this.o){if(this.T&&!this.K){t:{if(this.g){var l,c=this.g;if((l=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!m(l)){var u=l;break t}}u=null}if(!(n=u)){this.o=!1,this.s=3,Ee(12),Ke(this),qe(this);break e}Ae(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ge(this,n)}if(this.P){let e;for(n=!0;!this.J&&this.C<o.length;){if(e=Be(this,o),e==Fe){4==h&&(this.s=4,Ee(14),n=!1),Ae(this.i,this.l,null,"[Incomplete Response]");break}if(e==Oe){this.s=4,Ee(15),Ae(this.i,this.l,o,"[Invalid Chunk]"),n=!1;break}Ae(this.i,this.l,e,null),Ge(this,e)}if(Ue(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=h||0!=o.length||this.h.h||(this.s=1,Ee(16),n=!1),this.o=this.o&&n,n){if(0<o.length&&!this.W){this.W=!0;var d=this.j;d.g==this&&d.ba&&!d.M&&(d.j.info("Great, no buffering proxy detected. Bytes received: "+o.length),rn(d),d.M=!0,Ee(11))}}else Ae(this.i,this.l,o,"[Invalid Chunked Response]"),Ke(this),qe(this)}else Ae(this.i,this.l,o,null),Ge(this,o);4==h&&Ke(this),this.o&&!this.J&&(4==h?on(this.j,this):(this.o=!1,$e(this)))}else(function(e){const t={};e=(e.g&&2<=Ht(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(m(e[r]))continue;var n=_(e[r]);const s=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const i=t[s]||[];t[s]=i,i.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.s=3,Ee(12)):(this.s=0,Ee(13)),Ke(this),qe(this)}}}catch(h){}},Le.prototype.cancel=function(){this.J=!0,Ke(this)},Le.prototype.ba=function(){this.B=null;const e=Date.now();0<=e-this.S?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.i,this.A),2!=this.L&&(Ne(),Ee(17)),Ke(this),this.s=2,qe(this)):He(this,this.S-e)};var Ye=class{constructor(e,t){this.g=e,this.map=t}};function Qe(e){this.l=e||10,s.PerformanceNavigationTiming?e=0<(e=s.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Xe(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Je(e){return e.h?1:e.g?e.g.size:0}function Ze(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function et(e,t){e.g?e.g.add(t):e.h=t}function tt(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function nt(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return h(e.i)}function rt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(i(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.na&&"function"==typeof e.na)return e.na();if(!e.V||"function"!=typeof e.V){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(i(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.V&&"function"==typeof e.V)return e.V();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(i(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),s=r.length,a=0;a<s;a++)t.call(void 0,r[a],n&&n[a],e)}Qe.prototype.cancel=function(){if(this.i=nt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var st=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function it(e){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,e instanceof it){this.h=e.h,ot(this,e.j),this.o=e.o,this.g=e.g,lt(this,e.s),this.l=e.l;var t=e.i,n=new bt;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),ct(this,n),this.m=e.m}else e&&(t=String(e).match(st))?(this.h=!1,ot(this,t[1]||"",!0),this.o=ht(t[2]||""),this.g=ht(t[3]||"",!0),lt(this,t[4]),this.l=ht(t[5]||"",!0),ct(this,t[6]||"",!0),this.m=ht(t[7]||"")):(this.h=!1,this.i=new bt(null,this.h))}function at(e){return new it(e)}function ot(e,t,n){e.j=n?ht(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function lt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.s=t}else e.s=null}function ct(e,t,n){t instanceof bt?(e.i=t,function(e,t){t&&!e.j&&(wt(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(_t(this,t),Nt(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=ft(t,vt)),e.i=new bt(t,e.h))}function ut(e,t,n){e.i.set(t,n)}function dt(e){return ut(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function ht(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function ft(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,mt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function mt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}it.prototype.toString=function(){var e=[],t=this.j;t&&e.push(ft(t,pt,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(ft(t,pt,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(ft(n,"/"==n.charAt(0)?yt:gt,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",ft(n,xt)),e.join("")};var pt=/[#\/\?@]/g,gt=/[#\?:]/g,yt=/[#\?]/g,vt=/[#\?@]/g,xt=/#/g;function bt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function wt(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),s=null;if(0<=r){var i=e[n].substring(0,r);s=e[n].substring(r+1)}else i=e[n];t(i,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function _t(e,t){wt(e),t=St(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function kt(e,t){return wt(e),t=St(e,t),e.g.has(t)}function Nt(e,t,n){_t(e,t),0<n.length&&(e.i=null,e.g.set(St(e,t),h(n)),e.h+=n.length)}function St(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function Et(e,t,n,r,s){try{s&&(s.onload=null,s.onerror=null,s.onabort=null,s.ontimeout=null),r(n)}catch(oO){}}function jt(){this.g=new fe}function Ct(e,t,n){const r=n||"";try{rt(e,(function(e,n){let s=e;a(e)&&(s=de(e)),t.push(r+n+"="+encodeURIComponent(s))}))}catch(hF){throw t.push(r+"type="+encodeURIComponent("_badmap")),hF}}function Tt(e){this.l=e.Ub||null,this.j=e.eb||!1}function At(e,t){ne.call(this),this.D=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function It(e){e.j.read().then(e.Pa.bind(e)).catch(e.ga.bind(e))}function Mt(e){e.readyState=4,e.l=null,e.j=null,e.v=null,Pt(e)}function Pt(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Rt(e){let t="";return v(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function Lt(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Rt(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):ut(e,t,n))}function Dt(e){ne.call(this),this.headers=new Map,this.o=e||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(e=bt.prototype).add=function(e,t){wt(this),this.i=null,e=St(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){wt(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},e.na=function(){wt(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const s=e[r];for(let e=0;e<s.length;e++)n.push(t[r])}return n},e.V=function(e){wt(this);let t=[];if("string"===typeof e)kt(this,e)&&(t=t.concat(this.g.get(St(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},e.set=function(e,t){return wt(this),this.i=null,kt(this,e=St(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&0<(e=this.V(e)).length?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const i=encodeURIComponent(String(r)),a=this.V(r);for(r=0;r<a.length;r++){var s=i;""!==a[r]&&(s+="="+encodeURIComponent(String(a[r]))),e.push(s)}}return this.i=e.join("&")},d(Tt,me),Tt.prototype.g=function(){return new At(this.l,this.j)},Tt.prototype.i=function(e){return function(){return e}}({}),d(At,ne),(e=At.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=e,this.A=t,this.readyState=1,Pt(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.u,method:this.B,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||s).fetch(new Request(this.A,t)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Mt(this)),this.readyState=0},e.Sa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Pt(this)),this.g&&(this.readyState=3,Pt(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if("undefined"!==typeof s.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;It(this)}else e.text().then(this.Ra.bind(this),this.ga.bind(this))},e.Pa=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.v.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Mt(this):Pt(this),3==this.readyState&&It(this)}},e.Ra=function(e){this.g&&(this.response=this.responseText=e,Mt(this))},e.Qa=function(e){this.g&&(this.response=e,Mt(this))},e.ga=function(){this.g&&Mt(this)},e.setRequestHeader=function(e,t){this.u.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(At.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),d(Dt,ne);var Ot=/^https?$/i,Ft=["POST","PUT"];function Vt(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.m=5,zt(e),Bt(e)}function zt(e){e.A||(e.A=!0,re(e,"complete"),re(e,"error"))}function Ut(e){if(e.h&&"undefined"!=typeof r&&(!e.v[1]||4!=Ht(e)||2!=e.Z()))if(e.u&&4==Ht(e))ie(e.Ea,0,e);else if(re(e,"readystatechange"),4==Ht(e)){e.h=!1;try{const r=e.Z();e:switch(r){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var i;if(i=0===r){var a=String(e.D).match(st)[1]||null;!a&&s.self&&s.self.location&&(a=s.self.location.protocol.slice(0,-1)),i=!Ot.test(a?a.toLowerCase():"")}n=i}if(n)re(e,"complete"),re(e,"success");else{e.m=6;try{var o=2<Ht(e)?e.g.statusText:""}catch(l){o=""}e.l=o+" ["+e.Z()+"]",zt(e)}}finally{Bt(e)}}}function Bt(e,t){if(e.g){$t(e);const n=e.g,r=e.v[0]?()=>{}:null;e.g=null,e.v=null,t||re(e,"ready");try{n.onreadystatechange=r}catch(hF){}}}function $t(e){e.I&&(s.clearTimeout(e.I),e.I=null)}function Ht(e){return e.g?e.g.readyState:0}function Wt(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.H){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function qt(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Kt(e){this.Aa=0,this.i=[],this.j=new Te,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=qt("failFast",!1,e),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=qt("baseRetryDelayMs",5e3,e),this.cb=qt("retryDelaySeedMs",1e4,e),this.Wa=qt("forwardChannelMaxRetries",2,e),this.wa=qt("forwardChannelRequestTimeoutMs",2e4,e),this.pa=e&&e.xmlHttpFactory||void 0,this.Xa=e&&e.Tb||void 0,this.Ca=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.h=new Qe(e&&e.concurrentRequestLimit),this.Da=new jt,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=e&&e.Rb||!1,e&&e.xa&&this.j.xa(),e&&e.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&e&&e.detectBufferingProxy||!1,this.ja=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ja=e.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function Gt(e){if(Qt(e),3==e.G){var t=e.U++,n=at(e.I);if(ut(n,"SID",e.K),ut(n,"RID",t),ut(n,"TYPE","terminate"),Zt(e,n),(t=new Le(e,e.j,t)).L=2,t.v=dt(at(n)),n=!1,s.navigator&&s.navigator.sendBeacon)try{n=s.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&s.Image&&((new Image).src=t.v,n=!0),n||(t.g=hn(t.j,null),t.g.ea(t.v)),t.F=Date.now(),$e(t)}un(e)}function Yt(e){e.g&&(rn(e),e.g.cancel(),e.g=null)}function Qt(e){Yt(e),e.u&&(s.clearTimeout(e.u),e.u=null),an(e),e.h.cancel(),e.s&&("number"===typeof e.s&&s.clearTimeout(e.s),e.s=null)}function Xt(e){if(!Xe(e.h)&&!e.s){e.s=!0;var t=e.Ga;j||A(),C||(j(),C=!0),T.add(t,e),e.B=0}}function Jt(e,t){var n;n=t?t.l:e.U++;const r=at(e.I);ut(r,"SID",e.K),ut(r,"RID",n),ut(r,"AID",e.T),Zt(e,r),e.m&&e.o&&Lt(r,e.m,e.o),n=new Le(e,e.j,n,e.B+1),null===e.m&&(n.H=e.o),t&&(e.i=t.D.concat(e.i)),t=en(e,n,1e3),n.I=Math.round(.5*e.wa)+Math.round(.5*e.wa*Math.random()),et(e.h,n),Ve(n,r,t)}function Zt(e,t){e.H&&v(e.H,(function(e,n){ut(t,n,e)})),e.l&&rt({},(function(e,n){ut(t,n,e)}))}function en(e,t,n){n=Math.min(e.i.length,n);var r=e.l?c(e.l.Na,e.l,e):null;e:{var s=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=s[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let a=!0;for(let o=0;o<n;o++){let n=s[o].g;const l=s[o].map;if(n-=t,0>n)t=Math.max(0,s[o].g-100),a=!1;else try{Ct(l,e,"req"+n+"_")}catch(i){r&&r(l)}}if(a){r=e.join("&");break e}}}return e=e.i.splice(0,n),t.D=e,r}function tn(e){if(!e.g&&!e.u){e.Y=1;var t=e.Fa;j||A(),C||(j(),C=!0),T.add(t,e),e.v=0}}function nn(e){return!(e.g||e.u||3<=e.v)&&(e.Y++,e.u=Ce(c(e.Fa,e),ln(e,e.v)),e.v++,!0)}function rn(e){null!=e.A&&(s.clearTimeout(e.A),e.A=null)}function sn(e){e.g=new Le(e,e.j,"rpc",e.Y),null===e.m&&(e.g.H=e.o),e.g.O=0;var t=at(e.qa);ut(t,"RID","rpc"),ut(t,"SID",e.K),ut(t,"AID",e.T),ut(t,"CI",e.F?"0":"1"),!e.F&&e.ja&&ut(t,"TO",e.ja),ut(t,"TYPE","xmlhttp"),Zt(e,t),e.m&&e.o&&Lt(t,e.m,e.o),e.L&&(e.g.I=e.L);var n=e.g;e=e.ia,n.L=1,n.v=dt(at(t)),n.m=null,n.P=!0,ze(n,e)}function an(e){null!=e.C&&(s.clearTimeout(e.C),e.C=null)}function on(e,t){var n=null;if(e.g==t){an(e),rn(e),e.g=null;var r=2}else{if(!Ze(e.h,t))return;n=t.D,tt(e.h,t),r=1}if(0!=e.G)if(t.o)if(1==r){n=t.m?t.m.length:0,t=Date.now()-t.F;var s=e.B;re(r=_e(),new je(r,n)),Xt(e)}else tn(e);else if(3==(s=t.s)||0==s&&0<t.X||!(1==r&&function(e,t){return!(Je(e.h)>=e.h.j-(e.s?1:0))&&(e.s?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.B>=(e.Va?0:e.Wa))&&(e.s=Ce(c(e.Ga,e,t),ln(e,e.B)),e.B++,!0))}(e,t)||2==r&&nn(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),s){case 1:cn(e,5);break;case 4:cn(e,10);break;case 3:cn(e,6);break;default:cn(e,2)}}function ln(e,t){let n=e.Ta+Math.floor(Math.random()*e.cb);return e.isActive()||(n*=2),n*t}function cn(e,t){if(e.j.info("Error code "+t),2==t){var n=c(e.fb,e),r=e.Xa;const t=!r;r=new it(r||"//www.google.com/images/cleardot.gif"),s.location&&"http"==s.location.protocol||ot(r,"https"),dt(r),t?function(e,t){const n=new Te;if(s.Image){const r=new Image;r.onload=u(Et,n,"TestLoadImage: loaded",!0,t,r),r.onerror=u(Et,n,"TestLoadImage: error",!1,t,r),r.onabort=u(Et,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=u(Et,n,"TestLoadImage: timeout",!1,t,r),s.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new Te;const n=new AbortController,r=setTimeout((()=>{n.abort(),Et(0,0,!1,t)}),1e4);fetch(e,{signal:n.signal}).then((e=>{clearTimeout(r),e.ok?Et(0,0,!0,t):Et(0,0,!1,t)})).catch((()=>{clearTimeout(r),Et(0,0,!1,t)}))}(r.toString(),n)}else Ee(2);e.G=0,e.l&&e.l.sa(t),un(e),Qt(e)}function un(e){if(e.G=0,e.ka=[],e.l){const t=nt(e.h);0==t.length&&0==e.i.length||(f(e.ka,t),f(e.ka,e.i),e.h.i.length=0,h(e.i),e.i.length=0),e.l.ra()}}function dn(e,t,n){var r=n instanceof it?at(n):new it(n);if(""!=r.g)t&&(r.g=t+"."+r.g),lt(r,r.s);else{var i=s.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var a=new it(null);r&&ot(a,r),t&&(a.g=t),i&&lt(a,i),n&&(a.l=n),r=a}return n=e.D,t=e.ya,n&&t&&ut(r,n,t),ut(r,"VER",e.la),Zt(e,r),r}function hn(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ca&&!e.pa?new Dt(new Tt({eb:n})):new Dt(e.pa)).Ha(e.J),t}function fn(){}function mn(){}function pn(e,t){ne.call(this),this.g=new Kt(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.va&&(e?e["X-WebChannel-Client-Profile"]=t.va:e={"X-WebChannel-Client-Profile":t.va}),this.g.S=e,(e=t&&t.Sb)&&!m(e)&&(this.g.m=e),this.v=t&&t.supportsCrossDomainXhr||!1,this.u=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!m(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new vn(this)}function gn(e){ve.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function yn(){xe.call(this),this.status=1}function vn(e){this.g=e}(e=Dt.prototype).Ha=function(e){this.J=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ie.g(),this.v=this.o?pe(this.o):pe(Ie),this.g.onreadystatechange=c(this.Ea,this);try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(oO){return void Vt(this,oO)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find((e=>"content-type"==e.toLowerCase())),i=s.FormData&&e instanceof s.FormData,!(0<=Array.prototype.indexOf.call(Ft,t,void 0))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,a]of n)this.g.setRequestHeader(s,a);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{$t(this),this.u=!0,this.g.send(e),this.u=!1}catch(oO){Vt(this,oO)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=e||7,re(this,"complete"),re(this,"abort"),Bt(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Bt(this,!0)),Dt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Ut(this):this.bb())},e.bb=function(){Ut(this)},e.isActive=function(){return!!this.g},e.Z=function(){try{return 2<Ht(this)?this.g.status:-1}catch(e){return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch(e){return""}},e.Oa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),he(t)}},e.Ba=function(){return this.m},e.Ka=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=Kt.prototype).la=8,e.G=1,e.connect=function(e,t,n,r){Ee(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.I=dn(this,null,this.W),Xt(this)},e.Ga=function(e){if(this.s)if(this.s=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;const s=new Le(this,this.j,e);let i=this.o;if(this.S&&(i?(i=x(i),w(i,this.S)):i=this.S),null!==this.m||this.O||(s.H=i,i=null),this.P)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=en(this,s,t),ut(n=at(this.I),"RID",e),ut(n,"CVER",22),this.D&&ut(n,"X-HTTP-Session-Id",this.D),Zt(this,n),i&&(this.O?t="headers="+encodeURIComponent(String(Rt(i)))+"&"+t:this.m&&Lt(n,this.m,i)),et(this.h,s),this.Ua&&ut(n,"TYPE","init"),this.P?(ut(n,"$req",t),ut(n,"SID","null"),s.T=!0,Ve(s,n,null)):Ve(s,n,t),this.G=2}}else 3==this.G&&(e?Jt(this,e):0==this.i.length||Xe(this.h)||Jt(this))},e.Fa=function(){if(this.u=null,sn(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var e=2*this.R;this.j.info("BP detection timer enabled: "+e),this.A=Ce(c(this.ab,this),e)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ee(10),Yt(this),sn(this))},e.Za=function(){null!=this.C&&(this.C=null,Yt(this),nn(this),Ee(19))},e.fb=function(e){e?(this.j.info("Successfully pinged google.com"),Ee(2)):(this.j.info("Failed to ping google.com"),Ee(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=fn.prototype).ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){},mn.prototype.g=function(e,t){return new pn(e,t)},d(pn,ne),pn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},pn.prototype.close=function(){Gt(this.g)},pn.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.u&&((n={}).__data__=de(e),e=n);t.i.push(new Ye(t.Ya++,e)),3==t.G&&Xt(t)},pn.prototype.N=function(){this.g.l=null,delete this.j,Gt(this.g),delete this.g,pn.aa.N.call(this)},d(gn,ve),d(yn,xe),d(vn,fn),vn.prototype.ua=function(){re(this.g,"a")},vn.prototype.ta=function(e){re(this.g,new gn(e))},vn.prototype.sa=function(e){re(this.g,new yn)},vn.prototype.ra=function(){re(this.g,"b")},mn.prototype.createWebChannel=mn.prototype.g,pn.prototype.send=pn.prototype.o,pn.prototype.open=pn.prototype.m,pn.prototype.close=pn.prototype.close,Qo=Jo.createWebChannelTransport=function(){return new mn},Yo=Jo.getStatEventTarget=function(){return _e()},Go=Jo.Event=be,Ko=Jo.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Me.NO_ERROR=0,Me.TIMEOUT=8,Me.HTTP_ERROR=6,qo=Jo.ErrorCode=Me,Pe.COMPLETE="complete",Wo=Jo.EventType=Pe,ge.EventType=ye,ye.OPEN="a",ye.CLOSE="b",ye.ERROR="c",ye.MESSAGE="d",ne.prototype.listen=ne.prototype.K,Ho=Jo.WebChannel=ge,Jo.FetchXmlHttpFactory=Tt,Dt.prototype.listenOnce=Dt.prototype.L,Dt.prototype.getLastError=Dt.prototype.Ka,Dt.prototype.getLastErrorCode=Dt.prototype.Ba,Dt.prototype.getStatus=Dt.prototype.Z,Dt.prototype.getResponseJson=Dt.prototype.Oa,Dt.prototype.getResponseText=Dt.prototype.oa,Dt.prototype.send=Dt.prototype.ea,Dt.prototype.setWithCredentials=Dt.prototype.Ha,$o=Jo.XhrIo=Dt}).apply("undefined"!==typeof Xo?Xo:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const Zo="@firebase/firestore",el="4.7.14";class tl{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}tl.UNAUTHENTICATED=new tl(null),tl.GOOGLE_CREDENTIALS=new tl("google-credentials-uid"),tl.FIRST_PARTY=new tl("first-party-uid"),tl.MOCK_USER=new tl("mock-user");let nl="11.7.3";const rl=new Yn("@firebase/firestore");function sl(){return rl.logLevel}function il(e){if(rl.logLevel<=Hn.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const s=n.map(ll);rl.debug(`Firestore (${nl}): ${e}`,...s)}}function al(e){if(rl.logLevel<=Hn.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const s=n.map(ll);rl.error(`Firestore (${nl}): ${e}`,...s)}}function ol(e){if(rl.logLevel<=Hn.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const s=n.map(ll);rl.warn(`Firestore (${nl}): ${e}`,...s)}}function ll(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function cl(e,t,n){let r="Unexpected state";"string"==typeof t?r=t:n=t,ul(e,r,n)}function ul(e,t,n){let r=`FIRESTORE (${nl}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(void 0!==n)try{r+=" CONTEXT: "+JSON.stringify(n)}catch(e){r+=" CONTEXT: "+n}throw al(r),new Error(r)}function dl(e,t,n,r){let s="Unexpected state";"string"==typeof n?s=n:r=n,e||ul(t,s,r)}function hl(e,t){return e}const fl={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ml extends Cn{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class pl{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class gl{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class yl{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(tl.UNAUTHENTICATED)))}shutdown(){}}class vl{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class xl{constructor(e){this.t=e,this.currentUser=tl.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){dl(void 0===this.o,42304);let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let s=new pl;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new pl,e.enqueueRetryable((()=>r(this.currentUser)))};const i=()=>{const t=s;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},a=e=>{il("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),i())};this.t.onInit((e=>a(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?a(e):(il("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new pl)}}),0),i()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(il("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(dl("string"==typeof t.accessToken,31837,{l:t}),new gl(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return dl(null===e||"string"==typeof e,2055,{h:e}),new tl(e)}}class bl{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type="FirstParty",this.user=tl.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class wl{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new bl(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(tl.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class _l{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class kl{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Qr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){dl(void 0===this.o,3512);const n=e=>{null!=e.error&&il("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);const n=e.token!==this.m;return this.m=e.token,il("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const r=e=>{il("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){const e=this.V.getImmediate({optional:!0});e?r(e):il("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new _l(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(dl("string"==typeof e.token,44558,{tokenResult:e}),this.m=e.token,new _l(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function Nl(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}function Sl(){return new TextEncoder}class El{static newId(){const e=62*Math.floor(256/62);let t="";for(;t.length<20;){const n=Nl(40);for(let r=0;r<n.length;++r)t.length<20&&n[r]<e&&(t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[r]%62))}return t}}function jl(e,t){return e<t?-1:e>t?1:0}function Cl(e,t){let n=0;for(;n<e.length&&n<t.length;){const r=e.codePointAt(n),s=t.codePointAt(n);if(r!==s){if(r<128&&s<128)return jl(r,s);{const i=Sl(),a=Al(i.encode(Tl(e,n)),i.encode(Tl(t,n)));return 0!==a?a:jl(r,s)}}n+=r>65535?2:1}return jl(e.length,t.length)}function Tl(e,t){return e.codePointAt(t)>65535?e.substring(t,t+2):e.substring(t,t+1)}function Al(e,t){for(let n=0;n<e.length&&n<t.length;++n)if(e[n]!==t[n])return jl(e[n],t[n]);return jl(e.length,t.length)}function Il(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}const Ml=-62135596800,Pl=1e6;class Rl{static now(){return Rl.fromMillis(Date.now())}static fromDate(e){return Rl.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*Pl);return new Rl(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ml(fl.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ml(fl.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Ml)throw new ml(fl.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ml(fl.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Pl}_compareTo(e){return this.seconds===e.seconds?jl(this.nanoseconds,e.nanoseconds):jl(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-Ml;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Ll{static fromTimestamp(e){return new Ll(e)}static min(){return new Ll(new Rl(0,0))}static max(){return new Ll(new Rl(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Dl="__name__";class Ol{constructor(e,t,n){void 0===t?t=0:t>e.length&&cl(637,{offset:t,range:e.length}),void 0===n?n=e.length-t:n>e.length-t&&cl(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===Ol.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ol?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=Ol.compareSegments(e.get(r),t.get(r));if(0!==n)return n}return jl(e.length,t.length)}static compareSegments(e,t){const n=Ol.isNumericId(e),r=Ol.isNumericId(t);return n&&!r?-1:!n&&r?1:n&&r?Ol.extractNumericId(e).compare(Ol.extractNumericId(t)):Cl(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Vo.fromString(e.substring(4,e.length-2))}}class Fl extends Ol{construct(e,t,n){return new Fl(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const s of n){if(s.indexOf("//")>=0)throw new ml(fl.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);e.push(...s.split("/").filter((e=>e.length>0)))}return new Fl(e)}static emptyPath(){return new Fl([])}}const Vl=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class zl extends Ol{construct(e,t,n){return new zl(e,t,n)}static isValidIdentifier(e){return Vl.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),zl.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&this.get(0)===Dl}static keyField(){return new zl([Dl])}static fromServerFormat(e){const t=[];let n="",r=0;const s=()=>{if(0===n.length)throw new ml(fl.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let i=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new ml(fl.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new ml(fl.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(i=!i,r++):"."!==t||i?(n+=t,r++):(s(),r++)}if(s(),i)throw new ml(fl.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new zl(t)}static emptyPath(){return new zl([])}}class Ul{constructor(e){this.path=e}static fromPath(e){return new Ul(Fl.fromString(e))}static fromName(e){return new Ul(Fl.fromString(e).popFirst(5))}static empty(){return new Ul(Fl.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Fl.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Fl.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ul(new Fl(e.slice()))}}const Bl=-1;class $l{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}$l.UNKNOWN_ID=-1;function Hl(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,s=Ll.fromTimestamp(1e9===r?new Rl(n+1,0):new Rl(n,r));return new ql(s,Ul.empty(),t)}function Wl(e){return new ql(e.readTime,e.key,Bl)}class ql{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new ql(Ll.min(),Ul.empty(),Bl)}static max(){return new ql(Ll.max(),Ul.empty(),Bl)}}function Kl(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=Ul.comparator(e.documentKey,t.documentKey),0!==n?n:jl(e.largestBatchId,t.largestBatchId))}const Gl="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Yl{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Ql(e){if(e.code!==fl.FAILED_PRECONDITION||e.message!==Gl)throw e;il("LocalStore","Unexpectedly lost primary lease")}class Xl{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&cl(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Xl(((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof Xl?t:Xl.resolve(t)}catch(e){return Xl.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):Xl.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):Xl.reject(t)}static resolve(e){return new Xl(((t,n)=>{t(e)}))}static reject(e){return new Xl(((t,n)=>{n(e)}))}static waitFor(e){return new Xl(((t,n)=>{let r=0,s=0,i=!1;e.forEach((e=>{++r,e.next((()=>{++s,i&&s===r&&t()}),(e=>n(e)))})),i=!0,s===r&&t()}))}static or(e){let t=Xl.resolve(!1);for(const n of e)t=t.next((e=>e?Xl.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}static mapArray(e,t){return new Xl(((n,r)=>{const s=e.length,i=new Array(s);let a=0;for(let o=0;o<s;o++){const l=o;t(e[l]).next((e=>{i[l]=e,++a,a===s&&n(i)}),(e=>r(e)))}}))}static doWhile(e,t){return new Xl(((n,r)=>{const s=()=>{!0===e()?t().next((()=>{s()}),r):n()};s()}))}}function Jl(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Zl(e){return"IndexedDbTransactionError"===e.name}class ec{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ue(e),this.ce=e=>t.writeSequenceNumber(e))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}ec.le=-1;const tc=-1;function nc(e){return null==e}function rc(e){return 0===e&&1/e==-1/0}function sc(e){return"number"==typeof e&&Number.isInteger(e)&&!rc(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}const ic="\x01";function ac(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=lc(t)),t=oc(e.get(n),t);return lc(t)}function oc(e,t){let n=t;const r=e.length;for(let s=0;s<r;s++){const t=e.charAt(s);switch(t){case"\0":n+="\x01\x10";break;case ic:n+="\x01\x11";break;default:n+=t}}return n}function lc(e){return e+ic+"\x01"}const cc="remoteDocuments",uc="owner",dc="mutationQueues",hc="mutations";const fc="documentMutations",mc="remoteDocumentsV14",pc="remoteDocumentGlobal",gc="targets",yc="targetDocuments",vc="targetGlobal",xc="collectionParents",bc="clientMetadata",wc="bundles",_c="namedQueries",kc="indexConfiguration",Nc="indexState",Sc="indexEntries",Ec="documentOverlays",jc="globals",Cc=[dc,hc,fc,cc,gc,uc,vc,yc,bc,pc,xc,wc,_c],Tc=[dc,hc,fc,mc,gc,uc,vc,yc,bc,pc,xc,wc,_c,Ec],Ac=Tc,Ic=[...Ac,kc,Nc,Sc];function Mc(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Pc(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Rc(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class Lc{constructor(e,t){this.comparator=e,this.root=t||Oc.EMPTY}insert(e,t){return new Lc(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Oc.BLACK,null,null))}remove(e){return new Lc(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Oc.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push(`${t}:${n}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Dc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Dc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Dc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Dc(this.root,e,this.comparator,!0)}}class Dc{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?n(e.key,t):1,t&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Oc{constructor(e,t,n,r,s){this.key=e,this.value=t,this.color=null!=n?n:Oc.RED,this.left=null!=r?r:Oc.EMPTY,this.right=null!=s?s:Oc.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,s){return new Oc(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=s?s:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const s=n(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===s?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Oc.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return Oc.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Oc.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Oc.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw cl(43730,{key:this.key,value:this.value});if(this.right.isRed())throw cl(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw cl(27949);return e+(this.isRed()?0:1)}}Oc.EMPTY=null,Oc.RED=!0,Oc.BLACK=!1,Oc.EMPTY=new class{constructor(){this.size=0}get key(){throw cl(57766)}get value(){throw cl(16141)}get color(){throw cl(16727)}get left(){throw cl(29726)}get right(){throw cl(36894)}copy(e,t,n,r,s){return this}insert(e,t,n){return new Oc(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Fc{constructor(e){this.comparator=e,this.data=new Lc(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Vc(this.data.getIterator())}getIteratorFrom(e){return new Vc(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof Fc))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Fc(this.comparator);return t.data=e,t}}class Vc{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class zc{constructor(e){this.fields=e,e.sort(zl.comparator)}static empty(){return new zc([])}unionWith(e){let t=new Fc(zl.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new zc(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Il(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}class Uc extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Bc{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Uc("Invalid base64 string: "+e):e}}(e);return new Bc(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new Bc(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return jl(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Bc.EMPTY_BYTE_STRING=new Bc("");const $c=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Hc(e){if(dl(!!e,39018),"string"==typeof e){let t=0;const n=$c.exec(e);if(dl(!!n,46558,{timestamp:e}),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Wc(e.seconds),nanos:Wc(e.nanos)}}function Wc(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function qc(e){return"string"==typeof e?Bc.fromBase64String(e):Bc.fromUint8Array(e)}const Kc="server_timestamp",Gc="__type__",Yc="__previous_value__",Qc="__local_write_time__";function Xc(e){var t,n;return(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{})[Gc])||void 0===n?void 0:n.stringValue)===Kc}function Jc(e){const t=e.mapValue.fields[Yc];return Xc(t)?Jc(t):t}function Zc(e){const t=Hc(e.mapValue.fields[Qc].timestampValue);return new Rl(t.seconds,t.nanos)}class eu{constructor(e,t,n,r,s,i,a,o,l,c){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=s,this.forceLongPolling=i,this.autoDetectLongPolling=a,this.longPollingOptions=o,this.useFetchStreams=l,this.isUsingEmulator=c}}const tu="(default)";class nu{constructor(e,t){this.projectId=e,this.database=t||tu}static empty(){return new nu("","")}get isDefaultDatabase(){return this.database===tu}isEqual(e){return e instanceof nu&&e.projectId===this.projectId&&e.database===this.database}}const ru="__type__",su="__max__",iu={mapValue:{fields:{__type__:{stringValue:su}}}},au="__vector__",ou="value";function lu(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Xc(e)?4:Su(e)?9007199254740991:ku(e)?10:11:cl(28295,{value:e})}function cu(e,t){if(e===t)return!0;const n=lu(e);if(n!==lu(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Zc(e).isEqual(Zc(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=Hc(e.timestampValue),r=Hc(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return qc(e.bytesValue).isEqual(qc(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Wc(e.geoPointValue.latitude)===Wc(t.geoPointValue.latitude)&&Wc(e.geoPointValue.longitude)===Wc(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Wc(e.integerValue)===Wc(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=Wc(e.doubleValue),r=Wc(t.doubleValue);return n===r?rc(n)===rc(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Il(e.arrayValue.values||[],t.arrayValue.values||[],cu);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Mc(n)!==Mc(r))return!1;for(const s in n)if(n.hasOwnProperty(s)&&(void 0===r[s]||!cu(n[s],r[s])))return!1;return!0}(e,t);default:return cl(52216,{left:e})}}function uu(e,t){return void 0!==(e.values||[]).find((e=>cu(e,t)))}function du(e,t){if(e===t)return 0;const n=lu(e),r=lu(t);if(n!==r)return jl(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return jl(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=Wc(e.integerValue||e.doubleValue),r=Wc(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return hu(e.timestampValue,t.timestampValue);case 4:return hu(Zc(e),Zc(t));case 5:return Cl(e.stringValue,t.stringValue);case 6:return function(e,t){const n=qc(e),r=qc(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let s=0;s<n.length&&s<r.length;s++){const e=jl(n[s],r[s]);if(0!==e)return e}return jl(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=jl(Wc(e.latitude),Wc(t.latitude));return 0!==n?n:jl(Wc(e.longitude),Wc(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return fu(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n,r,s,i;const a=e.fields||{},o=t.fields||{},l=null===(n=a[ou])||void 0===n?void 0:n.arrayValue,c=null===(r=o[ou])||void 0===r?void 0:r.arrayValue,u=jl((null===(s=null==l?void 0:l.values)||void 0===s?void 0:s.length)||0,(null===(i=null==c?void 0:c.values)||void 0===i?void 0:i.length)||0);return 0!==u?u:fu(l,c)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===iu.mapValue&&t===iu.mapValue)return 0;if(e===iu.mapValue)return 1;if(t===iu.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),s=t.fields||{},i=Object.keys(s);r.sort(),i.sort();for(let a=0;a<r.length&&a<i.length;++a){const e=Cl(r[a],i[a]);if(0!==e)return e;const t=du(n[r[a]],s[i[a]]);if(0!==t)return t}return jl(r.length,i.length)}(e.mapValue,t.mapValue);default:throw cl(23264,{Pe:n})}}function hu(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return jl(e,t);const n=Hc(e),r=Hc(t),s=jl(n.seconds,r.seconds);return 0!==s?s:jl(n.nanos,r.nanos)}function fu(e,t){const n=e.values||[],r=t.values||[];for(let s=0;s<n.length&&s<r.length;++s){const e=du(n[s],r[s]);if(e)return e}return jl(n.length,r.length)}function mu(e){return pu(e)}function pu(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=Hc(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return qc(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return Ul.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return`geo(${e.latitude},${e.longitude})`}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=pu(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const s of t)r?r=!1:n+=",",n+=`${s}:${pu(e.fields[s])}`;return n+"}"}(e.mapValue):cl(61005,{value:e})}function gu(e){switch(lu(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Jc(e);return t?16+gu(t):16;case 5:return 2*e.stringValue.length;case 6:return qc(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(e){return(e.values||[]).reduce(((e,t)=>e+gu(t)),0)}(e.arrayValue);case 10:case 11:return function(e){let t=0;return Pc(e.fields,((e,n)=>{t+=e.length+gu(n)})),t}(e.mapValue);default:throw cl(13486,{value:e})}}function yu(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function vu(e){return!!e&&"integerValue"in e}function xu(e){return!!e&&"arrayValue"in e}function bu(e){return!!e&&"nullValue"in e}function wu(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function _u(e){return!!e&&"mapValue"in e}function ku(e){var t,n;return(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{})[ru])||void 0===n?void 0:n.stringValue)===au}function Nu(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Pc(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=Nu(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Nu(e.arrayValue.values[n]);return t}return Object.assign({},e)}function Su(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===su}class Eu{constructor(e){this.value=e}static empty(){return new Eu({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!_u(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Nu(t)}setAll(e){let t=zl.emptyPath(),n={},r=[];e.forEach(((e,s)=>{if(!t.isImmediateParentOf(s)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=s.popLast()}e?n[s.lastSegment()]=Nu(e):r.push(s.lastSegment())}));const s=this.getFieldsMap(t);this.applyChanges(s,n,r)}delete(e){const t=this.field(e.popLast());_u(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return cu(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];_u(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){Pc(t,((t,n)=>e[t]=n));for(const r of n)delete e[r]}clone(){return new Eu(Nu(this.value))}}function ju(e){const t=[];return Pc(e.fields,((e,n)=>{const r=new zl([e]);if(_u(n)){const e=ju(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)})),new zc(t)}class Cu{constructor(e,t,n,r,s,i,a){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=s,this.data=i,this.documentState=a}static newInvalidDocument(e){return new Cu(e,0,Ll.min(),Ll.min(),Ll.min(),Eu.empty(),0)}static newFoundDocument(e,t,n,r){return new Cu(e,1,t,Ll.min(),n,r,0)}static newNoDocument(e,t){return new Cu(e,2,t,Ll.min(),Ll.min(),Eu.empty(),0)}static newUnknownDocument(e,t){return new Cu(e,3,t,Ll.min(),Ll.min(),Eu.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ll.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Eu.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Eu.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ll.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Cu&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Cu(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Tu{constructor(e,t){this.position=e,this.inclusive=t}}function Au(e,t,n){let r=0;for(let s=0;s<e.position.length;s++){const i=t[s],a=e.position[s];if(r=i.field.isKeyField()?Ul.comparator(Ul.fromName(a.referenceValue),n.key):du(a,n.data.field(i.field)),"desc"===i.dir&&(r*=-1),0!==r)break}return r}function Iu(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!cu(e.position[n],t.position[n]))return!1;return!0}class Mu{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function Pu(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class Ru{}class Lu extends Ru{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new $u(e,t,n):"array-contains"===t?new Ku(e,n):"in"===t?new Gu(e,n):"not-in"===t?new Yu(e,n):"array-contains-any"===t?new Qu(e,n):new Lu(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new Hu(e,n):new Wu(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&void 0===t.nullValue&&this.matchesComparison(du(t,this.value)):null!==t&&lu(this.value)===lu(t)&&this.matchesComparison(du(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return cl(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Du extends Ru{constructor(e,t){super(),this.filters=e,this.op=t,this.Te=null}static create(e,t){return new Du(e,t)}matches(e){return Ou(this)?void 0===this.filters.find((t=>!t.matches(e))):void 0!==this.filters.find((t=>t.matches(e)))}getFlattenedFilters(){return null!==this.Te||(this.Te=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function Ou(e){return"and"===e.op}function Fu(e){return Vu(e)&&Ou(e)}function Vu(e){for(const t of e.filters)if(t instanceof Du)return!1;return!0}function zu(e){if(e instanceof Lu)return e.field.canonicalString()+e.op.toString()+mu(e.value);if(Fu(e))return e.filters.map((e=>zu(e))).join(",");{const t=e.filters.map((e=>zu(e))).join(",");return`${e.op}(${t})`}}function Uu(e,t){return e instanceof Lu?function(e,t){return t instanceof Lu&&e.op===t.op&&e.field.isEqual(t.field)&&cu(e.value,t.value)}(e,t):e instanceof Du?function(e,t){return t instanceof Du&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce(((e,n,r)=>e&&Uu(n,t.filters[r])),!0)}(e,t):void cl(19439)}function Bu(e){return e instanceof Lu?function(e){return`${e.field.canonicalString()} ${e.op} ${mu(e.value)}`}(e):e instanceof Du?function(e){return e.op.toString()+" {"+e.getFilters().map(Bu).join(" ,")+"}"}(e):"Filter"}class $u extends Lu{constructor(e,t,n){super(e,t,n),this.key=Ul.fromName(n.referenceValue)}matches(e){const t=Ul.comparator(e.key,this.key);return this.matchesComparison(t)}}class Hu extends Lu{constructor(e,t){super(e,"in",t),this.keys=qu("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class Wu extends Lu{constructor(e,t){super(e,"not-in",t),this.keys=qu("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function qu(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>Ul.fromName(e.referenceValue)))}class Ku extends Lu{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return xu(t)&&uu(t.arrayValue,this.value)}}class Gu extends Lu{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&uu(this.value.arrayValue,t)}}class Yu extends Lu{constructor(e,t){super(e,"not-in",t)}matches(e){if(uu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&void 0===t.nullValue&&!uu(this.value.arrayValue,t)}}class Qu extends Lu{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!xu(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>uu(this.value.arrayValue,e)))}}class Xu{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=s,this.startAt=i,this.endAt=a,this.Ie=null}}function Ju(e){return new Xu(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Zu(e){const t=hl(e);if(null===t.Ie){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>zu(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),nc(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>mu(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>mu(e))).join(",")),t.Ie=e}return t.Ie}function ed(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!Pu(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Uu(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Iu(e.startAt,t.startAt)&&Iu(e.endAt,t.endAt)}function td(e){return Ul.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class nd{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=s,this.limitType=i,this.startAt=a,this.endAt=o,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function rd(e,t,n,r,s,i,a,o){return new nd(e,t,n,r,s,i,a,o)}function sd(e){return new nd(e)}function id(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function ad(e){return null!==e.collectionGroup}function od(e){const t=hl(e);if(null===t.Ee){t.Ee=[];const e=new Set;for(const s of t.explicitOrderBy)t.Ee.push(s),e.add(s.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new Fc(zl.comparator);return e.filters.forEach((e=>{e.getFlattenedFilters().forEach((e=>{e.isInequality()&&(t=t.add(e.field))}))})),t}(t);r.forEach((r=>{e.has(r.canonicalString())||r.isKeyField()||t.Ee.push(new Mu(r,n))})),e.has(zl.keyField().canonicalString())||t.Ee.push(new Mu(zl.keyField(),n))}return t.Ee}function ld(e){const t=hl(e);return t.de||(t.de=cd(t,od(e))),t.de}function cd(e,t){if("F"===e.limitType)return Ju(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((e=>{const t="desc"===e.dir?"asc":"desc";return new Mu(e.field,t)}));const n=e.endAt?new Tu(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Tu(e.startAt.position,e.startAt.inclusive):null;return Ju(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function ud(e,t){const n=e.filters.concat([t]);return new nd(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function dd(e,t,n){return new nd(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function hd(e,t){return ed(ld(e),ld(t))&&e.limitType===t.limitType}function fd(e){return`${Zu(ld(e))}|lt:${e.limitType}`}function md(e){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map((e=>Bu(e))).join(", ")}]`),nc(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map((e=>function(e){return`${e.field.canonicalString()} (${e.dir})`}(e))).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>mu(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>mu(e))).join(",")),`Target(${t})`}(ld(e))}; limitType=${e.limitType})`}function pd(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Ul.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of od(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=Au(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,od(e),t))&&!(e.endAt&&!function(e,t,n){const r=Au(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,od(e),t))}(e,t)}function gd(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function yd(e){return(t,n)=>{let r=!1;for(const s of od(e)){const e=vd(s,t,n);if(0!==e)return e;r=r||s.field.isKeyField()}return 0}}function vd(e,t,n){const r=e.field.isKeyField()?Ul.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),s=n.data.field(e);return null!==r&&null!==s?du(r,s):cl(42886)}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return cl(19790,{direction:e.dir})}}class xd{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,s]of n)if(this.equalsFn(r,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Pc(this.inner,((t,n)=>{for(const[r,s]of n)e(r,s)}))}isEmpty(){return Rc(this.inner)}size(){return this.innerSize}}const bd=new Lc(Ul.comparator);function wd(){return bd}const _d=new Lc(Ul.comparator);function kd(){let e=_d;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const s of n)e=e.insert(s.key,s);return e}function Nd(e){let t=_d;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function Sd(){return jd()}function Ed(){return jd()}function jd(){return new xd((e=>e.toString()),((e,t)=>e.isEqual(t)))}const Cd=new Lc(Ul.comparator),Td=new Fc(Ul.comparator);function Ad(){let e=Td;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const s of n)e=e.add(s);return e}const Id=new Fc(jl);function Md(){return Id}function Pd(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:rc(t)?"-0":t}}function Rd(e){return{integerValue:""+e}}function Ld(e,t){return sc(t)?Rd(t):Pd(e,t)}class Dd{constructor(){this._=void 0}}function Od(e,t,n){return e instanceof zd?function(e,t){const n={fields:{[Gc]:{stringValue:Kc},[Qc]:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Xc(t)&&(t=Jc(t)),t&&(n.fields[Yc]=t),{mapValue:n}}(n,t):e instanceof Ud?Bd(e,t):e instanceof $d?Hd(e,t):function(e,t){const n=Vd(e,t),r=qd(n)+qd(e.Re);return vu(n)&&vu(e.Re)?Rd(r):Pd(e.serializer,r)}(e,t)}function Fd(e,t,n){return e instanceof Ud?Bd(e,t):e instanceof $d?Hd(e,t):n}function Vd(e,t){return e instanceof Wd?function(e){return vu(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class zd extends Dd{}class Ud extends Dd{constructor(e){super(),this.elements=e}}function Bd(e,t){const n=Kd(t);for(const r of e.elements)n.some((e=>cu(e,r)))||n.push(r);return{arrayValue:{values:n}}}class $d extends Dd{constructor(e){super(),this.elements=e}}function Hd(e,t){let n=Kd(t);for(const r of e.elements)n=n.filter((e=>!cu(e,r)));return{arrayValue:{values:n}}}class Wd extends Dd{constructor(e,t){super(),this.serializer=e,this.Re=t}}function qd(e){return Wc(e.integerValue||e.doubleValue)}function Kd(e){return xu(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class Gd{constructor(e,t){this.field=e,this.transform=t}}class Yd{constructor(e,t){this.version=e,this.transformResults=t}}class Qd{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Qd}static exists(e){return new Qd(void 0,e)}static updateTime(e){return new Qd(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Xd(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class Jd{}function Zd(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new ch(e.key,Qd.none()):new sh(e.key,e.data,Qd.none());{const n=e.data,r=Eu.empty();let s=new Fc(zl.comparator);for(let e of t.fields)if(!s.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),s=s.add(e)}return new ih(e.key,r,new zc(s.toArray()),Qd.none())}}function eh(e,t,n){e instanceof sh?function(e,t,n){const r=e.value.clone(),s=oh(e.fieldTransforms,t,n.transformResults);r.setAll(s),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof ih?function(e,t,n){if(!Xd(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=oh(e.fieldTransforms,t,n.transformResults),s=t.data;s.setAll(ah(e)),s.setAll(r),t.convertToFoundDocument(n.version,s).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function th(e,t,n,r){return e instanceof sh?function(e,t,n,r){if(!Xd(e.precondition,t))return n;const s=e.value.clone(),i=lh(e.fieldTransforms,r,t);return s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null}(e,t,n,r):e instanceof ih?function(e,t,n,r){if(!Xd(e.precondition,t))return n;const s=lh(e.fieldTransforms,r,t),i=t.data;return i.setAll(ah(e)),i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,r):function(e,t,n){return Xd(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function nh(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),s=Vd(r.transform,e||null);null!=s&&(null===n&&(n=Eu.empty()),n.set(r.field,s))}return n||null}function rh(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Il(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Ud&&t instanceof Ud||e instanceof $d&&t instanceof $d?Il(e.elements,t.elements,cu):e instanceof Wd&&t instanceof Wd?cu(e.Re,t.Re):e instanceof zd&&t instanceof zd}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class sh extends Jd{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class ih extends Jd{constructor(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function ah(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function oh(e,t,n){const r=new Map;dl(e.length===n.length,32656,{Ve:n.length,me:e.length});for(let s=0;s<n.length;s++){const i=e[s],a=i.transform,o=t.data.field(i.field);r.set(i.field,Fd(a,o,n[s]))}return r}function lh(e,t,n){const r=new Map;for(const s of e){const e=s.transform,i=n.data.field(s.field);r.set(s.field,Od(e,i,t))}return r}class ch extends Jd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class uh extends Jd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class dh{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&eh(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=th(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=th(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=Ed();return this.mutations.forEach((r=>{const s=e.get(r.key),i=s.overlayedDocument;let a=this.applyToLocalView(i,s.mutatedFields);a=t.has(r.key)?null:a;const o=Zd(i,a);null!==o&&n.set(r.key,o),i.isValidDocument()||i.convertToNoDocument(Ll.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Ad())}isEqual(e){return this.batchId===e.batchId&&Il(this.mutations,e.mutations,((e,t)=>rh(e,t)))&&Il(this.baseMutations,e.baseMutations,((e,t)=>rh(e,t)))}}class hh{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){dl(e.mutations.length===n.length,58842,{fe:e.mutations.length,ge:n.length});let r=Cd;const s=e.mutations;for(let i=0;i<s.length;i++)r=r.insert(s[i].key,n[i].version);return new hh(e,t,n,r)}}class fh{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class mh{constructor(e,t){this.count=e,this.unchangedNames=t}}var ph,gh;function yh(e){switch(e){case fl.OK:return cl(64938);case fl.CANCELLED:case fl.UNKNOWN:case fl.DEADLINE_EXCEEDED:case fl.RESOURCE_EXHAUSTED:case fl.INTERNAL:case fl.UNAVAILABLE:case fl.UNAUTHENTICATED:return!1;case fl.INVALID_ARGUMENT:case fl.NOT_FOUND:case fl.ALREADY_EXISTS:case fl.PERMISSION_DENIED:case fl.FAILED_PRECONDITION:case fl.ABORTED:case fl.OUT_OF_RANGE:case fl.UNIMPLEMENTED:case fl.DATA_LOSS:return!0;default:return cl(15467,{code:e})}}function vh(e){if(void 0===e)return al("GRPC error has no .code"),fl.UNKNOWN;switch(e){case ph.OK:return fl.OK;case ph.CANCELLED:return fl.CANCELLED;case ph.UNKNOWN:return fl.UNKNOWN;case ph.DEADLINE_EXCEEDED:return fl.DEADLINE_EXCEEDED;case ph.RESOURCE_EXHAUSTED:return fl.RESOURCE_EXHAUSTED;case ph.INTERNAL:return fl.INTERNAL;case ph.UNAVAILABLE:return fl.UNAVAILABLE;case ph.UNAUTHENTICATED:return fl.UNAUTHENTICATED;case ph.INVALID_ARGUMENT:return fl.INVALID_ARGUMENT;case ph.NOT_FOUND:return fl.NOT_FOUND;case ph.ALREADY_EXISTS:return fl.ALREADY_EXISTS;case ph.PERMISSION_DENIED:return fl.PERMISSION_DENIED;case ph.FAILED_PRECONDITION:return fl.FAILED_PRECONDITION;case ph.ABORTED:return fl.ABORTED;case ph.OUT_OF_RANGE:return fl.OUT_OF_RANGE;case ph.UNIMPLEMENTED:return fl.UNIMPLEMENTED;case ph.DATA_LOSS:return fl.DATA_LOSS;default:return cl(39323,{code:e})}}(gh=ph||(ph={}))[gh.OK=0]="OK",gh[gh.CANCELLED=1]="CANCELLED",gh[gh.UNKNOWN=2]="UNKNOWN",gh[gh.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",gh[gh.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",gh[gh.NOT_FOUND=5]="NOT_FOUND",gh[gh.ALREADY_EXISTS=6]="ALREADY_EXISTS",gh[gh.PERMISSION_DENIED=7]="PERMISSION_DENIED",gh[gh.UNAUTHENTICATED=16]="UNAUTHENTICATED",gh[gh.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",gh[gh.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",gh[gh.ABORTED=10]="ABORTED",gh[gh.OUT_OF_RANGE=11]="OUT_OF_RANGE",gh[gh.UNIMPLEMENTED=12]="UNIMPLEMENTED",gh[gh.INTERNAL=13]="INTERNAL",gh[gh.UNAVAILABLE=14]="UNAVAILABLE",gh[gh.DATA_LOSS=15]="DATA_LOSS";let xh=null;const bh=new Vo([4294967295,4294967295],0);function wh(e){const t=Sl().encode(e),n=new zo;return n.update(t),new Uint8Array(n.digest())}function _h(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),s=t.getUint32(8,!0),i=t.getUint32(12,!0);return[new Vo([n,r],0),new Vo([s,i],0)]}class kh{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new Nh(`Invalid padding: ${t}`);if(n<0)throw new Nh(`Invalid hash count: ${n}`);if(e.length>0&&0===this.hashCount)throw new Nh(`Invalid hash count: ${n}`);if(0===e.length&&0!==t)throw new Nh(`Invalid padding when bitmap length is 0: ${t}`);this.pe=8*e.length-t,this.ye=Vo.fromNumber(this.pe)}we(e,t,n){let r=e.add(t.multiply(Vo.fromNumber(n)));return 1===r.compare(bh)&&(r=new Vo([r.getBits(0),r.getBits(1)],0)),r.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.pe)return!1;const t=wh(e),[n,r]=_h(t);for(let s=0;s<this.hashCount;s++){const e=this.we(n,r,s);if(!this.be(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),i=new kh(s,r,t);return n.forEach((e=>i.insert(e))),i}insert(e){if(0===this.pe)return;const t=wh(e),[n,r]=_h(t);for(let s=0;s<this.hashCount;s++){const e=this.we(n,r,s);this.Se(e)}}Se(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class Nh extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Sh{constructor(e,t,n,r,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,Eh.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new Sh(Ll.min(),r,new Lc(jl),wd(),Ad())}}class Eh{constructor(e,t,n,r,s){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new Eh(n,t,Ad(),Ad(),Ad())}}class jh{constructor(e,t,n,r){this.De=e,this.removedTargetIds=t,this.key=n,this.ve=r}}class Ch{constructor(e,t){this.targetId=e,this.Ce=t}}class Th{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Bc.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class Ah{constructor(){this.Fe=0,this.Me=Ph(),this.xe=Bc.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return 0!==this.Fe}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=Ad(),t=Ad(),n=Ad();return this.Me.forEach(((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:cl(38017,{changeType:s})}})),new Eh(this.xe,this.Oe,e,t,n)}Qe(){this.Ne=!1,this.Me=Ph()}$e(e,t){this.Ne=!0,this.Me=this.Me.insert(e,t)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,dl(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class Ih{constructor(e){this.ze=e,this.je=new Map,this.He=wd(),this.Je=Mh(),this.Ye=Mh(),this.Ze=new Lc(jl)}Xe(e){for(const t of e.De)e.ve&&e.ve.isFoundDocument()?this.et(t,e.ve):this.tt(t,e.key,e.ve);for(const t of e.removedTargetIds)this.tt(t,e.key,e.ve)}nt(e){this.forEachTarget(e,(t=>{const n=this.rt(t);switch(e.state){case 0:this.it(t)&&n.ke(e.resumeToken);break;case 1:n.We(),n.Be||n.Qe(),n.ke(e.resumeToken);break;case 2:n.We(),n.Be||this.removeTarget(t);break;case 3:this.it(t)&&(n.Ge(),n.ke(e.resumeToken));break;case 4:this.it(t)&&(this.st(t),n.ke(e.resumeToken));break;default:cl(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.je.forEach(((e,n)=>{this.it(n)&&t(n)}))}ot(e){const t=e.targetId,n=e.Ce.count,r=this._t(t);if(r){const s=r.target;if(td(s))if(0===n){const e=new Ul(s.path);this.tt(t,e,Cu.newNoDocument(e,Ll.min()))}else dl(1===n,20013,{expectedCount:n});else{const r=this.ut(t);if(r!==n){const n=this.ct(e),s=n?this.lt(n,e,r):1;if(0!==s){this.st(t);const e=2===s?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,e)}null==xh||xh.ht(function(e,t,n,r,s){var i,a,o,l,c,u;const d={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},h=t.unchangedNames;return h&&(d.bloomFilter={applied:0===s,hashCount:null!==(i=null==h?void 0:h.hashCount)&&void 0!==i?i:0,bitmapLength:null!==(l=null===(o=null===(a=null==h?void 0:h.bits)||void 0===a?void 0:a.bitmap)||void 0===o?void 0:o.length)&&void 0!==l?l:0,padding:null!==(u=null===(c=null==h?void 0:h.bits)||void 0===c?void 0:c.padding)&&void 0!==u?u:0,mightContain:e=>{var t;return null!==(t=null==r?void 0:r.mightContain(e))&&void 0!==t&&t}}),d}(r,e.Ce,this.ze.Pt(),n,s))}}}}ct(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:s=0}=t;let i,a;try{i=qc(n).toUint8Array()}catch(e){if(e instanceof Uc)return ol("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{a=new kh(i,r,s)}catch(e){return ol(e instanceof Nh?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===a.pe?null:a}lt(e,t,n){return t.Ce.count===n-this.Tt(e,t.targetId)?0:2}Tt(e,t){const n=this.ze.getRemoteKeysForTarget(t);let r=0;return n.forEach((n=>{const s=this.ze.Pt(),i=`projects/${s.projectId}/databases/${s.database}/documents/${n.path.canonicalString()}`;e.mightContain(i)||(this.tt(t,n,null),r++)})),r}It(e){const t=new Map;this.je.forEach(((n,r)=>{const s=this._t(r);if(s){if(n.current&&td(s.target)){const t=new Ul(s.target.path);this.Et(t).has(r)||this.dt(r,t)||this.tt(r,t,Cu.newNoDocument(t,e))}n.Le&&(t.set(r,n.qe()),n.Qe())}}));let n=Ad();this.Ye.forEach(((e,t)=>{let r=!0;t.forEachWhile((e=>{const t=this._t(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)})),r&&(n=n.add(e))})),this.He.forEach(((t,n)=>n.setReadTime(e)));const r=new Sh(e,t,this.Ze,this.He,n);return this.He=wd(),this.Je=Mh(),this.Ye=Mh(),this.Ze=new Lc(jl),r}et(e,t){if(!this.it(e))return;const n=this.dt(e,t.key)?2:0;this.rt(e).$e(t.key,n),this.He=this.He.insert(t.key,t),this.Je=this.Je.insert(t.key,this.Et(t.key).add(e)),this.Ye=this.Ye.insert(t.key,this.At(t.key).add(e))}tt(e,t,n){if(!this.it(e))return;const r=this.rt(e);this.dt(e,t)?r.$e(t,1):r.Ue(t),this.Ye=this.Ye.insert(t,this.At(t).delete(e)),this.Ye=this.Ye.insert(t,this.At(t).add(e)),n&&(this.He=this.He.insert(t,n))}removeTarget(e){this.je.delete(e)}ut(e){const t=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let t=this.je.get(e);return t||(t=new Ah,this.je.set(e,t)),t}At(e){let t=this.Ye.get(e);return t||(t=new Fc(jl),this.Ye=this.Ye.insert(e,t)),t}Et(e){let t=this.Je.get(e);return t||(t=new Fc(jl),this.Je=this.Je.insert(e,t)),t}it(e){const t=null!==this._t(e);return t||il("WatchChangeAggregator","Detected inactive target",e),t}_t(e){const t=this.je.get(e);return t&&t.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new Ah),this.ze.getRemoteKeysForTarget(e).forEach((t=>{this.tt(e,t,null)}))}dt(e,t){return this.ze.getRemoteKeysForTarget(e).has(t)}}function Mh(){return new Lc(Ul.comparator)}function Ph(){return new Lc(Ul.comparator)}const Rh={asc:"ASCENDING",desc:"DESCENDING"},Lh={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Dh={and:"AND",or:"OR"};class Oh{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Fh(e,t){return e.useProto3Json||nc(t)?t:{value:t}}function Vh(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function zh(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Uh(e,t){return Vh(e,t.toTimestamp())}function Bh(e){return dl(!!e,49232),Ll.fromTimestamp(function(e){const t=Hc(e);return new Rl(t.seconds,t.nanos)}(e))}function $h(e,t){return Hh(e,t).canonicalString()}function Hh(e,t){const n=function(e){return new Fl(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function Wh(e){const t=Fl.fromString(e);return dl(hf(t),10190,{key:t.toString()}),t}function qh(e,t){return $h(e.databaseId,t.path)}function Kh(e,t){const n=Wh(t);if(n.get(1)!==e.databaseId.projectId)throw new ml(fl.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new ml(fl.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Ul(Xh(n))}function Gh(e,t){return $h(e.databaseId,t)}function Yh(e){const t=Wh(e);return 4===t.length?Fl.emptyPath():Xh(t)}function Qh(e){return new Fl(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Xh(e){return dl(e.length>4&&"documents"===e.get(4),29091,{key:e.toString()}),e.popFirst(5)}function Jh(e,t,n){return{name:qh(e,t),fields:n.value.mapValue.fields}}function Zh(e,t){let n;if(t instanceof sh)n={update:Jh(e,t.key,t.value)};else if(t instanceof ch)n={delete:qh(e,t.key)};else if(t instanceof ih)n={update:Jh(e,t.key,t.data),updateMask:df(t.fieldMask)};else{if(!(t instanceof uh))return cl(16599,{ft:t.type});n={verify:qh(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof zd)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Ud)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof $d)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Wd)return{fieldPath:t.field.canonicalString(),increment:n.Re};throw cl(20930,{transform:t.transform})}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Uh(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:cl(27497)}(e,t.precondition)),n}function ef(e,t){return{documents:[Gh(e,t.path)]}}function tf(e,t){const n={structuredQuery:{}},r=t.path;let s;null!==t.collectionGroup?(s=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Gh(e,s);const i=function(e){if(0!==e.length)return uf(Du.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);const a=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:lf(e.field),direction:sf(e.dir)}}(e)))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);const o=Fh(e,t.limit);return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{gt:n,parent:s}}function nf(e){let t=Yh(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){dl(1===r,65062);const e=n.from[0];e.allDescendants?s=e.collectionId:t=t.child(e.collectionId)}let i=[];n.where&&(i=function(e){const t=rf(e);return t instanceof Du&&Fu(t)?t.getFilters():[t]}(n.where));let a=[];n.orderBy&&(a=function(e){return e.map((e=>function(e){return new Mu(cf(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)))}(n.orderBy));let o=null;n.limit&&(o=function(e){let t;return t="object"==typeof e?e.value:e,nc(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new Tu(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new Tu(n,t)}(n.endAt)),rd(t,s,a,i,o,"F",l,c)}function rf(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=cf(e.unaryFilter.field);return Lu.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=cf(e.unaryFilter.field);return Lu.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=cf(e.unaryFilter.field);return Lu.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=cf(e.unaryFilter.field);return Lu.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return cl(61313);default:return cl(60726)}}(e):void 0!==e.fieldFilter?function(e){return Lu.create(cf(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return cl(58110);default:return cl(50506)}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return Du.create(e.compositeFilter.filters.map((e=>rf(e))),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return cl(1026)}}(e.compositeFilter.op))}(e):cl(30097,{filter:e})}function sf(e){return Rh[e]}function af(e){return Lh[e]}function of(e){return Dh[e]}function lf(e){return{fieldPath:e.canonicalString()}}function cf(e){return zl.fromServerFormat(e.fieldPath)}function uf(e){return e instanceof Lu?function(e){if("=="===e.op){if(wu(e.value))return{unaryFilter:{field:lf(e.field),op:"IS_NAN"}};if(bu(e.value))return{unaryFilter:{field:lf(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(wu(e.value))return{unaryFilter:{field:lf(e.field),op:"IS_NOT_NAN"}};if(bu(e.value))return{unaryFilter:{field:lf(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:lf(e.field),op:af(e.op),value:e.value}}}(e):e instanceof Du?function(e){const t=e.getFilters().map((e=>uf(e)));return 1===t.length?t[0]:{compositeFilter:{op:of(e.op),filters:t}}}(e):cl(54877,{filter:e})}function df(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function hf(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class ff{constructor(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Ll.min(),i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Ll.min(),a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Bc.EMPTY_BYTE_STRING,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=i,this.resumeToken=a,this.expectedCount=o}withSequenceNumber(e){return new ff(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new ff(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ff(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ff(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class mf{constructor(e){this.wt=e}}function pf(e){const t=nf({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?dd(t,t.limit,"L"):t}class gf{constructor(){}vt(e,t){this.Ct(e,t),t.Ft()}Ct(e,t){if("nullValue"in e)this.Mt(t,5);else if("booleanValue"in e)this.Mt(t,10),t.xt(e.booleanValue?1:0);else if("integerValue"in e)this.Mt(t,15),t.xt(Wc(e.integerValue));else if("doubleValue"in e){const n=Wc(e.doubleValue);isNaN(n)?this.Mt(t,13):(this.Mt(t,15),rc(n)?t.xt(0):t.xt(n))}else if("timestampValue"in e){let n=e.timestampValue;this.Mt(t,20),"string"==typeof n&&(n=Hc(n)),t.Ot(`${n.seconds||""}`),t.xt(n.nanos||0)}else if("stringValue"in e)this.Nt(e.stringValue,t),this.Bt(t);else if("bytesValue"in e)this.Mt(t,30),t.Lt(qc(e.bytesValue)),this.Bt(t);else if("referenceValue"in e)this.kt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Mt(t,45),t.xt(n.latitude||0),t.xt(n.longitude||0)}else"mapValue"in e?Su(e)?this.Mt(t,Number.MAX_SAFE_INTEGER):ku(e)?this.qt(e.mapValue,t):(this.Qt(e.mapValue,t),this.Bt(t)):"arrayValue"in e?(this.$t(e.arrayValue,t),this.Bt(t)):cl(19022,{Ut:e})}Nt(e,t){this.Mt(t,25),this.Kt(e,t)}Kt(e,t){t.Ot(e)}Qt(e,t){const n=e.fields||{};this.Mt(t,55);for(const r of Object.keys(n))this.Nt(r,t),this.Ct(n[r],t)}qt(e,t){var n,r;const s=e.fields||{};this.Mt(t,53);const i=ou,a=(null===(r=null===(n=s[i].arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.length)||0;this.Mt(t,15),t.xt(Wc(a)),this.Nt(i,t),this.Ct(s[i],t)}$t(e,t){const n=e.values||[];this.Mt(t,50);for(const r of n)this.Ct(r,t)}kt(e,t){this.Mt(t,37),Ul.fromName(e).path.forEach((e=>{this.Mt(t,60),this.Kt(e,t)}))}Mt(e,t){e.xt(t)}Bt(e){e.xt(2)}}gf.Wt=new gf;class yf{constructor(){this.yn=new vf}addToCollectionParentIndex(e,t){return this.yn.add(t),Xl.resolve()}getCollectionParents(e,t){return Xl.resolve(this.yn.getEntries(t))}addFieldIndex(e,t){return Xl.resolve()}deleteFieldIndex(e,t){return Xl.resolve()}deleteAllFieldIndexes(e){return Xl.resolve()}createTargetIndexes(e,t){return Xl.resolve()}getDocumentsMatchingTarget(e,t){return Xl.resolve(null)}getIndexType(e,t){return Xl.resolve(0)}getFieldIndexes(e,t){return Xl.resolve([])}getNextCollectionGroupToUpdate(e){return Xl.resolve(null)}getMinOffset(e,t){return Xl.resolve(ql.min())}getMinOffsetFromCollectionGroup(e,t){return Xl.resolve(ql.min())}updateCollectionGroup(e,t,n){return Xl.resolve()}updateIndexEntries(e,t){return Xl.resolve()}}class vf{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Fc(Fl.comparator),s=!r.has(n);return this.index[t]=r.add(n),s}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new Fc(Fl.comparator)).toArray()}}new Uint8Array(0);const xf={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},bf=41943040;class wf{static withCacheSize(e){return new wf(e,wf.DEFAULT_COLLECTION_PERCENTILE,wf.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}wf.DEFAULT_COLLECTION_PERCENTILE=10,wf.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,wf.DEFAULT=new wf(bf,wf.DEFAULT_COLLECTION_PERCENTILE,wf.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),wf.DISABLED=new wf(-1,0,0);class _f{constructor(e){this.nr=e}next(){return this.nr+=2,this.nr}static rr(){return new _f(0)}static ir(){return new _f(-1)}}const kf="LruGarbageCollector",Nf=1048576;function Sf(e,t){let[n,r]=e,[s,i]=t;const a=jl(n,s);return 0===a?jl(r,i):a}class Ef{constructor(e){this.cr=e,this.buffer=new Fc(Sf),this.lr=0}hr(){return++this.lr}Pr(e){const t=[e,this.hr()];if(this.buffer.size<this.cr)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();Sf(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class jf{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Tr=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Ir(6e4)}stop(){this.Tr&&(this.Tr.cancel(),this.Tr=null)}get started(){return null!==this.Tr}Ir(e){il(kf,`Garbage collection scheduled in ${e}ms`),this.Tr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Tr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){Zl(e)?il(kf,"Ignoring IndexedDB error during garbage collection: ",e):await Ql(e)}await this.Ir(3e5)}))}}class Cf{constructor(e,t){this.Er=e,this.params=t}calculateTargetCount(e,t){return this.Er.dr(e).next((e=>Math.floor(t/100*e)))}nthSequenceNumber(e,t){if(0===t)return Xl.resolve(ec.le);const n=new Ef(t);return this.Er.forEachTarget(e,(e=>n.Pr(e.sequenceNumber))).next((()=>this.Er.Ar(e,(e=>n.Pr(e))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.Er.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.Er.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(il("LruGarbageCollector","Garbage collection skipped; disabled"),Xl.resolve(xf)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(il("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),xf):this.Rr(e,t)))}getCacheSize(e){return this.Er.getCacheSize(e)}Rr(e,t){let n,r,s,i,a,o,l;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((t=>(t>this.params.maximumSequenceNumbersToCollect?(il("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${t}`),r=this.params.maximumSequenceNumbersToCollect):r=t,i=Date.now(),this.nthSequenceNumber(e,r)))).next((r=>(n=r,a=Date.now(),this.removeTargets(e,n,t)))).next((t=>(s=t,o=Date.now(),this.removeOrphanedDocuments(e,n)))).next((e=>(l=Date.now(),sl()<=Hn.DEBUG&&il("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${i-c}ms\n\tDetermined least recently used ${r} in `+(a-i)+"ms\n"+`\tRemoved ${s} targets in `+(o-a)+"ms\n"+`\tRemoved ${e} documents in `+(l-o)+"ms\n"+`Total Duration: ${l-c}ms`),Xl.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:e}))))}}function Tf(e,t){return new Cf(e,t)}class Af{constructor(){this.changes=new xd((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Cu.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?Xl.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class If{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Mf{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(null!==n&&th(n.mutation,e,zc.empty(),Rl.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,Ad()).next((()=>t))))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ad();const r=Sd();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((e=>{let t=kd();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){const n=Sd();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,Ad())))}populateOverlays(e,t,n){const r=[];return n.forEach((e=>{t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,r){let s=wd();const i=jd(),a=jd();return t.forEach(((e,t)=>{const a=n.get(t.key);r.has(t.key)&&(void 0===a||a.mutation instanceof ih)?s=s.insert(t.key,t):void 0!==a?(i.set(t.key,a.mutation.getFieldMask()),th(a.mutation,t,a.mutation.getFieldMask(),Rl.now())):i.set(t.key,zc.empty())})),this.recalculateAndSaveOverlays(e,s).next((e=>(e.forEach(((e,t)=>i.set(e,t))),t.forEach(((e,t)=>{var n;return a.set(e,new If(t,null!==(n=i.get(e))&&void 0!==n?n:null))})),a)))}recalculateAndSaveOverlays(e,t){const n=jd();let r=new Lc(((e,t)=>e-t)),s=Ad();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(const s of e)s.keys().forEach((e=>{const i=t.get(e);if(null===i)return;let a=n.get(e)||zc.empty();a=s.applyToLocalView(i,a),n.set(e,a);const o=(r.get(s.batchId)||Ad()).add(e);r=r.insert(s.batchId,o)}))})).next((()=>{const i=[],a=r.getReverseIterator();for(;a.hasNext();){const r=a.getNext(),o=r.key,l=r.value,c=Ed();l.forEach((e=>{if(!s.has(e)){const r=Zd(t.get(e),n.get(e));null!==r&&c.set(e,r),s=s.add(e)}})),i.push(this.documentOverlayCache.saveOverlays(e,o,c))}return Xl.waitFor(i)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return Ul.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):ad(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((s=>{const i=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-s.size):Xl.resolve(Sd());let a=Bl,o=s;return i.next((t=>Xl.forEach(t,((t,n)=>(a<n.largestBatchId&&(a=n.largestBatchId),s.get(t)?Xl.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{o=o.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,s))).next((()=>this.computeViews(e,o,t,Ad()))).next((e=>({batchId:a,changes:Nd(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ul(t)).next((e=>{let t=kd();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const s=t.collectionGroup;let i=kd();return this.indexManager.getCollectionParents(e,s).next((a=>Xl.forEach(a,(a=>{const o=function(e,t){return new nd(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,a.child(s));return this.getDocumentsMatchingCollectionQuery(e,o,n,r).next((e=>{e.forEach(((e,t)=>{i=i.insert(e,t)}))}))})).next((()=>i))))}getDocumentsMatchingCollectionQuery(e,t,n,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((i=>(s=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,s,r)))).next((e=>{s.forEach(((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,Cu.newInvalidDocument(r)))}));let n=kd();return e.forEach(((e,r)=>{const i=s.get(e);void 0!==i&&th(i.mutation,r,zc.empty(),Rl.now()),pd(t,r)&&(n=n.insert(e,r))})),n}))}}class Pf{constructor(e){this.serializer=e,this.Fr=new Map,this.Mr=new Map}getBundleMetadata(e,t){return Xl.resolve(this.Fr.get(t))}saveBundleMetadata(e,t){return this.Fr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:Bh(e.createTime)}}(t)),Xl.resolve()}getNamedQuery(e,t){return Xl.resolve(this.Mr.get(t))}saveNamedQuery(e,t){return this.Mr.set(t.name,function(e){return{name:e.name,query:pf(e.bundledQuery),readTime:Bh(e.readTime)}}(t)),Xl.resolve()}}class Rf{constructor(){this.overlays=new Lc(Ul.comparator),this.Or=new Map}getOverlay(e,t){return Xl.resolve(this.overlays.get(t))}getOverlays(e,t){const n=Sd();return Xl.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,r)=>{this.St(e,t,r)})),Xl.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.Or.get(n);return void 0!==r&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.Or.delete(n)),Xl.resolve()}getOverlaysForCollection(e,t,n){const r=Sd(),s=t.length+1,i=new Ul(t.child("")),a=this.overlays.getIteratorFrom(i);for(;a.hasNext();){const e=a.getNext().value,i=e.getKey();if(!t.isPrefixOf(i.path))break;i.path.length===s&&e.largestBatchId>n&&r.set(e.getKey(),e)}return Xl.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let s=new Lc(((e,t)=>e-t));const i=this.overlays.getIterator();for(;i.hasNext();){const e=i.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=s.get(e.largestBatchId);null===t&&(t=Sd(),s=s.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const a=Sd(),o=s.getIterator();for(;o.hasNext()&&(o.getNext().value.forEach(((e,t)=>a.set(e,t))),!(a.size()>=r)););return Xl.resolve(a)}St(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.Or.get(r.largestBatchId).delete(n.key);this.Or.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new fh(t,n));let s=this.Or.get(t);void 0===s&&(s=Ad(),this.Or.set(t,s)),this.Or.set(t,s.add(n.key))}}class Lf{constructor(){this.sessionToken=Bc.EMPTY_BYTE_STRING}getSessionToken(e){return Xl.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Xl.resolve()}}class Df{constructor(){this.Nr=new Fc(Of.Br),this.Lr=new Fc(Of.kr)}isEmpty(){return this.Nr.isEmpty()}addReference(e,t){const n=new Of(e,t);this.Nr=this.Nr.add(n),this.Lr=this.Lr.add(n)}qr(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.Qr(new Of(e,t))}$r(e,t){e.forEach((e=>this.removeReference(e,t)))}Ur(e){const t=new Ul(new Fl([])),n=new Of(t,e),r=new Of(t,e+1),s=[];return this.Lr.forEachInRange([n,r],(e=>{this.Qr(e),s.push(e.key)})),s}Kr(){this.Nr.forEach((e=>this.Qr(e)))}Qr(e){this.Nr=this.Nr.delete(e),this.Lr=this.Lr.delete(e)}Wr(e){const t=new Ul(new Fl([])),n=new Of(t,e),r=new Of(t,e+1);let s=Ad();return this.Lr.forEachInRange([n,r],(e=>{s=s.add(e.key)})),s}containsKey(e){const t=new Of(e,0),n=this.Nr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class Of{constructor(e,t){this.key=e,this.Gr=t}static Br(e,t){return Ul.comparator(e.key,t.key)||jl(e.Gr,t.Gr)}static kr(e,t){return jl(e.Gr,t.Gr)||Ul.comparator(e.key,t.key)}}class Ff{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Jn=1,this.zr=new Fc(Of.Br)}checkEmpty(e){return Xl.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const s=this.Jn;this.Jn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const i=new dh(s,t,n,r);this.mutationQueue.push(i);for(const a of r)this.zr=this.zr.add(new Of(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return Xl.resolve(i)}lookupMutationBatch(e,t){return Xl.resolve(this.jr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.Hr(n),s=r<0?0:r;return Xl.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Xl.resolve(0===this.mutationQueue.length?tc:this.Jn-1)}getAllMutationBatches(e){return Xl.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Of(t,0),r=new Of(t,Number.POSITIVE_INFINITY),s=[];return this.zr.forEachInRange([n,r],(e=>{const t=this.jr(e.Gr);s.push(t)})),Xl.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Fc(jl);return t.forEach((e=>{const t=new Of(e,0),r=new Of(e,Number.POSITIVE_INFINITY);this.zr.forEachInRange([t,r],(e=>{n=n.add(e.Gr)}))})),Xl.resolve(this.Jr(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let s=n;Ul.isDocumentKey(s)||(s=s.child(""));const i=new Of(new Ul(s),0);let a=new Fc(jl);return this.zr.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(a=a.add(e.Gr)),!0)}),i),Xl.resolve(this.Jr(a))}Jr(e){const t=[];return e.forEach((e=>{const n=this.jr(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){dl(0===this.Yr(t.batchId,"removed"),55003),this.mutationQueue.shift();let n=this.zr;return Xl.forEach(t.mutations,(r=>{const s=new Of(r.key,t.batchId);return n=n.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.zr=n}))}Xn(e){}containsKey(e,t){const n=new Of(t,0),r=this.zr.firstAfterOrEqual(n);return Xl.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,Xl.resolve()}Yr(e,t){return this.Hr(e)}Hr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}jr(e){const t=this.Hr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Vf{constructor(e){this.Zr=e,this.docs=new Lc(Ul.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),s=r?r.size:0,i=this.Zr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:i}),this.size+=i-s,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return Xl.resolve(n?n.document.mutableCopy():Cu.newInvalidDocument(t))}getEntries(e,t){let n=wd();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():Cu.newInvalidDocument(e))})),Xl.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let s=wd();const i=t.path,a=new Ul(i.child("__id-9223372036854775808__")),o=this.docs.getIteratorFrom(a);for(;o.hasNext();){const{key:e,value:{document:a}}=o.getNext();if(!i.isPrefixOf(e.path))break;e.path.length>i.length+1||Kl(Wl(a),n)<=0||(r.has(a.key)||pd(t,a))&&(s=s.insert(a.key,a.mutableCopy()))}return Xl.resolve(s)}getAllFromCollectionGroup(e,t,n,r){cl(9500)}Xr(e,t){return Xl.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new zf(this)}getSize(e){return Xl.resolve(this.size)}}class zf extends Af{constructor(e){super(),this.vr=e}applyChanges(e){const t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this.vr.addEntry(e,r)):this.vr.removeEntry(n)})),Xl.waitFor(t)}getFromCache(e,t){return this.vr.getEntry(e,t)}getAllFromCache(e,t){return this.vr.getEntries(e,t)}}class Uf{constructor(e){this.persistence=e,this.ei=new xd((e=>Zu(e)),ed),this.lastRemoteSnapshotVersion=Ll.min(),this.highestTargetId=0,this.ti=0,this.ni=new Df,this.targetCount=0,this.ri=_f.rr()}forEachTarget(e,t){return this.ei.forEach(((e,n)=>t(n))),Xl.resolve()}getLastRemoteSnapshotVersion(e){return Xl.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Xl.resolve(this.ti)}allocateTargetId(e){return this.highestTargetId=this.ri.next(),Xl.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.ti&&(this.ti=t),Xl.resolve()}ar(e){this.ei.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ri=new _f(t),this.highestTargetId=t),e.sequenceNumber>this.ti&&(this.ti=e.sequenceNumber)}addTargetData(e,t){return this.ar(t),this.targetCount+=1,Xl.resolve()}updateTargetData(e,t){return this.ar(t),Xl.resolve()}removeTargetData(e,t){return this.ei.delete(t.target),this.ni.Ur(t.targetId),this.targetCount-=1,Xl.resolve()}removeTargets(e,t,n){let r=0;const s=[];return this.ei.forEach(((i,a)=>{a.sequenceNumber<=t&&null===n.get(a.targetId)&&(this.ei.delete(i),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)})),Xl.waitFor(s).next((()=>r))}getTargetCount(e){return Xl.resolve(this.targetCount)}getTargetData(e,t){const n=this.ei.get(t)||null;return Xl.resolve(n)}addMatchingKeys(e,t,n){return this.ni.qr(t,n),Xl.resolve()}removeMatchingKeys(e,t,n){this.ni.$r(t,n);const r=this.persistence.referenceDelegate,s=[];return r&&t.forEach((t=>{s.push(r.markPotentiallyOrphaned(e,t))})),Xl.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.ni.Ur(t),Xl.resolve()}getMatchingKeysForTargetId(e,t){const n=this.ni.Wr(t);return Xl.resolve(n)}containsKey(e,t){return Xl.resolve(this.ni.containsKey(t))}}class Bf{constructor(e,t){this.ii={},this.overlays={},this.si=new ec(0),this.oi=!1,this.oi=!0,this._i=new Lf,this.referenceDelegate=e(this),this.ai=new Uf(this),this.indexManager=new yf,this.remoteDocumentCache=function(e){return new Vf(e)}((e=>this.referenceDelegate.ui(e))),this.serializer=new mf(t),this.ci=new Pf(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.oi=!1,Promise.resolve()}get started(){return this.oi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Rf,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.ii[e.toKey()];return n||(n=new Ff(t,this.referenceDelegate),this.ii[e.toKey()]=n),n}getGlobalsCache(){return this._i}getTargetCache(){return this.ai}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.ci}runTransaction(e,t,n){il("MemoryPersistence","Starting transaction:",e);const r=new $f(this.si.next());return this.referenceDelegate.li(),n(r).next((e=>this.referenceDelegate.hi(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}Pi(e,t){return Xl.or(Object.values(this.ii).map((n=>()=>n.containsKey(e,t))))}}class $f extends Yl{constructor(e){super(),this.currentSequenceNumber=e}}class Hf{constructor(e){this.persistence=e,this.Ti=new Df,this.Ii=null}static Ei(e){return new Hf(e)}get di(){if(this.Ii)return this.Ii;throw cl(60996)}addReference(e,t,n){return this.Ti.addReference(n,t),this.di.delete(n.toString()),Xl.resolve()}removeReference(e,t,n){return this.Ti.removeReference(n,t),this.di.add(n.toString()),Xl.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),Xl.resolve()}removeTarget(e,t){this.Ti.Ur(t.targetId).forEach((e=>this.di.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.di.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}li(){this.Ii=new Set}hi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Xl.forEach(this.di,(n=>{const r=Ul.fromPath(n);return this.Ai(e,r).next((e=>{e||t.removeEntry(r,Ll.min())}))})).next((()=>(this.Ii=null,t.apply(e))))}updateLimboDocument(e,t){return this.Ai(e,t).next((e=>{e?this.di.delete(t.toString()):this.di.add(t.toString())}))}ui(e){return 0}Ai(e,t){return Xl.or([()=>Xl.resolve(this.Ti.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Pi(e,t)])}}class Wf{constructor(e,t){this.persistence=e,this.Ri=new xd((e=>ac(e.path)),((e,t)=>e.isEqual(t))),this.garbageCollector=Tf(this,t)}static Ei(e,t){return new Wf(e,t)}li(){}hi(e){return Xl.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.Vr(e);return this.persistence.getTargetCache().getTargetCount(e).next((e=>t.next((t=>e+t))))}Vr(e){let t=0;return this.Ar(e,(e=>{t++})).next((()=>t))}Ar(e,t){return Xl.forEach(this.Ri,((n,r)=>this.gr(e,n,r).next((e=>e?Xl.resolve():t(r)))))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const r=this.persistence.getRemoteDocumentCache(),s=r.newChangeBuffer();return r.Xr(e,(r=>this.gr(e,r,t).next((e=>{e||(n++,s.removeEntry(r,Ll.min()))})))).next((()=>s.apply(e))).next((()=>n))}markPotentiallyOrphaned(e,t){return this.Ri.set(t,e.currentSequenceNumber),Xl.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.Ri.set(n,e.currentSequenceNumber),Xl.resolve()}removeReference(e,t,n){return this.Ri.set(n,e.currentSequenceNumber),Xl.resolve()}updateLimboDocument(e,t){return this.Ri.set(t,e.currentSequenceNumber),Xl.resolve()}ui(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=gu(e.data.value)),t}gr(e,t,n){return Xl.or([()=>this.persistence.Pi(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const e=this.Ri.get(t);return Xl.resolve(void 0!==e&&e>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class qf{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.ls=n,this.hs=r}static Ps(e,t){let n=Ad(),r=Ad();for(const s of t.docChanges)switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new qf(e,t.fromCache,n,r)}}class Kf{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class Gf{constructor(){this.Ts=!1,this.Is=!1,this.Es=100,this.ds=En()?8:Jl(Sn())>0?6:4}initialize(e,t){this.As=e,this.indexManager=t,this.Ts=!0}getDocumentsMatchingQuery(e,t,n,r){const s={result:null};return this.Rs(e,t).next((e=>{s.result=e})).next((()=>{if(!s.result)return this.Vs(e,t,r,n).next((e=>{s.result=e}))})).next((()=>{if(s.result)return;const n=new Kf;return this.fs(e,t,n).next((r=>{if(s.result=r,this.Is)return this.gs(e,t,n,r.size)}))})).next((()=>s.result))}gs(e,t,n,r){return n.documentReadCount<this.Es?(sl()<=Hn.DEBUG&&il("QueryEngine","SDK will not create cache indexes for query:",md(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Es,"documents"),Xl.resolve()):(sl()<=Hn.DEBUG&&il("QueryEngine","Query:",md(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.ds*r?(sl()<=Hn.DEBUG&&il("QueryEngine","The SDK decides to create cache indexes for query:",md(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ld(t))):Xl.resolve())}Rs(e,t){if(id(t))return Xl.resolve(null);let n=ld(t);return this.indexManager.getIndexType(e,n).next((r=>0===r?null:(null!==t.limit&&1===r&&(t=dd(t,null,"F"),n=ld(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((r=>{const s=Ad(...r);return this.As.getDocuments(e,s).next((r=>this.indexManager.getMinOffset(e,n).next((n=>{const i=this.ps(t,r);return this.ys(t,i,s,n.readTime)?this.Rs(e,dd(t,null,"F")):this.ws(e,i,t,n)}))))})))))}Vs(e,t,n,r){return id(t)||r.isEqual(Ll.min())?Xl.resolve(null):this.As.getDocuments(e,n).next((s=>{const i=this.ps(t,s);return this.ys(t,i,n,r)?Xl.resolve(null):(sl()<=Hn.DEBUG&&il("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),md(t)),this.ws(e,i,t,Hl(r,Bl)).next((e=>e)))}))}ps(e,t){let n=new Fc(yd(e));return t.forEach(((t,r)=>{pd(e,r)&&(n=n.add(r))})),n}ys(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}fs(e,t,n){return sl()<=Hn.DEBUG&&il("QueryEngine","Using full collection scan to execute query:",md(t)),this.As.getDocumentsMatchingQuery(e,t,ql.min(),n)}ws(e,t,n,r){return this.As.getDocumentsMatchingQuery(e,n,r).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}const Yf="LocalStore";class Qf{constructor(e,t,n,r){this.persistence=e,this.bs=t,this.serializer=r,this.Ss=new Lc(jl),this.Ds=new xd((e=>Zu(e)),ed),this.vs=new Map,this.Cs=e.getRemoteDocumentCache(),this.ai=e.getTargetCache(),this.ci=e.getBundleCache(),this.Fs(n)}Fs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Mf(this.Cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Cs.setIndexManager(this.indexManager),this.bs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ss)))}}function Xf(e,t,n,r){return new Qf(e,t,n,r)}async function Jf(e,t){const n=hl(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next((s=>(r=s,n.Fs(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{const s=[],i=[];let a=Ad();for(const e of r){s.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}for(const e of t){i.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}return n.localDocuments.getDocuments(e,a).next((e=>({Ms:e,removedBatchIds:s,addedBatchIds:i})))}))}))}function Zf(e){const t=hl(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.ai.getLastRemoteSnapshotVersion(e)))}function em(e,t,n){let r=Ad(),s=Ad();return n.forEach((e=>r=r.add(e))),t.getEntries(e,r).next((e=>{let r=wd();return n.forEach(((n,i)=>{const a=e.get(n);i.isFoundDocument()!==a.isFoundDocument()&&(s=s.add(n)),i.isNoDocument()&&i.version.isEqual(Ll.min())?(t.removeEntry(n,i.readTime),r=r.insert(n,i)):!a.isValidDocument()||i.version.compareTo(a.version)>0||0===i.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(i),r=r.insert(n,i)):il(Yf,"Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",i.version)})),{xs:r,Os:s}}))}function tm(e,t){const n=hl(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=tc),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}function nm(e,t){const n=hl(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let r;return n.ai.getTargetData(e,t).next((s=>s?(r=s,Xl.resolve(r)):n.ai.allocateTargetId(e).next((s=>(r=new ff(t,s,"TargetPurposeListen",e.currentSequenceNumber),n.ai.addTargetData(e,r).next((()=>r)))))))})).then((e=>{const r=n.Ss.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ss=n.Ss.insert(e.targetId,e),n.Ds.set(t,e.targetId)),e}))}async function rm(e,t,n){const r=hl(e),s=r.Ss.get(t),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,(e=>r.persistence.referenceDelegate.removeTarget(e,s)))}catch(e){if(!Zl(e))throw e;il(Yf,`Failed to update sequence numbers for target ${t}: ${e}`)}r.Ss=r.Ss.remove(t),r.Ds.delete(s.target)}function sm(e,t,n){const r=hl(e);let s=Ll.min(),i=Ad();return r.persistence.runTransaction("Execute query","readwrite",(e=>function(e,t,n){const r=hl(e),s=r.Ds.get(n);return void 0!==s?Xl.resolve(r.Ss.get(s)):r.ai.getTargetData(t,n)}(r,e,ld(t)).next((t=>{if(t)return s=t.lastLimboFreeSnapshotVersion,r.ai.getMatchingKeysForTargetId(e,t.targetId).next((e=>{i=e}))})).next((()=>r.bs.getDocumentsMatchingQuery(e,t,n?s:Ll.min(),n?i:Ad()))).next((e=>(im(r,gd(t),e),{documents:e,Ns:i})))))}function im(e,t,n){let r=e.vs.get(t)||Ll.min();n.forEach(((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.vs.set(t,r)}class am{constructor(){this.activeTargetIds=Md()}$s(e){this.activeTargetIds=this.activeTargetIds.add(e)}Us(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Qs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class om{constructor(){this.So=new am,this.Do={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.So.$s(e),this.Do[e]||"not-current"}updateQueryState(e,t,n){this.Do[e]=t}removeLocalQueryTarget(e){this.So.Us(e)}isLocalQueryTarget(e){return this.So.activeTargetIds.has(e)}clearQueryState(e){delete this.Do[e]}getAllActiveQueryTargets(){return this.So.activeTargetIds}isActiveQueryTarget(e){return this.So.activeTargetIds.has(e)}start(){return this.So=new am,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class lm{vo(e){}shutdown(){}}const cm="ConnectivityMonitor";class um{constructor(){this.Co=()=>this.Fo(),this.Mo=()=>this.xo(),this.Oo=[],this.No()}vo(e){this.Oo.push(e)}shutdown(){window.removeEventListener("online",this.Co),window.removeEventListener("offline",this.Mo)}No(){window.addEventListener("online",this.Co),window.addEventListener("offline",this.Mo)}Fo(){il(cm,"Network connectivity changed: AVAILABLE");for(const e of this.Oo)e(0)}xo(){il(cm,"Network connectivity changed: UNAVAILABLE");for(const e of this.Oo)e(1)}static C(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let dm=null;function hm(){return null===dm?dm=268435456+Math.round(2147483648*Math.random()):dm++,"0x"+dm.toString(16)}const fm="RestConnection",mm={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class pm{get Bo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Lo=t+"://"+e.host,this.ko=`projects/${n}/databases/${r}`,this.qo=this.databaseId.database===tu?`project_id=${n}`:`project_id=${n}&database_id=${r}`}Qo(e,t,n,r,s){const i=hm(),a=this.$o(e,t.toUriEncodedString());il(fm,`Sending RPC '${e}' ${i}:`,a,n);const o={"google-cloud-resource-prefix":this.ko,"x-goog-request-params":this.qo};this.Uo(o,r,s);const{host:l}=new URL(a),c=xn(l);return this.Ko(e,a,o,n,c).then((t=>(il(fm,`Received RPC '${e}' ${i}: `,t),t)),(t=>{throw ol(fm,`RPC '${e}' ${i} failed with error: `,t,"url: ",a,"request:",n),t}))}Wo(e,t,n,r,s,i){return this.Qo(e,t,n,r,s)}Uo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+nl,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}$o(e,t){const n=mm[e];return`${this.Lo}/v1/${t}:${n}`}terminate(){}}class gm{constructor(e){this.Go=e.Go,this.zo=e.zo}jo(e){this.Ho=e}Jo(e){this.Yo=e}Zo(e){this.Xo=e}onMessage(e){this.e_=e}close(){this.zo()}send(e){this.Go(e)}t_(){this.Ho()}n_(){this.Yo()}r_(e){this.Xo(e)}i_(e){this.e_(e)}}const ym="WebChannelConnection";class vm extends pm{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ko(e,t,n,r,s){const i=hm();return new Promise(((s,a)=>{const o=new $o;o.setWithCredentials(!0),o.listenOnce(Wo.COMPLETE,(()=>{try{switch(o.getLastErrorCode()){case qo.NO_ERROR:const t=o.getResponseJson();il(ym,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(t)),s(t);break;case qo.TIMEOUT:il(ym,`RPC '${e}' ${i} timed out`),a(new ml(fl.DEADLINE_EXCEEDED,"Request time out"));break;case qo.HTTP_ERROR:const n=o.getStatus();if(il(ym,`RPC '${e}' ${i} failed with status:`,n,"response text:",o.getResponseText()),n>0){let e=o.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(fl).indexOf(t)>=0?t:fl.UNKNOWN}(t.status);a(new ml(e,t.message))}else a(new ml(fl.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new ml(fl.UNAVAILABLE,"Connection failed."));break;default:cl(9055,{s_:e,streamId:i,o_:o.getLastErrorCode(),__:o.getLastError()})}}finally{il(ym,`RPC '${e}' ${i} completed.`)}}));const l=JSON.stringify(r);il(ym,`RPC '${e}' ${i} sending request:`,r),o.send(t,"POST",l,n,15)}))}a_(e,t,n){const r=hm(),s=[this.Lo,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=Qo(),a=Yo(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(o.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(o.useFetchStreams=!0),this.Uo(o.initMessageHeaders,t,n),o.encodeInitMessageHeaders=!0;const c=s.join("");il(ym,`Creating RPC '${e}' stream ${r}: ${c}`,o);const u=i.createWebChannel(c,o);let d=!1,h=!1;const f=new gm({Go:t=>{h?il(ym,`Not sending because RPC '${e}' stream ${r} is closed:`,t):(d||(il(ym,`Opening RPC '${e}' stream ${r} transport.`),u.open(),d=!0),il(ym,`RPC '${e}' stream ${r} sending:`,t),u.send(t))},zo:()=>u.close()}),m=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return m(u,Ho.EventType.OPEN,(()=>{h||(il(ym,`RPC '${e}' stream ${r} transport opened.`),f.t_())})),m(u,Ho.EventType.CLOSE,(()=>{h||(h=!0,il(ym,`RPC '${e}' stream ${r} transport closed`),f.r_())})),m(u,Ho.EventType.ERROR,(t=>{h||(h=!0,ol(ym,`RPC '${e}' stream ${r} transport errored. Name:`,t.name,"Message:",t.message),f.r_(new ml(fl.UNAVAILABLE,"The operation could not be completed")))})),m(u,Ho.EventType.MESSAGE,(t=>{var n;if(!h){const s=t.data[0];dl(!!s,16349);const i=s,a=(null==i?void 0:i.error)||(null===(n=i[0])||void 0===n?void 0:n.error);if(a){il(ym,`RPC '${e}' stream ${r} received error:`,a);const t=a.status;let n=function(e){const t=ph[e];if(void 0!==t)return vh(t)}(t),s=a.message;void 0===n&&(n=fl.INTERNAL,s="Unknown error status: "+t+" with message "+a.message),h=!0,f.r_(new ml(n,s)),u.close()}else il(ym,`RPC '${e}' stream ${r} received:`,s),f.i_(s)}})),m(a,Go.STAT_EVENT,(t=>{t.stat===Ko.PROXY?il(ym,`RPC '${e}' stream ${r} detected buffering proxy`):t.stat===Ko.NOPROXY&&il(ym,`RPC '${e}' stream ${r} detected no buffering proxy`)})),setTimeout((()=>{f.n_()}),0),f}}function xm(){return"undefined"!=typeof document?document:null}function bm(e){return new Oh(e,!0)}class wm{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.bi=e,this.timerId=t,this.u_=n,this.c_=r,this.l_=s,this.h_=0,this.P_=null,this.T_=Date.now(),this.reset()}reset(){this.h_=0}I_(){this.h_=this.l_}E_(e){this.cancel();const t=Math.floor(this.h_+this.d_()),n=Math.max(0,Date.now()-this.T_),r=Math.max(0,t-n);r>0&&il("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.h_} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.P_=this.bi.enqueueAfterDelay(this.timerId,r,(()=>(this.T_=Date.now(),e()))),this.h_*=this.c_,this.h_<this.u_&&(this.h_=this.u_),this.h_>this.l_&&(this.h_=this.l_)}A_(){null!==this.P_&&(this.P_.skipDelay(),this.P_=null)}cancel(){null!==this.P_&&(this.P_.cancel(),this.P_=null)}d_(){return(Math.random()-.5)*this.h_}}const _m="PersistentStream";class km{constructor(e,t,n,r,s,i,a,o){this.bi=e,this.R_=n,this.V_=r,this.connection=s,this.authCredentialsProvider=i,this.appCheckCredentialsProvider=a,this.listener=o,this.state=0,this.m_=0,this.f_=null,this.g_=null,this.stream=null,this.p_=0,this.y_=new wm(e,t)}w_(){return 1===this.state||5===this.state||this.b_()}b_(){return 2===this.state||3===this.state}start(){this.p_=0,4!==this.state?this.auth():this.S_()}async stop(){this.w_()&&await this.close(0)}D_(){this.state=0,this.y_.reset()}v_(){this.b_()&&null===this.f_&&(this.f_=this.bi.enqueueAfterDelay(this.R_,6e4,(()=>this.C_())))}F_(e){this.M_(),this.stream.send(e)}async C_(){if(this.b_())return this.close(0)}M_(){this.f_&&(this.f_.cancel(),this.f_=null)}x_(){this.g_&&(this.g_.cancel(),this.g_=null)}async close(e,t){this.M_(),this.x_(),this.y_.cancel(),this.m_++,4!==e?this.y_.reset():t&&t.code===fl.RESOURCE_EXHAUSTED?(al(t.toString()),al("Using maximum backoff delay to prevent overloading the backend."),this.y_.I_()):t&&t.code===fl.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.O_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Zo(t)}O_(){}auth(){this.state=1;const e=this.N_(this.m_),t=this.m_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((e=>{let[n,r]=e;this.m_===t&&this.B_(n,r)}),(t=>{e((()=>{const e=new ml(fl.UNKNOWN,"Fetching auth token failed: "+t.message);return this.L_(e)}))}))}B_(e,t){const n=this.N_(this.m_);this.stream=this.k_(e,t),this.stream.jo((()=>{n((()=>this.listener.jo()))})),this.stream.Jo((()=>{n((()=>(this.state=2,this.g_=this.bi.enqueueAfterDelay(this.V_,1e4,(()=>(this.b_()&&(this.state=3),Promise.resolve()))),this.listener.Jo())))})),this.stream.Zo((e=>{n((()=>this.L_(e)))})),this.stream.onMessage((e=>{n((()=>1==++this.p_?this.q_(e):this.onNext(e)))}))}S_(){this.state=5,this.y_.E_((async()=>{this.state=0,this.start()}))}L_(e){return il(_m,`close with error: ${e}`),this.stream=null,this.close(4,e)}N_(e){return t=>{this.bi.enqueueAndForget((()=>this.m_===e?t():(il(_m,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Nm extends km{constructor(e,t,n,r,s,i){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,i),this.serializer=s}k_(e,t){return this.connection.a_("Listen",e,t)}q_(e){return this.onNext(e)}onNext(e){this.y_.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:cl(39313,{state:e})}(t.targetChange.targetChangeType||"NO_CHANGE"),s=t.targetChange.targetIds||[],i=function(e,t){return e.useProto3Json?(dl(void 0===t||"string"==typeof t,58123),Bc.fromBase64String(t||"")):(dl(void 0===t||t instanceof Buffer||t instanceof Uint8Array,16193),Bc.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),a=t.targetChange.cause,o=a&&function(e){const t=void 0===e.code?fl.UNKNOWN:vh(e.code);return new ml(t,e.message||"")}(a);n=new Th(r,s,i,o||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const s=Kh(e,r.document.name),i=Bh(r.document.updateTime),a=r.document.createTime?Bh(r.document.createTime):Ll.min(),o=new Eu({mapValue:{fields:r.document.fields}}),l=Cu.newFoundDocument(s,i,a,o),c=r.targetIds||[],u=r.removedTargetIds||[];n=new jh(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const s=Kh(e,r.document),i=r.readTime?Bh(r.readTime):Ll.min(),a=Cu.newNoDocument(s,i),o=r.removedTargetIds||[];n=new jh([],o,a.key,a)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const s=Kh(e,r.document),i=r.removedTargetIds||[];n=new jh([],i,s,null)}else{if(!("filter"in t))return cl(11601,{Vt:t});{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:s}=e,i=new mh(r,s),a=e.targetId;n=new Ch(a,i)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return Ll.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?Ll.min():t.readTime?Bh(t.readTime):Ll.min()}(e);return this.listener.Q_(t,n)}U_(e){const t={};t.database=Qh(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=td(r)?{documents:ef(e,r)}:{query:tf(e,r).gt},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=zh(e,t.resumeToken);const r=Fh(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(Ll.min())>0){n.readTime=Vh(e,t.snapshotVersion.toTimestamp());const r=Fh(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return cl(28987,{purpose:e})}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.F_(t)}K_(e){const t={};t.database=Qh(this.serializer),t.removeTarget=e,this.F_(t)}}class Sm extends km{constructor(e,t,n,r,s,i){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,i),this.serializer=s}get W_(){return this.p_>0}start(){this.lastStreamToken=void 0,super.start()}O_(){this.W_&&this.G_([])}k_(e,t){return this.connection.a_("Write",e,t)}q_(e){return dl(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,dl(!e.writeResults||0===e.writeResults.length,55816),this.listener.z_()}onNext(e){dl(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.y_.reset();const t=function(e,t){return e&&e.length>0?(dl(void 0!==t,14353),e.map((e=>function(e,t){let n=e.updateTime?Bh(e.updateTime):Bh(t);return n.isEqual(Ll.min())&&(n=Bh(t)),new Yd(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=Bh(e.commitTime);return this.listener.j_(n,t)}H_(){const e={};e.database=Qh(this.serializer),this.F_(e)}G_(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>Zh(this.serializer,e)))};this.F_(t)}}class Em{}class jm extends Em{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.J_=!1}Y_(){if(this.J_)throw new ml(fl.FAILED_PRECONDITION,"The client has already been terminated.")}Qo(e,t,n,r){return this.Y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((s=>{let[i,a]=s;return this.connection.Qo(e,Hh(t,n),r,i,a)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===fl.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new ml(fl.UNKNOWN,e.toString())}))}Wo(e,t,n,r,s){return this.Y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((i=>{let[a,o]=i;return this.connection.Wo(e,Hh(t,n),r,a,o,s)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===fl.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new ml(fl.UNKNOWN,e.toString())}))}terminate(){this.J_=!0,this.connection.terminate()}}class Cm{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.Z_=0,this.X_=null,this.ea=!0}ta(){0===this.Z_&&(this.na("Unknown"),this.X_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.X_=null,this.ra("Backend didn't respond within 10 seconds."),this.na("Offline"),Promise.resolve()))))}ia(e){"Online"===this.state?this.na("Unknown"):(this.Z_++,this.Z_>=1&&(this.sa(),this.ra(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.na("Offline")))}set(e){this.sa(),this.Z_=0,"Online"===e&&(this.ea=!1),this.na(e)}na(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ra(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ea?(al(t),this.ea=!1):il("OnlineStateTracker",t)}sa(){null!==this.X_&&(this.X_.cancel(),this.X_=null)}}const Tm="RemoteStore";class Am{constructor(e,t,n,r,s){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.oa=[],this._a=new Map,this.aa=new Set,this.ua=[],this.ca=s,this.ca.vo((e=>{n.enqueueAndForget((async()=>{Vm(this)&&(il(Tm,"Restarting streams for network reachability change."),await async function(e){const t=hl(e);t.aa.add(4),await Mm(t),t.la.set("Unknown"),t.aa.delete(4),await Im(t)}(this))}))})),this.la=new Cm(n,r)}}async function Im(e){if(Vm(e))for(const t of e.ua)await t(!0)}async function Mm(e){for(const t of e.ua)await t(!1)}function Pm(e,t){const n=hl(e);n._a.has(t.targetId)||(n._a.set(t.targetId,t),Fm(n)?Om(n):sp(n).b_()&&Lm(n,t))}function Rm(e,t){const n=hl(e),r=sp(n);n._a.delete(t),r.b_()&&Dm(n,t),0===n._a.size&&(r.b_()?r.v_():Vm(n)&&n.la.set("Unknown"))}function Lm(e,t){if(e.ha.Ke(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Ll.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}sp(e).U_(t)}function Dm(e,t){e.ha.Ke(t),sp(e).K_(t)}function Om(e){e.ha=new Ih({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),Rt:t=>e._a.get(t)||null,Pt:()=>e.datastore.serializer.databaseId}),sp(e).start(),e.la.ta()}function Fm(e){return Vm(e)&&!sp(e).w_()&&e._a.size>0}function Vm(e){return 0===hl(e).aa.size}function zm(e){e.ha=void 0}async function Um(e){e.la.set("Online")}async function Bm(e){e._a.forEach(((t,n)=>{Lm(e,t)}))}async function $m(e,t){zm(e),Fm(e)?(e.la.ia(t),Om(e)):e.la.set("Unknown")}async function Hm(e,t,n){if(e.la.set("Online"),t instanceof Th&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e._a.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e._a.delete(r),e.ha.removeTarget(r))}(e,t)}catch(n){il(Tm,"Failed to remove targets %s: %s ",t.targetIds.join(","),n),await Wm(e,n)}else if(t instanceof jh?e.ha.Xe(t):t instanceof Ch?e.ha.ot(t):e.ha.nt(t),!n.isEqual(Ll.min()))try{const t=await Zf(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.ha.It(t);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const s=e._a.get(r);s&&e._a.set(r,s.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{const r=e._a.get(t);if(!r)return;e._a.set(t,r.withResumeToken(Bc.EMPTY_BYTE_STRING,r.snapshotVersion)),Dm(e,t);const s=new ff(r.target,t,n,r.sequenceNumber);Lm(e,s)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){il(Tm,"Failed to raise snapshot:",t),await Wm(e,t)}}async function Wm(e,t,n){if(!Zl(t))throw t;e.aa.add(1),await Mm(e),e.la.set("Offline"),n||(n=()=>Zf(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{il(Tm,"Retrying IndexedDB access"),await n(),e.aa.delete(1),await Im(e)}))}function qm(e,t){return t().catch((n=>Wm(e,n,t)))}async function Km(e){const t=hl(e),n=ip(t);let r=t.oa.length>0?t.oa[t.oa.length-1].batchId:tc;for(;Gm(t);)try{const e=await tm(t.localStore,r);if(null===e){0===t.oa.length&&n.v_();break}r=e.batchId,Ym(t,e)}catch(e){await Wm(t,e)}Qm(t)&&Xm(t)}function Gm(e){return Vm(e)&&e.oa.length<10}function Ym(e,t){e.oa.push(t);const n=ip(e);n.b_()&&n.W_&&n.G_(t.mutations)}function Qm(e){return Vm(e)&&!ip(e).w_()&&e.oa.length>0}function Xm(e){ip(e).start()}async function Jm(e){ip(e).H_()}async function Zm(e){const t=ip(e);for(const n of e.oa)t.G_(n.mutations)}async function ep(e,t,n){const r=e.oa.shift(),s=hh.from(r,t,n);await qm(e,(()=>e.remoteSyncer.applySuccessfulWrite(s))),await Km(e)}async function tp(e,t){t&&ip(e).W_&&await async function(e,t){if(function(e){return yh(e)&&e!==fl.ABORTED}(t.code)){const n=e.oa.shift();ip(e).D_(),await qm(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await Km(e)}}(e,t),Qm(e)&&Xm(e)}async function np(e,t){const n=hl(e);n.asyncQueue.verifyOperationInProgress(),il(Tm,"RemoteStore received new credentials");const r=Vm(n);n.aa.add(3),await Mm(n),r&&n.la.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.aa.delete(3),await Im(n)}async function rp(e,t){const n=hl(e);t?(n.aa.delete(2),await Im(n)):t||(n.aa.add(2),await Mm(n),n.la.set("Unknown"))}function sp(e){return e.Pa||(e.Pa=function(e,t,n){const r=hl(e);return r.Y_(),new Nm(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{jo:Um.bind(null,e),Jo:Bm.bind(null,e),Zo:$m.bind(null,e),Q_:Hm.bind(null,e)}),e.ua.push((async t=>{t?(e.Pa.D_(),Fm(e)?Om(e):e.la.set("Unknown")):(await e.Pa.stop(),zm(e))}))),e.Pa}function ip(e){return e.Ta||(e.Ta=function(e,t,n){const r=hl(e);return r.Y_(),new Sm(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{jo:()=>Promise.resolve(),Jo:Jm.bind(null,e),Zo:tp.bind(null,e),z_:Zm.bind(null,e),j_:ep.bind(null,e)}),e.ua.push((async t=>{t?(e.Ta.D_(),await Km(e)):(await e.Ta.stop(),e.oa.length>0&&(il(Tm,`Stopping write stream with ${e.oa.length} pending writes`),e.oa=[]))}))),e.Ta}class ap{constructor(e,t,n,r,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=s,this.deferred=new pl,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,s){const i=Date.now()+n,a=new ap(e,t,i,r,s);return a.start(n),a}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new ml(fl.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function op(e,t){if(al("AsyncQueue",`${t}: ${e}`),Zl(e))return new ml(fl.UNAVAILABLE,`${t}: ${e}`);throw e}class lp{static emptySet(e){return new lp(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||Ul.comparator(t.key,n.key):(e,t)=>Ul.comparator(e.key,t.key),this.keyedMap=kd(),this.sortedSet=new Lc(this.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof lp))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new lp;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class cp{constructor(){this.Ia=new Lc(Ul.comparator)}track(e){const t=e.doc.key,n=this.Ia.get(t);n?0!==e.type&&3===n.type?this.Ia=this.Ia.insert(t,e):3===e.type&&1!==n.type?this.Ia=this.Ia.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Ia=this.Ia.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Ia=this.Ia.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Ia=this.Ia.remove(t):1===e.type&&2===n.type?this.Ia=this.Ia.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Ia=this.Ia.insert(t,{type:2,doc:e.doc}):cl(63341,{Vt:e,Ea:n}):this.Ia=this.Ia.insert(t,e)}da(){const e=[];return this.Ia.inorderTraversal(((t,n)=>{e.push(n)})),e}}class up{constructor(e,t,n,r,s,i,a,o,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=s,this.fromCache=i,this.syncStateChanged=a,this.excludesMetadataChanges=o,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,s){const i=[];return t.forEach((e=>{i.push({type:0,doc:e})})),new up(e,t,lp.emptySet(t),i,n,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&hd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class dp{constructor(){this.Aa=void 0,this.Ra=[]}Va(){return this.Ra.some((e=>e.ma()))}}class hp{constructor(){this.queries=fp(),this.onlineState="Unknown",this.fa=new Set}terminate(){!function(e,t){const n=hl(e),r=n.queries;n.queries=fp(),r.forEach(((e,n)=>{for(const r of n.Ra)r.onError(t)}))}(this,new ml(fl.ABORTED,"Firestore shutting down"))}}function fp(){return new xd((e=>fd(e)),hd)}async function mp(e,t){const n=hl(e);let r=3;const s=t.query;let i=n.queries.get(s);i?!i.Va()&&t.ma()&&(r=2):(i=new dp,r=t.ma()?0:1);try{switch(r){case 0:i.Aa=await n.onListen(s,!0);break;case 1:i.Aa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(e){const n=op(e,`Initialization of query '${md(t.query)}' failed`);return void t.onError(n)}n.queries.set(s,i),i.Ra.push(t),t.ga(n.onlineState),i.Aa&&t.pa(i.Aa)&&vp(n)}async function pp(e,t){const n=hl(e),r=t.query;let s=3;const i=n.queries.get(r);if(i){const e=i.Ra.indexOf(t);e>=0&&(i.Ra.splice(e,1),0===i.Ra.length?s=t.ma()?0:1:!i.Va()&&t.ma()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function gp(e,t){const n=hl(e);let r=!1;for(const s of t){const e=s.query,t=n.queries.get(e);if(t){for(const e of t.Ra)e.pa(s)&&(r=!0);t.Aa=s}}r&&vp(n)}function yp(e,t,n){const r=hl(e),s=r.queries.get(t);if(s)for(const i of s.Ra)i.onError(n);r.queries.delete(t)}function vp(e){e.fa.forEach((e=>{e.next()}))}var xp,bp;(bp=xp||(xp={})).ya="default",bp.Cache="cache";class wp{constructor(e,t,n){this.query=e,this.wa=t,this.ba=!1,this.Sa=null,this.onlineState="Unknown",this.options=n||{}}pa(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new up(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ba?this.Da(e)&&(this.wa.next(e),t=!0):this.va(e,this.onlineState)&&(this.Ca(e),t=!0),this.Sa=e,t}onError(e){this.wa.error(e)}ga(e){this.onlineState=e;let t=!1;return this.Sa&&!this.ba&&this.va(this.Sa,e)&&(this.Ca(this.Sa),t=!0),t}va(e,t){if(!e.fromCache)return!0;if(!this.ma())return!0;const n="Offline"!==t;return(!this.options.Fa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Da(e){if(e.docChanges.length>0)return!0;const t=this.Sa&&this.Sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}Ca(e){e=up.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ba=!0,this.wa.next(e)}ma(){return this.options.source!==xp.Cache}}class _p{constructor(e){this.key=e}}class kp{constructor(e){this.key=e}}class Np{constructor(e,t){this.query=e,this.qa=t,this.Qa=null,this.hasCachedResults=!1,this.current=!1,this.$a=Ad(),this.mutatedKeys=Ad(),this.Ua=yd(e),this.Ka=new lp(this.Ua)}get Wa(){return this.qa}Ga(e,t){const n=t?t.za:new cp,r=t?t.Ka:this.Ka;let s=t?t.mutatedKeys:this.mutatedKeys,i=r,a=!1;const o="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((e,t)=>{const c=r.get(e),u=pd(this.query,t)?t:null,d=!!c&&this.mutatedKeys.has(c.key),h=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;c&&u?c.data.isEqual(u.data)?d!==h&&(n.track({type:3,doc:u}),f=!0):this.ja(c,u)||(n.track({type:2,doc:u}),f=!0,(o&&this.Ua(u,o)>0||l&&this.Ua(u,l)<0)&&(a=!0)):!c&&u?(n.track({type:0,doc:u}),f=!0):c&&!u&&(n.track({type:1,doc:c}),f=!0,(o||l)&&(a=!0)),f&&(u?(i=i.add(u),s=h?s.add(e):s.delete(e)):(i=i.delete(e),s=s.delete(e)))})),null!==this.query.limit)for(;i.size>this.query.limit;){const e="F"===this.query.limitType?i.last():i.first();i=i.delete(e.key),s=s.delete(e.key),n.track({type:1,doc:e})}return{Ka:i,za:n,ys:a,mutatedKeys:s}}ja(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const s=this.Ka;this.Ka=e.Ka,this.mutatedKeys=e.mutatedKeys;const i=e.za.da();i.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return cl(20277,{Vt:e})}};return n(e)-n(t)}(e.type,t.type)||this.Ua(e.doc,t.doc))),this.Ha(n),r=null!=r&&r;const a=t&&!r?this.Ja():[],o=0===this.$a.size&&this.current&&!r?1:0,l=o!==this.Qa;return this.Qa=o,0!==i.length||l?{snapshot:new up(this.query,e.Ka,s,i,e.mutatedKeys,0===o,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),Ya:a}:{Ya:a}}ga(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ka:this.Ka,za:new cp,mutatedKeys:this.mutatedKeys,ys:!1},!1)):{Ya:[]}}Za(e){return!this.qa.has(e)&&!!this.Ka.has(e)&&!this.Ka.get(e).hasLocalMutations}Ha(e){e&&(e.addedDocuments.forEach((e=>this.qa=this.qa.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.qa=this.qa.delete(e))),this.current=e.current)}Ja(){if(!this.current)return[];const e=this.$a;this.$a=Ad(),this.Ka.forEach((e=>{this.Za(e.key)&&(this.$a=this.$a.add(e.key))}));const t=[];return e.forEach((e=>{this.$a.has(e)||t.push(new kp(e))})),this.$a.forEach((n=>{e.has(n)||t.push(new _p(n))})),t}Xa(e){this.qa=e.Ns,this.$a=Ad();const t=this.Ga(e.documents);return this.applyChanges(t,!0)}eu(){return up.fromInitialDocuments(this.query,this.Ka,this.mutatedKeys,0===this.Qa,this.hasCachedResults)}}const Sp="SyncEngine";class Ep{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class jp{constructor(e){this.key=e,this.tu=!1}}class Cp{constructor(e,t,n,r,s,i){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=i,this.nu={},this.ru=new xd((e=>fd(e)),hd),this.iu=new Map,this.su=new Set,this.ou=new Lc(Ul.comparator),this._u=new Map,this.au=new Df,this.uu={},this.cu=new Map,this.lu=_f.ir(),this.onlineState="Unknown",this.hu=void 0}get isPrimaryClient(){return!0===this.hu}}async function Tp(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=Qp(e);let s;const i=r.ru.get(t);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.eu()):s=await Ip(r,t,n,!0),s}async function Ap(e,t){const n=Qp(e);await Ip(n,t,!0,!1)}async function Ip(e,t,n,r){const s=await nm(e.localStore,ld(t)),i=s.targetId,a=e.sharedClientState.addLocalQueryTarget(i,n);let o;return r&&(o=await Mp(e,t,i,"current"===a,s.resumeToken)),e.isPrimaryClient&&n&&Pm(e.remoteStore,s),o}async function Mp(e,t,n,r,s){e.Pu=(t,n,r)=>async function(e,t,n,r){let s=t.view.Ga(n);s.ys&&(s=await sm(e.localStore,t.query,!1).then((e=>{let{documents:n}=e;return t.view.Ga(n,s)})));const i=r&&r.targetChanges.get(t.targetId),a=r&&null!=r.targetMismatches.get(t.targetId),o=t.view.applyChanges(s,e.isPrimaryClient,i,a);return Hp(e,t.targetId,o.Ya),o.snapshot}(e,t,n,r);const i=await sm(e.localStore,t,!0),a=new Np(t,i.Ns),o=a.Ga(i.documents),l=Eh.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,s),c=a.applyChanges(o,e.isPrimaryClient,l);Hp(e,n,c.Ya);const u=new Ep(t,n,a);return e.ru.set(t,u),e.iu.has(n)?e.iu.get(n).push(t):e.iu.set(n,[t]),c.snapshot}async function Pp(e,t,n){const r=hl(e),s=r.ru.get(t),i=r.iu.get(s.targetId);if(i.length>1)return r.iu.set(s.targetId,i.filter((e=>!hd(e,t)))),void r.ru.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await rm(r.localStore,s.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Rm(r.remoteStore,s.targetId),Bp(r,s.targetId)})).catch(Ql)):(Bp(r,s.targetId),await rm(r.localStore,s.targetId,!0))}async function Rp(e,t){const n=hl(e),r=n.ru.get(t),s=n.iu.get(r.targetId);n.isPrimaryClient&&1===s.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Rm(n.remoteStore,r.targetId))}async function Lp(e,t){const n=hl(e);try{const e=await function(e,t){const n=hl(e),r=t.snapshotVersion;let s=n.Ss;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const i=n.Cs.newChangeBuffer({trackRemovals:!0});s=n.Ss;const a=[];t.targetChanges.forEach(((i,o)=>{const l=s.get(o);if(!l)return;a.push(n.ai.removeMatchingKeys(e,i.removedDocuments,o).next((()=>n.ai.addMatchingKeys(e,i.addedDocuments,o))));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(o)?c=c.withResumeToken(Bc.EMPTY_BYTE_STRING,Ll.min()).withLastLimboFreeSnapshotVersion(Ll.min()):i.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(i.resumeToken,r)),s=s.insert(o,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(l,c,i)&&a.push(n.ai.updateTargetData(e,c))}));let o=wd(),l=Ad();if(t.documentUpdates.forEach((r=>{t.resolvedLimboDocuments.has(r)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),a.push(em(e,i,t.documentUpdates).next((e=>{o=e.xs,l=e.Os}))),!r.isEqual(Ll.min())){const t=n.ai.getLastRemoteSnapshotVersion(e).next((t=>n.ai.setTargetsMetadata(e,e.currentSequenceNumber,r)));a.push(t)}return Xl.waitFor(a).next((()=>i.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,o,l))).next((()=>o))})).then((e=>(n.Ss=s,e)))}(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const r=n._u.get(t);r&&(dl(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1,22616),e.addedDocuments.size>0?r.tu=!0:e.modifiedDocuments.size>0?dl(r.tu,14607):e.removedDocuments.size>0&&(dl(r.tu,42227),r.tu=!1))})),await Kp(n,e,t)}catch(e){await Ql(e)}}function Dp(e,t,n){const r=hl(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.ru.forEach(((n,r)=>{const s=r.view.ga(t);s.snapshot&&e.push(s.snapshot)})),function(e,t){const n=hl(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(const s of n.Ra)s.ga(t)&&(r=!0)})),r&&vp(n)}(r.eventManager,t),e.length&&r.nu.Q_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Op(e,t,n){const r=hl(e);r.sharedClientState.updateQueryState(t,"rejected",n);const s=r._u.get(t),i=s&&s.key;if(i){let e=new Lc(Ul.comparator);e=e.insert(i,Cu.newNoDocument(i,Ll.min()));const n=Ad().add(i),s=new Sh(Ll.min(),new Map,new Lc(jl),e,n);await Lp(r,s),r.ou=r.ou.remove(i),r._u.delete(t),qp(r)}else await rm(r.localStore,t,!1).then((()=>Bp(r,t,n))).catch(Ql)}async function Fp(e,t){const n=hl(e),r=t.batch.batchId;try{const e=await function(e,t){const n=hl(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const r=t.batch.keys(),s=n.Cs.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const s=n.batch,i=s.keys();let a=Xl.resolve();return i.forEach((e=>{a=a.next((()=>r.getEntry(t,e))).next((t=>{const i=n.docVersions.get(e);dl(null!==i,48541),t.version.compareTo(i)<0&&(s.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),a.next((()=>e.mutationQueue.removeMutationBatch(t,s)))}(n,e,t,s).next((()=>s.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=Ad();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(n.localStore,t);Up(n,r,null),zp(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Kp(n,e)}catch(e){await Ql(e)}}async function Vp(e,t,n){const r=hl(e);try{const e=await function(e,t){const n=hl(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(dl(null!==t,37113),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(r.localStore,t);Up(r,t,n),zp(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await Kp(r,e)}catch(n){await Ql(n)}}function zp(e,t){(e.cu.get(t)||[]).forEach((e=>{e.resolve()})),e.cu.delete(t)}function Up(e,t,n){const r=hl(e);let s=r.uu[r.currentUser.toKey()];if(s){const e=s.get(t);e&&(n?e.reject(n):e.resolve(),s=s.remove(t)),r.uu[r.currentUser.toKey()]=s}}function Bp(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.iu.get(t))e.ru.delete(r),n&&e.nu.Tu(r,n);e.iu.delete(t),e.isPrimaryClient&&e.au.Ur(t).forEach((t=>{e.au.containsKey(t)||$p(e,t)}))}function $p(e,t){e.su.delete(t.path.canonicalString());const n=e.ou.get(t);null!==n&&(Rm(e.remoteStore,n),e.ou=e.ou.remove(t),e._u.delete(n),qp(e))}function Hp(e,t,n){for(const r of n)r instanceof _p?(e.au.addReference(r.key,t),Wp(e,r)):r instanceof kp?(il(Sp,"Document no longer in limbo: "+r.key),e.au.removeReference(r.key,t),e.au.containsKey(r.key)||$p(e,r.key)):cl(19791,{Iu:r})}function Wp(e,t){const n=t.key,r=n.path.canonicalString();e.ou.get(n)||e.su.has(r)||(il(Sp,"New document in limbo: "+n),e.su.add(r),qp(e))}function qp(e){for(;e.su.size>0&&e.ou.size<e.maxConcurrentLimboResolutions;){const t=e.su.values().next().value;e.su.delete(t);const n=new Ul(Fl.fromString(t)),r=e.lu.next();e._u.set(r,new jp(n)),e.ou=e.ou.insert(n,r),Pm(e.remoteStore,new ff(ld(sd(n.path)),r,"TargetPurposeLimboResolution",ec.le))}}async function Kp(e,t,n){const r=hl(e),s=[],i=[],a=[];r.ru.isEmpty()||(r.ru.forEach(((e,o)=>{a.push(r.Pu(o,t,n).then((e=>{var t;if((e||n)&&r.isPrimaryClient){const s=e?!e.fromCache:null===(t=null==n?void 0:n.targetChanges.get(o.targetId))||void 0===t?void 0:t.current;r.sharedClientState.updateQueryState(o.targetId,s?"current":"not-current")}if(e){s.push(e);const t=qf.Ps(o.targetId,e);i.push(t)}})))})),await Promise.all(a),r.nu.Q_(s),await async function(e,t){const n=hl(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>Xl.forEach(t,(t=>Xl.forEach(t.ls,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>Xl.forEach(t.hs,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!Zl(e))throw e;il(Yf,"Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.Ss.get(e),r=t.snapshotVersion,s=t.withLastLimboFreeSnapshotVersion(r);n.Ss=n.Ss.insert(e,s)}}}(r.localStore,i))}async function Gp(e,t){const n=hl(e);if(!n.currentUser.isEqual(t)){il(Sp,"User change. New user:",t.toKey());const e=await Jf(n.localStore,t);n.currentUser=t,function(e,t){e.cu.forEach((e=>{e.forEach((e=>{e.reject(new ml(fl.CANCELLED,t))}))})),e.cu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await Kp(n,e.Ms)}}function Yp(e,t){const n=hl(e),r=n._u.get(t);if(r&&r.tu)return Ad().add(r.key);{let e=Ad();const r=n.iu.get(t);if(!r)return e;for(const t of r){const r=n.ru.get(t);e=e.unionWith(r.view.Wa)}return e}}function Qp(e){const t=hl(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Lp.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Yp.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Op.bind(null,t),t.nu.Q_=gp.bind(null,t.eventManager),t.nu.Tu=yp.bind(null,t.eventManager),t}function Xp(e){const t=hl(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Fp.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Vp.bind(null,t),t}class Jp{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=bm(e.databaseInfo.databaseId),this.sharedClientState=this.Au(e),this.persistence=this.Ru(e),await this.persistence.start(),this.localStore=this.Vu(e),this.gcScheduler=this.mu(e,this.localStore),this.indexBackfillerScheduler=this.fu(e,this.localStore)}mu(e,t){return null}fu(e,t){return null}Vu(e){return Xf(this.persistence,new Gf,e.initialUser,this.serializer)}Ru(e){return new Bf(Hf.Ei,this.serializer)}Au(e){return new om}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Jp.provider={build:()=>new Jp};class Zp extends Jp{constructor(e){super(),this.cacheSizeBytes=e}mu(e,t){dl(this.persistence.referenceDelegate instanceof Wf,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new jf(n,e.asyncQueue,t)}Ru(e){const t=void 0!==this.cacheSizeBytes?wf.withCacheSize(this.cacheSizeBytes):wf.DEFAULT;return new Bf((e=>Wf.Ei(e,t)),this.serializer)}}class eg{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>Dp(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=Gp.bind(null,this.syncEngine),await rp(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new hp}createDatastore(e){const t=bm(e.databaseInfo.databaseId),n=function(e){return new vm(e)}(e.databaseInfo);return function(e,t,n,r){return new jm(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,s){return new Am(e,t,n,r,s)}(this.localStore,this.datastore,e.asyncQueue,(e=>Dp(this.syncEngine,e,0)),um.C()?new um:new lm)}createSyncEngine(e,t){return function(e,t,n,r,s,i,a){const o=new Cp(e,t,n,r,s,i);return a&&(o.hu=!0),o}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=hl(e);il(Tm,"RemoteStore shutting down."),t.aa.add(5),await Mm(t),t.ca.shutdown(),t.la.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}eg.provider={build:()=>new eg};class tg{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.pu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.pu(this.observer.error,e):al("Uncaught Error in snapshot listener:",e.toString()))}yu(){this.muted=!0}pu(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}const ng="FirestoreClient";class rg{constructor(e,t,n,r,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=tl.UNAUTHENTICATED,this.clientId=El.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(n,(async e=>{il(ng,"Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(il(ng,"Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new pl;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=op(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function sg(e,t){e.asyncQueue.verifyOperationInProgress(),il(ng,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await Jf(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function ig(e,t){e.asyncQueue.verifyOperationInProgress();const n=await ag(e);il(ng,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener((e=>np(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>np(t.remoteStore,n))),e._onlineComponents=t}async function ag(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){il(ng,"Using user provided OfflineComponentProvider");try{await sg(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(e){return"FirebaseError"===e.name?e.code===fl.FAILED_PRECONDITION||e.code===fl.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(n))throw n;ol("Error using user provided cache. Falling back to memory cache: "+n),await sg(e,new Jp)}}else il(ng,"Using default OfflineComponentProvider"),await sg(e,new Zp(void 0));return e._offlineComponents}async function og(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(il(ng,"Using user provided OnlineComponentProvider"),await ig(e,e._uninitializedComponentsProvider._online)):(il(ng,"Using default OnlineComponentProvider"),await ig(e,new eg))),e._onlineComponents}function lg(e){return og(e).then((e=>e.syncEngine))}async function cg(e){const t=await og(e),n=t.eventManager;return n.onListen=Tp.bind(null,t.syncEngine),n.onUnlisten=Pp.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=Ap.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=Rp.bind(null,t.syncEngine),n}function ug(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new pl;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,s){const i=new tg({next:o=>{i.yu(),t.enqueueAndForget((()=>pp(e,a)));const l=o.docs.has(n);!l&&o.fromCache?s.reject(new ml(fl.UNAVAILABLE,"Failed to get document because the client is offline.")):l&&o.fromCache&&r&&"server"===r.source?s.reject(new ml(fl.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):s.resolve(o)},error:e=>s.reject(e)}),a=new wp(sd(n.path),i,{includeMetadataChanges:!0,Fa:!0});return mp(e,a)}(await cg(e),e.asyncQueue,t,n,r))),r.promise}function dg(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new pl;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,s){const i=new tg({next:n=>{i.yu(),t.enqueueAndForget((()=>pp(e,a))),n.fromCache&&"server"===r.source?s.reject(new ml(fl.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):s.resolve(n)},error:e=>s.reject(e)}),a=new wp(n,i,{includeMetadataChanges:!0,Fa:!0});return mp(e,a)}(await cg(e),e.asyncQueue,t,n,r))),r.promise}function hg(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const fg=new Map;function mg(e,t,n){if(!n)throw new ml(fl.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function pg(e){if(!Ul.isDocumentKey(e))throw new ml(fl.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function gg(e){if(Ul.isDocumentKey(e))throw new ml(fl.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function yg(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return"function"==typeof e?"a function":cl(12329,{type:typeof e})}function vg(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new ml(fl.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=yg(e);throw new ml(fl.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}function xg(e,t){if(t<=0)throw new ml(fl.INVALID_ARGUMENT,`Function ${e}() requires a positive number, but it was: ${t}.`)}const bg="firestore.googleapis.com",wg=!0;class _g{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new ml(fl.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=bg,this.ssl=wg}else this.host=e.host,this.ssl=null!==(t=e.ssl)&&void 0!==t?t:wg;if(this.isUsingEmulator=void 0!==e.emulatorOptions,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=bf;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<Nf)throw new ml(fl.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new ml(fl.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=hg(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new ml(fl.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (must not be NaN)`);if(e.timeoutSeconds<5)throw new ml(fl.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (minimum allowed value is 5)`);if(e.timeoutSeconds>30)throw new ml(fl.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class kg{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new _g({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ml(fl.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new ml(fl.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new _g(e),this._emulatorOptions=e.emulatorOptions||{},void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new yl;switch(e.type){case"firstParty":return new wl(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new ml(fl.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,Nn("Firestore",this._settings.isUsingEmulator),this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=fg.get(e);t&&(il("ComponentProvider","Removing Datastore"),fg.delete(e),t.terminate())}(this),Promise.resolve()}}class Ng{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Ng(this.firestore,e,this._query)}}class Sg{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Eg(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Sg(this.firestore,e,this._key)}}class Eg extends Ng{constructor(e,t,n){super(e,t,sd(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Sg(this.firestore,null,new Ul(e))}withConverter(e){return new Eg(this.firestore,e,this._path)}}function jg(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];if(e=Fn(e),mg("collection","path",t),e instanceof kg){const n=Fl.fromString(t,...r);return gg(n),new Eg(e,null,n)}{if(!(e instanceof Sg||e instanceof Eg))throw new ml(fl.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Fl.fromString(t,...r));return gg(n),new Eg(e.firestore,null,n)}}function Cg(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];if(e=Fn(e),1===arguments.length&&(t=El.newId()),mg("doc","path",t),e instanceof kg){const n=Fl.fromString(t,...r);return pg(n),new Sg(e,null,new Ul(n))}{if(!(e instanceof Sg||e instanceof Eg))throw new ml(fl.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Fl.fromString(t,...r));return pg(n),new Sg(e.firestore,e instanceof Eg?e.converter:null,new Ul(n))}}const Tg="AsyncQueue";class Ag{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Promise.resolve();this.Qu=[],this.$u=!1,this.Uu=[],this.Ku=null,this.Wu=!1,this.Gu=!1,this.zu=[],this.y_=new wm(this,"async_queue_retry"),this.ju=()=>{const e=xm();e&&il(Tg,"Visibility state changed to "+e.visibilityState),this.y_.A_()},this.Hu=e;const t=xm();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.ju)}get isShuttingDown(){return this.$u}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Ju(),this.Yu(e)}enterRestrictedMode(e){if(!this.$u){this.$u=!0,this.Gu=e||!1;const t=xm();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.ju)}}enqueue(e){if(this.Ju(),this.$u)return new Promise((()=>{}));const t=new pl;return this.Yu((()=>this.$u&&this.Gu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Qu.push(e),this.Zu())))}async Zu(){if(0!==this.Qu.length){try{await this.Qu[0](),this.Qu.shift(),this.y_.reset()}catch(hF){if(!Zl(hF))throw hF;il(Tg,"Operation failed with retryable error: "+hF)}this.Qu.length>0&&this.y_.E_((()=>this.Zu()))}}Yu(e){const t=this.Hu.then((()=>(this.Wu=!0,e().catch((e=>{throw this.Ku=e,this.Wu=!1,al("INTERNAL UNHANDLED ERROR: ",Ig(e)),e})).then((e=>(this.Wu=!1,e))))));return this.Hu=t,t}enqueueAfterDelay(e,t,n){this.Ju(),this.zu.indexOf(e)>-1&&(t=0);const r=ap.createAndSchedule(this,e,t,n,(e=>this.Xu(e)));return this.Uu.push(r),r}Ju(){this.Ku&&cl(47125,{ec:Ig(this.Ku)})}verifyOperationInProgress(){}async tc(){let e;do{e=this.Hu,await e}while(e!==this.Hu)}nc(e){for(const t of this.Uu)if(t.timerId===e)return!0;return!1}rc(e){return this.tc().then((()=>{this.Uu.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this.Uu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.tc()}))}sc(e){this.zu.push(e)}Xu(e){const t=this.Uu.indexOf(e);this.Uu.splice(t,1)}}function Ig(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}function Mg(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"==typeof n[r])return!0;return!1}(e,["next","error","complete"])}class Pg extends kg{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new Ag,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Ag(e),this._firestoreClient=void 0,await e}}}function Rg(e){if(e._terminated)throw new ml(fl.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||Lg(e),e._firestoreClient}function Lg(e){var t,n,r;const s=e._freezeSettings(),i=function(e,t,n,r){return new eu(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,hg(r.experimentalLongPollingOptions),r.useFetchStreams,r.isUsingEmulator)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,s);e._componentsProvider||(null===(n=s.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=s.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),e._firestoreClient=new rg(e._authCredentials,e._appCheckCredentials,e._queue,i,e._componentsProvider&&function(e){const t=null==e?void 0:e._online.build();return{_offline:null==e?void 0:e._offline.build(t),_online:t}}(e._componentsProvider))}class Dg{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Dg(Bc.fromBase64String(e))}catch(e){throw new ml(fl.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new Dg(Bc.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Og{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new ml(fl.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new zl(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Fg{constructor(e){this._methodName=e}}class Vg{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ml(fl.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ml(fl.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return jl(this._lat,e._lat)||jl(this._long,e._long)}}class zg{constructor(e){this._values=(e||[]).map((e=>e))}toArray(){return this._values.map((e=>e))}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}}const Ug=/^__.*__$/;class Bg{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new ih(e,this.data,this.fieldMask,t,this.fieldTransforms):new sh(e,this.data,t,this.fieldTransforms)}}class $g{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new ih(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Hg(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw cl(40011,{oc:e})}}class Wg{constructor(e,t,n,r,s,i){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===s&&this._c(),this.fieldTransforms=s||[],this.fieldMask=i||[]}get path(){return this.settings.path}get oc(){return this.settings.oc}ac(e){return new Wg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}uc(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ac({path:n,cc:!1});return r.lc(e),r}hc(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ac({path:n,cc:!1});return r._c(),r}Pc(e){return this.ac({path:void 0,cc:!0})}Tc(e){return oy(e,this.settings.methodName,this.settings.Ic||!1,this.path,this.settings.Ec)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}_c(){if(this.path)for(let e=0;e<this.path.length;e++)this.lc(this.path.get(e))}lc(e){if(0===e.length)throw this.Tc("Document fields must not be empty");if(Hg(this.oc)&&Ug.test(e))throw this.Tc('Document fields cannot begin and end with "__"')}}class qg{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||bm(e)}dc(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Wg({oc:e,methodName:t,Ec:n,path:zl.emptyPath(),cc:!1,Ic:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Kg(e){const t=e._freezeSettings(),n=bm(e._databaseId);return new qg(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Gg(e,t,n,r,s){let i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const a=e.dc(i.merge||i.mergeFields?2:0,t,n,s);ry("Data must be an object, but it was:",a,r);const o=ty(r,a);let l,c;if(i.merge)l=new zc(a.fieldMask),c=a.fieldTransforms;else if(i.mergeFields){const e=[];for(const r of i.mergeFields){const s=sy(t,r,n);if(!a.contains(s))throw new ml(fl.INVALID_ARGUMENT,`Field '${s}' is specified in your field mask but missing from your input data.`);ly(e,s)||e.push(s)}l=new zc(e),c=a.fieldTransforms.filter((e=>l.covers(e.field)))}else l=null,c=a.fieldTransforms;return new Bg(new Eu(o),l,c)}class Yg extends Fg{_toFieldTransform(e){if(2!==e.oc)throw 1===e.oc?e.Tc(`${this._methodName}() can only appear at the top level of your update data`):e.Tc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Yg}}class Qg extends Fg{_toFieldTransform(e){return new Gd(e.path,new zd)}isEqual(e){return e instanceof Qg}}function Xg(e,t,n,r){const s=e.dc(1,t,n);ry("Data must be an object, but it was:",s,r);const i=[],a=Eu.empty();Pc(r,((e,r)=>{const o=ay(t,e,n);r=Fn(r);const l=s.hc(o);if(r instanceof Yg)i.push(o);else{const e=ey(r,l);null!=e&&(i.push(o),a.set(o,e))}}));const o=new zc(i);return new $g(a,o,s.fieldTransforms)}function Jg(e,t,n,r,s,i){const a=e.dc(1,t,n),o=[sy(t,r,n)],l=[s];if(i.length%2!=0)throw new ml(fl.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<i.length;h+=2)o.push(sy(t,i[h])),l.push(i[h+1]);const c=[],u=Eu.empty();for(let h=o.length-1;h>=0;--h)if(!ly(c,o[h])){const e=o[h];let t=l[h];t=Fn(t);const n=a.hc(e);if(t instanceof Yg)c.push(e);else{const r=ey(t,n);null!=r&&(c.push(e),u.set(e,r))}}const d=new zc(c);return new $g(u,d,a.fieldTransforms)}function Zg(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return ey(n,e.dc(r?4:3,t))}function ey(e,t){if(ny(e=Fn(e)))return ry("Unsupported field value:",t,e),ty(e,t);if(e instanceof Fg)return function(e,t){if(!Hg(t.oc))throw t.Tc(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t.Tc(`${e._methodName}() is not currently supported inside arrays`);const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.cc&&4!==t.oc)throw t.Tc("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const s of e){let e=ey(s,t.Pc(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=Fn(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Ld(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=Rl.fromDate(e);return{timestampValue:Vh(t.serializer,n)}}if(e instanceof Rl){const n=new Rl(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Vh(t.serializer,n)}}if(e instanceof Vg)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Dg)return{bytesValue:zh(t.serializer,e._byteString)};if(e instanceof Sg){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Tc(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:$h(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof zg)return function(e,t){return{mapValue:{fields:{[ru]:{stringValue:au},[ou]:{arrayValue:{values:e.toArray().map((e=>{if("number"!=typeof e)throw t.Tc("VectorValues must only contain numeric values.");return Pd(t.serializer,e)}))}}}}}}(e,t);throw t.Tc(`Unsupported field value: ${yg(e)}`)}(e,t)}function ty(e,t){const n={};return Rc(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Pc(e,((e,r)=>{const s=ey(r,t.uc(e));null!=s&&(n[e]=s)})),{mapValue:{fields:n}}}function ny(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Rl||e instanceof Vg||e instanceof Dg||e instanceof Sg||e instanceof Fg||e instanceof zg)}function ry(e,t,n){if(!ny(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=yg(n);throw"an object"===r?t.Tc(e+" a custom object"):t.Tc(e+" "+r)}}function sy(e,t,n){if((t=Fn(t))instanceof Og)return t._internalPath;if("string"==typeof t)return ay(e,t);throw oy("Field path arguments must be of type string or ",e,!1,void 0,n)}const iy=new RegExp("[~\\*/\\[\\]]");function ay(e,t,n){if(t.search(iy)>=0)throw oy(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new Og(...t.split("."))._internalPath}catch(ht){throw oy(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function oy(e,t,n,r,s){const i=r&&!r.isEmpty(),a=void 0!==s;let o=`Function ${t}() called with invalid data`;n&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(i||a)&&(l+=" (found",i&&(l+=` in field ${r}`),a&&(l+=` in document ${s}`),l+=")"),new ml(fl.INVALID_ARGUMENT,o+e+l)}function ly(e,t){return e.some((e=>e.isEqual(t)))}class cy{constructor(e,t,n,r,s){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Sg(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new uy(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(dy("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class uy extends cy{data(){return super.data()}}function dy(e,t){return"string"==typeof t?ay(e,t):t instanceof Og?t._internalPath:t._delegate._internalPath}function hy(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new ml(fl.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class fy{}class my extends fy{}function py(e,t){let n=[];for(var r=arguments.length,s=new Array(r>2?r-2:0),i=2;i<r;i++)s[i-2]=arguments[i];t instanceof fy&&n.push(t),n=n.concat(s),function(e){const t=e.filter((e=>e instanceof vy)).length,n=e.filter((e=>e instanceof gy)).length;if(t>1||t>0&&n>0)throw new ml(fl.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const a of n)e=a._apply(e);return e}class gy extends my{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new gy(e,t,n)}_apply(e){const t=this._parse(e);return Sy(e._query,t),new Ng(e.firestore,e.converter,ud(e._query,t))}_parse(e){const t=Kg(e.firestore),n=function(e,t,n,r,s,i,a){let o;if(s.isKeyField()){if("array-contains"===i||"array-contains-any"===i)throw new ml(fl.INVALID_ARGUMENT,`Invalid Query. You can't perform '${i}' queries on documentId().`);if("in"===i||"not-in"===i){Ny(a,i);const t=[];for(const n of a)t.push(ky(r,e,n));o={arrayValue:{values:t}}}else o=ky(r,e,a)}else"in"!==i&&"not-in"!==i&&"array-contains-any"!==i||Ny(a,i),o=Zg(n,t,a,"in"===i||"not-in"===i);return Lu.create(s,i,o)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}function yy(e,t,n){const r=t,s=dy("where",e);return gy._create(s,r,n)}class vy extends fy{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new vy(e,t)}_parse(e){const t=this._queryConstraints.map((t=>t._parse(e))).filter((e=>e.getFilters().length>0));return 1===t.length?t[0]:Du.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const s of r)Sy(n,s),n=ud(n,s)}(e._query,t),new Ng(e.firestore,e.converter,ud(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class xy extends my{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new xy(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new ml(fl.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new ml(fl.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Mu(t,n)}(e._query,this._field,this._direction);return new Ng(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new nd(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}function by(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=dy("orderBy",e);return xy._create(n,t)}class wy extends my{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new wy(e,t,n)}_apply(e){return new Ng(e.firestore,e.converter,dd(e._query,this._limit,this._limitType))}}function _y(e){return xg("limit",e),wy._create("limit",e,"F")}function ky(e,t,n){if("string"==typeof(n=Fn(n))){if(""===n)throw new ml(fl.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ad(t)&&-1!==n.indexOf("/"))throw new ml(fl.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(Fl.fromString(n));if(!Ul.isDocumentKey(r))throw new ml(fl.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return yu(e,new Ul(r))}if(n instanceof Sg)return yu(e,n._key);throw new ml(fl.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${yg(n)}.`)}function Ny(e,t){if(!Array.isArray(e)||0===e.length)throw new ml(fl.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function Sy(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new ml(fl.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new ml(fl.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class Ey{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(lu(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Wc(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(qc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw cl(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return Pc(e,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertVectorValue(e){var t,n,r;const s=null===(r=null===(n=null===(t=e.fields)||void 0===t?void 0:t[ou].arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.map((e=>Wc(e.doubleValue)));return new zg(s)}convertGeoPoint(e){return new Vg(Wc(e.latitude),Wc(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Jc(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Zc(e));default:return null}}convertTimestamp(e){const t=Hc(e);return new Rl(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=Fl.fromString(e);dl(hf(n),9688,{name:e});const r=new nu(n.get(1),n.get(3)),s=new Ul(n.popFirst(5));return r.isEqual(t)||al(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}function jy(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class Cy{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ty extends cy{constructor(e,t,n,r,s,i){super(e,t,n,r,i),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new Ay(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(dy("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class Ay extends Ty{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class Iy{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Cy(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new Ay(this._firestore,this._userDataWriter,n.key,n,new Cy(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new ml(fl.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>{const r=new Ay(e._firestore,e._userDataWriter,n.doc.key,n.doc,new Cy(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||3!==e.type)).map((t=>{const r=new Ay(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Cy(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let s=-1,i=-1;return 0!==t.type&&(s=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),i=n.indexOf(t.doc.key)),{type:My(t.type),doc:r,oldIndex:s,newIndex:i}}))}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function My(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return cl(61501,{type:e})}}function Py(e){e=vg(e,Sg);const t=vg(e.firestore,Pg);return ug(Rg(t),e._key).then((n=>Uy(t,e,n)))}class Ry extends Ey{constructor(e){super(),this.firestore=e}convertBytes(e){return new Dg(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Sg(this.firestore,null,t)}}function Ly(e){e=vg(e,Ng);const t=vg(e.firestore,Pg),n=Rg(t),r=new Ry(t);return hy(e._query),dg(n,e._query).then((n=>new Iy(t,r,e,n)))}function Dy(e,t,n){e=vg(e,Sg);const r=vg(e.firestore,Pg),s=jy(e.converter,t,n);return zy(r,[Gg(Kg(r),"setDoc",e._key,s,null!==e.converter,n).toMutation(e._key,Qd.none())])}function Oy(e,t,n){e=vg(e,Sg);const r=vg(e.firestore,Pg),s=Kg(r);let i;for(var a=arguments.length,o=new Array(a>3?a-3:0),l=3;l<a;l++)o[l-3]=arguments[l];return i="string"==typeof(t=Fn(t))||t instanceof Og?Jg(s,"updateDoc",e._key,t,n,o):Xg(s,"updateDoc",e._key,t),zy(r,[i.toMutation(e._key,Qd.exists(!0))])}function Fy(e){return zy(vg(e.firestore,Pg),[new ch(e._key,Qd.none())])}function Vy(e,t){const n=vg(e.firestore,Pg),r=Cg(e),s=jy(e.converter,t);return zy(n,[Gg(Kg(e.firestore),"addDoc",r._key,s,null!==e.converter,{}).toMutation(r._key,Qd.exists(!1))]).then((()=>r))}function zy(e,t){return function(e,t){const n=new pl;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){const r=Xp(e);try{const e=await function(e,t){const n=hl(e),r=Rl.now(),s=t.reduce(((e,t)=>e.add(t.key)),Ad());let i,a;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>{let o=wd(),l=Ad();return n.Cs.getEntries(e,s).next((e=>{o=e,o.forEach(((e,t)=>{t.isValidDocument()||(l=l.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,o))).next((s=>{i=s;const a=[];for(const e of t){const t=nh(e,i.get(e.key).overlayedDocument);null!=t&&a.push(new ih(e.key,t,ju(t.value.mapValue),Qd.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,a,t)})).next((t=>{a=t;const r=t.applyToLocalDocumentSet(i,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)}))})).then((()=>({batchId:a.batchId,changes:Nd(i)})))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.uu[e.currentUser.toKey()];r||(r=new Lc(jl)),r=r.insert(t,n),e.uu[e.currentUser.toKey()]=r}(r,e.batchId,n),await Kp(r,e.changes),await Km(r.remoteStore)}catch(e){const t=op(e,"Failed to persist write");n.reject(t)}}(await lg(e),t,n))),n.promise}(Rg(e),t)}function Uy(e,t,n){const r=n.docs.get(t._key),s=new Ry(e);return new Ty(e,s,t._key,r,new Cy(n.hasPendingWrites,n.fromCache),t.converter)}class By{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Kg(e)}set(e,t,n){this._verifyNotCommitted();const r=$y(e,this._firestore),s=jy(r.converter,t,n),i=Gg(this._dataReader,"WriteBatch.set",r._key,s,null!==r.converter,n);return this._mutations.push(i.toMutation(r._key,Qd.none())),this}update(e,t,n){this._verifyNotCommitted();const r=$y(e,this._firestore);let s;for(var i=arguments.length,a=new Array(i>3?i-3:0),o=3;o<i;o++)a[o-3]=arguments[o];return s="string"==typeof(t=Fn(t))||t instanceof Og?Jg(this._dataReader,"WriteBatch.update",r._key,t,n,a):Xg(this._dataReader,"WriteBatch.update",r._key,t),this._mutations.push(s.toMutation(r._key,Qd.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=$y(e,this._firestore);return this._mutations=this._mutations.concat(new ch(t._key,Qd.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ml(fl.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function $y(e,t){if((e=Fn(e)).firestore!==t)throw new ml(fl.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}function Hy(){return new Qg("serverTimestamp")}function Wy(e){return Rg(e=vg(e,Pg)),new By(e,(t=>zy(e,t)))}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){nl=e}(Zr),Gr(new Vn("firestore",((e,n)=>{let{instanceIdentifier:r,options:s}=n;const i=e.getProvider("app").getImmediate(),a=new Pg(new xl(e.getProvider("auth-internal")),new kl(i,e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new ml(fl.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new nu(e.options.projectId,t)}(i,r),i);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a}),"PUBLIC").setMultipleInstances(!0)),ns(Zo,el,e),ns(Zo,el,"esm2017")}();const qy="firebasestorage.googleapis.com",Ky="storageBucket";class Gy extends Cn{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;super(Xy(e),`Firebase Storage: ${t} (${Xy(e)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Gy.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Xy(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}\n${this.customData.serverResponse}`:this.message=this._baseMessage}}var Yy,Qy;function Xy(e){return"storage/"+e}function Jy(){return new Gy(Yy.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function Zy(){return new Gy(Yy.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function ev(){return new Gy(Yy.CANCELED,"User canceled the upload/download.")}function tv(e){return new Gy(Yy.INVALID_ARGUMENT,e)}function nv(){return new Gy(Yy.APP_DELETED,"The Firebase app was deleted.")}!function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(Yy||(Yy={}));class rv{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=rv.makeFromUrl(e,t)}catch(hF){return new rv(e,"")}if(""===n.path)return n;throw r=e,new Gy(Yy.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.");var r}static makeFromUrl(e,t){let n=null;const r="([A-Za-z0-9.\\-_]+)";const s=new RegExp("^gs://"+r+"(/(.*))?$","i");function i(e){e.path_=decodeURIComponent(e.path)}const a=t.replace(/[.]/g,"\\."),o=[{regex:s,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${a}/v[A-Za-z0-9_]+/b/${r}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:i},{regex:new RegExp(`^https?://${t===qy?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${r}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:i}];for(let l=0;l<o.length;l++){const t=o[l],r=t.regex.exec(e);if(r){const e=r[t.indices.bucket];let s=r[t.indices.path];s||(s=""),n=new rv(e,s),t.postModify(n);break}}if(null==n)throw function(e){return new Gy(Yy.INVALID_URL,"Invalid URL '"+e+"'.")}(e);return n}}class sv{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(){}}function iv(e,t,n,r){if(r<t)throw tv(`Invalid value for '${e}'. Expected ${t} or greater.`);if(r>n)throw tv(`Invalid value for '${e}'. Expected ${n} or less.`)}function av(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1),n}function ov(e,t){const n=e>=500&&e<600,r=-1!==[408,429].indexOf(e),s=-1!==t.indexOf(e);return n||r||s}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(Qy||(Qy={}));class lv{constructor(e,t,n,r,s,i,a,o,l,c,u){let d=!(arguments.length>11&&void 0!==arguments[11])||arguments[11],h=arguments.length>12&&void 0!==arguments[12]&&arguments[12];this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=s,this.additionalRetryCodes_=i,this.callback_=a,this.errorCallback_=o,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=u,this.retry=d,this.isUsingEmulator=h,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise(((e,t)=>{this.resolve_=e,this.reject_=t,this.start_()}))}start_(){const e=(e,t)=>{if(t)return void e(!1,new cv(!1,null,!0));const n=this.connectionFactory_();this.pendingConnection_=n;const r=e=>{const t=e.loaded,n=e.lengthComputable?e.total:-1;null!==this.progressCallback_&&this.progressCallback_(t,n)};null!==this.progressCallback_&&n.addUploadProgressListener(r),n.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then((()=>{null!==this.progressCallback_&&n.removeUploadProgressListener(r),this.pendingConnection_=null;const t=n.getErrorCode()===Qy.NO_ERROR,s=n.getStatus();if(!t||ov(s,this.additionalRetryCodes_)&&this.retry){const t=n.getErrorCode()===Qy.ABORT;return void e(!1,new cv(!1,null,t))}const i=-1!==this.successCodes_.indexOf(s);e(!0,new cv(i,n))}))},t=(e,t)=>{const n=this.resolve_,r=this.reject_,s=t.connection;if(t.wasSuccessCode)try{const e=this.callback_(s,s.getResponse());!function(e){return void 0!==e}(e)?n():n(e)}catch(hF){r(hF)}else if(null!==s){const e=Jy();e.serverResponse=s.getErrorText(),this.errorCallback_?r(this.errorCallback_(s,e)):r(e)}else if(t.canceled){r(this.appDelete_?nv():ev())}else{r(Zy())}};this.canceled_?t(0,new cv(!1,null,!0)):this.backoffId_=function(e,t,n){let r=1,s=null,i=null,a=!1,o=0;function l(){return 2===o}let c=!1;function u(){if(!c){c=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function d(t){s=setTimeout((()=>{s=null,e(f,l())}),t)}function h(){i&&clearTimeout(i)}function f(e){if(c)return void h();for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];if(e)return h(),void u.call(null,e,...n);if(l()||a)return h(),void u.call(null,e,...n);let i;r<64&&(r*=2),1===o?(o=2,i=0):i=1e3*(r+Math.random()),d(i)}let m=!1;function p(e){m||(m=!0,h(),c||(null!==s?(e||(o=2),clearTimeout(s),d(0)):e||(o=1)))}return d(0),i=setTimeout((()=>{a=!0,p(!0)}),n),p}(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function(e){e(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class cv{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function uv(e){const t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}class dv{constructor(e,t){this._service=e,this._location=t instanceof rv?t:rv.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new dv(e,t)}get root(){const e=new rv(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return uv(this._location.path)}get storage(){return this._service}get parent(){const e=function(e){if(0===e.length)return null;const t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===e)return null;const t=new rv(this._location.bucket,e);return new dv(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw function(e){return new Gy(Yy.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}function hv(e,t){const n=null===t||void 0===t?void 0:t[Ky];return null==n?null:rv.makeFromBucketSpec(n,e)}class fv{constructor(e,t,n,r,s){let i=arguments.length>5&&void 0!==arguments[5]&&arguments[5];this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=r,this._firebaseVersion=s,this._isUsingEmulator=i,this._bucket=null,this._host=qy,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?rv.makeFromBucketSpec(r,this._host):hv(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,null!=this._url?this._bucket=rv.makeFromBucketSpec(this._url,e):this._bucket=hv(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){iv("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){iv("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(null!==t)return t.accessToken}return null}async _getAppCheckToken(){if(Qr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});if(e){return(await e.getToken()).token}return null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach((e=>e.cancel())),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new dv(this,e)}_makeRequest(e,t,n,r){let s=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this._deleted)return new sv(nv());{const i=function(e,t,n,r,s,i){let a=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],o=arguments.length>7&&void 0!==arguments[7]&&arguments[7];const l=av(e.urlParams),c=e.url+l,u=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(u,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(u,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(u,i),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(u,r),new lv(c,e.method,u,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,s,a,o)}(e,this._appId,n,r,t,this._firebaseVersion,s,this._isUsingEmulator);return this._requests.add(i),i.getPromise().then((()=>this._requests.delete(i)),(()=>this._requests.delete(i))),i}}async makeRequestWithTokens(e,t){const[n,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,r).getPromise()}}const mv="@firebase/storage",pv="0.13.10",gv="storage";function yv(e,t){let{instanceIdentifier:n}=t;const r=e.getProvider("app").getImmediate(),s=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return new fv(r,s,i,n,Zr)}Gr(new Vn(gv,yv,"PUBLIC").setMultipleInstances(!0)),ns(mv,pv,""),ns(mv,pv,"esm2017");const vv=window.location.search.includes("debug=true"),xv=function(){if(vv){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];console.log("\ud83d\udc1e DEBUG:",...t)}},bv=()=>{xv("Environment check:",{NODE_ENV:"production",PUBLIC_URL:"",window_location:window.location.href,userAgent:navigator.userAgent,localStorage_available:_v(),indexedDB_available:kv()})},wv=e=>{xv("Firebase config check:",{apiKeyDefined:!!e.apiKey,authDomainDefined:!!e.authDomain,projectIdDefined:!!e.projectId,fullConfig:vv?e:"[hidden in production]"})},_v=()=>{try{return localStorage.setItem("test","test"),localStorage.removeItem("test"),!0}catch(hF){return!1}},kv=()=>{try{return!!window.indexedDB}catch(hF){return!1}},Nv=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(console.error(`Error in ${t}:`,e),vv){const n=document.createElement("div");n.style.position="fixed",n.style.bottom="20px",n.style.right="20px",n.style.backgroundColor="#f44336",n.style.color="white",n.style.padding="15px",n.style.borderRadius="5px",n.style.zIndex="10000",n.style.maxWidth="400px",n.style.boxShadow="0 4px 8px rgba(0,0,0,0.2)",n.innerHTML=`\n      <div style="font-weight: bold; margin-bottom: 8px;">Error in ${t}</div>\n      <div>${e.message}</div>\n      <div style="margin-top: 10px; font-size: 0.8em; text-align: right;">\n        <button id="close-error" style="background: transparent; border: 1px solid white; color: white; padding: 3px 8px; cursor: pointer; border-radius: 3px;">\n          Close\n        </button>\n      </div>\n    `,document.body.appendChild(n),document.getElementById("close-error").addEventListener("click",(()=>{n.remove()})),setTimeout((()=>{n.remove()}),1e4)}},Sv={apiKey:"AIzaSyDbkipGwNvBRB9lFZZwV0ef1RHNXtZp86c",authDomain:"dulalia-fb.firebaseapp.com",projectId:"dulalia-fb",storageBucket:"dulalia-fb.appspot.com",messagingSenderId:"317007260701",appId:"1:317007260701:web:acbe6f3bfb1e10f4ed2af4"};let Ev,jv,Cv,Tv;wv(Sv);try{xv("Initializing Firebase"),Ev=es(Sv),xv("Getting Firebase Auth"),jv=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ts();const t=Yr(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=Yr(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(In(n.getOptions(),null!==t&&void 0!==t?t:{}))return e;xs(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:Mo,persistence:[Ua,wa,Ea]}),r=yn("authTokenSyncURL");if(r&&"boolean"===typeof isSecureContext&&isSecureContext){const e=new URL(r,location.origin);if(location.origin===e.origin){const t=(s=e.toString(),async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>Do)return;const r=null===t||void 0===t?void 0:t.token;Oo!==r&&(Oo=r,await fetch(s,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))});!function(e,t,n){Fn(e).beforeAuthStateChanged(t,n)}(n,t,(()=>t(n.currentUser))),function(e,t,n,r){Fn(e).onIdTokenChanged(t,n,r)}(n,(e=>t(e)))}}var s;const i=mn("auth");return i?zi(n,`http://${i}`):Nn("Auth",!1),n}(Ev);try{xv("Setting auth persistence to browser session"),function(e,t){return Fn(e).setPersistence(t)}(jv,Ea).then((()=>xv("Auth persistence set successfully"))).catch((e=>Nv(e,"Auth Persistence")))}catch(qV){Nv(qV,"Setting Auth Persistence")}xv("Getting Firestore"),Cv=function(e,t){const n="object"==typeof e?e:ts(),r="string"==typeof e?e:t||tu,s=Yr(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const e=pn("firestore");e&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var s;e=vg(e,kg);const i=xn(t),a=e._getSettings(),o=Object.assign(Object.assign({},a),{emulatorOptions:e._getEmulatorOptions()}),l=`${t}:${n}`;a.host!==bg&&a.host!==l&&ol("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c=Object.assign(Object.assign({},a),{host:l,ssl:i,emulatorOptions:r});if(!In(c,o)&&(e._setSettings(c),i&&(bn(`https://${l}`),Nn("Firestore",!0)),r.mockUserToken)){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=tl.MOCK_USER;else{t=wn(r.mockUserToken,null===(s=e._app)||void 0===s?void 0:s.options.projectId);const i=r.mockUserToken.sub||r.mockUserToken.user_id;if(!i)throw new ml(fl.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new tl(i)}e._authCredentials=new vl(new gl(t,n))}}(s,...e)}return s}(Ev),xv("Getting Storage"),Tv=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ts(),t=arguments.length>1?arguments[1]:void 0;e=Fn(e),Nn("Storage",!1);const n=Yr(e,gv).getImmediate({identifier:t}),r=pn("storage");return r&&function(e,t,n){!function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host=`${t}:${n}`;const s=xn(t);s&&(bn(`https://${e.host}`),Nn("Storage",!0)),e._isUsingEmulator=!0,e._protocol=s?"https":"http";const{mockUserToken:i}=r;i&&(e._overrideAuthToken="string"===typeof i?i:wn(i,e.app.options.projectId))}(e,t,n,arguments.length>3&&void 0!==arguments[3]?arguments[3]:{})}(n,...r),n}(Ev),console.log("\u2705 Firebase initialized successfully")}catch(KV){Nv(KV,"Firebase Initialization"),jv||(jv={signInWithEmailAndPassword:()=>Promise.reject(new Error("Firebase Auth not initialized")),currentUser:null}),Cv||(Cv={collection:()=>({doc:()=>({})})}),Tv||(Tv={ref:()=>({})});const e=document.createElement("div");e.style.padding="20px",e.style.margin="20px",e.style.backgroundColor="#ffebee",e.style.border="1px solid #ef5350",e.style.borderRadius="4px",e.style.color="#b71c1c",e.innerHTML='\n    <h3>Firebase Connection Error</h3>\n    <p>Could not connect to Firebase. This might be due to:</p>\n    <ul>\n      <li>Network connectivity issues</li>\n      <li>Firebase service disruption</li>\n      <li>Ad-blockers or privacy extensions</li>\n    </ul>\n    <p>Try disabling ad blockers or try again later.</p>\n    <button onclick="window.location.reload()" style="padding: 8px 16px; background-color: #b71c1c; color: white; border: none; border-radius: 4px; cursor: pointer;">\n      Reload Page\n    </button>\n  ',document.addEventListener("DOMContentLoaded",(()=>{const t=document.getElementById("root");t&&t.appendChild(e)}))}const Av=async(e,t)=>{try{if(xv("Attempting admin sign in for:",e),!e.endsWith("@admin.com"))throw xv("Rejected non-admin email domain:",e),new Error("Access restricted to admin users only.");const n=await function(e,t,n){return Qr(e.app)?Promise.reject(_s(e)):ma(Fn(e),Zi.credential(t,n)).catch((async t=>{throw"auth/password-does-not-meet-requirements"===t.code&&pa(e),t}))}(jv,e,t),r=n.user;return xv("Admin sign in successful",{uid:r.uid,email:r.email}),localStorage.setItem("adminLastLogin",Date.now().toString()),r}catch(KV){if(Nv(KV,"Admin Sign In"),"auth/network-request-failed"===KV.code)throw new Error("Network error. Please check your internet connection.");throw KV}},Iv=n.p+"static/media/logo.6a22e5585c2d303fd8cc.png";var Mv={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Pv=r.createContext&&r.createContext(Mv),Rv=["attr","size","title"];function Lv(e,t){if(null==e)return{};var n,r,s=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function Dv(){return Dv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Dv.apply(this,arguments)}function Ov(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Fv(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ov(Object(n),!0).forEach((function(t){Vv(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ov(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Vv(e,t,n){return t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function zv(e){return e&&e.map(((e,t)=>r.createElement(e.tag,Fv({key:t},e.attr),zv(e.child))))}function Uv(e){return t=>r.createElement(Bv,Dv({attr:Fv({},e.attr)},t),zv(e.child))}function Bv(e){var t=t=>{var n,{attr:s,size:i,title:a}=e,o=Lv(e,Rv),l=i||t.size||"1em";return t.className&&(n=t.className),e.className&&(n=(n?n+" ":"")+e.className),r.createElement("svg",Dv({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,s,o,{className:n,style:Fv(Fv({color:e.color||t.color},t.style),e.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),a&&r.createElement("title",null,a),e.children)};return void 0!==Pv?r.createElement(Pv.Consumer,null,(e=>t(e))):t(Mv)}function $v(e){return Uv({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z"},child:[]}]})(e)}function Hv(e){return Uv({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M436 480h-20V24c0-13.255-10.745-24-24-24H56C42.745 0 32 10.745 32 24v456H12c-6.627 0-12 5.373-12 12v20h448v-20c0-6.627-5.373-12-12-12zM128 76c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v40c0 6.627-5.373 12-12 12h-40c-6.627 0-12-5.373-12-12V76zm0 96c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v40c0 6.627-5.373 12-12 12h-40c-6.627 0-12-5.373-12-12v-40zm52 148h-40c-6.627 0-12-5.373-12-12v-40c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v40c0 6.627-5.373 12-12 12zm76 160h-64v-84c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v84zm64-172c0 6.627-5.373 12-12 12h-40c-6.627 0-12-5.373-12-12v-40c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v40zm0-96c0 6.627-5.373 12-12 12h-40c-6.627 0-12-5.373-12-12v-40c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v40zm0-96c0 6.627-5.373 12-12 12h-40c-6.627 0-12-5.373-12-12V76c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v40z"},child:[]}]})(e)}function Wv(e){return Uv({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M576 240c0-23.63-12.95-44.04-32-55.12V32.01C544 23.26 537.02 0 512 0c-7.12 0-14.19 2.38-19.98 7.02l-85.03 68.03C364.28 109.19 310.66 128 256 128H64c-35.35 0-64 28.65-64 64v96c0 35.35 28.65 64 64 64h33.7c-1.39 10.48-2.18 21.14-2.18 32 0 39.77 9.26 77.35 25.56 110.94 5.19 10.69 16.52 17.06 28.4 17.06h74.28c26.05 0 41.69-29.84 25.9-50.56-16.4-21.52-26.15-48.36-26.15-77.44 0-11.11 1.62-21.79 4.41-32H256c54.66 0 108.28 18.81 150.98 52.95l85.03 68.03a32.023 32.023 0 0 0 19.98 7.02c24.92 0 32-22.78 32-32V295.13C563.05 284.04 576 263.63 576 240zm-96 141.42l-33.05-26.44C392.95 311.78 325.12 288 256 288v-96c69.12 0 136.95-23.78 190.95-66.98L480 98.58v282.84z"},child:[]}]})(e)}function qv(e){return Uv({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M207.029 381.476L12.686 187.132c-9.373-9.373-9.373-24.569 0-33.941l22.667-22.667c9.357-9.357 24.522-9.375 33.901-.04L224 284.505l154.745-154.021c9.379-9.335 24.544-9.317 33.901.04l22.667 22.667c9.373 9.373 9.373 24.569 0 33.941L240.971 381.476c-9.373 9.372-24.569 9.372-33.942 0z"},child:[]}]})(e)}function Kv(e){return Uv({tag:"svg",attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M336 64h-80c0-35.3-28.7-64-64-64s-64 28.7-64 64H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V112c0-26.5-21.5-48-48-48zM96 424c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24zm0-96c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24zm0-96c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24zm96-192c13.3 0 24 10.7 24 24s-10.7 24-24 24-24-10.7-24-24 10.7-24 24-24zm128 368c0 4.4-3.6 8-8 8H168c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16zm0-96c0 4.4-3.6 8-8 8H168c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16zm0-96c0 4.4-3.6 8-8 8H168c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16z"},child:[]}]})(e)}function Gv(e){return Uv({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256,8C119,8,8,119,8,256S119,504,256,504,504,393,504,256,393,8,256,8Zm92.49,313h0l-20,25a16,16,0,0,1-22.49,2.5h0l-67-49.72a40,40,0,0,1-15-31.23V112a16,16,0,0,1,16-16h32a16,16,0,0,1,16,16V256l58,42.5A16,16,0,0,1,348.49,321Z"},child:[]}]})(e)}function Yv(e){return Uv({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M448 0H64C28.7 0 0 28.7 0 64v288c0 35.3 28.7 64 64 64h96v84c0 9.8 11.2 15.5 19.1 9.7L304 416h144c35.3 0 64-28.7 64-64V64c0-35.3-28.7-64-64-64z"},child:[]}]})(e)}function Qv(e){return Uv({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M416 192c0-88.4-93.1-160-208-160S0 103.6 0 192c0 34.3 14.1 65.9 38 92-13.4 30.2-35.5 54.2-35.8 54.5-2.2 2.3-2.8 5.7-1.5 8.7S4.8 352 8 352c36.6 0 66.9-12.3 88.7-25 32.2 15.7 70.3 25 111.3 25 114.9 0 208-71.6 208-160zm122 220c23.9-26 38-57.7 38-92 0-66.9-53.5-124.2-129.3-148.1.9 6.6 1.3 13.3 1.3 20.1 0 105.9-107.7 192-240 192-10.8 0-21.3-.8-31.7-1.9C207.8 439.6 281.8 480 368 480c41 0 79.1-9.2 111.3-25 21.8 12.7 52.1 25 88.7 25 3.2 0 6.1-1.9 7.3-4.8 1.3-2.9.7-6.3-1.5-8.7-.3-.3-22.4-24.2-35.8-54.5z"},child:[]}]})(e)}function Xv(e){return Uv({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M216 0h80c13.3 0 24 10.7 24 24v168h87.7c17.8 0 26.7 21.5 14.1 34.1L269.7 378.3c-7.5 7.5-19.8 7.5-27.3 0L90.1 226.1c-12.6-12.6-3.7-34.1 14.1-34.1H192V24c0-13.3 10.7-24 24-24zm296 376v112c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V376c0-13.3 10.7-24 24-24h146.7l49 49c20.1 20.1 52.5 20.1 72.6 0l49-49H488c13.3 0 24 10.7 24 24zm-124 88c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20zm64 0c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20z"},child:[]}]})(e)}function Jv(e){return Uv({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M402.6 83.2l90.2 90.2c3.8 3.8 3.8 10 0 13.8L274.4 405.6l-92.8 10.3c-12.4 1.4-22.9-9.1-21.5-21.5l10.3-92.8L388.8 83.2c3.8-3.8 10-3.8 13.8 0zm162-22.9l-48.8-48.8c-15.2-15.2-39.9-15.2-55.2 0l-35.4 35.4c-3.8 3.8-3.8 10 0 13.8l90.2 90.2c3.8 3.8 10 3.8 13.8 0l35.4-35.4c15.2-15.3 15.2-40 0-55.2zM384 346.2V448H64V128h229.8c3.2 0 6.2-1.3 8.5-3.5l40-40c7.6-7.6 2.2-20.5-8.5-20.5H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V306.2c0-10.7-12.9-16-20.5-8.5l-40 40c-2.2 2.3-3.5 5.3-3.5 8.5z"},child:[]}]})(e)}function Zv(e){return Uv({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"},child:[]}]})(e)}function ex(e){return Uv({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M320 400c-75.85 0-137.25-58.71-142.9-133.11L72.2 185.82c-13.79 17.3-26.48 35.59-36.72 55.59a32.35 32.35 0 0 0 0 29.19C89.71 376.41 197.07 448 320 448c26.91 0 52.87-4 77.89-10.46L346 397.39a144.13 144.13 0 0 1-26 2.61zm313.82 58.1l-110.55-85.44a331.25 331.25 0 0 0 81.25-102.07 32.35 32.35 0 0 0 0-29.19C550.29 135.59 442.93 64 320 64a308.15 308.15 0 0 0-147.32 37.7L45.46 3.37A16 16 0 0 0 23 6.18L3.37 31.45A16 16 0 0 0 6.18 53.9l588.36 454.73a16 16 0 0 0 22.46-2.81l19.64-25.27a16 16 0 0 0-2.82-22.45zm-183.72-142l-39.3-30.38A94.75 94.75 0 0 0 416 256a94.76 94.76 0 0 0-121.31-92.21A47.65 47.65 0 0 1 304 192a46.64 46.64 0 0 1-1.54 10l-73.61-56.89A142.31 142.31 0 0 1 320 112a143.92 143.92 0 0 1 144 144c0 21.63-5.29 41.79-13.9 60.11z"},child:[]}]})(e)}function tx(e){return Uv({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M572.52 241.4C518.29 135.59 410.93 64 288 64S57.68 135.64 3.48 241.41a32.35 32.35 0 0 0 0 29.19C57.71 376.41 165.07 448 288 448s230.32-71.64 284.52-177.41a32.35 32.35 0 0 0 0-29.19zM288 400a144 144 0 1 1 144-144 143.93 143.93 0 0 1-144 144zm0-240a95.31 95.31 0 0 0-25.31 3.79 47.85 47.85 0 0 1-66.9 66.9A95.78 95.78 0 1 0 288 160z"},child:[]}]})(e)}function nx(e){return Uv({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M487.976 0H24.028C2.71 0-8.047 25.866 7.058 40.971L192 225.941V432c0 7.831 3.821 15.17 10.237 19.662l80 55.98C298.02 518.69 320 507.493 320 487.98V225.941l184.947-184.97C520.021 25.896 509.338 0 487.976 0z"},child:[]}]})(e)}function rx(e){return Uv({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M280.37 148.26L96 300.11V464a16 16 0 0 0 16 16l112.06-.29a16 16 0 0 0 15.92-16V368a16 16 0 0 1 16-16h64a16 16 0 0 1 16 16v95.64a16 16 0 0 0 16 16.05L464 480a16 16 0 0 0 16-16V300L295.67 148.26a12.19 12.19 0 0 0-15.3 0zM571.6 251.47L488 182.56V44.05a12 12 0 0 0-12-12h-56a12 12 0 0 0-12 12v72.61L318.47 43a48 48 0 0 0-61 0L4.34 251.47a12 12 0 0 0-1.6 16.9l25.5 31A12 12 0 0 0 45.15 301l235.22-193.74a12.19 12.19 0 0 1 15.3 0L530.9 301a12 12 0 0 0 16.9-1.6l25.5-31a12 12 0 0 0-1.7-16.93z"},child:[]}]})(e)}function sx(e){return Uv({tag:"svg",attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M172.268 501.67C26.97 291.031 0 269.413 0 192 0 85.961 85.961 0 192 0s192 85.961 192 192c0 77.413-26.97 99.031-172.268 309.67-9.535 13.774-29.93 13.773-39.464 0zM192 272c44.183 0 80-35.817 80-80s-35.817-80-80-80-80 35.817-80 80 35.817 80 80 80z"},child:[]}]})(e)}function ix(e){return Uv({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M283.211 512c78.962 0 151.079-35.925 198.857-94.792 7.068-8.708-.639-21.43-11.562-19.35-124.203 23.654-238.262-71.576-238.262-196.954 0-72.222 38.662-138.635 101.498-174.394 9.686-5.512 7.25-20.197-3.756-22.23A258.156 258.156 0 0 0 283.211 0c-141.309 0-256 114.511-256 256 0 141.309 114.511 256 256 256z"},child:[]}]})(e)}function ax(e){return Uv({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M448 192V77.25c0-8.49-3.37-16.62-9.37-22.63L393.37 9.37c-6-6-14.14-9.37-22.63-9.37H96C78.33 0 64 14.33 64 32v160c-35.35 0-64 28.65-64 64v112c0 8.84 7.16 16 16 16h48v96c0 17.67 14.33 32 32 32h320c17.67 0 32-14.33 32-32v-96h48c8.84 0 16-7.16 16-16V256c0-35.35-28.65-64-64-64zm-64 256H128v-96h256v96zm0-224H128V64h192v48c0 8.84 7.16 16 16 16h48v96zm48 72c-13.25 0-24-10.75-24-24 0-13.26 10.75-24 24-24s24 10.74 24 24c0 13.25-10.75 24-24 24z"},child:[]}]})(e)}function ox(e){return Uv({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M0 224h192V32H0v192zM64 96h64v64H64V96zm192-64v192h192V32H256zm128 128h-64V96h64v64zM0 480h192V288H0v192zm64-128h64v64H64v-64zm352-64h32v128h-96v-32h-32v96h-64V288h96v32h64v-32zm0 160h32v32h-32v-32zm-64 0h32v32h-32v-32z"},child:[]}]})(e)}function lx(e){return Uv({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"},child:[]}]})(e)}function cx(e){return Uv({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M497 273L329 441c-15 15-41 4.5-41-17v-96H152c-13.3 0-24-10.7-24-24v-96c0-13.3 10.7-24 24-24h136V88c0-21.4 25.9-32 41-17l168 168c9.3 9.4 9.3 24.6 0 34zM192 436v-40c0-6.6-5.4-12-12-12H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h84c6.6 0 12-5.4 12-12V76c0-6.6-5.4-12-12-12H96c-53 0-96 43-96 96v192c0 53 43 96 96 96h84c6.6 0 12-5.4 12-12z"},child:[]}]})(e)}function ux(e){return Uv({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M304 48c0 26.51-21.49 48-48 48s-48-21.49-48-48 21.49-48 48-48 48 21.49 48 48zm-48 368c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zm208-208c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zM96 256c0-26.51-21.49-48-48-48S0 229.49 0 256s21.49 48 48 48 48-21.49 48-48zm12.922 99.078c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.491-48-48-48zm294.156 0c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.49-48-48-48zM108.922 60.922c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.491-48-48-48z"},child:[]}]})(e)}function dx(e){return Uv({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M259.3 17.8L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0z"},child:[]}]})(e)}function hx(e){return Uv({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 160c-52.9 0-96 43.1-96 96s43.1 96 96 96 96-43.1 96-96-43.1-96-96-96zm246.4 80.5l-94.7-47.3 33.5-100.4c4.5-13.6-8.4-26.5-21.9-21.9l-100.4 33.5-47.4-94.8c-6.4-12.8-24.6-12.8-31 0l-47.3 94.7L92.7 70.8c-13.6-4.5-26.5 8.4-21.9 21.9l33.5 100.4-94.7 47.4c-12.8 6.4-12.8 24.6 0 31l94.7 47.3-33.5 100.5c-4.5 13.6 8.4 26.5 21.9 21.9l100.4-33.5 47.3 94.7c6.4 12.8 24.6 12.8 31 0l47.3-94.7 100.4 33.5c13.6 4.5 26.5-8.4 21.9-21.9l-33.5-100.4 94.7-47.3c13-6.5 13-24.7.2-31.1zm-155.9 106c-49.9 49.9-131.1 49.9-181 0-49.9-49.9-49.9-131.1 0-181 49.9-49.9 131.1-49.9 181 0 49.9 49.9 49.9 131.1 0 181z"},child:[]}]})(e)}function fx(e){return Uv({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M370.72 133.28C339.458 104.008 298.888 87.962 255.848 88c-77.458.068-144.328 53.178-162.791 126.85-1.344 5.363-6.122 9.15-11.651 9.15H24.103c-7.498 0-13.194-6.807-11.807-14.176C33.933 94.924 134.813 8 256 8c66.448 0 126.791 26.136 171.315 68.685L463.03 40.97C478.149 25.851 504 36.559 504 57.941V192c0 13.255-10.745 24-24 24H345.941c-21.382 0-32.09-25.851-16.971-40.971l41.75-41.749zM32 296h134.059c21.382 0 32.09 25.851 16.971 40.971l-41.75 41.75c31.262 29.273 71.835 45.319 114.876 45.28 77.418-.07 144.315-53.144 162.787-126.849 1.344-5.363 6.122-9.15 11.651-9.15h57.304c7.498 0 13.194 6.807 11.807 14.176C478.067 417.076 377.187 504 256 504c-66.448 0-126.791-26.136-171.315-68.685L48.97 471.03C33.851 486.149 8 475.441 8 454.059V320c0-13.255 10.745-24 24-24z"},child:[]}]})(e)}function mx(e){return Uv({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M0 252.118V48C0 21.49 21.49 0 48 0h204.118a48 48 0 0 1 33.941 14.059l211.882 211.882c18.745 18.745 18.745 49.137 0 67.882L293.823 497.941c-18.745 18.745-49.137 18.745-67.882 0L14.059 286.059A48 48 0 0 1 0 252.118zM112 64c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48z"},child:[]}]})(e)}function px(e){return Uv({tag:"svg",attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"},child:[]}]})(e)}function gx(e){return Uv({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M384 64H192C85.961 64 0 149.961 0 256s85.961 192 192 192h192c106.039 0 192-85.961 192-192S490.039 64 384 64zM64 256c0-70.741 57.249-128 128-128 70.741 0 128 57.249 128 128 0 70.741-57.249 128-128 128-70.741 0-128-57.249-128-128zm320 128h-48.905c65.217-72.858 65.236-183.12 0-256H384c70.741 0 128 57.249 128 128 0 70.74-57.249 128-128 128z"},child:[]}]})(e)}function yx(e){return Uv({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M384 64H192C86 64 0 150 0 256s86 192 192 192h192c106 0 192-86 192-192S490 64 384 64zm0 320c-70.8 0-128-57.3-128-128 0-70.8 57.3-128 128-128 70.8 0 128 57.3 128 128 0 70.8-57.3 128-128 128z"},child:[]}]})(e)}function vx(e){return Uv({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z"},child:[]}]})(e)}function xx(e){return Uv({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M624 208h-64v-64c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v64h-64c-8.8 0-16 7.2-16 16v32c0 8.8 7.2 16 16 16h64v64c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16v-64h64c8.8 0 16-7.2 16-16v-32c0-8.8-7.2-16-16-16zm-400 48c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"},child:[]}]})(e)}function bx(e){return Uv({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M622.3 271.1l-115.2-45c-4.1-1.6-12.6-3.7-22.2 0l-115.2 45c-10.7 4.2-17.7 14-17.7 24.9 0 111.6 68.7 188.8 132.9 213.9 9.6 3.7 18 1.6 22.2 0C558.4 489.9 640 420.5 640 296c0-10.9-7-20.7-17.7-24.9zM496 462.4V273.3l95.5 37.3c-5.6 87.1-60.9 135.4-95.5 151.8zM224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm96 40c0-2.5.8-4.8 1.1-7.2-2.5-.1-4.9-.8-7.5-.8h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c6.8 0 13.3-1.5 19.2-4-54-42.9-99.2-116.7-99.2-212z"},child:[]}]})(e)}function wx(e){return Uv({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"},child:[]}]})(e)}function _x(e){return Uv({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M96 224c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm448 0c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm32 32h-64c-17.6 0-33.5 7.1-45.1 18.6 40.3 22.1 68.9 62 75.1 109.4h66c17.7 0 32-14.3 32-32v-32c0-35.3-28.7-64-64-64zm-256 0c61.9 0 112-50.1 112-112S381.9 32 320 32 208 82.1 208 144s50.1 112 112 112zm76.8 32h-8.3c-20.8 10-43.9 16-68.5 16s-47.6-6-68.5-16h-8.3C179.6 288 128 339.6 128 403.2V432c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48v-28.8c0-63.6-51.6-115.2-115.2-115.2zm-223.7-13.4C161.5 263.1 145.6 256 128 256H64c-35.3 0-64 28.7-64 64v32c0 17.7 14.3 32 32 32h65.9c6.3-47.4 34.9-87.3 75.2-109.4z"},child:[]}]})(e)}function kx(e){return Uv({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M507.73 109.1c-2.24-9.03-13.54-12.09-20.12-5.51l-74.36 74.36-67.88-11.31-11.31-67.88 74.36-74.36c6.62-6.62 3.43-17.9-5.66-20.16-47.38-11.74-99.55.91-136.58 37.93-39.64 39.64-50.55 97.1-34.05 147.2L18.74 402.76c-24.99 24.99-24.99 65.51 0 90.5 24.99 24.99 65.51 24.99 90.5 0l213.21-213.21c50.12 16.71 107.47 5.68 147.37-34.22 37.07-37.07 49.7-89.32 37.91-136.73zM64 472c-13.25 0-24-10.75-24-24 0-13.26 10.75-24 24-24s24 10.74 24 24c0 13.25-10.75 24-24 24z"},child:[]}]})(e)}function Nx(e){return Uv({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M528.1 171.5L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6zM388.6 312.3l23.7 138.4L288 385.4l-124.3 65.3 23.7-138.4-100.6-98 139-20.2 62.2-126 62.2 126 139 20.2-100.6 98z"},child:[]}]})(e)}const Sx=function(){const[e,t]=(0,r.useState)({environment:"production",url:window.location.href,authStatus:"checking...",adminToken:"checking...",lastLogin:"checking...",userAgent:navigator.userAgent,localStorage:"checking...",cookiesEnabled:navigator.cookieEnabled,timestamp:(new Date).toISOString()}),[n,s]=(0,r.useState)(!0);return(0,r.useEffect)((()=>{(async()=>{try{const e=localStorage.getItem("adminToken")?"exists":"missing",n=localStorage.getItem("adminLastLogin");let r="not authenticated";jv&&jv.currentUser&&(r=`authenticated as ${jv.currentUser.email}`),t((t=>({...t,authStatus:r,adminToken:e,lastLogin:n?new Date(parseInt(n)).toLocaleString():"missing",localStorage:"available"})))}catch(e){t((t=>({...t,authStatus:`error: ${e.message}`,localStorage:`error: ${e.message}`})))}})()}),[]),n?(0,Jt.jsxs)("div",{style:{position:"fixed",bottom:"10px",right:"10px",backgroundColor:"rgba(0, 0, 0, 0.8)",color:"white",padding:"15px",borderRadius:"5px",zIndex:1e4,fontSize:"12px",maxWidth:"350px",maxHeight:"80vh",overflowY:"auto"},children:[(0,Jt.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"10px"},children:[(0,Jt.jsx)("h3",{style:{margin:0},children:"Diagnostic Info"}),(0,Jt.jsx)("button",{onClick:()=>s(!1),style:{background:"none",border:"none",color:"white",cursor:"pointer",fontSize:"16px"},children:"\xd7"})]}),(0,Jt.jsx)("table",{style:{borderCollapse:"collapse",width:"100%"},children:(0,Jt.jsx)("tbody",{children:Object.entries(e).map((e=>{let[t,n]=e;return(0,Jt.jsxs)("tr",{style:{borderBottom:"1px solid #333"},children:[(0,Jt.jsx)("td",{style:{padding:"4px",color:"#aaa"},children:t}),(0,Jt.jsx)("td",{style:{padding:"4px",wordBreak:"break-all"},children:n})]},t)}))})}),(0,Jt.jsxs)("div",{style:{marginTop:"10px",display:"flex",gap:"5px",flexWrap:"wrap"},children:[(0,Jt.jsx)("button",{onClick:()=>{localStorage.removeItem("adminToken"),localStorage.removeItem("adminLastLogin"),window.location.href="/"},style:{backgroundColor:"#dc3545",color:"white",border:"none",padding:"5px 8px",borderRadius:"3px",cursor:"pointer",fontSize:"12px"},children:"Clear Auth & Reload"}),(0,Jt.jsx)("button",{onClick:()=>window.location.reload(!0),style:{backgroundColor:"#007bff",color:"white",border:"none",padding:"5px 8px",borderRadius:"3px",cursor:"pointer",fontSize:"12px"},children:"Hard Reload"}),(0,Jt.jsx)("button",{onClick:()=>{console.log("Diagnostic Data:",e),alert("Diagnostic data logged to console")},style:{backgroundColor:"#28a745",color:"white",border:"none",padding:"5px 8px",borderRadius:"3px",cursor:"pointer",fontSize:"12px"},children:"Log to Console"})]})]}):(0,Jt.jsx)("button",{onClick:()=>s(!0),style:{position:"fixed",bottom:"10px",right:"10px",zIndex:1e4,backgroundColor:"#666",color:"white",padding:"5px",borderRadius:"3px",fontSize:"12px",opacity:.7},children:"Show Diagnostics"})};const Ex=function(){const e=re(),[t,n]=(0,r.useState)(""),[s,i]=(0,r.useState)(""),[a,o]=(0,r.useState)(null),[l,c]=(0,r.useState)(null),[u,d]=(0,r.useState)(!1),[h,f]=(0,r.useState)(!1),m=new URLSearchParams(window.location.search).has("debug");document.title="Admin Login",(0,r.useEffect)((()=>{try{bv(),console.log("Login component mounted");localStorage.getItem("adminToken")&&console.log("Token found, checking if still valid...")}catch(KV){console.error("Error during login component initialization:",KV)}}),[]);const p=async()=>{if(o(null),c(null),!t)return o("Please enter your email."),void Ut.error("Please enter your email.");if(!s)return c("Please enter your password."),void Ut.error("Please enter your password.");if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t))return o("Please enter a valid email address."),void Ut.error("Please enter a valid email address.");if(!t.endsWith("@admin.com"))return o("Access restricted to admin users only."),void Ut.error("Access restricted to admin users only.");console.log("Attempting login for:",t),d(!0);try{localStorage.removeItem("adminToken"),localStorage.removeItem("adminLastLogin");const n=await Av(t.trim().toLowerCase(),s.trim());console.log("Login successful, storing token"),localStorage.setItem("adminToken",n.accessToken),localStorage.setItem("adminLastLogin",Date.now().toString()),Ut.success("Login successful!"),console.log("Navigating to admin dashboard"),setTimeout((()=>e("/admin")),1e3)}catch(n){console.error("Login error:",n),"auth/user-not-found"===n.code?Ut.error("Email not found. Please check your email address."):"auth/wrong-password"===n.code?(Ut.error("Incorrect password. Please try again."),c("Incorrect password. Please try again.")):"auth/too-many-requests"===n.code?Ut.error("Too many failed login attempts. Please try again later."):"auth/network-request-failed"===n.code?Ut.error("Network error. Please check your internet connection."):Ut.error(n.message||"Login failed. Please try again."),console.error("Login error details:",{code:n.code,message:n.message,fullError:n})}finally{d(!1)}},g=e=>{"Enter"===e.key&&p()};return(0,Jt.jsxs)("div",{className:"min-h-screen flex items-center justify-center bg-neutral",children:[(0,Jt.jsxs)("div",{className:"bg-base p-8 rounded-lg shadow-lg w-full max-w-md border-t-4 border-secondary",children:[(0,Jt.jsx)("img",{src:Iv,alt:"Logo",className:"mx-auto h-24 mb-6"}),(0,Jt.jsx)("h2",{className:"text-2xl font-bold text-primary text-center mb-6",children:"Admin Login"}),(0,Jt.jsx)("input",{type:"email",placeholder:"Admin Email",value:t,onChange:e=>n(e.target.value),onKeyPress:g,className:"w-full px-4 py-3 mb-4 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-secondary bg-neutral"}),a&&(0,Jt.jsx)("p",{className:"text-accent text-sm mb-2",children:a}),(0,Jt.jsxs)("div",{className:"relative",children:[(0,Jt.jsx)("input",{type:h?"text":"password",placeholder:"Password",value:s,onChange:e=>i(e.target.value),onKeyPress:g,className:"w-full px-4 py-3 mb-4 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-secondary bg-neutral"}),(0,Jt.jsx)("span",{onClick:()=>f(!h),className:"absolute right-3 top-3 cursor-pointer text-gray-500 hover:text-gray-700",children:h?(0,Jt.jsx)(tx,{className:"h-5 w-5"}):(0,Jt.jsx)(ex,{className:"h-5 w-5"})})]}),l&&(0,Jt.jsx)("p",{className:"text-red-500 text-sm mb-2",children:l}),"        ",(0,Jt.jsx)("button",{onClick:p,disabled:u,className:"w-full py-3 px-4 bg-primary text-white font-semibold rounded-lg hover:bg-primaryLight transition duration-200 ease-in-out disabled:opacity-50 disabled:cursor-not-allowed shadow-md",children:u?"Logging in...":"Login"}),(0,Jt.jsx)("a",{href:"/forgot-password",className:"text-sm text-primary hover:text-primaryLight block text-center mt-5",children:"Forgot password?"}),(0,Jt.jsx)(Xt,{position:"top-right",autoClose:5e3,hideProgressBar:!1,newestOnTop:!0,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0})]}),m&&(0,Jt.jsx)(Sx,{})]})};const jx=function(){const e=re(),t=ee(),[n,s]=(0,r.useState)(!1),[i,a]=(0,r.useState)(!1),[o,l]=(0,r.useState)(!1),[c,u]=(0,r.useState)(!1),{darkMode:d}=tn();(0,r.useEffect)((()=>{const e=()=>{l(window.innerWidth<1024),window.innerWidth>=1024?u(!0):u(!1)};return e(),window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}}),[]),(0,r.useEffect)((()=>{const e=()=>{s(!1),a(!1)};return document.addEventListener("click",e),()=>{document.removeEventListener("click",e)}}),[]);const h=(e,t)=>{e.stopPropagation(),t((e=>!e))},f=e=>`flex items-center py-2 px-3 rounded-lg transition-all duration-200 ${(e=>t.pathname===e)(e)?d?"bg-gray-700 text-white":"bg-primary-dark text-white font-medium":""} ${d?"hover:bg-gray-700/70 text-gray-300 hover:text-white":"hover:bg-primaryLight/20 text-white hover:text-white"}`,m="flex justify-between items-center py-2 px-3 rounded-lg transition-all duration-200 "+(d?"hover:bg-gray-700/70 text-gray-300 hover:text-white":"hover:bg-primaryLight/20 text-white hover:text-white");return(0,Jt.jsx)("header",{className:(d?"bg-gray-900":"bg-primary")+" fixed top-0 left-0 right-0 z-40 shadow-lg",children:(0,Jt.jsxs)("div",{className:"container mx-auto px-4",children:[(0,Jt.jsxs)("div",{className:"flex justify-between items-center py-3 w-full",children:[(0,Jt.jsxs)("div",{className:"flex items-center",children:[(0,Jt.jsx)("img",{src:Iv,alt:"Logo",className:"h-10"}),(0,Jt.jsx)("h2",{className:"text-xl font-bold text-white ml-3",children:"Dulalia Homes"})]}),o&&(0,Jt.jsx)("button",{onClick:()=>{u(!c)},className:"p-2 rounded-md "+(d?"bg-gray-800 text-white":"bg-primary-dark text-white"),children:(0,Jt.jsx)($v,{size:20})}),(!o||o&&c)&&(0,Jt.jsxs)("div",{className:"flex items-center",children:[(0,Jt.jsx)("span",{className:"text-white font-medium mr-4",children:"Welcome Admin!"}),(0,Jt.jsx)("div",{className:"pl-4 border-l border-gray-600",children:(0,Jt.jsx)("button",{onClick:()=>{localStorage.removeItem("adminToken"),localStorage.removeItem("adminLastLogin"),Ut.success("Logged out successfully"),e("/login")},className:"flex items-center justify-center p-2 rounded-full\n                    bg-red-500/20 hover:bg-red-500/30 text-red-400 \n                    transition-all duration-200",title:"Logout",children:(0,Jt.jsx)(cx,{size:18})})})]})]}),(0,Jt.jsx)("div",{className:(!o||o&&c?"block":"hidden")+" pb-3",children:(0,Jt.jsx)("nav",{children:(0,Jt.jsxs)("ul",{className:""+(o?"flex flex-col gap-2":"flex flex-wrap gap-2 items-center"),children:[(0,Jt.jsx)("li",{children:(0,Jt.jsxs)("button",{onClick:()=>e("/admin"),className:`${f("/admin")}`,children:[(0,Jt.jsx)(rx,{className:"mr-2",size:16}),(0,Jt.jsx)("span",{children:"Dashboard"})]})}),(0,Jt.jsxs)("li",{className:"relative",children:[(0,Jt.jsxs)("button",{onClick:e=>h(e,a),className:`${m}`,children:[(0,Jt.jsxs)("div",{className:"flex items-center",children:[(0,Jt.jsx)(_x,{className:"mr-2",size:16}),(0,Jt.jsx)("span",{children:"Accounts"})]}),(0,Jt.jsx)("span",{className:"ml-2 transition-transform duration-200 "+(i?"rotate-180":""),children:(0,Jt.jsx)(qv,{size:12})})]}),i&&(0,Jt.jsxs)("ul",{className:""+(o?"pl-6 mt-1 space-y-1":"absolute mt-1 bg-primary dark:bg-gray-800 rounded-lg shadow-lg overflow-hidden z-50 min-w-[180px]"),children:[(0,Jt.jsx)("li",{children:(0,Jt.jsxs)("button",{onClick:()=>e("/admin/user-accounts"),className:`w-full text-left ${f("/admin/user-accounts")}`,children:[(0,Jt.jsx)(_x,{className:"mr-2",size:16}),(0,Jt.jsx)("span",{children:"User Accounts"})]})}),(0,Jt.jsx)("li",{children:(0,Jt.jsxs)("button",{onClick:()=>e("/admin/guard-accounts"),className:`w-full text-left ${f("/admin/guard-accounts")}`,children:[(0,Jt.jsx)(bx,{className:"mr-2",size:16}),(0,Jt.jsx)("span",{children:"Guard Accounts"})]})})]})]}),(0,Jt.jsx)("li",{children:(0,Jt.jsxs)("button",{onClick:()=>e("/admin/staff"),className:`${f("/admin/staff")}`,children:[(0,Jt.jsx)(Kv,{className:"mr-2",size:16}),(0,Jt.jsx)("span",{children:"Staff List"})]})}),(0,Jt.jsxs)("li",{className:"relative",children:[(0,Jt.jsxs)("button",{onClick:e=>h(e,s),className:`${m}`,children:[(0,Jt.jsxs)("div",{className:"flex items-center",children:[(0,Jt.jsx)(Kv,{className:"mr-2",size:16}),(0,Jt.jsx)("span",{children:"View Request"})]}),(0,Jt.jsx)("span",{className:"ml-2 transition-transform duration-200 "+(n?"rotate-180":""),children:(0,Jt.jsx)(qv,{size:12})})]}),n&&(0,Jt.jsxs)("ul",{className:""+(o?"pl-6 mt-1 space-y-1":"absolute mt-1 bg-primary dark:bg-gray-800 rounded-lg shadow-lg overflow-hidden z-50 min-w-[180px]"),children:[(0,Jt.jsx)("li",{children:(0,Jt.jsxs)("button",{onClick:()=>e("/admin/facility-requests"),className:`w-full text-left ${f("/admin/facility-requests")}`,children:[(0,Jt.jsx)(Kv,{className:"mr-2",size:16}),(0,Jt.jsx)("span",{children:"Facility Request"})]})}),(0,Jt.jsx)("li",{children:(0,Jt.jsxs)("button",{onClick:()=>e("/admin/service-requests"),className:`w-full text-left ${f("/admin/service-requests")}`,children:[(0,Jt.jsx)(Kv,{className:"mr-2",size:16}),(0,Jt.jsx)("span",{children:"Service Request"})]})})]})]}),(0,Jt.jsx)("li",{children:(0,Jt.jsxs)("button",{onClick:()=>e("/admin/announcements"),className:`${f("/admin/announcements")}`,children:[(0,Jt.jsx)(Wv,{className:"mr-2",size:16}),(0,Jt.jsx)("span",{children:"Announcements"})]})}),(0,Jt.jsx)("li",{children:(0,Jt.jsxs)("button",{onClick:()=>e("/admin/feedback"),className:`${f("/admin/feedback")}`,children:[(0,Jt.jsx)(Qv,{className:"mr-2",size:16}),(0,Jt.jsx)("span",{children:"Feedback"})]})}),(0,Jt.jsx)("li",{children:(0,Jt.jsxs)("button",{onClick:()=>e("/admin/visitor-logs"),className:`${f("/admin/visitor-logs")}`,children:[(0,Jt.jsx)(ox,{className:"mr-2",size:16}),(0,Jt.jsx)("span",{children:"Visitor Logs"})]})}),(0,Jt.jsx)("li",{children:(0,Jt.jsxs)("button",{onClick:()=>e("/admin/lot-status"),className:`${f("/admin/lot-status")}`,children:[(0,Jt.jsx)(rx,{className:"mr-2",size:16}),(0,Jt.jsx)("span",{children:"Lot Status"})]})})]})})})]})})};const Cx=function(e){let{children:t}=e;const{darkMode:n,toggleDarkMode:s}=tn();return(0,r.useContext)(sn),(0,r.useEffect)((()=>{n?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),localStorage.setItem("darkMode",n)}),[n]),(0,Jt.jsxs)("div",{className:"flex flex-col min-h-screen",children:[(0,Jt.jsx)(jx,{}),(0,Jt.jsx)("main",{className:"w-full min-h-screen bg-neutral dark:bg-gray-900 transition-colors duration-200 pt-[130px]",children:(0,Jt.jsxs)("div",{className:"container mx-auto px-4 md:px-8",children:[(0,Jt.jsx)("div",{className:"flex justify-end mb-4",children:(0,Jt.jsx)("button",{onClick:s,className:"p-2 rounded-full bg-white text-primary hover:bg-primaryLight hover:text-white dark:bg-gray-800 dark:text-secondary dark:hover:bg-gray-700 shadow-sm transition-all duration-200","aria-label":n?"Switch to light mode":"Switch to dark mode",children:n?(0,Jt.jsx)(hx,{className:"h-5 w-5"}):(0,Jt.jsx)(ix,{className:"h-5 w-5"})})}),t]})})]})};const Tx=r.forwardRef((function(e,t){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor","aria-hidden":"true",ref:t},e),r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.121 17.804A13.937 13.937 0 0112 16c2.5 0 4.847.655 6.879 1.804M15 10a3 3 0 11-6 0 3 3 0 016 0zm6 2a9 9 0 11-18 0 9 9 0 0118 0z"}))}));const Ax=r.forwardRef((function(e,t){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor","aria-hidden":"true",ref:t},e),r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"}))}));const Ix=r.forwardRef((function(e,t){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor","aria-hidden":"true",ref:t},e),r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"}))}));const Mx=r.forwardRef((function(e,t){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor","aria-hidden":"true",ref:t},e),r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10 6H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V8a2 2 0 00-2-2h-5m-4 0V5a2 2 0 114 0v1m-4 0a2 2 0 104 0m-5 8a2 2 0 100-4 2 2 0 000 4zm0 0c1.306 0 2.417.835 2.83 2M9 14a3.001 3.001 0 00-2.83 2M15 11h3m-3 4h2"}))}));function Px(e){return e+.5|0}const Rx=(e,t,n)=>Math.max(Math.min(e,n),t);function Lx(e){return Rx(Px(2.55*e),0,255)}function Dx(e){return Rx(Px(255*e),0,255)}function Ox(e){return Rx(Px(e/2.55)/100,0,1)}function Fx(e){return Rx(Px(100*e),0,100)}const Vx={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},zx=[..."0123456789ABCDEF"],Ux=e=>zx[15&e],Bx=e=>zx[(240&e)>>4]+zx[15&e],$x=e=>(240&e)>>4===(15&e);function Hx(e){var t=(e=>$x(e.r)&&$x(e.g)&&$x(e.b)&&$x(e.a))(e)?Ux:Bx;return e?"#"+t(e.r)+t(e.g)+t(e.b)+((e,t)=>e<255?t(e):"")(e.a,t):void 0}const Wx=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function qx(e,t,n){const r=t*Math.min(n,1-n),s=function(t){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(t+e/30)%12;return n-r*Math.max(Math.min(s-3,9-s,1),-1)};return[s(0),s(8),s(4)]}function Kx(e,t,n){const r=function(r){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(r+e/60)%6;return n-n*t*Math.max(Math.min(s,4-s,1),0)};return[r(5),r(3),r(1)]}function Gx(e,t,n){const r=qx(e,1,.5);let s;for(t+n>1&&(s=1/(t+n),t*=s,n*=s),s=0;s<3;s++)r[s]*=1-t-n,r[s]+=t;return r}function Yx(e){const t=e.r/255,n=e.g/255,r=e.b/255,s=Math.max(t,n,r),i=Math.min(t,n,r),a=(s+i)/2;let o,l,c;return s!==i&&(c=s-i,l=a>.5?c/(2-s-i):c/(s+i),o=function(e,t,n,r,s){return e===s?(t-n)/r+(t<n?6:0):t===s?(n-e)/r+2:(e-t)/r+4}(t,n,r,c,s),o=60*o+.5),[0|o,l||0,a]}function Qx(e,t,n,r){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,n,r)).map(Dx)}function Xx(e,t,n){return Qx(qx,e,t,n)}function Jx(e){return(e%360+360)%360}function Zx(e){const t=Wx.exec(e);let n,r=255;if(!t)return;t[5]!==n&&(r=t[6]?Lx(+t[5]):Dx(+t[5]));const s=Jx(+t[2]),i=+t[3]/100,a=+t[4]/100;return n="hwb"===t[1]?function(e,t,n){return Qx(Gx,e,t,n)}(s,i,a):"hsv"===t[1]?function(e,t,n){return Qx(Kx,e,t,n)}(s,i,a):Xx(s,i,a),{r:n[0],g:n[1],b:n[2],a:r}}const eb={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},tb={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};let nb;function rb(e){nb||(nb=function(){const e={},t=Object.keys(tb),n=Object.keys(eb);let r,s,i,a,o;for(r=0;r<t.length;r++){for(a=o=t[r],s=0;s<n.length;s++)i=n[s],o=o.replace(i,eb[i]);i=parseInt(tb[a],16),e[o]=[i>>16&255,i>>8&255,255&i]}return e}(),nb.transparent=[0,0,0,0]);const t=nb[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:4===t.length?t[3]:255}}const sb=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;const ib=e=>e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055,ab=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function ob(e,t,n){if(e){let r=Yx(e);r[t]=Math.max(0,Math.min(r[t]+r[t]*n,0===t?360:1)),r=Xx(r),e.r=r[0],e.g=r[1],e.b=r[2]}}function lb(e,t){return e?Object.assign(t||{},e):e}function cb(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=Dx(e[3]))):(t=lb(e,{r:0,g:0,b:0,a:1})).a=Dx(t.a),t}function ub(e){return"r"===e.charAt(0)?function(e){const t=sb.exec(e);let n,r,s,i=255;if(t){if(t[7]!==n){const e=+t[7];i=t[8]?Lx(e):Rx(255*e,0,255)}return n=+t[1],r=+t[3],s=+t[5],n=255&(t[2]?Lx(n):Rx(n,0,255)),r=255&(t[4]?Lx(r):Rx(r,0,255)),s=255&(t[6]?Lx(s):Rx(s,0,255)),{r:n,g:r,b:s,a:i}}}(e):Zx(e)}class db{constructor(e){if(e instanceof db)return e;const t=typeof e;let n;"object"===t?n=cb(e):"string"===t&&(n=function(e){var t,n=e.length;return"#"===e[0]&&(4===n||5===n?t={r:255&17*Vx[e[1]],g:255&17*Vx[e[2]],b:255&17*Vx[e[3]],a:5===n?17*Vx[e[4]]:255}:7!==n&&9!==n||(t={r:Vx[e[1]]<<4|Vx[e[2]],g:Vx[e[3]]<<4|Vx[e[4]],b:Vx[e[5]]<<4|Vx[e[6]],a:9===n?Vx[e[7]]<<4|Vx[e[8]]:255})),t}(e)||rb(e)||ub(e)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var e=lb(this._rgb);return e&&(e.a=Ox(e.a)),e}set rgb(e){this._rgb=cb(e)}rgbString(){return this._valid?function(e){return e&&(e.a<255?`rgba(${e.r}, ${e.g}, ${e.b}, ${Ox(e.a)})`:`rgb(${e.r}, ${e.g}, ${e.b})`)}(this._rgb):void 0}hexString(){return this._valid?Hx(this._rgb):void 0}hslString(){return this._valid?function(e){if(!e)return;const t=Yx(e),n=t[0],r=Fx(t[1]),s=Fx(t[2]);return e.a<255?`hsla(${n}, ${r}%, ${s}%, ${Ox(e.a)})`:`hsl(${n}, ${r}%, ${s}%)`}(this._rgb):void 0}mix(e,t){if(e){const n=this.rgb,r=e.rgb;let s;const i=t===s?.5:t,a=2*i-1,o=n.a-r.a,l=((a*o===-1?a:(a+o)/(1+a*o))+1)/2;s=1-l,n.r=255&l*n.r+s*r.r+.5,n.g=255&l*n.g+s*r.g+.5,n.b=255&l*n.b+s*r.b+.5,n.a=i*n.a+(1-i)*r.a,this.rgb=n}return this}interpolate(e,t){return e&&(this._rgb=function(e,t,n){const r=ab(Ox(e.r)),s=ab(Ox(e.g)),i=ab(Ox(e.b));return{r:Dx(ib(r+n*(ab(Ox(t.r))-r))),g:Dx(ib(s+n*(ab(Ox(t.g))-s))),b:Dx(ib(i+n*(ab(Ox(t.b))-i))),a:e.a+n*(t.a-e.a)}}(this._rgb,e._rgb,t)),this}clone(){return new db(this.rgb)}alpha(e){return this._rgb.a=Dx(e),this}clearer(e){return this._rgb.a*=1-e,this}greyscale(){const e=this._rgb,t=Px(.3*e.r+.59*e.g+.11*e.b);return e.r=e.g=e.b=t,this}opaquer(e){return this._rgb.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return ob(this._rgb,2,e),this}darken(e){return ob(this._rgb,2,-e),this}saturate(e){return ob(this._rgb,1,e),this}desaturate(e){return ob(this._rgb,1,-e),this}rotate(e){return function(e,t){var n=Yx(e);n[0]=Jx(n[0]+t),n=Xx(n),e.r=n[0],e.g=n[1],e.b=n[2]}(this._rgb,e),this}}function hb(){}const fb=(()=>{let e=0;return()=>e++})();function mb(e){return null===e||void 0===e}function pb(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return"[object"===t.slice(0,7)&&"Array]"===t.slice(-6)}function gb(e){return null!==e&&"[object Object]"===Object.prototype.toString.call(e)}function yb(e){return("number"===typeof e||e instanceof Number)&&isFinite(+e)}function vb(e,t){return yb(e)?e:t}function xb(e,t){return"undefined"===typeof e?t:e}const bb=(e,t)=>"string"===typeof e&&e.endsWith("%")?parseFloat(e)/100*t:+e;function wb(e,t,n){if(e&&"function"===typeof e.call)return e.apply(n,t)}function _b(e,t,n,r){let s,i,a;if(pb(e))if(i=e.length,r)for(s=i-1;s>=0;s--)t.call(n,e[s],s);else for(s=0;s<i;s++)t.call(n,e[s],s);else if(gb(e))for(a=Object.keys(e),i=a.length,s=0;s<i;s++)t.call(n,e[a[s]],a[s])}function kb(e,t){let n,r,s,i;if(!e||!t||e.length!==t.length)return!1;for(n=0,r=e.length;n<r;++n)if(s=e[n],i=t[n],s.datasetIndex!==i.datasetIndex||s.index!==i.index)return!1;return!0}function Nb(e){if(pb(e))return e.map(Nb);if(gb(e)){const t=Object.create(null),n=Object.keys(e),r=n.length;let s=0;for(;s<r;++s)t[n[s]]=Nb(e[n[s]]);return t}return e}function Sb(e){return-1===["__proto__","prototype","constructor"].indexOf(e)}function Eb(e,t,n,r){if(!Sb(e))return;const s=t[e],i=n[e];gb(s)&&gb(i)?jb(s,i,r):t[e]=Nb(i)}function jb(e,t,n){const r=pb(t)?t:[t],s=r.length;if(!gb(e))return e;const i=(n=n||{}).merger||Eb;let a;for(let o=0;o<s;++o){if(a=r[o],!gb(a))continue;const t=Object.keys(a);for(let r=0,s=t.length;r<s;++r)i(t[r],e,a,n)}return e}function Cb(e,t){return jb(e,t,{merger:Tb})}function Tb(e,t,n){if(!Sb(e))return;const r=t[e],s=n[e];gb(r)&&gb(s)?Cb(r,s):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=Nb(s))}const Ab={"":e=>e,x:e=>e.x,y:e=>e.y};function Ib(e,t){const n=Ab[t]||(Ab[t]=function(e){const t=function(e){const t=e.split("."),n=[];let r="";for(const s of t)r+=s,r.endsWith("\\")?r=r.slice(0,-1)+".":(n.push(r),r="");return n}(e);return e=>{for(const n of t){if(""===n)break;e=e&&e[n]}return e}}(t));return n(e)}function Mb(e){return e.charAt(0).toUpperCase()+e.slice(1)}const Pb=e=>"undefined"!==typeof e,Rb=e=>"function"===typeof e,Lb=(e,t)=>{if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0};const Db=Math.PI,Ob=2*Db,Fb=Ob+Db,Vb=Number.POSITIVE_INFINITY,zb=Db/180,Ub=Db/2,Bb=Db/4,$b=2*Db/3,Hb=Math.log10,Wb=Math.sign;function qb(e,t,n){return Math.abs(e-t)<n}function Kb(e){const t=Math.round(e);e=qb(e,t,e/1e3)?t:e;const n=Math.pow(10,Math.floor(Hb(e))),r=e/n;return(r<=1?1:r<=2?2:r<=5?5:10)*n}function Gb(e){return!function(e){return"symbol"===typeof e||"object"===typeof e&&null!==e&&!(Symbol.toPrimitive in e||"toString"in e||"valueOf"in e)}(e)&&!isNaN(parseFloat(e))&&isFinite(e)}function Yb(e,t,n){let r,s,i;for(r=0,s=e.length;r<s;r++)i=e[r][n],isNaN(i)||(t.min=Math.min(t.min,i),t.max=Math.max(t.max,i))}function Qb(e){return e*(Db/180)}function Xb(e){return e*(180/Db)}function Jb(e){if(!yb(e))return;let t=1,n=0;for(;Math.round(e*t)/t!==e;)t*=10,n++;return n}function Zb(e,t){const n=t.x-e.x,r=t.y-e.y,s=Math.sqrt(n*n+r*r);let i=Math.atan2(r,n);return i<-.5*Db&&(i+=Ob),{angle:i,distance:s}}function ew(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function tw(e,t){return(e-t+Fb)%Ob-Db}function nw(e){return(e%Ob+Ob)%Ob}function rw(e,t,n,r){const s=nw(e),i=nw(t),a=nw(n),o=nw(i-s),l=nw(a-s),c=nw(s-i),u=nw(s-a);return s===i||s===a||r&&i===a||o>l&&c<u}function sw(e,t,n){return Math.max(t,Math.min(n,e))}function iw(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e-6;return e>=Math.min(t,n)-r&&e<=Math.max(t,n)+r}function aw(e,t,n){n=n||(n=>e[n]<t);let r,s=e.length-1,i=0;for(;s-i>1;)r=i+s>>1,n(r)?i=r:s=r;return{lo:i,hi:s}}const ow=(e,t,n,r)=>aw(e,n,r?r=>{const s=e[r][t];return s<n||s===n&&e[r+1][t]===n}:r=>e[r][t]<n),lw=(e,t,n)=>aw(e,n,(r=>e[r][t]>=n));const cw=["push","pop","shift","splice","unshift"];function uw(e,t){const n=e._chartjs;if(!n)return;const r=n.listeners,s=r.indexOf(t);-1!==s&&r.splice(s,1),r.length>0||(cw.forEach((t=>{delete e[t]})),delete e._chartjs)}function dw(e){const t=new Set(e);return t.size===e.length?e:Array.from(t)}const hw="undefined"===typeof window?function(e){return e()}:window.requestAnimationFrame;function fw(e,t){let n=[],r=!1;return function(){for(var s=arguments.length,i=new Array(s),a=0;a<s;a++)i[a]=arguments[a];n=i,r||(r=!0,hw.call(window,(()=>{r=!1,e.apply(t,n)})))}}const mw=e=>"start"===e?"left":"end"===e?"right":"center",pw=(e,t,n)=>"start"===e?t:"end"===e?n:(t+n)/2;function gw(e,t,n){const r=t.length;let s=0,i=r;if(e._sorted){const{iScale:a,vScale:o,_parsed:l}=e,c=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null,u=a.axis,{min:d,max:h,minDefined:f,maxDefined:m}=a.getUserBounds();if(f){if(s=Math.min(ow(l,u,d).lo,n?r:ow(t,u,a.getPixelForValue(d)).lo),c){const e=l.slice(0,s+1).reverse().findIndex((e=>!mb(e[o.axis])));s-=Math.max(0,e)}s=sw(s,0,r-1)}if(m){let e=Math.max(ow(l,a.axis,h,!0).hi+1,n?0:ow(t,u,a.getPixelForValue(h),!0).hi+1);if(c){const t=l.slice(e-1).findIndex((e=>!mb(e[o.axis])));e+=Math.max(0,t)}i=sw(e,s,r)-s}else i=r-s}return{start:s,count:i}}function yw(e){const{xScale:t,yScale:n,_scaleRanges:r}=e,s={xmin:t.min,xmax:t.max,ymin:n.min,ymax:n.max};if(!r)return e._scaleRanges=s,!0;const i=r.xmin!==t.min||r.xmax!==t.max||r.ymin!==n.min||r.ymax!==n.max;return Object.assign(r,s),i}const vw=e=>0===e||1===e,xw=(e,t,n)=>-Math.pow(2,10*(e-=1))*Math.sin((e-t)*Ob/n),bw=(e,t,n)=>Math.pow(2,-10*e)*Math.sin((e-t)*Ob/n)+1,ww={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>1-Math.cos(e*Ub),easeOutSine:e=>Math.sin(e*Ub),easeInOutSine:e=>-.5*(Math.cos(Db*e)-1),easeInExpo:e=>0===e?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>1===e?1:1-Math.pow(2,-10*e),easeInOutExpo:e=>vw(e)?e:e<.5?.5*Math.pow(2,10*(2*e-1)):.5*(2-Math.pow(2,-10*(2*e-1))),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>vw(e)?e:xw(e,.075,.3),easeOutElastic:e=>vw(e)?e:bw(e,.075,.3),easeInOutElastic(e){const t=.1125;return vw(e)?e:e<.5?.5*xw(2*e,t,.45):.5+.5*bw(2*e-1,t,.45)},easeInBack(e){const t=1.70158;return e*e*((t+1)*e-t)},easeOutBack(e){const t=1.70158;return(e-=1)*e*((t+1)*e+t)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?e*e*((1+(t*=1.525))*e-t)*.5:.5*((e-=2)*e*((1+(t*=1.525))*e+t)+2)},easeInBounce:e=>1-ww.easeOutBounce(1-e),easeOutBounce(e){const t=7.5625,n=2.75;return e<1/n?t*e*e:e<2/n?t*(e-=1.5/n)*e+.75:e<2.5/n?t*(e-=2.25/n)*e+.9375:t*(e-=2.625/n)*e+.984375},easeInOutBounce:e=>e<.5?.5*ww.easeInBounce(2*e):.5*ww.easeOutBounce(2*e-1)+.5};function _w(e){if(e&&"object"===typeof e){const t=e.toString();return"[object CanvasPattern]"===t||"[object CanvasGradient]"===t}return!1}function kw(e){return _w(e)?e:new db(e)}function Nw(e){return _w(e)?e:new db(e).saturate(.5).darken(.1).hexString()}const Sw=["x","y","borderWidth","radius","tension"],Ew=["color","borderColor","backgroundColor"];const jw=new Map;function Cw(e,t,n){return function(e,t){t=t||{};const n=e+JSON.stringify(t);let r=jw.get(n);return r||(r=new Intl.NumberFormat(e,t),jw.set(n,r)),r}(t,n).format(e)}const Tw={values:e=>pb(e)?e:""+e,numeric(e,t,n){if(0===e)return"0";const r=this.chart.options.locale;let s,i=e;if(n.length>1){const t=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(t<1e-4||t>1e15)&&(s="scientific"),i=function(e,t){let n=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;Math.abs(n)>=1&&e!==Math.floor(e)&&(n=e-Math.floor(e));return n}(e,n)}const a=Hb(Math.abs(i)),o=isNaN(a)?1:Math.max(Math.min(-1*Math.floor(a),20),0),l={notation:s,minimumFractionDigits:o,maximumFractionDigits:o};return Object.assign(l,this.options.ticks.format),Cw(e,r,l)},logarithmic(e,t,n){if(0===e)return"0";const r=n[t].significand||e/Math.pow(10,Math.floor(Hb(e)));return[1,2,3,5,10,15].includes(r)||t>.8*n.length?Tw.numeric.call(this,e,t,n):""}};var Aw={formatters:Tw};const Iw=Object.create(null),Mw=Object.create(null);function Pw(e,t){if(!t)return e;const n=t.split(".");for(let r=0,s=n.length;r<s;++r){const t=n[r];e=e[t]||(e[t]=Object.create(null))}return e}function Rw(e,t,n){return"string"===typeof t?jb(Pw(e,t),n):jb(Pw(e,""),t)}class Lw{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=e=>e.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(e,t)=>Nw(t.backgroundColor),this.hoverBorderColor=(e,t)=>Nw(t.borderColor),this.hoverColor=(e,t)=>Nw(t.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return Rw(this,e,t)}get(e){return Pw(this,e)}describe(e,t){return Rw(Mw,e,t)}override(e,t){return Rw(Iw,e,t)}route(e,t,n,r){const s=Pw(this,e),i=Pw(this,n),a="_"+t;Object.defineProperties(s,{[a]:{value:s[t],writable:!0},[t]:{enumerable:!0,get(){const e=this[a],t=i[r];return gb(e)?Object.assign({},t,e):xb(e,t)},set(e){this[a]=e}}})}apply(e){e.forEach((e=>e(this)))}}var Dw=new Lw({_scriptable:e=>!e.startsWith("on"),_indexable:e=>"events"!==e,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[function(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>"onProgress"!==e&&"onComplete"!==e&&"fn"!==e}),e.set("animations",{colors:{type:"color",properties:Ew},numbers:{type:"number",properties:Sw}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>0|e}}}})},function(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})},function(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Aw.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&"callback"!==e&&"parser"!==e,_indexable:e=>"borderDash"!==e&&"tickBorderDash"!==e&&"dash"!==e}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:e=>"backdropPadding"!==e&&"callback"!==e,_indexable:e=>"backdropPadding"!==e})}]);function Ow(e,t,n,r,s){let i=t[s];return i||(i=t[s]=e.measureText(s).width,n.push(s)),i>r&&(r=i),r}function Fw(e,t,n,r){let s=(r=r||{}).data=r.data||{},i=r.garbageCollect=r.garbageCollect||[];r.font!==t&&(s=r.data={},i=r.garbageCollect=[],r.font=t),e.save(),e.font=t;let a=0;const o=n.length;let l,c,u,d,h;for(l=0;l<o;l++)if(d=n[l],void 0===d||null===d||pb(d)){if(pb(d))for(c=0,u=d.length;c<u;c++)h=d[c],void 0===h||null===h||pb(h)||(a=Ow(e,s,i,a,h))}else a=Ow(e,s,i,a,d);e.restore();const f=i.length/2;if(f>n.length){for(l=0;l<f;l++)delete s[i[l]];i.splice(0,f)}return a}function Vw(e,t,n){const r=e.currentDevicePixelRatio,s=0!==n?Math.max(n/2,.5):0;return Math.round((t-s)*r)/r+s}function zw(e,t){(t||e)&&((t=t||e.getContext("2d")).save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore())}function Uw(e,t,n,r){Bw(e,t,n,r,null)}function Bw(e,t,n,r,s){let i,a,o,l,c,u,d,h;const f=t.pointStyle,m=t.rotation,p=t.radius;let g=(m||0)*zb;if(f&&"object"===typeof f&&(i=f.toString(),"[object HTMLImageElement]"===i||"[object HTMLCanvasElement]"===i))return e.save(),e.translate(n,r),e.rotate(g),e.drawImage(f,-f.width/2,-f.height/2,f.width,f.height),void e.restore();if(!(isNaN(p)||p<=0)){switch(e.beginPath(),f){default:s?e.ellipse(n,r,s/2,p,0,0,Ob):e.arc(n,r,p,0,Ob),e.closePath();break;case"triangle":u=s?s/2:p,e.moveTo(n+Math.sin(g)*u,r-Math.cos(g)*p),g+=$b,e.lineTo(n+Math.sin(g)*u,r-Math.cos(g)*p),g+=$b,e.lineTo(n+Math.sin(g)*u,r-Math.cos(g)*p),e.closePath();break;case"rectRounded":c=.516*p,l=p-c,a=Math.cos(g+Bb)*l,d=Math.cos(g+Bb)*(s?s/2-c:l),o=Math.sin(g+Bb)*l,h=Math.sin(g+Bb)*(s?s/2-c:l),e.arc(n-d,r-o,c,g-Db,g-Ub),e.arc(n+h,r-a,c,g-Ub,g),e.arc(n+d,r+o,c,g,g+Ub),e.arc(n-h,r+a,c,g+Ub,g+Db),e.closePath();break;case"rect":if(!m){l=Math.SQRT1_2*p,u=s?s/2:l,e.rect(n-u,r-l,2*u,2*l);break}g+=Bb;case"rectRot":d=Math.cos(g)*(s?s/2:p),a=Math.cos(g)*p,o=Math.sin(g)*p,h=Math.sin(g)*(s?s/2:p),e.moveTo(n-d,r-o),e.lineTo(n+h,r-a),e.lineTo(n+d,r+o),e.lineTo(n-h,r+a),e.closePath();break;case"crossRot":g+=Bb;case"cross":d=Math.cos(g)*(s?s/2:p),a=Math.cos(g)*p,o=Math.sin(g)*p,h=Math.sin(g)*(s?s/2:p),e.moveTo(n-d,r-o),e.lineTo(n+d,r+o),e.moveTo(n+h,r-a),e.lineTo(n-h,r+a);break;case"star":d=Math.cos(g)*(s?s/2:p),a=Math.cos(g)*p,o=Math.sin(g)*p,h=Math.sin(g)*(s?s/2:p),e.moveTo(n-d,r-o),e.lineTo(n+d,r+o),e.moveTo(n+h,r-a),e.lineTo(n-h,r+a),g+=Bb,d=Math.cos(g)*(s?s/2:p),a=Math.cos(g)*p,o=Math.sin(g)*p,h=Math.sin(g)*(s?s/2:p),e.moveTo(n-d,r-o),e.lineTo(n+d,r+o),e.moveTo(n+h,r-a),e.lineTo(n-h,r+a);break;case"line":a=s?s/2:Math.cos(g)*p,o=Math.sin(g)*p,e.moveTo(n-a,r-o),e.lineTo(n+a,r+o);break;case"dash":e.moveTo(n,r),e.lineTo(n+Math.cos(g)*(s?s/2:p),r+Math.sin(g)*p);break;case!1:e.closePath()}e.fill(),t.borderWidth>0&&e.stroke()}}function $w(e,t,n){return n=n||.5,!t||e&&e.x>t.left-n&&e.x<t.right+n&&e.y>t.top-n&&e.y<t.bottom+n}function Hw(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function Ww(e){e.restore()}function qw(e,t,n,r,s){if(!t)return e.lineTo(n.x,n.y);if("middle"===s){const r=(t.x+n.x)/2;e.lineTo(r,t.y),e.lineTo(r,n.y)}else"after"===s!==!!r?e.lineTo(t.x,n.y):e.lineTo(n.x,t.y);e.lineTo(n.x,n.y)}function Kw(e,t,n,r){if(!t)return e.lineTo(n.x,n.y);e.bezierCurveTo(r?t.cp1x:t.cp2x,r?t.cp1y:t.cp2y,r?n.cp2x:n.cp1x,r?n.cp2y:n.cp1y,n.x,n.y)}function Gw(e,t,n,r,s){if(s.strikethrough||s.underline){const i=e.measureText(r),a=t-i.actualBoundingBoxLeft,o=t+i.actualBoundingBoxRight,l=n-i.actualBoundingBoxAscent,c=n+i.actualBoundingBoxDescent,u=s.strikethrough?(l+c)/2:c;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=s.decorationWidth||2,e.moveTo(a,u),e.lineTo(o,u),e.stroke()}}function Yw(e,t){const n=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=n}function Qw(e,t,n,r,s){let i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const a=pb(t)?t:[t],o=i.strokeWidth>0&&""!==i.strokeColor;let l,c;for(e.save(),e.font=s.string,function(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),mb(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}(e,i),l=0;l<a.length;++l)c=a[l],i.backdrop&&Yw(e,i.backdrop),o&&(i.strokeColor&&(e.strokeStyle=i.strokeColor),mb(i.strokeWidth)||(e.lineWidth=i.strokeWidth),e.strokeText(c,n,r,i.maxWidth)),e.fillText(c,n,r,i.maxWidth),Gw(e,n,r,c,i),r+=Number(s.lineHeight);e.restore()}function Xw(e,t){const{x:n,y:r,w:s,h:i,radius:a}=t;e.arc(n+a.topLeft,r+a.topLeft,a.topLeft,1.5*Db,Db,!0),e.lineTo(n,r+i-a.bottomLeft),e.arc(n+a.bottomLeft,r+i-a.bottomLeft,a.bottomLeft,Db,Ub,!0),e.lineTo(n+s-a.bottomRight,r+i),e.arc(n+s-a.bottomRight,r+i-a.bottomRight,a.bottomRight,Ub,0,!0),e.lineTo(n+s,r+a.topRight),e.arc(n+s-a.topRight,r+a.topRight,a.topRight,0,-Ub,!0),e.lineTo(n+a.topLeft,r)}const Jw=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,Zw=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function e_(e,t){const n=(""+e).match(Jw);if(!n||"normal"===n[1])return 1.2*t;switch(e=+n[2],n[3]){case"px":return e;case"%":e/=100}return t*e}const t_=e=>+e||0;function n_(e,t){const n={},r=gb(t),s=r?Object.keys(t):t,i=gb(e)?r?n=>xb(e[n],e[t[n]]):t=>e[t]:()=>e;for(const a of s)n[a]=t_(i(a));return n}function r_(e){return n_(e,{top:"y",right:"x",bottom:"y",left:"x"})}function s_(e){return n_(e,["topLeft","topRight","bottomLeft","bottomRight"])}function i_(e){const t=r_(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function a_(e,t){e=e||{},t=t||Dw.font;let n=xb(e.size,t.size);"string"===typeof n&&(n=parseInt(n,10));let r=xb(e.style,t.style);r&&!(""+r).match(Zw)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const s={family:xb(e.family,t.family),lineHeight:e_(xb(e.lineHeight,t.lineHeight),n),size:n,style:r,weight:xb(e.weight,t.weight),string:""};return s.string=function(e){return!e||mb(e.size)||mb(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}(s),s}function o_(e,t,n,r){let s,i,a,o=!0;for(s=0,i=e.length;s<i;++s)if(a=e[s],void 0!==a&&(void 0!==t&&"function"===typeof a&&(a=a(t),o=!1),void 0!==n&&pb(a)&&(a=a[n%a.length],o=!1),void 0!==a))return r&&!o&&(r.cacheable=!1),a}function l_(e,t){return Object.assign(Object.create(e),t)}function c_(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[""],n=arguments.length>3?arguments[3]:void 0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:()=>e[0];const s=(arguments.length>2?arguments[2]:void 0)||e;"undefined"===typeof n&&(n=b_("_fallback",e));const i={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:s,_fallback:n,_getTarget:r,override:r=>c_([r,...e],t,s,n)};return new Proxy(i,{deleteProperty:(t,n)=>(delete t[n],delete t._keys,delete e[0][n],!0),get:(n,r)=>m_(n,r,(()=>function(e,t,n,r){let s;for(const i of t)if(s=b_(h_(i,e),n),"undefined"!==typeof s)return f_(e,s)?v_(n,r,e,s):s}(r,t,e,n))),getOwnPropertyDescriptor:(e,t)=>Reflect.getOwnPropertyDescriptor(e._scopes[0],t),getPrototypeOf:()=>Reflect.getPrototypeOf(e[0]),has:(e,t)=>w_(e).includes(t),ownKeys:e=>w_(e),set(e,t,n){const s=e._storage||(e._storage=r());return e[t]=s[t]=n,delete e._keys,!0}})}function u_(e,t,n,r){const s={_cacheable:!1,_proxy:e,_context:t,_subProxy:n,_stack:new Set,_descriptors:d_(e,r),setContext:t=>u_(e,t,n,r),override:s=>u_(e.override(s),t,n,r)};return new Proxy(s,{deleteProperty:(t,n)=>(delete t[n],delete e[n],!0),get:(e,t,n)=>m_(e,t,(()=>function(e,t,n){const{_proxy:r,_context:s,_subProxy:i,_descriptors:a}=e;let o=r[t];Rb(o)&&a.isScriptable(t)&&(o=function(e,t,n,r){const{_proxy:s,_context:i,_subProxy:a,_stack:o}=n;if(o.has(e))throw new Error("Recursion detected: "+Array.from(o).join("->")+"->"+e);o.add(e);let l=t(i,a||r);o.delete(e),f_(e,l)&&(l=v_(s._scopes,s,e,l));return l}(t,o,e,n));pb(o)&&o.length&&(o=function(e,t,n,r){const{_proxy:s,_context:i,_subProxy:a,_descriptors:o}=n;if("undefined"!==typeof i.index&&r(e))return t[i.index%t.length];if(gb(t[0])){const n=t,r=s._scopes.filter((e=>e!==n));t=[];for(const l of n){const n=v_(r,s,e,l);t.push(u_(n,i,a&&a[e],o))}}return t}(t,o,e,a.isIndexable));f_(t,o)&&(o=u_(o,s,i&&i[t],a));return o}(e,t,n))),getOwnPropertyDescriptor:(t,n)=>t._descriptors.allKeys?Reflect.has(e,n)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,n),getPrototypeOf:()=>Reflect.getPrototypeOf(e),has:(t,n)=>Reflect.has(e,n),ownKeys:()=>Reflect.ownKeys(e),set:(t,n,r)=>(e[n]=r,delete t[n],!0)})}function d_(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{scriptable:!0,indexable:!0};const{_scriptable:n=t.scriptable,_indexable:r=t.indexable,_allKeys:s=t.allKeys}=e;return{allKeys:s,scriptable:n,indexable:r,isScriptable:Rb(n)?n:()=>n,isIndexable:Rb(r)?r:()=>r}}const h_=(e,t)=>e?e+Mb(t):t,f_=(e,t)=>gb(t)&&"adapters"!==e&&(null===Object.getPrototypeOf(t)||t.constructor===Object);function m_(e,t,n){if(Object.prototype.hasOwnProperty.call(e,t)||"constructor"===t)return e[t];const r=n();return e[t]=r,r}function p_(e,t,n){return Rb(e)?e(t,n):e}const g_=(e,t)=>!0===e?t:"string"===typeof e?Ib(t,e):void 0;function y_(e,t,n,r,s){for(const i of t){const t=g_(n,i);if(t){e.add(t);const i=p_(t._fallback,n,s);if("undefined"!==typeof i&&i!==n&&i!==r)return i}else if(!1===t&&"undefined"!==typeof r&&n!==r)return null}return!1}function v_(e,t,n,r){const s=t._rootScopes,i=p_(t._fallback,n,r),a=[...e,...s],o=new Set;o.add(r);let l=x_(o,a,n,i||n,r);return null!==l&&(("undefined"===typeof i||i===n||(l=x_(o,a,i,l,r),null!==l))&&c_(Array.from(o),[""],s,i,(()=>function(e,t,n){const r=e._getTarget();t in r||(r[t]={});const s=r[t];if(pb(s)&&gb(n))return n;return s||{}}(t,n,r))))}function x_(e,t,n,r,s){for(;n;)n=y_(e,t,n,r,s);return n}function b_(e,t){for(const n of t){if(!n)continue;const t=n[e];if("undefined"!==typeof t)return t}}function w_(e){let t=e._keys;return t||(t=e._keys=function(e){const t=new Set;for(const n of e)for(const e of Object.keys(n).filter((e=>!e.startsWith("_"))))t.add(e);return Array.from(t)}(e._scopes)),t}function __(e,t,n,r){const{iScale:s}=e,{key:i="r"}=this._parsing,a=new Array(r);let o,l,c,u;for(o=0,l=r;o<l;++o)c=o+n,u=t[c],a[o]={r:s.parse(Ib(u,i),c)};return a}const k_=Number.EPSILON||1e-14,N_=(e,t)=>t<e.length&&!e[t].skip&&e[t],S_=e=>"x"===e?"y":"x";function E_(e,t,n,r){const s=e.skip?t:e,i=t,a=n.skip?t:n,o=ew(i,s),l=ew(a,i);let c=o/(o+l),u=l/(o+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;const d=r*c,h=r*u;return{previous:{x:i.x-d*(a.x-s.x),y:i.y-d*(a.y-s.y)},next:{x:i.x+h*(a.x-s.x),y:i.y+h*(a.y-s.y)}}}function j_(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x";const n=S_(t),r=e.length,s=Array(r).fill(0),i=Array(r);let a,o,l,c=N_(e,0);for(a=0;a<r;++a)if(o=l,l=c,c=N_(e,a+1),l){if(c){const e=c[t]-l[t];s[a]=0!==e?(c[n]-l[n])/e:0}i[a]=o?c?Wb(s[a-1])!==Wb(s[a])?0:(s[a-1]+s[a])/2:s[a-1]:s[a]}!function(e,t,n){const r=e.length;let s,i,a,o,l,c=N_(e,0);for(let u=0;u<r-1;++u)l=c,c=N_(e,u+1),l&&c&&(qb(t[u],0,k_)?n[u]=n[u+1]=0:(s=n[u]/t[u],i=n[u+1]/t[u],o=Math.pow(s,2)+Math.pow(i,2),o<=9||(a=3/Math.sqrt(o),n[u]=s*a*t[u],n[u+1]=i*a*t[u])))}(e,s,i),function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"x";const r=S_(n),s=e.length;let i,a,o,l=N_(e,0);for(let c=0;c<s;++c){if(a=o,o=l,l=N_(e,c+1),!o)continue;const s=o[n],u=o[r];a&&(i=(s-a[n])/3,o[`cp1${n}`]=s-i,o[`cp1${r}`]=u-i*t[c]),l&&(i=(l[n]-s)/3,o[`cp2${n}`]=s+i,o[`cp2${r}`]=u+i*t[c])}}(e,i,t)}function C_(e,t,n){return Math.max(Math.min(e,n),t)}function T_(e,t,n,r,s){let i,a,o,l;if(t.spanGaps&&(e=e.filter((e=>!e.skip))),"monotone"===t.cubicInterpolationMode)j_(e,s);else{let n=r?e[e.length-1]:e[0];for(i=0,a=e.length;i<a;++i)o=e[i],l=E_(n,o,e[Math.min(i+1,a-(r?0:1))%a],t.tension),o.cp1x=l.previous.x,o.cp1y=l.previous.y,o.cp2x=l.next.x,o.cp2y=l.next.y,n=o}t.capBezierPoints&&function(e,t){let n,r,s,i,a,o=$w(e[0],t);for(n=0,r=e.length;n<r;++n)a=i,i=o,o=n<r-1&&$w(e[n+1],t),i&&(s=e[n],a&&(s.cp1x=C_(s.cp1x,t.left,t.right),s.cp1y=C_(s.cp1y,t.top,t.bottom)),o&&(s.cp2x=C_(s.cp2x,t.left,t.right),s.cp2y=C_(s.cp2y,t.top,t.bottom)))}(e,n)}function A_(){return"undefined"!==typeof window&&"undefined"!==typeof document}function I_(e){let t=e.parentNode;return t&&"[object ShadowRoot]"===t.toString()&&(t=t.host),t}function M_(e,t,n){let r;return"string"===typeof e?(r=parseInt(e,10),-1!==e.indexOf("%")&&(r=r/100*t.parentNode[n])):r=e,r}const P_=e=>e.ownerDocument.defaultView.getComputedStyle(e,null);const R_=["top","right","bottom","left"];function L_(e,t,n){const r={};n=n?"-"+n:"";for(let s=0;s<4;s++){const i=R_[s];r[i]=parseFloat(e[t+"-"+i+n])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}function D_(e,t){if("native"in e)return e;const{canvas:n,currentDevicePixelRatio:r}=t,s=P_(n),i="border-box"===s.boxSizing,a=L_(s,"padding"),o=L_(s,"border","width"),{x:l,y:c,box:u}=function(e,t){const n=e.touches,r=n&&n.length?n[0]:e,{offsetX:s,offsetY:i}=r;let a,o,l=!1;if(((e,t,n)=>(e>0||t>0)&&(!n||!n.shadowRoot))(s,i,e.target))a=s,o=i;else{const e=t.getBoundingClientRect();a=r.clientX-e.left,o=r.clientY-e.top,l=!0}return{x:a,y:o,box:l}}(e,n),d=a.left+(u&&o.left),h=a.top+(u&&o.top);let{width:f,height:m}=t;return i&&(f-=a.width+o.width,m-=a.height+o.height),{x:Math.round((l-d)/f*n.width/r),y:Math.round((c-h)/m*n.height/r)}}const O_=e=>Math.round(10*e)/10;function F_(e,t,n,r){const s=P_(e),i=L_(s,"margin"),a=M_(s.maxWidth,e,"clientWidth")||Vb,o=M_(s.maxHeight,e,"clientHeight")||Vb,l=function(e,t,n){let r,s;if(void 0===t||void 0===n){const i=e&&I_(e);if(i){const e=i.getBoundingClientRect(),a=P_(i),o=L_(a,"border","width"),l=L_(a,"padding");t=e.width-l.width-o.width,n=e.height-l.height-o.height,r=M_(a.maxWidth,i,"clientWidth"),s=M_(a.maxHeight,i,"clientHeight")}else t=e.clientWidth,n=e.clientHeight}return{width:t,height:n,maxWidth:r||Vb,maxHeight:s||Vb}}(e,t,n);let{width:c,height:u}=l;if("content-box"===s.boxSizing){const e=L_(s,"border","width"),t=L_(s,"padding");c-=t.width+e.width,u-=t.height+e.height}c=Math.max(0,c-i.width),u=Math.max(0,r?c/r:u-i.height),c=O_(Math.min(c,a,l.maxWidth)),u=O_(Math.min(u,o,l.maxHeight)),c&&!u&&(u=O_(c/2));return(void 0!==t||void 0!==n)&&r&&l.height&&u>l.height&&(u=l.height,c=O_(Math.floor(u*r))),{width:c,height:u}}function V_(e,t,n){const r=t||1,s=Math.floor(e.height*r),i=Math.floor(e.width*r);e.height=Math.floor(e.height),e.width=Math.floor(e.width);const a=e.canvas;return a.style&&(n||!a.style.height&&!a.style.width)&&(a.style.height=`${e.height}px`,a.style.width=`${e.width}px`),(e.currentDevicePixelRatio!==r||a.height!==s||a.width!==i)&&(e.currentDevicePixelRatio=r,a.height=s,a.width=i,e.ctx.setTransform(r,0,0,r,0,0),!0)}const z_=function(){let e=!1;try{const t={get passive(){return e=!0,!1}};A_()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch(hF){}return e}();function U_(e,t){const n=function(e,t){return P_(e).getPropertyValue(t)}(e,t),r=n&&n.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function B_(e,t,n,r){return{x:e.x+n*(t.x-e.x),y:e.y+n*(t.y-e.y)}}function $_(e,t,n,r){return{x:e.x+n*(t.x-e.x),y:"middle"===r?n<.5?e.y:t.y:"after"===r?n<1?e.y:t.y:n>0?t.y:e.y}}function H_(e,t,n,r){const s={x:e.cp2x,y:e.cp2y},i={x:t.cp1x,y:t.cp1y},a=B_(e,s,n),o=B_(s,i,n),l=B_(i,t,n),c=B_(a,o,n),u=B_(o,l,n);return B_(c,u,n)}function W_(e,t,n){return e?function(e,t){return{x:n=>e+e+t-n,setWidth(e){t=e},textAlign:e=>"center"===e?e:"right"===e?"left":"right",xPlus:(e,t)=>e-t,leftForLtr:(e,t)=>e-t}}(t,n):{x:e=>e,setWidth(e){},textAlign:e=>e,xPlus:(e,t)=>e+t,leftForLtr:(e,t)=>e}}function q_(e,t){let n,r;"ltr"!==t&&"rtl"!==t||(n=e.canvas.style,r=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",t,"important"),e.prevTextDirection=r)}function K_(e,t){void 0!==t&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function G_(e){return"angle"===e?{between:rw,compare:tw,normalize:nw}:{between:iw,compare:(e,t)=>e-t,normalize:e=>e}}function Y_(e){let{start:t,end:n,count:r,loop:s,style:i}=e;return{start:t%r,end:n%r,loop:s&&(n-t+1)%r===0,style:i}}function Q_(e,t,n){if(!n)return[e];const{property:r,start:s,end:i}=n,a=t.length,{compare:o,between:l,normalize:c}=G_(r),{start:u,end:d,loop:h,style:f}=function(e,t,n){const{property:r,start:s,end:i}=n,{between:a,normalize:o}=G_(r),l=t.length;let c,u,{start:d,end:h,loop:f}=e;if(f){for(d+=l,h+=l,c=0,u=l;c<u&&a(o(t[d%l][r]),s,i);++c)d--,h--;d%=l,h%=l}return h<d&&(h+=l),{start:d,end:h,loop:f,style:e.style}}(e,t,n),m=[];let p,g,y,v=!1,x=null;const b=()=>v||l(s,y,p)&&0!==o(s,y),w=()=>!v||0===o(i,p)||l(i,y,p);for(let _=u,k=u;_<=d;++_)g=t[_%a],g.skip||(p=c(g[r]),p!==y&&(v=l(p,s,i),null===x&&b()&&(x=0===o(p,s)?_:k),null!==x&&w()&&(m.push(Y_({start:x,end:_,loop:h,count:a,style:f})),x=null),k=_,y=p));return null!==x&&m.push(Y_({start:x,end:d,loop:h,count:a,style:f})),m}function X_(e,t){const n=[],r=e.segments;for(let s=0;s<r.length;s++){const i=Q_(r[s],e.points,t);i.length&&n.push(...i)}return n}function J_(e,t,n,r){return r&&r.setContext&&n?function(e,t,n,r){const s=e._chart.getContext(),i=Z_(e.options),{_datasetIndex:a,options:{spanGaps:o}}=e,l=n.length,c=[];let u=i,d=t[0].start,h=d;function f(e,t,r,s){const i=o?-1:1;if(e!==t){for(e+=l;n[e%l].skip;)e-=i;for(;n[t%l].skip;)t+=i;e%l!==t%l&&(c.push({start:e%l,end:t%l,loop:r,style:s}),u=s,d=t%l)}}for(const m of t){d=o?d:m.start;let e,t=n[d%l];for(h=d+1;h<=m.end;h++){const i=n[h%l];e=Z_(r.setContext(l_(s,{type:"segment",p0:t,p1:i,p0DataIndex:(h-1)%l,p1DataIndex:h%l,datasetIndex:a}))),ek(e,u)&&f(d,h-1,m.loop,u),t=i,u=e}d<h-1&&f(d,h-1,m.loop,u)}return c}(e,t,n,r):t}function Z_(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function ek(e,t){if(!t)return!1;const n=[],r=function(e,t){return _w(t)?(n.includes(t)||n.push(t),n.indexOf(t)):t};return JSON.stringify(e,r)!==JSON.stringify(t,r)}function tk(e,t,n){return e.options.clip?e[n]:t[n]}function nk(e,t){const n=t._clip;if(n.disabled)return!1;const r=function(e,t){const{xScale:n,yScale:r}=e;return n&&r?{left:tk(n,t,"left"),right:tk(n,t,"right"),top:tk(r,t,"top"),bottom:tk(r,t,"bottom")}:t}(t,e.chartArea);return{left:!1===n.left?0:r.left-(!0===n.left?0:n.left),right:!1===n.right?e.width:r.right+(!0===n.right?0:n.right),top:!1===n.top?0:r.top-(!0===n.top?0:n.top),bottom:!1===n.bottom?e.height:r.bottom+(!0===n.bottom?0:n.bottom)}}class rk{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,n,r){const s=t.listeners[r],i=t.duration;s.forEach((r=>r({chart:e,initial:t.initial,numSteps:i,currentStep:Math.min(n-t.start,i)})))}_refresh(){this._request||(this._running=!0,this._request=hw.call(window,(()=>{this._update(),this._request=null,this._running&&this._refresh()})))}_update(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now(),t=0;this._charts.forEach(((n,r)=>{if(!n.running||!n.items.length)return;const s=n.items;let i,a=s.length-1,o=!1;for(;a>=0;--a)i=s[a],i._active?(i._total>n.duration&&(n.duration=i._total),i.tick(e),o=!0):(s[a]=s[s.length-1],s.pop());o&&(r.draw(),this._notify(r,n,e,"progress")),s.length||(n.running=!1,this._notify(r,n,e,"complete"),n.initial=!1),t+=s.length})),this._lastDate=e,0===t&&(this._running=!1)}_getAnims(e){const t=this._charts;let n=t.get(e);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,n)),n}listen(e,t,n){this._getAnims(e).listeners[t].push(n)}add(e,t){t&&t.length&&this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){const t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce(((e,t)=>Math.max(e,t._duration)),0),this._refresh())}running(e){if(!this._running)return!1;const t=this._charts.get(e);return!!(t&&t.running&&t.items.length)}stop(e){const t=this._charts.get(e);if(!t||!t.items.length)return;const n=t.items;let r=n.length-1;for(;r>=0;--r)n[r].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var sk=new rk;const ik="transparent",ak={boolean:(e,t,n)=>n>.5?t:e,color(e,t,n){const r=kw(e||ik),s=r.valid&&kw(t||ik);return s&&s.valid?s.mix(r,n).hexString():t},number:(e,t,n)=>e+(t-e)*n};class ok{constructor(e,t,n,r){const s=t[n];r=o_([e.to,r,s,e.from]);const i=o_([e.from,s,r]);this._active=!0,this._fn=e.fn||ak[e.type||typeof i],this._easing=ww[e.easing]||ww.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=n,this._from=i,this._to=r,this._promises=void 0}active(){return this._active}update(e,t,n){if(this._active){this._notify(!1);const r=this._target[this._prop],s=n-this._start,i=this._duration-s;this._start=n,this._duration=Math.floor(Math.max(i,e.duration)),this._total+=s,this._loop=!!e.loop,this._to=o_([e.to,t,r,e.from]),this._from=o_([e.from,r,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const t=e-this._start,n=this._duration,r=this._prop,s=this._from,i=this._loop,a=this._to;let o;if(this._active=s!==a&&(i||t<n),!this._active)return this._target[r]=a,void this._notify(!0);t<0?this._target[r]=s:(o=t/n%2,o=i&&o>1?2-o:o,o=this._easing(Math.min(1,Math.max(0,o))),this._target[r]=this._fn(s,a,o))}wait(){const e=this._promises||(this._promises=[]);return new Promise(((t,n)=>{e.push({res:t,rej:n})}))}_notify(e){const t=e?"res":"rej",n=this._promises||[];for(let r=0;r<n.length;r++)n[r][t]()}}class lk{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!gb(e))return;const t=Object.keys(Dw.animation),n=this._properties;Object.getOwnPropertyNames(e).forEach((r=>{const s=e[r];if(!gb(s))return;const i={};for(const e of t)i[e]=s[e];(pb(s.properties)&&s.properties||[r]).forEach((e=>{e!==r&&n.has(e)||n.set(e,i)}))}))}_animateOptions(e,t){const n=t.options,r=function(e,t){if(!t)return;let n=e.options;if(!n)return void(e.options=t);n.$shared&&(e.options=n=Object.assign({},n,{$shared:!1,$animations:{}}));return n}(e,n);if(!r)return[];const s=this._createAnimations(r,n);return n.$shared&&function(e,t){const n=[],r=Object.keys(t);for(let s=0;s<r.length;s++){const t=e[r[s]];t&&t.active()&&n.push(t.wait())}return Promise.all(n)}(e.options.$animations,n).then((()=>{e.options=n}),(()=>{})),s}_createAnimations(e,t){const n=this._properties,r=[],s=e.$animations||(e.$animations={}),i=Object.keys(t),a=Date.now();let o;for(o=i.length-1;o>=0;--o){const l=i[o];if("$"===l.charAt(0))continue;if("options"===l){r.push(...this._animateOptions(e,t));continue}const c=t[l];let u=s[l];const d=n.get(l);if(u){if(d&&u.active()){u.update(d,c,a);continue}u.cancel()}d&&d.duration?(s[l]=u=new ok(d,e,l,c),r.push(u)):e[l]=c}return r}update(e,t){if(0===this._properties.size)return void Object.assign(e,t);const n=this._createAnimations(e,t);return n.length?(sk.add(this._chart,n),!0):void 0}}function ck(e,t){const n=e&&e.options||{},r=n.reverse,s=void 0===n.min?t:0,i=void 0===n.max?t:0;return{start:r?i:s,end:r?s:i}}function uk(e,t){const n=[],r=e._getSortedDatasetMetas(t);let s,i;for(s=0,i=r.length;s<i;++s)n.push(r[s].index);return n}function dk(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const s=e.keys,i="single"===r.mode;let a,o,l,c;if(null===t)return;let u=!1;for(a=0,o=s.length;a<o;++a){if(l=+s[a],l===n){if(u=!0,r.all)continue;break}c=e.values[l],yb(c)&&(i||0===t||Wb(t)===Wb(c))&&(t+=c)}return u||r.all?t:0}function hk(e,t){const n=e&&e.options.stacked;return n||void 0===n&&void 0!==t.stack}function fk(e,t,n){const r=e[t]||(e[t]={});return r[n]||(r[n]={})}function mk(e,t,n,r){for(const s of t.getMatchingVisibleMetas(r).reverse()){const t=e[s.index];if(n&&t>0||!n&&t<0)return s.index}return null}function pk(e,t){const{chart:n,_cachedMeta:r}=e,s=n._stacks||(n._stacks={}),{iScale:i,vScale:a,index:o}=r,l=i.axis,c=a.axis,u=function(e,t,n){return`${e.id}.${t.id}.${n.stack||n.type}`}(i,a,r),d=t.length;let h;for(let f=0;f<d;++f){const e=t[f],{[l]:n,[c]:i}=e;h=(e._stacks||(e._stacks={}))[c]=fk(s,u,n),h[o]=i,h._top=mk(h,a,!0,r.type),h._bottom=mk(h,a,!1,r.type);(h._visualValues||(h._visualValues={}))[o]=i}}function gk(e,t){const n=e.scales;return Object.keys(n).filter((e=>n[e].axis===t)).shift()}function yk(e,t){const n=e.controller.index,r=e.vScale&&e.vScale.axis;if(r){t=t||e._parsed;for(const e of t){const t=e._stacks;if(!t||void 0===t[r]||void 0===t[r][n])return;delete t[r][n],void 0!==t[r]._visualValues&&void 0!==t[r]._visualValues[n]&&delete t[r]._visualValues[n]}}}const vk=e=>"reset"===e||"none"===e,xk=(e,t)=>t?e:Object.assign({},e);class bk{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(e,t){this.chart=e,this._ctx=e.ctx,this.index=t,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=hk(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&yk(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,t=this._cachedMeta,n=this.getDataset(),r=(e,t,n,r)=>"x"===e?t:"r"===e?r:n,s=t.xAxisID=xb(n.xAxisID,gk(e,"x")),i=t.yAxisID=xb(n.yAxisID,gk(e,"y")),a=t.rAxisID=xb(n.rAxisID,gk(e,"r")),o=t.indexAxis,l=t.iAxisID=r(o,s,i,a),c=t.vAxisID=r(o,i,s,a);t.xScale=this.getScaleForId(s),t.yScale=this.getScaleForId(i),t.rScale=this.getScaleForId(a),t.iScale=this.getScaleForId(l),t.vScale=this.getScaleForId(c)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&uw(this._data,this),e._stacked&&yk(e)}_dataCheck(){const e=this.getDataset(),t=e.data||(e.data=[]),n=this._data;if(gb(t)){const e=this._cachedMeta;this._data=function(e,t){const{iScale:n,vScale:r}=t,s="x"===n.axis?"x":"y",i="x"===r.axis?"x":"y",a=Object.keys(e),o=new Array(a.length);let l,c,u;for(l=0,c=a.length;l<c;++l)u=a[l],o[l]={[s]:u,[i]:e[u]};return o}(t,e)}else if(n!==t){if(n){uw(n,this);const e=this._cachedMeta;yk(e),e._parsed=[]}t&&Object.isExtensible(t)&&(s=this,(r=t)._chartjs?r._chartjs.listeners.push(s):(Object.defineProperty(r,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[s]}}),cw.forEach((e=>{const t="_onData"+Mb(e),n=r[e];Object.defineProperty(r,e,{configurable:!0,enumerable:!1,value(){for(var e=arguments.length,s=new Array(e),i=0;i<e;i++)s[i]=arguments[i];const a=n.apply(this,s);return r._chartjs.listeners.forEach((e=>{"function"===typeof e[t]&&e[t](...s)})),a}})})))),this._syncList=[],this._data=t}var r,s}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const t=this._cachedMeta,n=this.getDataset();let r=!1;this._dataCheck();const s=t._stacked;t._stacked=hk(t.vScale,t),t.stack!==n.stack&&(r=!0,yk(t),t.stack=n.stack),this._resyncElements(e),(r||s!==t._stacked)&&(pk(this,t._parsed),t._stacked=hk(t.vScale,t))}configure(){const e=this.chart.config,t=e.datasetScopeKeys(this._type),n=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,t){const{_cachedMeta:n,_data:r}=this,{iScale:s,_stacked:i}=n,a=s.axis;let o,l,c,u=0===e&&t===r.length||n._sorted,d=e>0&&n._parsed[e-1];if(!1===this._parsing)n._parsed=r,n._sorted=!0,c=r;else{c=pb(r[e])?this.parseArrayData(n,r,e,t):gb(r[e])?this.parseObjectData(n,r,e,t):this.parsePrimitiveData(n,r,e,t);const s=()=>null===l[a]||d&&l[a]<d[a];for(o=0;o<t;++o)n._parsed[o+e]=l=c[o],u&&(s()&&(u=!1),d=l);n._sorted=u}i&&pk(this,c)}parsePrimitiveData(e,t,n,r){const{iScale:s,vScale:i}=e,a=s.axis,o=i.axis,l=s.getLabels(),c=s===i,u=new Array(r);let d,h,f;for(d=0,h=r;d<h;++d)f=d+n,u[d]={[a]:c||s.parse(l[f],f),[o]:i.parse(t[f],f)};return u}parseArrayData(e,t,n,r){const{xScale:s,yScale:i}=e,a=new Array(r);let o,l,c,u;for(o=0,l=r;o<l;++o)c=o+n,u=t[c],a[o]={x:s.parse(u[0],c),y:i.parse(u[1],c)};return a}parseObjectData(e,t,n,r){const{xScale:s,yScale:i}=e,{xAxisKey:a="x",yAxisKey:o="y"}=this._parsing,l=new Array(r);let c,u,d,h;for(c=0,u=r;c<u;++c)d=c+n,h=t[d],l[c]={x:s.parse(Ib(h,a),d),y:i.parse(Ib(h,o),d)};return l}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,t,n){const r=this.chart,s=this._cachedMeta,i=t[e.axis];return dk({keys:uk(r,!0),values:t._stacks[e.axis]._visualValues},i,s.index,{mode:n})}updateRangeFromParsed(e,t,n,r){const s=n[t.axis];let i=null===s?NaN:s;const a=r&&n._stacks[t.axis];r&&a&&(r.values=a,i=dk(r,s,this._cachedMeta.index)),e.min=Math.min(e.min,i),e.max=Math.max(e.max,i)}getMinMax(e,t){const n=this._cachedMeta,r=n._parsed,s=n._sorted&&e===n.iScale,i=r.length,a=this._getOtherScale(e),o=((e,t,n)=>e&&!t.hidden&&t._stacked&&{keys:uk(n,!0),values:null})(t,n,this.chart),l={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:c,max:u}=function(e){const{min:t,max:n,minDefined:r,maxDefined:s}=e.getUserBounds();return{min:r?t:Number.NEGATIVE_INFINITY,max:s?n:Number.POSITIVE_INFINITY}}(a);let d,h;function f(){h=r[d];const t=h[a.axis];return!yb(h[e.axis])||c>t||u<t}for(d=0;d<i&&(f()||(this.updateRangeFromParsed(l,e,h,o),!s));++d);if(s)for(d=i-1;d>=0;--d)if(!f()){this.updateRangeFromParsed(l,e,h,o);break}return l}getAllParsedValues(e){const t=this._cachedMeta._parsed,n=[];let r,s,i;for(r=0,s=t.length;r<s;++r)i=t[r][e.axis],yb(i)&&n.push(i);return n}getMaxOverflow(){return!1}getLabelAndValue(e){const t=this._cachedMeta,n=t.iScale,r=t.vScale,s=this.getParsed(e);return{label:n?""+n.getLabelForValue(s[n.axis]):"",value:r?""+r.getLabelForValue(s[r.axis]):""}}_update(e){const t=this._cachedMeta;this.update(e||"default"),t._clip=function(e){let t,n,r,s;return gb(e)?(t=e.top,n=e.right,r=e.bottom,s=e.left):t=n=r=s=e,{top:t,right:n,bottom:r,left:s,disabled:!1===e}}(xb(this.options.clip,function(e,t,n){if(!1===n)return!1;const r=ck(e,n),s=ck(t,n);return{top:s.end,right:r.end,bottom:s.start,left:r.start}}(t.xScale,t.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,t=this.chart,n=this._cachedMeta,r=n.data||[],s=t.chartArea,i=[],a=this._drawStart||0,o=this._drawCount||r.length-a,l=this.options.drawActiveElementsOnTop;let c;for(n.dataset&&n.dataset.draw(e,s,a,o),c=a;c<a+o;++c){const t=r[c];t.hidden||(t.active&&l?i.push(t):t.draw(e,s))}for(c=0;c<i.length;++c)i[c].draw(e,s)}getStyle(e,t){const n=t?"active":"default";return void 0===e&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(e||0,n)}getContext(e,t,n){const r=this.getDataset();let s;if(e>=0&&e<this._cachedMeta.data.length){const t=this._cachedMeta.data[e];s=t.$context||(t.$context=function(e,t,n){return l_(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:n,index:t,mode:"default",type:"data"})}(this.getContext(),e,t)),s.parsed=this.getParsed(e),s.raw=r.data[e],s.index=s.dataIndex=e}else s=this.$context||(this.$context=function(e,t){return l_(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),s.dataset=r,s.index=s.datasetIndex=this.index;return s.active=!!t,s.mode=n,s}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}_resolveElementOptions(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",n=arguments.length>2?arguments[2]:void 0;const r="active"===t,s=this._cachedDataOpts,i=e+"-"+t,a=s[i],o=this.enableOptionSharing&&Pb(n);if(a)return xk(a,o);const l=this.chart.config,c=l.datasetElementScopeKeys(this._type,e),u=r?[`${e}Hover`,"hover",e,""]:[e,""],d=l.getOptionScopes(this.getDataset(),c),h=Object.keys(Dw.elements[e]),f=l.resolveNamedOptions(d,h,(()=>this.getContext(n,r,t)),u);return f.$shared&&(f.$shared=o,s[i]=Object.freeze(xk(f,o))),f}_resolveAnimations(e,t,n){const r=this.chart,s=this._cachedDataOpts,i=`animation-${t}`,a=s[i];if(a)return a;let o;if(!1!==r.options.animation){const r=this.chart.config,s=r.datasetAnimationScopeKeys(this._type,t),i=r.getOptionScopes(this.getDataset(),s);o=r.createResolver(i,this.getContext(e,n,t))}const l=new lk(r,o&&o.animations);return o&&o._cacheable&&(s[i]=Object.freeze(l)),l}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,t){return!t||vk(e)||this.chart._animationsDisabled}_getSharedOptions(e,t){const n=this.resolveDataElementOptions(e,t),r=this._sharedOptions,s=this.getSharedOptions(n),i=this.includeOptions(t,s)||s!==r;return this.updateSharedOptions(s,t,n),{sharedOptions:s,includeOptions:i}}updateElement(e,t,n,r){vk(r)?Object.assign(e,n):this._resolveAnimations(t,r).update(e,n)}updateSharedOptions(e,t,n){e&&!vk(t)&&this._resolveAnimations(void 0,t).update(e,n)}_setStyle(e,t,n,r){e.active=r;const s=this.getStyle(t,r);this._resolveAnimations(t,n,r).update(e,{options:!r&&this.getSharedOptions(s)||s})}removeHoverStyle(e,t,n){this._setStyle(e,n,"active",!1)}setHoverStyle(e,t,n){this._setStyle(e,n,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const t=this._data,n=this._cachedMeta.data;for(const[a,o,l]of this._syncList)this[a](o,l);this._syncList=[];const r=n.length,s=t.length,i=Math.min(s,r);i&&this.parse(0,i),s>r?this._insertElements(r,s-r,e):s<r&&this._removeElements(s,r-s)}_insertElements(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=this._cachedMeta,s=r.data,i=e+t;let a;const o=e=>{for(e.length+=t,a=e.length-1;a>=i;a--)e[a]=e[a-t]};for(o(s),a=e;a<i;++a)s[a]=new this.dataElementType;this._parsing&&o(r._parsed),this.parse(e,t),n&&this.updateElements(s,e,t,"reset")}updateElements(e,t,n,r){}_removeElements(e,t){const n=this._cachedMeta;if(this._parsing){const r=n._parsed.splice(e,t);n._stacked&&yk(n,r)}n.data.splice(e,t)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[t,n,r]=e;this[t](n,r)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,t){t&&this._sync(["_removeElements",e,t]);const n=arguments.length-2;n&&this._sync(["_insertElements",e,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function wk(e){const t=e.iScale,n=function(e,t){if(!e._cache.$bar){const n=e.getMatchingVisibleMetas(t);let r=[];for(let t=0,s=n.length;t<s;t++)r=r.concat(n[t].controller.getAllParsedValues(e));e._cache.$bar=dw(r.sort(((e,t)=>e-t)))}return e._cache.$bar}(t,e.type);let r,s,i,a,o=t._length;const l=()=>{32767!==i&&-32768!==i&&(Pb(a)&&(o=Math.min(o,Math.abs(i-a)||o)),a=i)};for(r=0,s=n.length;r<s;++r)i=t.getPixelForValue(n[r]),l();for(a=void 0,r=0,s=t.ticks.length;r<s;++r)i=t.getPixelForTick(r),l();return o}function _k(e,t,n,r){return pb(e)?function(e,t,n,r){const s=n.parse(e[0],r),i=n.parse(e[1],r),a=Math.min(s,i),o=Math.max(s,i);let l=a,c=o;Math.abs(a)>Math.abs(o)&&(l=o,c=a),t[n.axis]=c,t._custom={barStart:l,barEnd:c,start:s,end:i,min:a,max:o}}(e,t,n,r):t[n.axis]=n.parse(e,r),t}function kk(e,t,n,r){const s=e.iScale,i=e.vScale,a=s.getLabels(),o=s===i,l=[];let c,u,d,h;for(c=n,u=n+r;c<u;++c)h=t[c],d={},d[s.axis]=o||s.parse(a[c],c),l.push(_k(h,d,i,c));return l}function Nk(e){return e&&void 0!==e.barStart&&void 0!==e.barEnd}function Sk(e,t,n,r){let s=t.borderSkipped;const i={};if(!s)return void(e.borderSkipped=i);if(!0===s)return void(e.borderSkipped={top:!0,right:!0,bottom:!0,left:!0});const{start:a,end:o,reverse:l,top:c,bottom:u}=function(e){let t,n,r,s,i;return e.horizontal?(t=e.base>e.x,n="left",r="right"):(t=e.base<e.y,n="bottom",r="top"),t?(s="end",i="start"):(s="start",i="end"),{start:n,end:r,reverse:t,top:s,bottom:i}}(e);"middle"===s&&n&&(e.enableBorderRadius=!0,(n._top||0)===r?s=c:(n._bottom||0)===r?s=u:(i[Ek(u,a,o,l)]=!0,s=c)),i[Ek(s,a,o,l)]=!0,e.borderSkipped=i}function Ek(e,t,n,r){var s,i,a;return r?(a=n,e=jk(e=(s=e)===(i=t)?a:s===a?i:s,n,t)):e=jk(e,t,n),e}function jk(e,t,n){return"start"===e?t:"end"===e?n:e}function Ck(e,t,n){let{inflateAmount:r}=t;e.inflateAmount="auto"===r?1===n?.33:0:r}class Tk extends bk{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(e,t,n,r){return kk(e,t,n,r)}parseArrayData(e,t,n,r){return kk(e,t,n,r)}parseObjectData(e,t,n,r){const{iScale:s,vScale:i}=e,{xAxisKey:a="x",yAxisKey:o="y"}=this._parsing,l="x"===s.axis?a:o,c="x"===i.axis?a:o,u=[];let d,h,f,m;for(d=n,h=n+r;d<h;++d)m=t[d],f={},f[s.axis]=s.parse(Ib(m,l),d),u.push(_k(Ib(m,c),f,i,d));return u}updateRangeFromParsed(e,t,n,r){super.updateRangeFromParsed(e,t,n,r);const s=n._custom;s&&t===this._cachedMeta.vScale&&(e.min=Math.min(e.min,s.min),e.max=Math.max(e.max,s.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const t=this._cachedMeta,{iScale:n,vScale:r}=t,s=this.getParsed(e),i=s._custom,a=Nk(i)?"["+i.start+", "+i.end+"]":""+r.getLabelForValue(s[r.axis]);return{label:""+n.getLabelForValue(s[n.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();this._cachedMeta.stack=this.getDataset().stack}update(e){const t=this._cachedMeta;this.updateElements(t.data,0,t.data.length,e)}updateElements(e,t,n,r){const s="reset"===r,{index:i,_cachedMeta:{vScale:a}}=this,o=a.getBasePixel(),l=a.isHorizontal(),c=this._getRuler(),{sharedOptions:u,includeOptions:d}=this._getSharedOptions(t,r);for(let h=t;h<t+n;h++){const t=this.getParsed(h),n=s||mb(t[a.axis])?{base:o,head:o}:this._calculateBarValuePixels(h),f=this._calculateBarIndexPixels(h,c),m=(t._stacks||{})[a.axis],p={horizontal:l,base:n.base,enableBorderRadius:!m||Nk(t._custom)||i===m._top||i===m._bottom,x:l?n.head:f.center,y:l?f.center:n.head,height:l?f.size:Math.abs(n.size),width:l?Math.abs(n.size):f.size};d&&(p.options=u||this.resolveDataElementOptions(h,e[h].active?"active":r));const g=p.options||e[h].options;Sk(p,g,m,i),Ck(p,g,c.ratio),this.updateElement(e[h],h,p,r)}}_getStacks(e,t){const{iScale:n}=this._cachedMeta,r=n.getMatchingVisibleMetas(this._type).filter((e=>e.controller.options.grouped)),s=n.options.stacked,i=[],a=this._cachedMeta.controller.getParsed(t),o=a&&a[n.axis],l=e=>{const t=e._parsed.find((e=>e[n.axis]===o)),r=t&&t[e.vScale.axis];if(mb(r)||isNaN(r))return!0};for(const c of r)if((void 0===t||!l(c))&&((!1===s||-1===i.indexOf(c.stack)||void 0===s&&void 0===c.stack)&&i.push(c.stack),c.index===e))break;return i.length||i.push(void 0),i}_getStackCount(e){return this._getStacks(void 0,e).length}_getStackIndex(e,t,n){const r=this._getStacks(e,n),s=void 0!==t?r.indexOf(t):-1;return-1===s?r.length-1:s}_getRuler(){const e=this.options,t=this._cachedMeta,n=t.iScale,r=[];let s,i;for(s=0,i=t.data.length;s<i;++s)r.push(n.getPixelForValue(this.getParsed(s)[n.axis],s));const a=e.barThickness;return{min:a||wk(t),pixels:r,start:n._startPixel,end:n._endPixel,stackCount:this._getStackCount(),scale:n,grouped:e.grouped,ratio:a?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:t,_stacked:n,index:r},options:{base:s,minBarLength:i}}=this,a=s||0,o=this.getParsed(e),l=o._custom,c=Nk(l);let u,d,h=o[t.axis],f=0,m=n?this.applyStack(t,o,n):h;m!==h&&(f=m-h,m=h),c&&(h=l.barStart,m=l.barEnd-l.barStart,0!==h&&Wb(h)!==Wb(l.barEnd)&&(f=0),f+=h);const p=mb(s)||c?f:s;let g=t.getPixelForValue(p);if(u=this.chart.getDataVisibility(e)?t.getPixelForValue(f+m):g,d=u-g,Math.abs(d)<i){d=function(e,t,n){return 0!==e?Wb(e):(t.isHorizontal()?1:-1)*(t.min>=n?1:-1)}(d,t,a)*i,h===a&&(g-=d/2);const e=t.getPixelForDecimal(0),s=t.getPixelForDecimal(1),l=Math.min(e,s),f=Math.max(e,s);g=Math.max(Math.min(g,f),l),u=g+d,n&&!c&&(o._stacks[t.axis]._visualValues[r]=t.getValueForPixel(u)-t.getValueForPixel(g))}if(g===t.getPixelForValue(a)){const e=Wb(d)*t.getLineWidthForValue(a)/2;g+=e,d-=e}return{size:d,base:g,head:u,center:u+d/2}}_calculateBarIndexPixels(e,t){const n=t.scale,r=this.options,s=r.skipNull,i=xb(r.maxBarThickness,1/0);let a,o;if(t.grouped){const n=s?this._getStackCount(e):t.stackCount,l="flex"===r.barThickness?function(e,t,n,r){const s=t.pixels,i=s[e];let a=e>0?s[e-1]:null,o=e<s.length-1?s[e+1]:null;const l=n.categoryPercentage;null===a&&(a=i-(null===o?t.end-t.start:o-i)),null===o&&(o=i+i-a);const c=i-(i-Math.min(a,o))/2*l;return{chunk:Math.abs(o-a)/2*l/r,ratio:n.barPercentage,start:c}}(e,t,r,n):function(e,t,n,r){const s=n.barThickness;let i,a;return mb(s)?(i=t.min*n.categoryPercentage,a=n.barPercentage):(i=s*r,a=1),{chunk:i/r,ratio:a,start:t.pixels[e]-i/2}}(e,t,r,n),c=this._getStackIndex(this.index,this._cachedMeta.stack,s?e:void 0);a=l.start+l.chunk*c+l.chunk/2,o=Math.min(i,l.chunk*l.ratio)}else a=n.getPixelForValue(this.getParsed(e)[n.axis],e),o=Math.min(i,t.min*t.ratio);return{base:a-o/2,head:a+o/2,center:a,size:o}}draw(){const e=this._cachedMeta,t=e.vScale,n=e.data,r=n.length;let s=0;for(;s<r;++s)null===this.getParsed(s)[t.axis]||n[s].hidden||n[s].draw(this._ctx)}}class Ak extends bk{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:e=>"spacing"!==e,_indexable:e=>"spacing"!==e&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:n,color:r}}=e.legend.options;return t.labels.map(((t,s)=>{const i=e.getDatasetMeta(0).controller.getStyle(s);return{text:t,fillStyle:i.backgroundColor,strokeStyle:i.borderColor,fontColor:r,lineWidth:i.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(s),index:s}}))}return[]}},onClick(e,t,n){n.chart.toggleDataVisibility(t.index),n.chart.update()}}}};constructor(e,t){super(e,t),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,t){const n=this.getDataset().data,r=this._cachedMeta;if(!1===this._parsing)r._parsed=n;else{let s,i,a=e=>+n[e];if(gb(n[e])){const{key:e="value"}=this._parsing;a=t=>+Ib(n[t],e)}for(s=e,i=e+t;s<i;++s)r._parsed[s]=a(s)}}_getRotation(){return Qb(this.options.rotation-90)}_getCircumference(){return Qb(this.options.circumference)}_getRotationExtents(){let e=Ob,t=-Ob;for(let n=0;n<this.chart.data.datasets.length;++n)if(this.chart.isDatasetVisible(n)&&this.chart.getDatasetMeta(n).type===this._type){const r=this.chart.getDatasetMeta(n).controller,s=r._getRotation(),i=r._getCircumference();e=Math.min(e,s),t=Math.max(t,s+i)}return{rotation:e,circumference:t-e}}update(e){const t=this.chart,{chartArea:n}=t,r=this._cachedMeta,s=r.data,i=this.getMaxBorderWidth()+this.getMaxOffset(s)+this.options.spacing,a=Math.max((Math.min(n.width,n.height)-i)/2,0),o=Math.min((l=this.options.cutout,c=a,"string"===typeof l&&l.endsWith("%")?parseFloat(l)/100:+l/c),1);var l,c;const u=this._getRingWeight(this.index),{circumference:d,rotation:h}=this._getRotationExtents(),{ratioX:f,ratioY:m,offsetX:p,offsetY:g}=function(e,t,n){let r=1,s=1,i=0,a=0;if(t<Ob){const o=e,l=o+t,c=Math.cos(o),u=Math.sin(o),d=Math.cos(l),h=Math.sin(l),f=(e,t,r)=>rw(e,o,l,!0)?1:Math.max(t,t*n,r,r*n),m=(e,t,r)=>rw(e,o,l,!0)?-1:Math.min(t,t*n,r,r*n),p=f(0,c,d),g=f(Ub,u,h),y=m(Db,c,d),v=m(Db+Ub,u,h);r=(p-y)/2,s=(g-v)/2,i=-(p+y)/2,a=-(g+v)/2}return{ratioX:r,ratioY:s,offsetX:i,offsetY:a}}(h,d,o),y=(n.width-i)/f,v=(n.height-i)/m,x=Math.max(Math.min(y,v)/2,0),b=bb(this.options.radius,x),w=(b-Math.max(b*o,0))/this._getVisibleDatasetWeightTotal();this.offsetX=p*b,this.offsetY=g*b,r.total=this.calculateTotal(),this.outerRadius=b-w*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-w*u,0),this.updateElements(s,0,s.length,e)}_circumference(e,t){const n=this.options,r=this._cachedMeta,s=this._getCircumference();return t&&n.animation.animateRotate||!this.chart.getDataVisibility(e)||null===r._parsed[e]||r.data[e].hidden?0:this.calculateCircumference(r._parsed[e]*s/Ob)}updateElements(e,t,n,r){const s="reset"===r,i=this.chart,a=i.chartArea,o=i.options.animation,l=(a.left+a.right)/2,c=(a.top+a.bottom)/2,u=s&&o.animateScale,d=u?0:this.innerRadius,h=u?0:this.outerRadius,{sharedOptions:f,includeOptions:m}=this._getSharedOptions(t,r);let p,g=this._getRotation();for(p=0;p<t;++p)g+=this._circumference(p,s);for(p=t;p<t+n;++p){const t=this._circumference(p,s),n=e[p],i={x:l+this.offsetX,y:c+this.offsetY,startAngle:g,endAngle:g+t,circumference:t,outerRadius:h,innerRadius:d};m&&(i.options=f||this.resolveDataElementOptions(p,n.active?"active":r)),g+=t,this.updateElement(n,p,i,r)}}calculateTotal(){const e=this._cachedMeta,t=e.data;let n,r=0;for(n=0;n<t.length;n++){const s=e._parsed[n];null===s||isNaN(s)||!this.chart.getDataVisibility(n)||t[n].hidden||(r+=Math.abs(s))}return r}calculateCircumference(e){const t=this._cachedMeta.total;return t>0&&!isNaN(e)?Ob*(Math.abs(e)/t):0}getLabelAndValue(e){const t=this._cachedMeta,n=this.chart,r=n.data.labels||[],s=Cw(t._parsed[e],n.options.locale);return{label:r[e]||"",value:s}}getMaxBorderWidth(e){let t=0;const n=this.chart;let r,s,i,a,o;if(!e)for(r=0,s=n.data.datasets.length;r<s;++r)if(n.isDatasetVisible(r)){i=n.getDatasetMeta(r),e=i.data,a=i.controller;break}if(!e)return 0;for(r=0,s=e.length;r<s;++r)o=a.resolveDataElementOptions(r),"inner"!==o.borderAlign&&(t=Math.max(t,o.borderWidth||0,o.hoverBorderWidth||0));return t}getMaxOffset(e){let t=0;for(let n=0,r=e.length;n<r;++n){const e=this.resolveDataElementOptions(n);t=Math.max(t,e.offset||0,e.hoverOffset||0)}return t}_getRingWeightOffset(e){let t=0;for(let n=0;n<e;++n)this.chart.isDatasetVisible(n)&&(t+=this._getRingWeight(n));return t}_getRingWeight(e){return Math.max(xb(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}class Ik extends bk{static id="polarArea";static defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:n,color:r}}=e.legend.options;return t.labels.map(((t,s)=>{const i=e.getDatasetMeta(0).controller.getStyle(s);return{text:t,fillStyle:i.backgroundColor,strokeStyle:i.borderColor,fontColor:r,lineWidth:i.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(s),index:s}}))}return[]}},onClick(e,t,n){n.chart.toggleDataVisibility(t.index),n.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};constructor(e,t){super(e,t),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const t=this._cachedMeta,n=this.chart,r=n.data.labels||[],s=Cw(t._parsed[e].r,n.options.locale);return{label:r[e]||"",value:s}}parseObjectData(e,t,n,r){return __.bind(this)(e,t,n,r)}update(e){const t=this._cachedMeta.data;this._updateRadius(),this.updateElements(t,0,t.length,e)}getMinMax(){const e=this._cachedMeta,t={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach(((e,n)=>{const r=this.getParsed(n).r;!isNaN(r)&&this.chart.getDataVisibility(n)&&(r<t.min&&(t.min=r),r>t.max&&(t.max=r))})),t}_updateRadius(){const e=this.chart,t=e.chartArea,n=e.options,r=Math.min(t.right-t.left,t.bottom-t.top),s=Math.max(r/2,0),i=(s-Math.max(n.cutoutPercentage?s/100*n.cutoutPercentage:1,0))/e.getVisibleDatasetCount();this.outerRadius=s-i*this.index,this.innerRadius=this.outerRadius-i}updateElements(e,t,n,r){const s="reset"===r,i=this.chart,a=i.options.animation,o=this._cachedMeta.rScale,l=o.xCenter,c=o.yCenter,u=o.getIndexAngle(0)-.5*Db;let d,h=u;const f=360/this.countVisibleElements();for(d=0;d<t;++d)h+=this._computeAngle(d,r,f);for(d=t;d<t+n;d++){const t=e[d];let n=h,m=h+this._computeAngle(d,r,f),p=i.getDataVisibility(d)?o.getDistanceFromCenterForValue(this.getParsed(d).r):0;h=m,s&&(a.animateScale&&(p=0),a.animateRotate&&(n=m=u));const g={x:l,y:c,innerRadius:0,outerRadius:p,startAngle:n,endAngle:m,options:this.resolveDataElementOptions(d,t.active?"active":r)};this.updateElement(t,d,g,r)}}countVisibleElements(){const e=this._cachedMeta;let t=0;return e.data.forEach(((e,n)=>{!isNaN(this.getParsed(n).r)&&this.chart.getDataVisibility(n)&&t++})),t}_computeAngle(e,t,n){return this.chart.getDataVisibility(e)?Qb(this.resolveDataElementOptions(e,t).angle||n):0}}var Mk=Object.freeze({__proto__:null,BarController:Tk,BubbleController:class extends bk{static id="bubble";static defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}};static overrides={scales:{x:{type:"linear"},y:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,t,n,r){const s=super.parsePrimitiveData(e,t,n,r);for(let i=0;i<s.length;i++)s[i]._custom=this.resolveDataElementOptions(i+n).radius;return s}parseArrayData(e,t,n,r){const s=super.parseArrayData(e,t,n,r);for(let i=0;i<s.length;i++){const e=t[n+i];s[i]._custom=xb(e[2],this.resolveDataElementOptions(i+n).radius)}return s}parseObjectData(e,t,n,r){const s=super.parseObjectData(e,t,n,r);for(let i=0;i<s.length;i++){const e=t[n+i];s[i]._custom=xb(e&&e.r&&+e.r,this.resolveDataElementOptions(i+n).radius)}return s}getMaxOverflow(){const e=this._cachedMeta.data;let t=0;for(let n=e.length-1;n>=0;--n)t=Math.max(t,e[n].size(this.resolveDataElementOptions(n))/2);return t>0&&t}getLabelAndValue(e){const t=this._cachedMeta,n=this.chart.data.labels||[],{xScale:r,yScale:s}=t,i=this.getParsed(e),a=r.getLabelForValue(i.x),o=s.getLabelForValue(i.y),l=i._custom;return{label:n[e]||"",value:"("+a+", "+o+(l?", "+l:"")+")"}}update(e){const t=this._cachedMeta.data;this.updateElements(t,0,t.length,e)}updateElements(e,t,n,r){const s="reset"===r,{iScale:i,vScale:a}=this._cachedMeta,{sharedOptions:o,includeOptions:l}=this._getSharedOptions(t,r),c=i.axis,u=a.axis;for(let d=t;d<t+n;d++){const t=e[d],n=!s&&this.getParsed(d),h={},f=h[c]=s?i.getPixelForDecimal(.5):i.getPixelForValue(n[c]),m=h[u]=s?a.getBasePixel():a.getPixelForValue(n[u]);h.skip=isNaN(f)||isNaN(m),l&&(h.options=o||this.resolveDataElementOptions(d,t.active?"active":r),s&&(h.options.radius=0)),this.updateElement(t,d,h,r)}}resolveDataElementOptions(e,t){const n=this.getParsed(e);let r=super.resolveDataElementOptions(e,t);r.$shared&&(r=Object.assign({},r,{$shared:!1}));const s=r.radius;return"active"!==t&&(r.radius=0),r.radius+=xb(n&&n._custom,s),r}},DoughnutController:Ak,LineController:class extends bk{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const t=this._cachedMeta,{dataset:n,data:r=[],_dataset:s}=t,i=this.chart._animationsDisabled;let{start:a,count:o}=gw(t,r,i);this._drawStart=a,this._drawCount=o,yw(t)&&(a=0,o=r.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!s._decimated,n.points=r;const l=this.resolveDatasetElementOptions(e);this.options.showLine||(l.borderWidth=0),l.segment=this.options.segment,this.updateElement(n,void 0,{animated:!i,options:l},e),this.updateElements(r,a,o,e)}updateElements(e,t,n,r){const s="reset"===r,{iScale:i,vScale:a,_stacked:o,_dataset:l}=this._cachedMeta,{sharedOptions:c,includeOptions:u}=this._getSharedOptions(t,r),d=i.axis,h=a.axis,{spanGaps:f,segment:m}=this.options,p=Gb(f)?f:Number.POSITIVE_INFINITY,g=this.chart._animationsDisabled||s||"none"===r,y=t+n,v=e.length;let x=t>0&&this.getParsed(t-1);for(let b=0;b<v;++b){const n=e[b],f=g?n:{};if(b<t||b>=y){f.skip=!0;continue}const v=this.getParsed(b),w=mb(v[h]),_=f[d]=i.getPixelForValue(v[d],b),k=f[h]=s||w?a.getBasePixel():a.getPixelForValue(o?this.applyStack(a,v,o):v[h],b);f.skip=isNaN(_)||isNaN(k)||w,f.stop=b>0&&Math.abs(v[d]-x[d])>p,m&&(f.parsed=v,f.raw=l.data[b]),u&&(f.options=c||this.resolveDataElementOptions(b,n.active?"active":r)),g||this.updateElement(n,b,f,r),x=v}}getMaxOverflow(){const e=this._cachedMeta,t=e.dataset,n=t.options&&t.options.borderWidth||0,r=e.data||[];if(!r.length)return n;const s=r[0].size(this.resolveDataElementOptions(0)),i=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(n,s,i)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}},PieController:class extends Ak{static id="pie";static defaults={cutout:0,rotation:0,circumference:360,radius:"100%"}},PolarAreaController:Ik,RadarController:class extends bk{static id="radar";static defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}};static overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};getLabelAndValue(e){const t=this._cachedMeta.vScale,n=this.getParsed(e);return{label:t.getLabels()[e],value:""+t.getLabelForValue(n[t.axis])}}parseObjectData(e,t,n,r){return __.bind(this)(e,t,n,r)}update(e){const t=this._cachedMeta,n=t.dataset,r=t.data||[],s=t.iScale.getLabels();if(n.points=r,"resize"!==e){const t=this.resolveDatasetElementOptions(e);this.options.showLine||(t.borderWidth=0);const i={_loop:!0,_fullLoop:s.length===r.length,options:t};this.updateElement(n,void 0,i,e)}this.updateElements(r,0,r.length,e)}updateElements(e,t,n,r){const s=this._cachedMeta.rScale,i="reset"===r;for(let a=t;a<t+n;a++){const t=e[a],n=this.resolveDataElementOptions(a,t.active?"active":r),o=s.getPointPositionForValue(a,this.getParsed(a).r),l=i?s.xCenter:o.x,c=i?s.yCenter:o.y,u={x:l,y:c,angle:o.angle,skip:isNaN(l)||isNaN(c),options:n};this.updateElement(t,a,u,r)}}},ScatterController:class extends bk{static id="scatter";static defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1};static overrides={interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}};getLabelAndValue(e){const t=this._cachedMeta,n=this.chart.data.labels||[],{xScale:r,yScale:s}=t,i=this.getParsed(e),a=r.getLabelForValue(i.x),o=s.getLabelForValue(i.y);return{label:n[e]||"",value:"("+a+", "+o+")"}}update(e){const t=this._cachedMeta,{data:n=[]}=t,r=this.chart._animationsDisabled;let{start:s,count:i}=gw(t,n,r);if(this._drawStart=s,this._drawCount=i,yw(t)&&(s=0,i=n.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:s,_dataset:i}=t;s._chart=this.chart,s._datasetIndex=this.index,s._decimated=!!i._decimated,s.points=n;const a=this.resolveDatasetElementOptions(e);a.segment=this.options.segment,this.updateElement(s,void 0,{animated:!r,options:a},e)}else this.datasetElementType&&(delete t.dataset,this.datasetElementType=!1);this.updateElements(n,s,i,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,t,n,r){const s="reset"===r,{iScale:i,vScale:a,_stacked:o,_dataset:l}=this._cachedMeta,c=this.resolveDataElementOptions(t,r),u=this.getSharedOptions(c),d=this.includeOptions(r,u),h=i.axis,f=a.axis,{spanGaps:m,segment:p}=this.options,g=Gb(m)?m:Number.POSITIVE_INFINITY,y=this.chart._animationsDisabled||s||"none"===r;let v=t>0&&this.getParsed(t-1);for(let x=t;x<t+n;++x){const t=e[x],n=this.getParsed(x),c=y?t:{},m=mb(n[f]),b=c[h]=i.getPixelForValue(n[h],x),w=c[f]=s||m?a.getBasePixel():a.getPixelForValue(o?this.applyStack(a,n,o):n[f],x);c.skip=isNaN(b)||isNaN(w)||m,c.stop=x>0&&Math.abs(n[h]-v[h])>g,p&&(c.parsed=n,c.raw=l.data[x]),d&&(c.options=u||this.resolveDataElementOptions(x,t.active?"active":r)),y||this.updateElement(t,x,c,r),v=n}this.updateSharedOptions(u,r,c)}getMaxOverflow(){const e=this._cachedMeta,t=e.data||[];if(!this.options.showLine){let e=0;for(let n=t.length-1;n>=0;--n)e=Math.max(e,t[n].size(this.resolveDataElementOptions(n))/2);return e>0&&e}const n=e.dataset,r=n.options&&n.options.borderWidth||0;if(!t.length)return r;const s=t[0].size(this.resolveDataElementOptions(0)),i=t[t.length-1].size(this.resolveDataElementOptions(t.length-1));return Math.max(r,s,i)/2}}});function Pk(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Rk{static override(e){Object.assign(Rk.prototype,e)}options;constructor(e){this.options=e||{}}init(){}formats(){return Pk()}parse(){return Pk()}format(){return Pk()}add(){return Pk()}diff(){return Pk()}startOf(){return Pk()}endOf(){return Pk()}}var Lk=Rk;function Dk(e,t,n,r){const{controller:s,data:i,_sorted:a}=e,o=s._cachedMeta.iScale,l=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null;if(o&&t===o.axis&&"r"!==t&&a&&i.length){const a=o._reversePixels?lw:ow;if(!r){const r=a(i,t,n);if(l){const{vScale:t}=s._cachedMeta,{_parsed:n}=e,i=n.slice(0,r.lo+1).reverse().findIndex((e=>!mb(e[t.axis])));r.lo-=Math.max(0,i);const a=n.slice(r.hi).findIndex((e=>!mb(e[t.axis])));r.hi+=Math.max(0,a)}return r}if(s._sharedOptions){const e=i[0],r="function"===typeof e.getRange&&e.getRange(t);if(r){const e=a(i,t,n-r),s=a(i,t,n+r);return{lo:e.lo,hi:s.hi}}}}return{lo:0,hi:i.length-1}}function Ok(e,t,n,r,s){const i=e.getSortedVisibleDatasetMetas(),a=n[t];for(let o=0,l=i.length;o<l;++o){const{index:e,data:n}=i[o],{lo:l,hi:c}=Dk(i[o],t,a,s);for(let t=l;t<=c;++t){const s=n[t];s.skip||r(s,e,t)}}}function Fk(e,t,n,r,s){const i=[];if(!s&&!e.isPointInArea(t))return i;return Ok(e,n,t,(function(n,a,o){(s||$w(n,e.chartArea,0))&&n.inRange(t.x,t.y,r)&&i.push({element:n,datasetIndex:a,index:o})}),!0),i}function Vk(e,t,n,r,s,i){let a=[];const o=function(e){const t=-1!==e.indexOf("x"),n=-1!==e.indexOf("y");return function(e,r){const s=t?Math.abs(e.x-r.x):0,i=n?Math.abs(e.y-r.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(i,2))}}(n);let l=Number.POSITIVE_INFINITY;return Ok(e,n,t,(function(n,c,u){const d=n.inRange(t.x,t.y,s);if(r&&!d)return;const h=n.getCenterPoint(s);if(!(!!i||e.isPointInArea(h))&&!d)return;const f=o(t,h);f<l?(a=[{element:n,datasetIndex:c,index:u}],l=f):f===l&&a.push({element:n,datasetIndex:c,index:u})})),a}function zk(e,t,n,r,s,i){return i||e.isPointInArea(t)?"r"!==n||r?Vk(e,t,n,r,s,i):function(e,t,n,r){let s=[];return Ok(e,n,t,(function(e,n,i){const{startAngle:a,endAngle:o}=e.getProps(["startAngle","endAngle"],r),{angle:l}=Zb(e,{x:t.x,y:t.y});rw(l,a,o)&&s.push({element:e,datasetIndex:n,index:i})})),s}(e,t,n,s):[]}function Uk(e,t,n,r,s){const i=[],a="x"===n?"inXRange":"inYRange";let o=!1;return Ok(e,n,t,((e,r,l)=>{e[a]&&e[a](t[n],s)&&(i.push({element:e,datasetIndex:r,index:l}),o=o||e.inRange(t.x,t.y,s))})),r&&!o?[]:i}var Bk={evaluateInteractionItems:Ok,modes:{index(e,t,n,r){const s=D_(t,e),i=n.axis||"x",a=n.includeInvisible||!1,o=n.intersect?Fk(e,s,i,r,a):zk(e,s,i,!1,r,a),l=[];return o.length?(e.getSortedVisibleDatasetMetas().forEach((e=>{const t=o[0].index,n=e.data[t];n&&!n.skip&&l.push({element:n,datasetIndex:e.index,index:t})})),l):[]},dataset(e,t,n,r){const s=D_(t,e),i=n.axis||"xy",a=n.includeInvisible||!1;let o=n.intersect?Fk(e,s,i,r,a):zk(e,s,i,!1,r,a);if(o.length>0){const t=o[0].datasetIndex,n=e.getDatasetMeta(t).data;o=[];for(let e=0;e<n.length;++e)o.push({element:n[e],datasetIndex:t,index:e})}return o},point:(e,t,n,r)=>Fk(e,D_(t,e),n.axis||"xy",r,n.includeInvisible||!1),nearest(e,t,n,r){const s=D_(t,e),i=n.axis||"xy",a=n.includeInvisible||!1;return zk(e,s,i,n.intersect,r,a)},x:(e,t,n,r)=>Uk(e,D_(t,e),"x",n.intersect,r),y:(e,t,n,r)=>Uk(e,D_(t,e),"y",n.intersect,r)}};const $k=["left","top","right","bottom"];function Hk(e,t){return e.filter((e=>e.pos===t))}function Wk(e,t){return e.filter((e=>-1===$k.indexOf(e.pos)&&e.box.axis===t))}function qk(e,t){return e.sort(((e,n)=>{const r=t?n:e,s=t?e:n;return r.weight===s.weight?r.index-s.index:r.weight-s.weight}))}function Kk(e,t){const n=function(e){const t={};for(const n of e){const{stack:e,pos:r,stackWeight:s}=n;if(!e||!$k.includes(r))continue;const i=t[e]||(t[e]={count:0,placed:0,weight:0,size:0});i.count++,i.weight+=s}return t}(e),{vBoxMaxWidth:r,hBoxMaxHeight:s}=t;let i,a,o;for(i=0,a=e.length;i<a;++i){o=e[i];const{fullSize:a}=o.box,l=n[o.stack],c=l&&o.stackWeight/l.weight;o.horizontal?(o.width=c?c*r:a&&t.availableWidth,o.height=s):(o.width=r,o.height=c?c*s:a&&t.availableHeight)}return n}function Gk(e,t,n,r){return Math.max(e[n],t[n])+Math.max(e[r],t[r])}function Yk(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function Qk(e,t,n,r){const{pos:s,box:i}=n,a=e.maxPadding;if(!gb(s)){n.size&&(e[s]-=n.size);const t=r[n.stack]||{size:0,count:1};t.size=Math.max(t.size,n.horizontal?i.height:i.width),n.size=t.size/t.count,e[s]+=n.size}i.getPadding&&Yk(a,i.getPadding());const o=Math.max(0,t.outerWidth-Gk(a,e,"left","right")),l=Math.max(0,t.outerHeight-Gk(a,e,"top","bottom")),c=o!==e.w,u=l!==e.h;return e.w=o,e.h=l,n.horizontal?{same:c,other:u}:{same:u,other:c}}function Xk(e,t){const n=t.maxPadding;function r(e){const r={left:0,top:0,right:0,bottom:0};return e.forEach((e=>{r[e]=Math.max(t[e],n[e])})),r}return r(e?["left","right"]:["top","bottom"])}function Jk(e,t,n,r){const s=[];let i,a,o,l,c,u;for(i=0,a=e.length,c=0;i<a;++i){o=e[i],l=o.box,l.update(o.width||t.w,o.height||t.h,Xk(o.horizontal,t));const{same:a,other:d}=Qk(t,n,o,r);c|=a&&s.length,u=u||d,l.fullSize||s.push(o)}return c&&Jk(s,t,n,r)||u}function Zk(e,t,n,r,s){e.top=n,e.left=t,e.right=t+r,e.bottom=n+s,e.width=r,e.height=s}function eN(e,t,n,r){const s=n.padding;let{x:i,y:a}=t;for(const o of e){const e=o.box,l=r[o.stack]||{count:1,placed:0,weight:1},c=o.stackWeight/l.weight||1;if(o.horizontal){const r=t.w*c,i=l.size||e.height;Pb(l.start)&&(a=l.start),e.fullSize?Zk(e,s.left,a,n.outerWidth-s.right-s.left,i):Zk(e,t.left+l.placed,a,r,i),l.start=a,l.placed+=r,a=e.bottom}else{const r=t.h*c,a=l.size||e.width;Pb(l.start)&&(i=l.start),e.fullSize?Zk(e,i,s.top,a,n.outerHeight-s.bottom-s.top):Zk(e,i,t.top+l.placed,a,r),l.start=i,l.placed+=r,i=e.right}}t.x=i,t.y=a}var tN={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},e.boxes.push(t)},removeBox(e,t){const n=e.boxes?e.boxes.indexOf(t):-1;-1!==n&&e.boxes.splice(n,1)},configure(e,t,n){t.fullSize=n.fullSize,t.position=n.position,t.weight=n.weight},update(e,t,n,r){if(!e)return;const s=i_(e.options.layout.padding),i=Math.max(t-s.width,0),a=Math.max(n-s.height,0),o=function(e){const t=function(e){const t=[];let n,r,s,i,a,o;for(n=0,r=(e||[]).length;n<r;++n)s=e[n],({position:i,options:{stack:a,stackWeight:o=1}}=s),t.push({index:n,box:s,pos:i,horizontal:s.isHorizontal(),weight:s.weight,stack:a&&i+a,stackWeight:o});return t}(e),n=qk(t.filter((e=>e.box.fullSize)),!0),r=qk(Hk(t,"left"),!0),s=qk(Hk(t,"right")),i=qk(Hk(t,"top"),!0),a=qk(Hk(t,"bottom")),o=Wk(t,"x"),l=Wk(t,"y");return{fullSize:n,leftAndTop:r.concat(i),rightAndBottom:s.concat(l).concat(a).concat(o),chartArea:Hk(t,"chartArea"),vertical:r.concat(s).concat(l),horizontal:i.concat(a).concat(o)}}(e.boxes),l=o.vertical,c=o.horizontal;_b(e.boxes,(e=>{"function"===typeof e.beforeLayout&&e.beforeLayout()}));const u=l.reduce(((e,t)=>t.box.options&&!1===t.box.options.display?e:e+1),0)||1,d=Object.freeze({outerWidth:t,outerHeight:n,padding:s,availableWidth:i,availableHeight:a,vBoxMaxWidth:i/2/u,hBoxMaxHeight:a/2}),h=Object.assign({},s);Yk(h,i_(r));const f=Object.assign({maxPadding:h,w:i,h:a,x:s.left,y:s.top},s),m=Kk(l.concat(c),d);Jk(o.fullSize,f,d,m),Jk(l,f,d,m),Jk(c,f,d,m)&&Jk(l,f,d,m),function(e){const t=e.maxPadding;function n(n){const r=Math.max(t[n]-e[n],0);return e[n]+=r,r}e.y+=n("top"),e.x+=n("left"),n("right"),n("bottom")}(f),eN(o.leftAndTop,f,d,m),f.x+=f.w,f.y+=f.h,eN(o.rightAndBottom,f,d,m),e.chartArea={left:f.left,top:f.top,right:f.left+f.w,bottom:f.top+f.h,height:f.h,width:f.w},_b(o.chartArea,(t=>{const n=t.box;Object.assign(n,e.chartArea),n.update(f.w,f.h,{left:0,top:0,right:0,bottom:0})}))}};class nN{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,n){}removeEventListener(e,t,n){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,n,r){return t=Math.max(0,t||e.width),n=n||e.height,{width:t,height:Math.max(0,r?Math.floor(t/r):n)}}isAttached(e){return!0}updateConfig(e){}}class rN extends nN{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const sN="$chartjs",iN={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},aN=e=>null===e||""===e;const oN=!!z_&&{passive:!0};function lN(e,t,n){e&&e.canvas&&e.canvas.removeEventListener(t,n,oN)}function cN(e,t){for(const n of e)if(n===t||n.contains(t))return!0}function uN(e,t,n){const r=e.canvas,s=new MutationObserver((e=>{let t=!1;for(const n of e)t=t||cN(n.addedNodes,r),t=t&&!cN(n.removedNodes,r);t&&n()}));return s.observe(document,{childList:!0,subtree:!0}),s}function dN(e,t,n){const r=e.canvas,s=new MutationObserver((e=>{let t=!1;for(const n of e)t=t||cN(n.removedNodes,r),t=t&&!cN(n.addedNodes,r);t&&n()}));return s.observe(document,{childList:!0,subtree:!0}),s}const hN=new Map;let fN=0;function mN(){const e=window.devicePixelRatio;e!==fN&&(fN=e,hN.forEach(((t,n)=>{n.currentDevicePixelRatio!==e&&t()})))}function pN(e,t,n){const r=e.canvas,s=r&&I_(r);if(!s)return;const i=fw(((e,t)=>{const r=s.clientWidth;n(e,t),r<s.clientWidth&&n()}),window),a=new ResizeObserver((e=>{const t=e[0],n=t.contentRect.width,r=t.contentRect.height;0===n&&0===r||i(n,r)}));return a.observe(s),function(e,t){hN.size||window.addEventListener("resize",mN),hN.set(e,t)}(e,i),a}function gN(e,t,n){n&&n.disconnect(),"resize"===t&&function(e){hN.delete(e),hN.size||window.removeEventListener("resize",mN)}(e)}function yN(e,t,n){const r=e.canvas,s=fw((t=>{null!==e.ctx&&n(function(e,t){const n=iN[e.type]||e.type,{x:r,y:s}=D_(e,t);return{type:n,chart:t,native:e,x:void 0!==r?r:null,y:void 0!==s?s:null}}(t,e))}),e);return function(e,t,n){e&&e.addEventListener(t,n,oN)}(r,t,s),s}class vN extends nN{acquireContext(e,t){const n=e&&e.getContext&&e.getContext("2d");return n&&n.canvas===e?(function(e,t){const n=e.style,r=e.getAttribute("height"),s=e.getAttribute("width");if(e[sN]={initial:{height:r,width:s,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",aN(s)){const t=U_(e,"width");void 0!==t&&(e.width=t)}if(aN(r))if(""===e.style.height)e.height=e.width/(t||2);else{const t=U_(e,"height");void 0!==t&&(e.height=t)}}(e,t),n):null}releaseContext(e){const t=e.canvas;if(!t[sN])return!1;const n=t[sN].initial;["height","width"].forEach((e=>{const r=n[e];mb(r)?t.removeAttribute(e):t.setAttribute(e,r)}));const r=n.style||{};return Object.keys(r).forEach((e=>{t.style[e]=r[e]})),t.width=t.width,delete t[sN],!0}addEventListener(e,t,n){this.removeEventListener(e,t);const r=e.$proxies||(e.$proxies={}),s={attach:uN,detach:dN,resize:pN}[t]||yN;r[t]=s(e,t,n)}removeEventListener(e,t){const n=e.$proxies||(e.$proxies={}),r=n[t];if(!r)return;({attach:gN,detach:gN,resize:gN}[t]||lN)(e,t,r),n[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,n,r){return F_(e,t,n,r)}isAttached(e){const t=e&&I_(e);return!(!t||!t.isConnected)}}class xN{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(e){const{x:t,y:n}=this.getProps(["x","y"],e);return{x:t,y:n}}hasValue(){return Gb(this.x)&&Gb(this.y)}getProps(e,t){const n=this.$animations;if(!t||!n)return this;const r={};return e.forEach((e=>{r[e]=n[e]&&n[e].active()?n[e]._to:this[e]})),r}}function bN(e,t){const n=e.options.ticks,r=function(e){const t=e.options.offset,n=e._tickSize(),r=e._length/n+(t?0:1),s=e._maxLength/n;return Math.floor(Math.min(r,s))}(e),s=Math.min(n.maxTicksLimit||r,r),i=n.major.enabled?function(e){const t=[];let n,r;for(n=0,r=e.length;n<r;n++)e[n].major&&t.push(n);return t}(t):[],a=i.length,o=i[0],l=i[a-1],c=[];if(a>s)return function(e,t,n,r){let s,i=0,a=n[0];for(r=Math.ceil(r),s=0;s<e.length;s++)s===a&&(t.push(e[s]),i++,a=n[i*r])}(t,c,i,a/s),c;const u=function(e,t,n){const r=function(e){const t=e.length;let n,r;if(t<2)return!1;for(r=e[0],n=1;n<t;++n)if(e[n]-e[n-1]!==r)return!1;return r}(e),s=t.length/n;if(!r)return Math.max(s,1);const i=function(e){const t=[],n=Math.sqrt(e);let r;for(r=1;r<n;r++)e%r===0&&(t.push(r),t.push(e/r));return n===(0|n)&&t.push(n),t.sort(((e,t)=>e-t)).pop(),t}(r);for(let a=0,o=i.length-1;a<o;a++){const e=i[a];if(e>s)return e}return Math.max(s,1)}(i,t,s);if(a>0){let e,n;const r=a>1?Math.round((l-o)/(a-1)):null;for(wN(t,c,u,mb(r)?0:o-r,o),e=0,n=a-1;e<n;e++)wN(t,c,u,i[e],i[e+1]);return wN(t,c,u,l,mb(r)?t.length:l+r),c}return wN(t,c,u),c}function wN(e,t,n,r,s){const i=xb(r,0),a=Math.min(xb(s,e.length),e.length);let o,l,c,u=0;for(n=Math.ceil(n),s&&(o=s-r,n=o/Math.floor(o/n)),c=i;c<0;)u++,c=Math.round(i+u*n);for(l=Math.max(i,0);l<a;l++)l===c&&(t.push(e[l]),u++,c=Math.round(i+u*n))}const _N=(e,t,n)=>"top"===t||"left"===t?e[t]+n:e[t]-n,kN=(e,t)=>Math.min(t||e,e);function NN(e,t){const n=[],r=e.length/t,s=e.length;let i=0;for(;i<s;i+=r)n.push(e[Math.floor(i)]);return n}function SN(e,t,n){const r=e.ticks.length,s=Math.min(t,r-1),i=e._startPixel,a=e._endPixel,o=1e-6;let l,c=e.getPixelForTick(s);if(!(n&&(l=1===r?Math.max(c-i,a-c):0===t?(e.getPixelForTick(1)-c)/2:(c-e.getPixelForTick(s-1))/2,c+=s<t?l:-l,c<i-o||c>a+o)))return c}function EN(e){return e.drawTicks?e.tickLength:0}function jN(e,t){if(!e.display)return 0;const n=a_(e.font,t),r=i_(e.padding);return(pb(e.text)?e.text.length:1)*n.lineHeight+r.height}function CN(e,t,n){let r=mw(e);return(n&&"right"!==t||!n&&"right"===t)&&(r=(e=>"left"===e?"right":"right"===e?"left":e)(r)),r}class TN extends xN{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:n,_suggestedMax:r}=this;return e=vb(e,Number.POSITIVE_INFINITY),t=vb(t,Number.NEGATIVE_INFINITY),n=vb(n,Number.POSITIVE_INFINITY),r=vb(r,Number.NEGATIVE_INFINITY),{min:vb(e,n),max:vb(t,r),minDefined:yb(e),maxDefined:yb(t)}}getMinMax(e){let t,{min:n,max:r,minDefined:s,maxDefined:i}=this.getUserBounds();if(s&&i)return{min:n,max:r};const a=this.getMatchingVisibleMetas();for(let o=0,l=a.length;o<l;++o)t=a[o].controller.getMinMax(this,e),s||(n=Math.min(n,t.min)),i||(r=Math.max(r,t.max));return n=i&&n>r?r:n,r=s&&n>r?n:r,{min:vb(n,vb(r,n)),max:vb(r,vb(n,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.chart.chartArea;return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){wb(this.options.beforeUpdate,[this])}update(e,t,n){const{beginAtZero:r,grace:s,ticks:i}=this.options,a=i.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=function(e,t,n){const{min:r,max:s}=e,i=bb(t,(s-r)/2),a=(e,t)=>n&&0===e?0:e+t;return{min:a(r,-Math.abs(i)),max:a(s,i)}}(this,s,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const o=a<this.ticks.length;this._convertTicksToLabels(o?NN(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),i.display&&(i.autoSkip||"auto"===i.source)&&(this.ticks=bN(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),o&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e,t,n=this.options.reverse;this.isHorizontal()?(e=this.left,t=this.right):(e=this.top,t=this.bottom,n=!n),this._startPixel=e,this._endPixel=t,this._reversePixels=n,this._length=t-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){wb(this.options.afterUpdate,[this])}beforeSetDimensions(){wb(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){wb(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),wb(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){wb(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const t=this.options.ticks;let n,r,s;for(n=0,r=e.length;n<r;n++)s=e[n],s.label=wb(t.callback,[s.value,n,e],this)}afterTickToLabelConversion(){wb(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){wb(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,t=e.ticks,n=kN(this.ticks.length,e.ticks.maxTicksLimit),r=t.minRotation||0,s=t.maxRotation;let i,a,o,l=r;if(!this._isVisible()||!t.display||r>=s||n<=1||!this.isHorizontal())return void(this.labelRotation=r);const c=this._getLabelSizes(),u=c.widest.width,d=c.highest.height,h=sw(this.chart.width-u,0,this.maxWidth);i=e.offset?this.maxWidth/n:h/(n-1),u+6>i&&(i=h/(n-(e.offset?.5:1)),a=this.maxHeight-EN(e.grid)-t.padding-jN(e.title,this.chart.options.font),o=Math.sqrt(u*u+d*d),l=Xb(Math.min(Math.asin(sw((c.highest.height+6)/i,-1,1)),Math.asin(sw(a/o,-1,1))-Math.asin(sw(d/o,-1,1)))),l=Math.max(r,Math.min(s,l))),this.labelRotation=l}afterCalculateLabelRotation(){wb(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){wb(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:t,options:{ticks:n,title:r,grid:s}}=this,i=this._isVisible(),a=this.isHorizontal();if(i){const i=jN(r,t.options.font);if(a?(e.width=this.maxWidth,e.height=EN(s)+i):(e.height=this.maxHeight,e.width=EN(s)+i),n.display&&this.ticks.length){const{first:t,last:r,widest:s,highest:i}=this._getLabelSizes(),o=2*n.padding,l=Qb(this.labelRotation),c=Math.cos(l),u=Math.sin(l);if(a){const t=n.mirror?0:u*s.width+c*i.height;e.height=Math.min(this.maxHeight,e.height+t+o)}else{const t=n.mirror?0:c*s.width+u*i.height;e.width=Math.min(this.maxWidth,e.width+t+o)}this._calculatePadding(t,r,u,c)}}this._handleMargins(),a?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,n,r){const{ticks:{align:s,padding:i},position:a}=this.options,o=0!==this.labelRotation,l="top"!==a&&"x"===this.axis;if(this.isHorizontal()){const a=this.getPixelForTick(0)-this.left,c=this.right-this.getPixelForTick(this.ticks.length-1);let u=0,d=0;o?l?(u=r*e.width,d=n*t.height):(u=n*e.height,d=r*t.width):"start"===s?d=t.width:"end"===s?u=e.width:"inner"!==s&&(u=e.width/2,d=t.width/2),this.paddingLeft=Math.max((u-a+i)*this.width/(this.width-a),0),this.paddingRight=Math.max((d-c+i)*this.width/(this.width-c),0)}else{let n=t.height/2,r=e.height/2;"start"===s?(n=0,r=e.height):"end"===s&&(n=t.height,r=0),this.paddingTop=n+i,this.paddingBottom=r+i}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){wb(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:t}=this.options;return"top"===t||"bottom"===t||"x"===e}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){let t,n;for(this.beforeTickToLabelConversion(),this.generateTickLabels(e),t=0,n=e.length;t<n;t++)mb(e[t].label)&&(e.splice(t,1),n--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const t=this.options.ticks.sampleSize;let n=this.ticks;t<n.length&&(n=NN(n,t)),this._labelSizes=e=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,n){const{ctx:r,_longestTextCache:s}=this,i=[],a=[],o=Math.floor(t/kN(t,n));let l,c,u,d,h,f,m,p,g,y,v,x=0,b=0;for(l=0;l<t;l+=o){if(d=e[l].label,h=this._resolveTickFontOptions(l),r.font=f=h.string,m=s[f]=s[f]||{data:{},gc:[]},p=h.lineHeight,g=y=0,mb(d)||pb(d)){if(pb(d))for(c=0,u=d.length;c<u;++c)v=d[c],mb(v)||pb(v)||(g=Ow(r,m.data,m.gc,g,v),y+=p)}else g=Ow(r,m.data,m.gc,g,d),y=p;i.push(g),a.push(y),x=Math.max(g,x),b=Math.max(y,b)}!function(e,t){_b(e,(e=>{const n=e.gc,r=n.length/2;let s;if(r>t){for(s=0;s<r;++s)delete e.data[n[s]];n.splice(0,r)}}))}(s,t);const w=i.indexOf(x),_=a.indexOf(b),k=e=>({width:i[e]||0,height:a[e]||0});return{first:k(0),last:k(t-1),widest:k(w),highest:k(_),widths:i,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const t=this._startPixel+e*this._length;return sw(this._alignToPixels?Vw(this.chart,t,0):t,-32768,32767)}getDecimalForPixel(e){const t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){const t=this.ticks||[];if(e>=0&&e<t.length){const n=t[e];return n.$context||(n.$context=function(e,t,n){return l_(e,{tick:n,index:t,type:"tick"})}(this.getContext(),e,n))}return this.$context||(this.$context=function(e,t){return l_(e,{scale:t,type:"scale"})}(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,t=Qb(this.labelRotation),n=Math.abs(Math.cos(t)),r=Math.abs(Math.sin(t)),s=this._getLabelSizes(),i=e.autoSkipPadding||0,a=s?s.widest.width+i:0,o=s?s.highest.height+i:0;return this.isHorizontal()?o*n>a*r?a/n:o/r:o*r<a*n?o/n:a/r}_isVisible(){const e=this.options.display;return"auto"!==e?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const t=this.axis,n=this.chart,r=this.options,{grid:s,position:i,border:a}=r,o=s.offset,l=this.isHorizontal(),c=this.ticks.length+(o?1:0),u=EN(s),d=[],h=a.setContext(this.getContext()),f=h.display?h.width:0,m=f/2,p=function(e){return Vw(n,e,f)};let g,y,v,x,b,w,_,k,N,S,E,j;if("top"===i)g=p(this.bottom),w=this.bottom-u,k=g-m,S=p(e.top)+m,j=e.bottom;else if("bottom"===i)g=p(this.top),S=e.top,j=p(e.bottom)-m,w=g+m,k=this.top+u;else if("left"===i)g=p(this.right),b=this.right-u,_=g-m,N=p(e.left)+m,E=e.right;else if("right"===i)g=p(this.left),N=e.left,E=p(e.right)-m,b=g+m,_=this.left+u;else if("x"===t){if("center"===i)g=p((e.top+e.bottom)/2+.5);else if(gb(i)){const e=Object.keys(i)[0],t=i[e];g=p(this.chart.scales[e].getPixelForValue(t))}S=e.top,j=e.bottom,w=g+m,k=w+u}else if("y"===t){if("center"===i)g=p((e.left+e.right)/2);else if(gb(i)){const e=Object.keys(i)[0],t=i[e];g=p(this.chart.scales[e].getPixelForValue(t))}b=g-m,_=b-u,N=e.left,E=e.right}const C=xb(r.ticks.maxTicksLimit,c),T=Math.max(1,Math.ceil(c/C));for(y=0;y<c;y+=T){const e=this.getContext(y),t=s.setContext(e),r=a.setContext(e),i=t.lineWidth,c=t.color,u=r.dash||[],h=r.dashOffset,f=t.tickWidth,m=t.tickColor,p=t.tickBorderDash||[],g=t.tickBorderDashOffset;v=SN(this,y,o),void 0!==v&&(x=Vw(n,v,i),l?b=_=N=E=x:w=k=S=j=x,d.push({tx1:b,ty1:w,tx2:_,ty2:k,x1:N,y1:S,x2:E,y2:j,width:i,color:c,borderDash:u,borderDashOffset:h,tickWidth:f,tickColor:m,tickBorderDash:p,tickBorderDashOffset:g}))}return this._ticksLength=c,this._borderValue=g,d}_computeLabelItems(e){const t=this.axis,n=this.options,{position:r,ticks:s}=n,i=this.isHorizontal(),a=this.ticks,{align:o,crossAlign:l,padding:c,mirror:u}=s,d=EN(n.grid),h=d+c,f=u?-c:h,m=-Qb(this.labelRotation),p=[];let g,y,v,x,b,w,_,k,N,S,E,j,C="middle";if("top"===r)w=this.bottom-f,_=this._getXAxisLabelAlignment();else if("bottom"===r)w=this.top+f,_=this._getXAxisLabelAlignment();else if("left"===r){const e=this._getYAxisLabelAlignment(d);_=e.textAlign,b=e.x}else if("right"===r){const e=this._getYAxisLabelAlignment(d);_=e.textAlign,b=e.x}else if("x"===t){if("center"===r)w=(e.top+e.bottom)/2+h;else if(gb(r)){const e=Object.keys(r)[0],t=r[e];w=this.chart.scales[e].getPixelForValue(t)+h}_=this._getXAxisLabelAlignment()}else if("y"===t){if("center"===r)b=(e.left+e.right)/2-h;else if(gb(r)){const e=Object.keys(r)[0],t=r[e];b=this.chart.scales[e].getPixelForValue(t)}_=this._getYAxisLabelAlignment(d).textAlign}"y"===t&&("start"===o?C="top":"end"===o&&(C="bottom"));const T=this._getLabelSizes();for(g=0,y=a.length;g<y;++g){v=a[g],x=v.label;const e=s.setContext(this.getContext(g));k=this.getPixelForTick(g)+s.labelOffset,N=this._resolveTickFontOptions(g),S=N.lineHeight,E=pb(x)?x.length:1;const t=E/2,n=e.color,o=e.textStrokeColor,c=e.textStrokeWidth;let d,h=_;if(i?(b=k,"inner"===_&&(h=g===y-1?this.options.reverse?"left":"right":0===g?this.options.reverse?"right":"left":"center"),j="top"===r?"near"===l||0!==m?-E*S+S/2:"center"===l?-T.highest.height/2-t*S+S:-T.highest.height+S/2:"near"===l||0!==m?S/2:"center"===l?T.highest.height/2-t*S:T.highest.height-E*S,u&&(j*=-1),0===m||e.showLabelBackdrop||(b+=S/2*Math.sin(m))):(w=k,j=(1-E)*S/2),e.showLabelBackdrop){const t=i_(e.backdropPadding),n=T.heights[g],r=T.widths[g];let s=j-t.top,i=0-t.left;switch(C){case"middle":s-=n/2;break;case"bottom":s-=n}switch(_){case"center":i-=r/2;break;case"right":i-=r;break;case"inner":g===y-1?i-=r:g>0&&(i-=r/2)}d={left:i,top:s,width:r+t.width,height:n+t.height,color:e.backdropColor}}p.push({label:x,font:N,textOffset:j,options:{rotation:m,color:n,strokeColor:o,strokeWidth:c,textAlign:h,textBaseline:C,translation:[b,w],backdrop:d}})}return p}_getXAxisLabelAlignment(){const{position:e,ticks:t}=this.options;if(-Qb(this.labelRotation))return"top"===e?"left":"right";let n="center";return"start"===t.align?n="left":"end"===t.align?n="right":"inner"===t.align&&(n="inner"),n}_getYAxisLabelAlignment(e){const{position:t,ticks:{crossAlign:n,mirror:r,padding:s}}=this.options,i=e+s,a=this._getLabelSizes().widest.width;let o,l;return"left"===t?r?(l=this.right+s,"near"===n?o="left":"center"===n?(o="center",l+=a/2):(o="right",l+=a)):(l=this.right-i,"near"===n?o="right":"center"===n?(o="center",l-=a/2):(o="left",l=this.left)):"right"===t?r?(l=this.left+s,"near"===n?o="right":"center"===n?(o="center",l-=a/2):(o="left",l-=a)):(l=this.left+i,"near"===n?o="left":"center"===n?(o="center",l+=a/2):(o="right",l=this.right)):o="right",{textAlign:o,x:l}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,t=this.options.position;return"left"===t||"right"===t?{top:0,left:this.left,bottom:e.height,right:this.right}:"top"===t||"bottom"===t?{top:this.top,left:0,bottom:this.bottom,right:e.width}:void 0}drawBackground(){const{ctx:e,options:{backgroundColor:t},left:n,top:r,width:s,height:i}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(n,r,s,i),e.restore())}getLineWidthForValue(e){const t=this.options.grid;if(!this._isVisible()||!t.display)return 0;const n=this.ticks.findIndex((t=>t.value===e));if(n>=0){return t.setContext(this.getContext(n)).lineWidth}return 0}drawGrid(e){const t=this.options.grid,n=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let s,i;const a=(e,t,r)=>{r.width&&r.color&&(n.save(),n.lineWidth=r.width,n.strokeStyle=r.color,n.setLineDash(r.borderDash||[]),n.lineDashOffset=r.borderDashOffset,n.beginPath(),n.moveTo(e.x,e.y),n.lineTo(t.x,t.y),n.stroke(),n.restore())};if(t.display)for(s=0,i=r.length;s<i;++s){const e=r[s];t.drawOnChartArea&&a({x:e.x1,y:e.y1},{x:e.x2,y:e.y2},e),t.drawTicks&&a({x:e.tx1,y:e.ty1},{x:e.tx2,y:e.ty2},{color:e.tickColor,width:e.tickWidth,borderDash:e.tickBorderDash,borderDashOffset:e.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:t,options:{border:n,grid:r}}=this,s=n.setContext(this.getContext()),i=n.display?s.width:0;if(!i)return;const a=r.setContext(this.getContext(0)).lineWidth,o=this._borderValue;let l,c,u,d;this.isHorizontal()?(l=Vw(e,this.left,i)-i/2,c=Vw(e,this.right,a)+a/2,u=d=o):(u=Vw(e,this.top,i)-i/2,d=Vw(e,this.bottom,a)+a/2,l=c=o),t.save(),t.lineWidth=s.width,t.strokeStyle=s.color,t.beginPath(),t.moveTo(l,u),t.lineTo(c,d),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;const t=this.ctx,n=this._computeLabelArea();n&&Hw(t,n);const r=this.getLabelItems(e);for(const s of r){const e=s.options,n=s.font;Qw(t,s.label,0,s.textOffset,n,e)}n&&Ww(t)}drawTitle(){const{ctx:e,options:{position:t,title:n,reverse:r}}=this;if(!n.display)return;const s=a_(n.font),i=i_(n.padding),a=n.align;let o=s.lineHeight/2;"bottom"===t||"center"===t||gb(t)?(o+=i.bottom,pb(n.text)&&(o+=s.lineHeight*(n.text.length-1))):o+=i.top;const{titleX:l,titleY:c,maxWidth:u,rotation:d}=function(e,t,n,r){const{top:s,left:i,bottom:a,right:o,chart:l}=e,{chartArea:c,scales:u}=l;let d,h,f,m=0;const p=a-s,g=o-i;if(e.isHorizontal()){if(h=pw(r,i,o),gb(n)){const e=Object.keys(n)[0],r=n[e];f=u[e].getPixelForValue(r)+p-t}else f="center"===n?(c.bottom+c.top)/2+p-t:_N(e,n,t);d=o-i}else{if(gb(n)){const e=Object.keys(n)[0],r=n[e];h=u[e].getPixelForValue(r)-g+t}else h="center"===n?(c.left+c.right)/2-g+t:_N(e,n,t);f=pw(r,a,s),m="left"===n?-Ub:Ub}return{titleX:h,titleY:f,maxWidth:d,rotation:m}}(this,o,t,a);Qw(e,n.text,0,0,s,{color:n.color,maxWidth:u,rotation:d,textAlign:CN(a,t,r),textBaseline:"middle",translation:[l,c]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,t=e.ticks&&e.ticks.z||0,n=xb(e.grid&&e.grid.z,-1),r=xb(e.border&&e.border.z,0);return this._isVisible()&&this.draw===TN.prototype.draw?[{z:n,draw:e=>{this.drawBackground(),this.drawGrid(e),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:t,draw:e=>{this.drawLabels(e)}}]:[{z:t,draw:e=>{this.draw(e)}}]}getMatchingVisibleMetas(e){const t=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",r=[];let s,i;for(s=0,i=t.length;s<i;++s){const i=t[s];i[n]!==this.id||e&&i.type!==e||r.push(i)}return r}_resolveTickFontOptions(e){return a_(this.options.ticks.setContext(this.getContext(e)).font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class AN{constructor(e,t,n){this.type=e,this.scope=t,this.override=n,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const t=Object.getPrototypeOf(e);let n;(function(e){return"id"in e&&"defaults"in e})(t)&&(n=this.register(t));const r=this.items,s=e.id,i=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+e);return s in r||(r[s]=e,function(e,t,n){const r=jb(Object.create(null),[n?Dw.get(n):{},Dw.get(t),e.defaults]);Dw.set(t,r),e.defaultRoutes&&function(e,t){Object.keys(t).forEach((n=>{const r=n.split("."),s=r.pop(),i=[e].concat(r).join("."),a=t[n].split("."),o=a.pop(),l=a.join(".");Dw.route(i,s,l,o)}))}(t,e.defaultRoutes);e.descriptors&&Dw.describe(t,e.descriptors)}(e,i,n),this.override&&Dw.override(e.id,e.overrides)),i}get(e){return this.items[e]}unregister(e){const t=this.items,n=e.id,r=this.scope;n in t&&delete t[n],r&&n in Dw[r]&&(delete Dw[r][n],this.override&&delete Iw[n])}}class IN{constructor(){this.controllers=new AN(bk,"datasets",!0),this.elements=new AN(xN,"elements"),this.plugins=new AN(Object,"plugins"),this.scales=new AN(TN,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t)}remove(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t)}addControllers(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.controllers)}addElements(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.elements)}addPlugins(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.plugins)}addScales(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.controllers)}removeElements(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.elements)}removePlugins(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.plugins)}removeScales(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.scales)}_each(e,t,n){[...t].forEach((t=>{const r=n||this._getRegistryForType(t);n||r.isForType(t)||r===this.plugins&&t.id?this._exec(e,r,t):_b(t,(t=>{const r=n||this._getRegistryForType(t);this._exec(e,r,t)}))}))}_exec(e,t,n){const r=Mb(e);wb(n["before"+r],[],n),t[e](n),wb(n["after"+r],[],n)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){const n=this._typedRegistries[t];if(n.isForType(e))return n}return this.plugins}_get(e,t,n){const r=t.get(e);if(void 0===r)throw new Error('"'+e+'" is not a registered '+n+".");return r}}var MN=new IN;class PN{constructor(){this._init=[]}notify(e,t,n,r){"beforeInit"===t&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const s=r?this._descriptors(e).filter(r):this._descriptors(e),i=this._notify(s,e,t,n);return"afterDestroy"===t&&(this._notify(s,e,"stop"),this._notify(this._init,e,"uninstall")),i}_notify(e,t,n,r){r=r||{};for(const s of e){const e=s.plugin;if(!1===wb(e[n],[t,r,s.options],e)&&r.cancelable)return!1}return!0}invalidate(){mb(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){const n=e&&e.config,r=xb(n.options&&n.options.plugins,{}),s=function(e){const t={},n=[],r=Object.keys(MN.plugins.items);for(let i=0;i<r.length;i++)n.push(MN.getPlugin(r[i]));const s=e.plugins||[];for(let i=0;i<s.length;i++){const e=s[i];-1===n.indexOf(e)&&(n.push(e),t[e.id]=!0)}return{plugins:n,localIds:t}}(n);return!1!==r||t?function(e,t,n,r){let{plugins:s,localIds:i}=t;const a=[],o=e.getContext();for(const l of s){const t=l.id,s=RN(n[t],r);null!==s&&a.push({plugin:l,options:LN(e.config,{plugin:l,local:i[t]},s,o)})}return a}(e,s,r,t):[]}_notifyStateChanges(e){const t=this._oldCache||[],n=this._cache,r=(e,t)=>e.filter((e=>!t.some((t=>e.plugin.id===t.plugin.id))));this._notify(r(t,n),e,"stop"),this._notify(r(n,t),e,"start")}}function RN(e,t){return t||!1!==e?!0===e?{}:e:null}function LN(e,t,n,r){let{plugin:s,local:i}=t;const a=e.pluginScopeKeys(s),o=e.getOptionScopes(n,a);return i&&s.defaults&&o.push(s.defaults),e.createResolver(o,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function DN(e,t){const n=Dw.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||n.indexAxis||"x"}function ON(e){if("x"===e||"y"===e||"r"===e)return e}function FN(e){if(ON(e))return e;for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(const i of n){const t=i.axis||("top"===(s=i.position)||"bottom"===s?"x":"left"===s||"right"===s?"y":void 0)||e.length>1&&ON(e[0].toLowerCase());if(t)return t}var s;throw new Error(`Cannot determine type of '${e}' axis. Please provide 'axis' or 'position' option.`)}function VN(e,t,n){if(n[t+"AxisID"]===e)return{axis:t}}function zN(e,t){const n=Iw[e.type]||{scales:{}},r=t.scales||{},s=DN(e.type,t),i=Object.create(null);return Object.keys(r).forEach((t=>{const a=r[t];if(!gb(a))return console.error(`Invalid scale configuration for scale: ${t}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${t}`);const o=FN(t,a,function(e,t){if(t.data&&t.data.datasets){const n=t.data.datasets.filter((t=>t.xAxisID===e||t.yAxisID===e));if(n.length)return VN(e,"x",n[0])||VN(e,"y",n[0])}return{}}(t,e),Dw.scales[a.type]),l=function(e,t){return e===t?"_index_":"_value_"}(o,s),c=n.scales||{};i[t]=Cb(Object.create(null),[{axis:o},a,c[o],c[l]])})),e.data.datasets.forEach((n=>{const s=n.type||e.type,a=n.indexAxis||DN(s,t),o=(Iw[s]||{}).scales||{};Object.keys(o).forEach((e=>{const t=function(e,t){let n=e;return"_index_"===e?n=t:"_value_"===e&&(n="x"===t?"y":"x"),n}(e,a),s=n[t+"AxisID"]||t;i[s]=i[s]||Object.create(null),Cb(i[s],[{axis:t},r[s],o[e]])}))})),Object.keys(i).forEach((e=>{const t=i[e];Cb(t,[Dw.scales[t.type],Dw.scale])})),i}function UN(e){const t=e.options||(e.options={});t.plugins=xb(t.plugins,{}),t.scales=zN(e,t)}function BN(e){return(e=e||{}).datasets=e.datasets||[],e.labels=e.labels||[],e}const $N=new Map,HN=new Set;function WN(e,t){let n=$N.get(e);return n||(n=t(),$N.set(e,n),HN.add(n)),n}const qN=(e,t,n)=>{const r=Ib(t,n);void 0!==r&&e.add(r)};class KN{constructor(e){this._config=function(e){return(e=e||{}).data=BN(e.data),UN(e),e}(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=BN(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),UN(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return WN(e,(()=>[[`datasets.${e}`,""]]))}datasetAnimationScopeKeys(e,t){return WN(`${e}.transition.${t}`,(()=>[[`datasets.${e}.transitions.${t}`,`transitions.${t}`],[`datasets.${e}`,""]]))}datasetElementScopeKeys(e,t){return WN(`${e}-${t}`,(()=>[[`datasets.${e}.elements.${t}`,`datasets.${e}`,`elements.${t}`,""]]))}pluginScopeKeys(e){const t=e.id;return WN(`${this.type}-plugin-${t}`,(()=>[[`plugins.${t}`,...e.additionalOptionScopes||[]]]))}_cachedScopes(e,t){const n=this._scopeCache;let r=n.get(e);return r&&!t||(r=new Map,n.set(e,r)),r}getOptionScopes(e,t,n){const{options:r,type:s}=this,i=this._cachedScopes(e,n),a=i.get(t);if(a)return a;const o=new Set;t.forEach((t=>{e&&(o.add(e),t.forEach((t=>qN(o,e,t)))),t.forEach((e=>qN(o,r,e))),t.forEach((e=>qN(o,Iw[s]||{},e))),t.forEach((e=>qN(o,Dw,e))),t.forEach((e=>qN(o,Mw,e)))}));const l=Array.from(o);return 0===l.length&&l.push(Object.create(null)),HN.has(t)&&i.set(t,l),l}chartOptionScopes(){const{options:e,type:t}=this;return[e,Iw[t]||{},Dw.datasets[t]||{},{type:t},Dw,Mw]}resolveNamedOptions(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[""];const s={$shared:!0},{resolver:i,subPrefixes:a}=GN(this._resolverCache,e,r);let o=i;if(function(e,t){const{isScriptable:n,isIndexable:r}=d_(e);for(const s of t){const t=n(s),i=r(s),a=(i||t)&&e[s];if(t&&(Rb(a)||YN(a))||i&&pb(a))return!0}return!1}(i,t)){s.$shared=!1;o=u_(i,n=Rb(n)?n():n,this.createResolver(e,n,a))}for(const l of t)s[l]=o[l];return s}createResolver(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[""],r=arguments.length>3?arguments[3]:void 0;const{resolver:s}=GN(this._resolverCache,e,n);return gb(t)?u_(s,t,void 0,r):s}}function GN(e,t,n){let r=e.get(t);r||(r=new Map,e.set(t,r));const s=n.join();let i=r.get(s);if(!i){i={resolver:c_(t,n),subPrefixes:n.filter((e=>!e.toLowerCase().includes("hover")))},r.set(s,i)}return i}const YN=e=>gb(e)&&Object.getOwnPropertyNames(e).some((t=>Rb(e[t])));const QN=["top","bottom","left","right","chartArea"];function XN(e,t){return"top"===e||"bottom"===e||-1===QN.indexOf(e)&&"x"===t}function JN(e,t){return function(n,r){return n[e]===r[e]?n[t]-r[t]:n[e]-r[e]}}function ZN(e){const t=e.chart,n=t.options.animation;t.notifyPlugins("afterRender"),wb(n&&n.onComplete,[e],t)}function eS(e){const t=e.chart,n=t.options.animation;wb(n&&n.onProgress,[e],t)}function tS(e){return A_()&&"string"===typeof e?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const nS={},rS=e=>{const t=tS(e);return Object.values(nS).filter((e=>e.canvas===t)).pop()};function sS(e,t,n){const r=Object.keys(e);for(const s of r){const r=+s;if(r>=t){const i=e[s];delete e[s],(n>0||r>t)&&(e[r+n]=i)}}}class iS{static defaults=(()=>Dw)();static instances=(()=>nS)();static overrides=(()=>Iw)();static registry=(()=>MN)();static version="4.4.9";static getChart=(()=>rS)();static register(){MN.add(...arguments),aS()}static unregister(){MN.remove(...arguments),aS()}constructor(e,t){const n=this.config=new KN(t),r=tS(e),s=rS(r);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");const i=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||function(e){return!A_()||"undefined"!==typeof OffscreenCanvas&&e instanceof OffscreenCanvas?rN:vN}(r)),this.platform.updateConfig(n);const a=this.platform.acquireContext(r,i.aspectRatio),o=a&&a.canvas,l=o&&o.height,c=o&&o.width;this.id=fb(),this.ctx=a,this.canvas=o,this.width=c,this.height=l,this._options=i,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new PN,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=function(e,t){let n;return function(){for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];return t?(clearTimeout(n),n=setTimeout(e,t,s)):e.apply(this,s),t}}((e=>this.update(e)),i.resizeDelay||0),this._dataChanges=[],nS[this.id]=this,a&&o?(sk.listen(this,"complete",ZN),sk.listen(this,"progress",eS),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:t},width:n,height:r,_aspectRatio:s}=this;return mb(e)?t&&s?s:r?n/r:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return MN}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():V_(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return zw(this.canvas,this.ctx),this}stop(){return sk.stop(this),this}resize(e,t){sk.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}_resize(e,t){const n=this.options,r=this.canvas,s=n.maintainAspectRatio&&this.aspectRatio,i=this.platform.getMaximumSize(r,e,t,s),a=n.devicePixelRatio||this.platform.getDevicePixelRatio(),o=this.width?"resize":"attach";this.width=i.width,this.height=i.height,this._aspectRatio=this.aspectRatio,V_(this,a,!0)&&(this.notifyPlugins("resize",{size:i}),wb(n.onResize,[this,i],this),this.attached&&this._doResize(o)&&this.render())}ensureScalesHaveIDs(){_b(this.options.scales||{},((e,t)=>{e.id=t}))}buildOrUpdateScales(){const e=this.options,t=e.scales,n=this.scales,r=Object.keys(n).reduce(((e,t)=>(e[t]=!1,e)),{});let s=[];t&&(s=s.concat(Object.keys(t).map((e=>{const n=t[e],r=FN(e,n),s="r"===r,i="x"===r;return{options:n,dposition:s?"chartArea":i?"bottom":"left",dtype:s?"radialLinear":i?"category":"linear"}})))),_b(s,(t=>{const s=t.options,i=s.id,a=FN(i,s),o=xb(s.type,t.dtype);void 0!==s.position&&XN(s.position,a)===XN(t.dposition)||(s.position=t.dposition),r[i]=!0;let l=null;if(i in n&&n[i].type===o)l=n[i];else{l=new(MN.getScale(o))({id:i,type:o,ctx:this.ctx,chart:this}),n[l.id]=l}l.init(s,e)})),_b(r,((e,t)=>{e||delete n[t]})),_b(n,(e=>{tN.configure(this,e,e.options),tN.addBox(this,e)}))}_updateMetasets(){const e=this._metasets,t=this.data.datasets.length,n=e.length;if(e.sort(((e,t)=>e.index-t.index)),n>t){for(let e=t;e<n;++e)this._destroyDatasetMeta(e);e.splice(t,n-t)}this._sortedMetasets=e.slice(0).sort(JN("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:t}}=this;e.length>t.length&&delete this._stacks,e.forEach(((e,n)=>{0===t.filter((t=>t===e._dataset)).length&&this._destroyDatasetMeta(n)}))}buildOrUpdateControllers(){const e=[],t=this.data.datasets;let n,r;for(this._removeUnreferencedMetasets(),n=0,r=t.length;n<r;n++){const r=t[n];let s=this.getDatasetMeta(n);const i=r.type||this.config.type;if(s.type&&s.type!==i&&(this._destroyDatasetMeta(n),s=this.getDatasetMeta(n)),s.type=i,s.indexAxis=r.indexAxis||DN(i,this.options),s.order=r.order||0,s.index=n,s.label=""+r.label,s.visible=this.isDatasetVisible(n),s.controller)s.controller.updateIndex(n),s.controller.linkScales();else{const t=MN.getController(i),{datasetElementType:r,dataElementType:a}=Dw.datasets[i];Object.assign(t,{dataElementType:MN.getElement(a),datasetElementType:r&&MN.getElement(r)}),s.controller=new t(this,n),e.push(s.controller)}}return this._updateMetasets(),e}_resetElements(){_b(this.data.datasets,((e,t)=>{this.getDatasetMeta(t).controller.reset()}),this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const t=this.config;t.update();const n=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0}))return;const s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let i=0;for(let l=0,c=this.data.datasets.length;l<c;l++){const{controller:e}=this.getDatasetMeta(l),t=!r&&-1===s.indexOf(e);e.buildOrUpdateElements(t),i=Math.max(+e.getMaxOverflow(),i)}i=this._minPadding=n.layout.autoPadding?i:0,this._updateLayout(i),r||_b(s,(e=>{e.reset()})),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(JN("z","_idx"));const{_active:a,_lastEvent:o}=this;o?this._eventHandler(o,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){_b(this.scales,(e=>{tN.removeBox(this,e)})),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,t=new Set(Object.keys(this._listeners)),n=new Set(e.events);Lb(t,n)&&!!this._responsiveListeners===e.responsive||(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,t=this._getUniformDataChanges()||[];for(const{method:n,start:r,count:s}of t){sS(e,r,"_removeElements"===n?-s:s)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const t=this.data.datasets.length,n=t=>new Set(e.filter((e=>e[0]===t)).map(((e,t)=>t+","+e.splice(1).join(",")))),r=n(0);for(let s=1;s<t;s++)if(!Lb(r,n(s)))return;return Array.from(r).map((e=>e.split(","))).map((e=>({method:e[1],start:+e[2],count:+e[3]})))}_updateLayout(e){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;tN.update(this,this.width,this.height,e);const t=this.chartArea,n=t.width<=0||t.height<=0;this._layers=[],_b(this.boxes,(e=>{n&&"chartArea"===e.position||(e.configure&&e.configure(),this._layers.push(...e._layers()))}),this),this._layers.forEach(((e,t)=>{e._idx=t})),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})){for(let e=0,t=this.data.datasets.length;e<t;++e)this.getDatasetMeta(e).controller.configure();for(let t=0,n=this.data.datasets.length;t<n;++t)this._updateDataset(t,Rb(e)?e({datasetIndex:t}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,t){const n=this.getDatasetMeta(e),r={meta:n,index:e,mode:t,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",r)&&(n.controller._update(t),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(sk.has(this)?this.attached&&!sk.running(this)&&sk.start(this):(this.draw(),ZN({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:e,height:t}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(e,t)}if(this.clear(),this.width<=0||this.height<=0)return;if(!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;const t=this._layers;for(e=0;e<t.length&&t[e].z<=0;++e)t[e].draw(this.chartArea);for(this._drawDatasets();e<t.length;++e)t[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const t=this._sortedMetasets,n=[];let r,s;for(r=0,s=t.length;r<s;++r){const s=t[r];e&&!s.visible||n.push(s)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const e=this.getSortedVisibleDatasetMetas();for(let t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const t=this.ctx,n={meta:e,index:e.index,cancelable:!0},r=nk(this,e);!1!==this.notifyPlugins("beforeDatasetDraw",n)&&(r&&Hw(t,r),e.controller.draw(),r&&Ww(t),n.cancelable=!1,this.notifyPlugins("afterDatasetDraw",n))}isPointInArea(e){return $w(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,t,n,r){const s=Bk.modes[t];return"function"===typeof s?s(this,e,n,r):[]}getDatasetMeta(e){const t=this.data.datasets[e],n=this._metasets;let r=n.filter((e=>e&&e._dataset===t)).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},n.push(r)),r}getContext(){return this.$context||(this.$context=l_(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const t=this.data.datasets[e];if(!t)return!1;const n=this.getDatasetMeta(e);return"boolean"===typeof n.hidden?!n.hidden:!t.hidden}setDatasetVisibility(e,t){this.getDatasetMeta(e).hidden=!t}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,t,n){const r=n?"show":"hide",s=this.getDatasetMeta(e),i=s.controller._resolveAnimations(void 0,r);Pb(t)?(s.data[t].hidden=!n,this.update()):(this.setDatasetVisibility(e,n),i.update(s,{visible:n}),this.update((t=>t.datasetIndex===e?r:void 0)))}hide(e,t){this._updateVisibility(e,t,!1)}show(e,t){this._updateVisibility(e,t,!0)}_destroyDatasetMeta(e){const t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}_stop(){let e,t;for(this.stop(),sk.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:t}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),zw(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),delete nS[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(){return this.canvas.toDataURL(...arguments)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,t=this.platform,n=(n,r)=>{t.addEventListener(this,n,r),e[n]=r},r=(e,t,n)=>{e.offsetX=t,e.offsetY=n,this._eventHandler(e)};_b(this.options.events,(e=>n(e,r)))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,t=this.platform,n=(n,r)=>{t.addEventListener(this,n,r),e[n]=r},r=(n,r)=>{e[n]&&(t.removeEventListener(this,n,r),delete e[n])},s=(e,t)=>{this.canvas&&this.resize(e,t)};let i;const a=()=>{r("attach",a),this.attached=!0,this.resize(),n("resize",s),n("detach",i)};i=()=>{this.attached=!1,r("resize",s),this._stop(),this._resize(0,0),n("attach",a)},t.isAttached(this.canvas)?a():i()}unbindEvents(){_b(this._listeners,((e,t)=>{this.platform.removeEventListener(this,t,e)})),this._listeners={},_b(this._responsiveListeners,((e,t)=>{this.platform.removeEventListener(this,t,e)})),this._responsiveListeners=void 0}updateHoverStyle(e,t,n){const r=n?"set":"remove";let s,i,a,o;for("dataset"===t&&(s=this.getDatasetMeta(e[0].datasetIndex),s.controller["_"+r+"DatasetHoverStyle"]()),a=0,o=e.length;a<o;++a){i=e[a];const t=i&&this.getDatasetMeta(i.datasetIndex).controller;t&&t[r+"HoverStyle"](i.element,i.datasetIndex,i.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const t=this._active||[],n=e.map((e=>{let{datasetIndex:t,index:n}=e;const r=this.getDatasetMeta(t);if(!r)throw new Error("No dataset found at index "+t);return{datasetIndex:t,element:r.data[n],index:n}}));!kb(n,t)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,t))}notifyPlugins(e,t,n){return this._plugins.notify(this,e,t,n)}isPluginEnabled(e){return 1===this._plugins._cache.filter((t=>t.plugin.id===e)).length}_updateHoverStyles(e,t,n){const r=this.options.hover,s=(e,t)=>e.filter((e=>!t.some((t=>e.datasetIndex===t.datasetIndex&&e.index===t.index)))),i=s(t,e),a=n?e:s(e,t);i.length&&this.updateHoverStyle(i,r.mode,!1),a.length&&r.mode&&this.updateHoverStyle(a,r.mode,!0)}_eventHandler(e,t){const n={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},r=t=>(t.options.events||this.options.events).includes(e.native.type);if(!1===this.notifyPlugins("beforeEvent",n,r))return;const s=this._handleEvent(e,t,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,r),(s||n.changed)&&this.render(),this}_handleEvent(e,t,n){const{_active:r=[],options:s}=this,i=t,a=this._getActiveElements(e,r,n,i),o=function(e){return"mouseup"===e.type||"click"===e.type||"contextmenu"===e.type}(e),l=function(e,t,n,r){return n&&"mouseout"!==e.type?r?t:e:null}(e,this._lastEvent,n,o);n&&(this._lastEvent=null,wb(s.onHover,[e,a,this],this),o&&wb(s.onClick,[e,a,this],this));const c=!kb(a,r);return(c||t)&&(this._active=a,this._updateHoverStyles(a,r,t)),this._lastEvent=l,c}_getActiveElements(e,t,n,r){if("mouseout"===e.type)return[];if(!n)return t;const s=this.options.hover;return this.getElementsAtEventForMode(e,s.mode,s,r)}}function aS(){return _b(iS.instances,(e=>e._plugins.invalidate()))}function oS(e,t,n,r){const s=n_(e.options.borderRadius,["outerStart","outerEnd","innerStart","innerEnd"]);const i=(n-t)/2,a=Math.min(i,r*t/2),o=e=>{const t=(n-Math.min(i,e))*r/2;return sw(e,0,Math.min(i,t))};return{outerStart:o(s.outerStart),outerEnd:o(s.outerEnd),innerStart:sw(s.innerStart,0,a),innerEnd:sw(s.innerEnd,0,a)}}function lS(e,t,n,r){return{x:n+e*Math.cos(t),y:r+e*Math.sin(t)}}function cS(e,t,n,r,s,i){const{x:a,y:o,startAngle:l,pixelMargin:c,innerRadius:u}=t,d=Math.max(t.outerRadius+r+n-c,0),h=u>0?u+r+n+c:0;let f=0;const m=s-l;if(r){const e=((u>0?u-r:0)+(d>0?d-r:0))/2;f=(m-(0!==e?m*e/(e+r):m))/2}const p=(m-Math.max(.001,m*d-n/Db)/d)/2,g=l+p+f,y=s-p-f,{outerStart:v,outerEnd:x,innerStart:b,innerEnd:w}=oS(t,h,d,y-g),_=d-v,k=d-x,N=g+v/_,S=y-x/k,E=h+b,j=h+w,C=g+b/E,T=y-w/j;if(e.beginPath(),i){const t=(N+S)/2;if(e.arc(a,o,d,N,t),e.arc(a,o,d,t,S),x>0){const t=lS(k,S,a,o);e.arc(t.x,t.y,x,S,y+Ub)}const n=lS(j,y,a,o);if(e.lineTo(n.x,n.y),w>0){const t=lS(j,T,a,o);e.arc(t.x,t.y,w,y+Ub,T+Math.PI)}const r=(y-w/h+(g+b/h))/2;if(e.arc(a,o,h,y-w/h,r,!0),e.arc(a,o,h,r,g+b/h,!0),b>0){const t=lS(E,C,a,o);e.arc(t.x,t.y,b,C+Math.PI,g-Ub)}const s=lS(_,g,a,o);if(e.lineTo(s.x,s.y),v>0){const t=lS(_,N,a,o);e.arc(t.x,t.y,v,g-Ub,N)}}else{e.moveTo(a,o);const t=Math.cos(N)*d+a,n=Math.sin(N)*d+o;e.lineTo(t,n);const r=Math.cos(S)*d+a,s=Math.sin(S)*d+o;e.lineTo(r,s)}e.closePath()}function uS(e,t,n,r,s){const{fullCircles:i,startAngle:a,circumference:o,options:l}=t,{borderWidth:c,borderJoinStyle:u,borderDash:d,borderDashOffset:h}=l,f="inner"===l.borderAlign;if(!c)return;e.setLineDash(d||[]),e.lineDashOffset=h,f?(e.lineWidth=2*c,e.lineJoin=u||"round"):(e.lineWidth=c,e.lineJoin=u||"bevel");let m=t.endAngle;if(i){cS(e,t,n,r,m,s);for(let t=0;t<i;++t)e.stroke();isNaN(o)||(m=a+(o%Ob||Ob))}f&&function(e,t,n){const{startAngle:r,pixelMargin:s,x:i,y:a,outerRadius:o,innerRadius:l}=t;let c=s/o;e.beginPath(),e.arc(i,a,o,r-c,n+c),l>s?(c=s/l,e.arc(i,a,l,n+c,r-c,!0)):e.arc(i,a,s,n+Ub,r-Ub),e.closePath(),e.clip()}(e,t,m),i||(cS(e,t,n,r,m,s),e.stroke())}function dS(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t;e.lineCap=xb(n.borderCapStyle,t.borderCapStyle),e.setLineDash(xb(n.borderDash,t.borderDash)),e.lineDashOffset=xb(n.borderDashOffset,t.borderDashOffset),e.lineJoin=xb(n.borderJoinStyle,t.borderJoinStyle),e.lineWidth=xb(n.borderWidth,t.borderWidth),e.strokeStyle=xb(n.borderColor,t.borderColor)}function hS(e,t,n){e.lineTo(n.x,n.y)}function fS(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=e.length,{start:s=0,end:i=r-1}=n,{start:a,end:o}=t,l=Math.max(s,a),c=Math.min(i,o),u=s<a&&i<a||s>o&&i>o;return{count:r,start:l,loop:t.loop,ilen:c<l&&!u?r+c-l:c-l}}function mS(e,t,n,r){const{points:s,options:i}=t,{count:a,start:o,loop:l,ilen:c}=fS(s,n,r),u=function(e){return e.stepped?qw:e.tension||"monotone"===e.cubicInterpolationMode?Kw:hS}(i);let d,h,f,{move:m=!0,reverse:p}=r||{};for(d=0;d<=c;++d)h=s[(o+(p?c-d:d))%a],h.skip||(m?(e.moveTo(h.x,h.y),m=!1):u(e,f,h,p,i.stepped),f=h);return l&&(h=s[(o+(p?c:0))%a],u(e,f,h,p,i.stepped)),!!l}function pS(e,t,n,r){const s=t.points,{count:i,start:a,ilen:o}=fS(s,n,r),{move:l=!0,reverse:c}=r||{};let u,d,h,f,m,p,g=0,y=0;const v=e=>(a+(c?o-e:e))%i,x=()=>{f!==m&&(e.lineTo(g,m),e.lineTo(g,f),e.lineTo(g,p))};for(l&&(d=s[v(0)],e.moveTo(d.x,d.y)),u=0;u<=o;++u){if(d=s[v(u)],d.skip)continue;const t=d.x,n=d.y,r=0|t;r===h?(n<f?f=n:n>m&&(m=n),g=(y*g+t)/++y):(x(),e.lineTo(t,n),h=r,y=0,f=m=n),p=n}x()}function gS(e){const t=e.options,n=t.borderDash&&t.borderDash.length;return!e._decimated&&!e._loop&&!t.tension&&"monotone"!==t.cubicInterpolationMode&&!t.stepped&&!n?pS:mS}const yS="function"===typeof Path2D;function vS(e,t,n,r){yS&&!t.options.segment?function(e,t,n,r){let s=t._path;s||(s=t._path=new Path2D,t.path(s,n,r)&&s.closePath()),dS(e,t.options),e.stroke(s)}(e,t,n,r):function(e,t,n,r){const{segments:s,options:i}=t,a=gS(t);for(const o of s)dS(e,i,o.style),e.beginPath(),a(e,t,o,{start:n,end:n+r-1})&&e.closePath(),e.stroke()}(e,t,n,r)}class xS extends xN{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:e=>"borderDash"!==e&&"fill"!==e};constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,t){const n=this.options;if((n.tension||"monotone"===n.cubicInterpolationMode)&&!n.stepped&&!this._pointsUpdated){const r=n.spanGaps?this._loop:this._fullLoop;T_(this._points,n,e,r,t),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=function(e,t){const n=e.points,r=e.options.spanGaps,s=n.length;if(!s)return[];const i=!!e._loop,{start:a,end:o}=function(e,t,n,r){let s=0,i=t-1;if(n&&!r)for(;s<t&&!e[s].skip;)s++;for(;s<t&&e[s].skip;)s++;for(s%=t,n&&(i+=s);i>s&&e[i%t].skip;)i--;return i%=t,{start:s,end:i}}(n,s,i,r);return J_(e,!0===r?[{start:a,end:o,loop:i}]:function(e,t,n,r){const s=e.length,i=[];let a,o=t,l=e[t];for(a=t+1;a<=n;++a){const n=e[a%s];n.skip||n.stop?l.skip||(r=!1,i.push({start:t%s,end:(a-1)%s,loop:r}),t=o=n.stop?a:null):(o=a,l.skip&&(t=a)),l=n}return null!==o&&i.push({start:t%s,end:o%s,loop:r}),i}(n,a,o<a?o+s:o,!!e._fullLoop&&0===a&&o===s-1),n,t)}(this,this.options.segment))}first(){const e=this.segments,t=this.points;return e.length&&t[e[0].start]}last(){const e=this.segments,t=this.points,n=e.length;return n&&t[e[n-1].end]}interpolate(e,t){const n=this.options,r=e[t],s=this.points,i=X_(this,{property:t,start:r,end:r});if(!i.length)return;const a=[],o=function(e){return e.stepped?$_:e.tension||"monotone"===e.cubicInterpolationMode?H_:B_}(n);let l,c;for(l=0,c=i.length;l<c;++l){const{start:c,end:u}=i[l],d=s[c],h=s[u];if(d===h){a.push(d);continue}const f=o(d,h,Math.abs((r-d[t])/(h[t]-d[t])),n.stepped);f[t]=e[t],a.push(f)}return 1===a.length?a[0]:a}pathSegment(e,t,n){return gS(this)(e,this,t,n)}path(e,t,n){const r=this.segments,s=gS(this);let i=this._loop;t=t||0,n=n||this.points.length-t;for(const a of r)i&=s(e,this,a,{start:t,end:t+n-1});return!!i}draw(e,t,n,r){const s=this.options||{};(this.points||[]).length&&s.borderWidth&&(e.save(),vS(e,this,n,r),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function bS(e,t,n,r){const s=e.options,{[n]:i}=e.getProps([n],r);return Math.abs(t-i)<s.radius+s.hitRadius}function wS(e,t){const{x:n,y:r,base:s,width:i,height:a}=e.getProps(["x","y","base","width","height"],t);let o,l,c,u,d;return e.horizontal?(d=a/2,o=Math.min(n,s),l=Math.max(n,s),c=r-d,u=r+d):(d=i/2,o=n-d,l=n+d,c=Math.min(r,s),u=Math.max(r,s)),{left:o,top:c,right:l,bottom:u}}function _S(e,t,n,r){return e?0:sw(t,n,r)}function kS(e){const t=wS(e),n=t.right-t.left,r=t.bottom-t.top,s=function(e,t,n){const r=e.options.borderWidth,s=e.borderSkipped,i=r_(r);return{t:_S(s.top,i.top,0,n),r:_S(s.right,i.right,0,t),b:_S(s.bottom,i.bottom,0,n),l:_S(s.left,i.left,0,t)}}(e,n/2,r/2),i=function(e,t,n){const{enableBorderRadius:r}=e.getProps(["enableBorderRadius"]),s=e.options.borderRadius,i=s_(s),a=Math.min(t,n),o=e.borderSkipped,l=r||gb(s);return{topLeft:_S(!l||o.top||o.left,i.topLeft,0,a),topRight:_S(!l||o.top||o.right,i.topRight,0,a),bottomLeft:_S(!l||o.bottom||o.left,i.bottomLeft,0,a),bottomRight:_S(!l||o.bottom||o.right,i.bottomRight,0,a)}}(e,n/2,r/2);return{outer:{x:t.left,y:t.top,w:n,h:r,radius:i},inner:{x:t.left+s.l,y:t.top+s.t,w:n-s.l-s.r,h:r-s.t-s.b,radius:{topLeft:Math.max(0,i.topLeft-Math.max(s.t,s.l)),topRight:Math.max(0,i.topRight-Math.max(s.t,s.r)),bottomLeft:Math.max(0,i.bottomLeft-Math.max(s.b,s.l)),bottomRight:Math.max(0,i.bottomRight-Math.max(s.b,s.r))}}}}function NS(e,t,n,r){const s=null===t,i=null===n,a=e&&!(s&&i)&&wS(e,r);return a&&(s||iw(t,a.left,a.right))&&(i||iw(n,a.top,a.bottom))}function SS(e,t){e.rect(t.x,t.y,t.w,t.h)}function ES(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=e.x!==n.x?-t:0,s=e.y!==n.y?-t:0,i=(e.x+e.w!==n.x+n.w?t:0)-r,a=(e.y+e.h!==n.y+n.h?t:0)-s;return{x:e.x+r,y:e.y+s,w:e.w+i,h:e.h+a,radius:e.radius}}var jS=Object.freeze({__proto__:null,ArcElement:class extends xN{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:e=>"borderDash"!==e};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(e){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,t,n){const r=this.getProps(["x","y"],n),{angle:s,distance:i}=Zb(r,{x:e,y:t}),{startAngle:a,endAngle:o,innerRadius:l,outerRadius:c,circumference:u}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],n),d=(this.options.spacing+this.options.borderWidth)/2,h=xb(u,o-a),f=rw(s,a,o)&&a!==o,m=h>=Ob||f,p=iw(i,l+d,c+d);return m&&p}getCenterPoint(e){const{x:t,y:n,startAngle:r,endAngle:s,innerRadius:i,outerRadius:a}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:o,spacing:l}=this.options,c=(r+s)/2,u=(i+a+l+o)/2;return{x:t+Math.cos(c)*u,y:n+Math.sin(c)*u}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:t,circumference:n}=this,r=(t.offset||0)/4,s=(t.spacing||0)/2,i=t.circular;if(this.pixelMargin="inner"===t.borderAlign?.33:0,this.fullCircles=n>Ob?Math.floor(n/Ob):0,0===n||this.innerRadius<0||this.outerRadius<0)return;e.save();const a=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(a)*r,Math.sin(a)*r);const o=r*(1-Math.sin(Math.min(Db,n||0)));e.fillStyle=t.backgroundColor,e.strokeStyle=t.borderColor,function(e,t,n,r,s){const{fullCircles:i,startAngle:a,circumference:o}=t;let l=t.endAngle;if(i){cS(e,t,n,r,l,s);for(let t=0;t<i;++t)e.fill();isNaN(o)||(l=a+(o%Ob||Ob))}cS(e,t,n,r,l,s),e.fill()}(e,this,o,s,i),uS(e,this,o,s,i),e.restore()}},BarElement:class extends xN{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:t,options:{borderColor:n,backgroundColor:r}}=this,{inner:s,outer:i}=kS(this),a=(o=i.radius).topLeft||o.topRight||o.bottomLeft||o.bottomRight?Xw:SS;var o;e.save(),i.w===s.w&&i.h===s.h||(e.beginPath(),a(e,ES(i,t,s)),e.clip(),a(e,ES(s,-t,i)),e.fillStyle=n,e.fill("evenodd")),e.beginPath(),a(e,ES(s,t)),e.fillStyle=r,e.fill(),e.restore()}inRange(e,t,n){return NS(this,e,t,n)}inXRange(e,t){return NS(this,e,null,t)}inYRange(e,t){return NS(this,null,e,t)}getCenterPoint(e){const{x:t,y:n,base:r,horizontal:s}=this.getProps(["x","y","base","horizontal"],e);return{x:s?(t+r)/2:t,y:s?n:(n+r)/2}}getRange(e){return"x"===e?this.width/2:this.height/2}},LineElement:xS,PointElement:class extends xN{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,t,n){const r=this.options,{x:s,y:i}=this.getProps(["x","y"],n);return Math.pow(e-s,2)+Math.pow(t-i,2)<Math.pow(r.hitRadius+r.radius,2)}inXRange(e,t){return bS(this,e,"x",t)}inYRange(e,t){return bS(this,e,"y",t)}getCenterPoint(e){const{x:t,y:n}=this.getProps(["x","y"],e);return{x:t,y:n}}size(e){let t=(e=e||this.options||{}).radius||0;t=Math.max(t,t&&e.hoverRadius||0);return 2*(t+(t&&e.borderWidth||0))}draw(e,t){const n=this.options;this.skip||n.radius<.1||!$w(this,t,this.size(n)/2)||(e.strokeStyle=n.borderColor,e.lineWidth=n.borderWidth,e.fillStyle=n.backgroundColor,Uw(e,n,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}});const CS=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],TS=CS.map((e=>e.replace("rgb(","rgba(").replace(")",", 0.5)")));function AS(e){return CS[e%CS.length]}function IS(e){return TS[e%TS.length]}function MS(e){let t=0;return(n,r)=>{const s=e.getDatasetMeta(r).controller;s instanceof Ak?t=function(e,t){return e.backgroundColor=e.data.map((()=>AS(t++))),t}(n,t):s instanceof Ik?t=function(e,t){return e.backgroundColor=e.data.map((()=>IS(t++))),t}(n,t):s&&(t=function(e,t){return e.borderColor=AS(t),e.backgroundColor=IS(t),++t}(n,t))}}function PS(e){let t;for(t in e)if(e[t].borderColor||e[t].backgroundColor)return!0;return!1}var RS={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(e,t,n){if(!n.enabled)return;const{data:{datasets:r},options:s}=e.config,{elements:i}=s,a=PS(r)||(o=s)&&(o.borderColor||o.backgroundColor)||i&&PS(i)||"rgba(0,0,0,0.1)"!==Dw.borderColor||"rgba(0,0,0,0.1)"!==Dw.backgroundColor;var o;if(!n.forceOverride&&a)return;const l=MS(e);r.forEach(l)}};function LS(e){if(e._decimated){const t=e._data;delete e._decimated,delete e._data,Object.defineProperty(e,"data",{configurable:!0,enumerable:!0,writable:!0,value:t})}}function DS(e){e.data.datasets.forEach((e=>{LS(e)}))}var OS={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(e,t,n)=>{if(!n.enabled)return void DS(e);const r=e.width;e.data.datasets.forEach(((t,s)=>{const{_data:i,indexAxis:a}=t,o=e.getDatasetMeta(s),l=i||t.data;if("y"===o_([a,e.options.indexAxis]))return;if(!o.controller.supportsDecimation)return;const c=e.scales[o.xAxisID];if("linear"!==c.type&&"time"!==c.type)return;if(e.options.parsing)return;let{start:u,count:d}=function(e,t){const n=t.length;let r,s=0;const{iScale:i}=e,{min:a,max:o,minDefined:l,maxDefined:c}=i.getUserBounds();return l&&(s=sw(ow(t,i.axis,a).lo,0,n-1)),r=c?sw(ow(t,i.axis,o).hi+1,s,n)-s:n-s,{start:s,count:r}}(o,l);if(d<=(n.threshold||4*r))return void LS(t);let h;switch(mb(i)&&(t._data=l,delete t.data,Object.defineProperty(t,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(e){this._data=e}})),n.algorithm){case"lttb":h=function(e,t,n,r,s){const i=s.samples||r;if(i>=n)return e.slice(t,t+n);const a=[],o=(n-2)/(i-2);let l=0;const c=t+n-1;let u,d,h,f,m,p=t;for(a[l++]=e[p],u=0;u<i-2;u++){let r,s=0,i=0;const c=Math.floor((u+1)*o)+1+t,g=Math.min(Math.floor((u+2)*o)+1,n)+t,y=g-c;for(r=c;r<g;r++)s+=e[r].x,i+=e[r].y;s/=y,i/=y;const v=Math.floor(u*o)+1+t,x=Math.min(Math.floor((u+1)*o)+1,n)+t,{x:b,y:w}=e[p];for(h=f=-1,r=v;r<x;r++)f=.5*Math.abs((b-s)*(e[r].y-w)-(b-e[r].x)*(i-w)),f>h&&(h=f,d=e[r],m=r);a[l++]=d,p=m}return a[l++]=e[c],a}(l,u,d,r,n);break;case"min-max":h=function(e,t,n,r){let s,i,a,o,l,c,u,d,h,f,m=0,p=0;const g=[],y=t+n-1,v=e[t].x,x=e[y].x-v;for(s=t;s<t+n;++s){i=e[s],a=(i.x-v)/x*r,o=i.y;const t=0|a;if(t===l)o<h?(h=o,c=s):o>f&&(f=o,u=s),m=(p*m+i.x)/++p;else{const n=s-1;if(!mb(c)&&!mb(u)){const t=Math.min(c,u),r=Math.max(c,u);t!==d&&t!==n&&g.push({...e[t],x:m}),r!==d&&r!==n&&g.push({...e[r],x:m})}s>0&&n!==d&&g.push(e[n]),g.push(i),l=t,p=0,h=f=o,c=u=d=s}}return g}(l,u,d,r);break;default:throw new Error(`Unsupported decimation algorithm '${n.algorithm}'`)}t._decimated=h}))},destroy(e){DS(e)}};function FS(e,t,n,r){if(r)return;let s=t[e],i=n[e];return"angle"===e&&(s=nw(s),i=nw(i)),{property:e,start:s,end:i}}function VS(e,t,n){for(;t>e;t--){const e=n[t];if(!isNaN(e.x)&&!isNaN(e.y))break}return t}function zS(e,t,n,r){return e&&t?r(e[n],t[n]):e?e[n]:t?t[n]:0}function US(e,t){let n=[],r=!1;return pb(e)?(r=!0,n=e):n=function(e,t){const{x:n=null,y:r=null}=e||{},s=t.points,i=[];return t.segments.forEach((e=>{let{start:t,end:a}=e;a=VS(t,a,s);const o=s[t],l=s[a];null!==r?(i.push({x:o.x,y:r}),i.push({x:l.x,y:r})):null!==n&&(i.push({x:n,y:o.y}),i.push({x:n,y:l.y}))})),i}(e,t),n.length?new xS({points:n,options:{tension:0},_loop:r,_fullLoop:r}):null}function BS(e){return e&&!1!==e.fill}function $S(e,t,n){let r=e[t].fill;const s=[t];let i;if(!n)return r;for(;!1!==r&&-1===s.indexOf(r);){if(!yb(r))return r;if(i=e[r],!i)return!1;if(i.visible)return r;s.push(r),r=i.fill}return!1}function HS(e,t,n){const r=function(e){const t=e.options,n=t.fill;let r=xb(n&&n.target,n);void 0===r&&(r=!!t.backgroundColor);if(!1===r||null===r)return!1;if(!0===r)return"origin";return r}(e);if(gb(r))return!isNaN(r.value)&&r;let s=parseFloat(r);return yb(s)&&Math.floor(s)===s?function(e,t,n,r){"-"!==e&&"+"!==e||(n=t+n);if(n===t||n<0||n>=r)return!1;return n}(r[0],t,s,n):["origin","start","end","stack","shape"].indexOf(r)>=0&&r}function WS(e,t,n){const r=[];for(let s=0;s<n.length;s++){const i=n[s],{first:a,last:o,point:l}=qS(i,t,"x");if(!(!l||a&&o))if(a)r.unshift(l);else if(e.push(l),!o)break}e.push(...r)}function qS(e,t,n){const r=e.interpolate(t,n);if(!r)return{};const s=r[n],i=e.segments,a=e.points;let o=!1,l=!1;for(let c=0;c<i.length;c++){const e=i[c],t=a[e.start][n],r=a[e.end][n];if(iw(s,t,r)){o=s===t,l=s===r;break}}return{first:o,last:l,point:r}}class KS{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,t,n){const{x:r,y:s,radius:i}=this;return t=t||{start:0,end:Ob},e.arc(r,s,i,t.end,t.start,!0),!n.bounds}interpolate(e){const{x:t,y:n,radius:r}=this,s=e.angle;return{x:t+Math.cos(s)*r,y:n+Math.sin(s)*r,angle:s}}}function GS(e){const{chart:t,fill:n,line:r}=e;if(yb(n))return function(e,t){const n=e.getDatasetMeta(t),r=n&&e.isDatasetVisible(t);return r?n.dataset:null}(t,n);if("stack"===n)return function(e){const{scale:t,index:n,line:r}=e,s=[],i=r.segments,a=r.points,o=function(e,t){const n=[],r=e.getMatchingVisibleMetas("line");for(let s=0;s<r.length;s++){const e=r[s];if(e.index===t)break;e.hidden||n.unshift(e.dataset)}return n}(t,n);o.push(US({x:null,y:t.bottom},r));for(let l=0;l<i.length;l++){const e=i[l];for(let t=e.start;t<=e.end;t++)WS(s,a[t],o)}return new xS({points:s,options:{}})}(e);if("shape"===n)return!0;const s=function(e){const t=e.scale||{};if(t.getPointPositionForValue)return function(e){const{scale:t,fill:n}=e,r=t.options,s=t.getLabels().length,i=r.reverse?t.max:t.min,a=function(e,t,n){let r;return r="start"===e?n:"end"===e?t.options.reverse?t.min:t.max:gb(e)?e.value:t.getBaseValue(),r}(n,t,i),o=[];if(r.grid.circular){const e=t.getPointPositionForValue(0,i);return new KS({x:e.x,y:e.y,radius:t.getDistanceFromCenterForValue(a)})}for(let l=0;l<s;++l)o.push(t.getPointPositionForValue(l,a));return o}(e);return function(e){const{scale:t={},fill:n}=e,r=function(e,t){let n=null;return"start"===e?n=t.bottom:"end"===e?n=t.top:gb(e)?n=t.getPixelForValue(e.value):t.getBasePixel&&(n=t.getBasePixel()),n}(n,t);if(yb(r)){const e=t.isHorizontal();return{x:e?r:null,y:e?null:r}}return null}(e)}(e);return s instanceof KS?s:US(s,r)}function YS(e,t,n){const r=GS(t),{chart:s,index:i,line:a,scale:o,axis:l}=t,c=a.options,u=c.fill,d=c.backgroundColor,{above:h=d,below:f=d}=u||{},m=s.getDatasetMeta(i),p=nk(s,m);r&&a.points.length&&(Hw(e,n),function(e,t){const{line:n,target:r,above:s,below:i,area:a,scale:o,clip:l}=t,c=n._loop?"angle":t.axis;e.save(),"x"===c&&i!==s&&(QS(e,r,a.top),XS(e,{line:n,target:r,color:s,scale:o,property:c,clip:l}),e.restore(),e.save(),QS(e,r,a.bottom));XS(e,{line:n,target:r,color:i,scale:o,property:c,clip:l}),e.restore()}(e,{line:a,target:r,above:h,below:f,area:n,scale:o,axis:l,clip:p}),Ww(e))}function QS(e,t,n){const{segments:r,points:s}=t;let i=!0,a=!1;e.beginPath();for(const o of r){const{start:r,end:l}=o,c=s[r],u=s[VS(r,l,s)];i?(e.moveTo(c.x,c.y),i=!1):(e.lineTo(c.x,n),e.lineTo(c.x,c.y)),a=!!t.pathSegment(e,o,{move:a}),a?e.closePath():e.lineTo(u.x,n)}e.lineTo(t.first().x,n),e.closePath(),e.clip()}function XS(e,t){const{line:n,target:r,property:s,color:i,scale:a,clip:o}=t,l=function(e,t,n){const r=e.segments,s=e.points,i=t.points,a=[];for(const o of r){let{start:e,end:r}=o;r=VS(e,r,s);const l=FS(n,s[e],s[r],o.loop);if(!t.segments){a.push({source:o,target:l,start:s[e],end:s[r]});continue}const c=X_(t,l);for(const t of c){const e=FS(n,i[t.start],i[t.end],t.loop),r=Q_(o,s,e);for(const s of r)a.push({source:s,target:t,start:{[n]:zS(l,e,"start",Math.max)},end:{[n]:zS(l,e,"end",Math.min)}})}}return a}(n,r,s);for(const{source:c,target:u,start:d,end:h}of l){const{style:{backgroundColor:t=i}={}}=c,l=!0!==r;e.save(),e.fillStyle=t,JS(e,a,o,l&&FS(s,d,h)),e.beginPath();const f=!!n.pathSegment(e,c);let m;if(l){f?e.closePath():ZS(e,r,h,s);const t=!!r.pathSegment(e,u,{move:f,reverse:!0});m=f&&t,m||ZS(e,r,d,s)}e.closePath(),e.fill(m?"evenodd":"nonzero"),e.restore()}}function JS(e,t,n,r){const s=t.chart.chartArea,{property:i,start:a,end:o}=r||{};if("x"===i||"y"===i){let t,r,l,c;"x"===i?(t=a,r=s.top,l=o,c=s.bottom):(t=s.left,r=a,l=s.right,c=o),e.beginPath(),n&&(t=Math.max(t,n.left),l=Math.min(l,n.right),r=Math.max(r,n.top),c=Math.min(c,n.bottom)),e.rect(t,r,l-t,c-r),e.clip()}}function ZS(e,t,n,r){const s=t.interpolate(n,r);s&&e.lineTo(s.x,s.y)}var eE={id:"filler",afterDatasetsUpdate(e,t,n){const r=(e.data.datasets||[]).length,s=[];let i,a,o,l;for(a=0;a<r;++a)i=e.getDatasetMeta(a),o=i.dataset,l=null,o&&o.options&&o instanceof xS&&(l={visible:e.isDatasetVisible(a),index:a,fill:HS(o,a,r),chart:e,axis:i.controller.options.indexAxis,scale:i.vScale,line:o}),i.$filler=l,s.push(l);for(a=0;a<r;++a)l=s[a],l&&!1!==l.fill&&(l.fill=$S(s,a,n.propagate))},beforeDraw(e,t,n){const r="beforeDraw"===n.drawTime,s=e.getSortedVisibleDatasetMetas(),i=e.chartArea;for(let a=s.length-1;a>=0;--a){const t=s[a].$filler;t&&(t.line.updateControlPoints(i,t.axis),r&&t.fill&&YS(e.ctx,t,i))}},beforeDatasetsDraw(e,t,n){if("beforeDatasetsDraw"!==n.drawTime)return;const r=e.getSortedVisibleDatasetMetas();for(let s=r.length-1;s>=0;--s){const t=r[s].$filler;BS(t)&&YS(e.ctx,t,e.chartArea)}},beforeDatasetDraw(e,t,n){const r=t.meta.$filler;BS(r)&&"beforeDatasetDraw"===n.drawTime&&YS(e.ctx,r,e.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const tE=(e,t)=>{let{boxHeight:n=t,boxWidth:r=t}=e;return e.usePointStyle&&(n=Math.min(n,t),r=e.pointStyleWidth||Math.min(r,t)),{boxWidth:r,boxHeight:n,itemHeight:Math.max(t,n)}};class nE extends xN{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,n){this.maxWidth=e,this.maxHeight=t,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let t=wb(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter((t=>e.filter(t,this.chart.data)))),e.sort&&(t=t.sort(((t,n)=>e.sort(t,n,this.chart.data)))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){const{options:e,ctx:t}=this;if(!e.display)return void(this.width=this.height=0);const n=e.labels,r=a_(n.font),s=r.size,i=this._computeTitleHeight(),{boxWidth:a,itemHeight:o}=tE(n,s);let l,c;t.font=r.string,this.isHorizontal()?(l=this.maxWidth,c=this._fitRows(i,s,a,o)+10):(c=this.maxHeight,l=this._fitCols(i,r,a,o)+10),this.width=Math.min(l,e.maxWidth||this.maxWidth),this.height=Math.min(c,e.maxHeight||this.maxHeight)}_fitRows(e,t,n,r){const{ctx:s,maxWidth:i,options:{labels:{padding:a}}}=this,o=this.legendHitBoxes=[],l=this.lineWidths=[0],c=r+a;let u=e;s.textAlign="left",s.textBaseline="middle";let d=-1,h=-c;return this.legendItems.forEach(((e,f)=>{const m=n+t/2+s.measureText(e.text).width;(0===f||l[l.length-1]+m+2*a>i)&&(u+=c,l[l.length-(f>0?0:1)]=0,h+=c,d++),o[f]={left:0,top:h,row:d,width:m,height:r},l[l.length-1]+=m+a})),u}_fitCols(e,t,n,r){const{ctx:s,maxHeight:i,options:{labels:{padding:a}}}=this,o=this.legendHitBoxes=[],l=this.columnSizes=[],c=i-e;let u=a,d=0,h=0,f=0,m=0;return this.legendItems.forEach(((e,i)=>{const{itemWidth:p,itemHeight:g}=function(e,t,n,r,s){const i=function(e,t,n,r){let s=e.text;s&&"string"!==typeof s&&(s=s.reduce(((e,t)=>e.length>t.length?e:t)));return t+n.size/2+r.measureText(s).width}(r,e,t,n),a=function(e,t,n){let r=e;"string"!==typeof t.text&&(r=rE(t,n));return r}(s,r,t.lineHeight);return{itemWidth:i,itemHeight:a}}(n,t,s,e,r);i>0&&h+g+2*a>c&&(u+=d+a,l.push({width:d,height:h}),f+=d+a,m++,d=h=0),o[i]={left:f,top:h,col:m,width:p,height:g},d=Math.max(d,p),h+=g+a})),u+=d,l.push({width:d,height:h}),u}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:n,labels:{padding:r},rtl:s}}=this,i=W_(s,this.left,this.width);if(this.isHorizontal()){let s=0,a=pw(n,this.left+r,this.right-this.lineWidths[s]);for(const o of t)s!==o.row&&(s=o.row,a=pw(n,this.left+r,this.right-this.lineWidths[s])),o.top+=this.top+e+r,o.left=i.leftForLtr(i.x(a),o.width),a+=o.width+r}else{let s=0,a=pw(n,this.top+e+r,this.bottom-this.columnSizes[s].height);for(const o of t)o.col!==s&&(s=o.col,a=pw(n,this.top+e+r,this.bottom-this.columnSizes[s].height)),o.top=a,o.left+=this.left+r,o.left=i.leftForLtr(i.x(o.left),o.width),a+=o.height+r}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){const e=this.ctx;Hw(e,this),this._draw(),Ww(e)}}_draw(){const{options:e,columnSizes:t,lineWidths:n,ctx:r}=this,{align:s,labels:i}=e,a=Dw.color,o=W_(e.rtl,this.left,this.width),l=a_(i.font),{padding:c}=i,u=l.size,d=u/2;let h;this.drawTitle(),r.textAlign=o.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=l.string;const{boxWidth:f,boxHeight:m,itemHeight:p}=tE(i,u),g=this.isHorizontal(),y=this._computeTitleHeight();h=g?{x:pw(s,this.left+c,this.right-n[0]),y:this.top+c+y,line:0}:{x:this.left+c,y:pw(s,this.top+y+c,this.bottom-t[0].height),line:0},q_(this.ctx,e.textDirection);const v=p+c;this.legendItems.forEach(((x,b)=>{r.strokeStyle=x.fontColor,r.fillStyle=x.fontColor;const w=r.measureText(x.text).width,_=o.textAlign(x.textAlign||(x.textAlign=i.textAlign)),k=f+d+w;let N=h.x,S=h.y;o.setWidth(this.width),g?b>0&&N+k+c>this.right&&(S=h.y+=v,h.line++,N=h.x=pw(s,this.left+c,this.right-n[h.line])):b>0&&S+v>this.bottom&&(N=h.x=N+t[h.line].width+c,h.line++,S=h.y=pw(s,this.top+y+c,this.bottom-t[h.line].height));if(function(e,t,n){if(isNaN(f)||f<=0||isNaN(m)||m<0)return;r.save();const s=xb(n.lineWidth,1);if(r.fillStyle=xb(n.fillStyle,a),r.lineCap=xb(n.lineCap,"butt"),r.lineDashOffset=xb(n.lineDashOffset,0),r.lineJoin=xb(n.lineJoin,"miter"),r.lineWidth=s,r.strokeStyle=xb(n.strokeStyle,a),r.setLineDash(xb(n.lineDash,[])),i.usePointStyle){const a={radius:m*Math.SQRT2/2,pointStyle:n.pointStyle,rotation:n.rotation,borderWidth:s},l=o.xPlus(e,f/2);Bw(r,a,l,t+d,i.pointStyleWidth&&f)}else{const i=t+Math.max((u-m)/2,0),a=o.leftForLtr(e,f),l=s_(n.borderRadius);r.beginPath(),Object.values(l).some((e=>0!==e))?Xw(r,{x:a,y:i,w:f,h:m,radius:l}):r.rect(a,i,f,m),r.fill(),0!==s&&r.stroke()}r.restore()}(o.x(N),S,x),N=((e,t,n,r)=>e===(r?"left":"right")?n:"center"===e?(t+n)/2:t)(_,N+f+d,g?N+k:this.right,e.rtl),function(e,t,n){Qw(r,n.text,e,t+p/2,l,{strikethrough:n.hidden,textAlign:o.textAlign(n.textAlign)})}(o.x(N),S,x),g)h.x+=k+c;else if("string"!==typeof x.text){const e=l.lineHeight;h.y+=rE(x,e)+c}else h.y+=v})),K_(this.ctx,e.textDirection)}drawTitle(){const e=this.options,t=e.title,n=a_(t.font),r=i_(t.padding);if(!t.display)return;const s=W_(e.rtl,this.left,this.width),i=this.ctx,a=t.position,o=n.size/2,l=r.top+o;let c,u=this.left,d=this.width;if(this.isHorizontal())d=Math.max(...this.lineWidths),c=this.top+l,u=pw(e.align,u,this.right-d);else{const t=this.columnSizes.reduce(((e,t)=>Math.max(e,t.height)),0);c=l+pw(e.align,this.top,this.bottom-t-e.labels.padding-this._computeTitleHeight())}const h=pw(a,u,u+d);i.textAlign=s.textAlign(mw(a)),i.textBaseline="middle",i.strokeStyle=t.color,i.fillStyle=t.color,i.font=n.string,Qw(i,t.text,h,c,n)}_computeTitleHeight(){const e=this.options.title,t=a_(e.font),n=i_(e.padding);return e.display?t.lineHeight+n.height:0}_getLegendItemAt(e,t){let n,r,s;if(iw(e,this.left,this.right)&&iw(t,this.top,this.bottom))for(s=this.legendHitBoxes,n=0;n<s.length;++n)if(r=s[n],iw(e,r.left,r.left+r.width)&&iw(t,r.top,r.top+r.height))return this.legendItems[n];return null}handleEvent(e){const t=this.options;if(!function(e,t){if(("mousemove"===e||"mouseout"===e)&&(t.onHover||t.onLeave))return!0;if(t.onClick&&("click"===e||"mouseup"===e))return!0;return!1}(e.type,t))return;const n=this._getLegendItemAt(e.x,e.y);if("mousemove"===e.type||"mouseout"===e.type){const r=this._hoveredItem,s=((e,t)=>null!==e&&null!==t&&e.datasetIndex===t.datasetIndex&&e.index===t.index)(r,n);r&&!s&&wb(t.onLeave,[e,r,this],this),this._hoveredItem=n,n&&!s&&wb(t.onHover,[e,n,this],this)}else n&&wb(t.onClick,[e,n,this],this)}}function rE(e,t){return t*(e.text?e.text.length:0)}var sE={id:"legend",_element:nE,start(e,t,n){const r=e.legend=new nE({ctx:e.ctx,options:n,chart:e});tN.configure(e,r,n),tN.addBox(e,r)},stop(e){tN.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,n){const r=e.legend;tN.configure(e,r,n),r.options=n},afterUpdate(e){const t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,n){const r=t.datasetIndex,s=n.chart;s.isDatasetVisible(r)?(s.hide(r),t.hidden=!0):(s.show(r),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const t=e.data.datasets,{labels:{usePointStyle:n,pointStyle:r,textAlign:s,color:i,useBorderRadius:a,borderRadius:o}}=e.legend.options;return e._getSortedDatasetMetas().map((e=>{const l=e.controller.getStyle(n?0:void 0),c=i_(l.borderWidth);return{text:t[e.index].label,fillStyle:l.backgroundColor,fontColor:i,hidden:!e.visible,lineCap:l.borderCapStyle,lineDash:l.borderDash,lineDashOffset:l.borderDashOffset,lineJoin:l.borderJoinStyle,lineWidth:(c.width+c.height)/4,strokeStyle:l.borderColor,pointStyle:r||l.pointStyle,rotation:l.rotation,textAlign:s||l.textAlign,borderRadius:a&&(o||l.borderRadius),datasetIndex:e.index}}),this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};class iE extends xN{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t){const n=this.options;if(this.left=0,this.top=0,!n.display)return void(this.width=this.height=this.right=this.bottom=0);this.width=this.right=e,this.height=this.bottom=t;const r=pb(n.text)?n.text.length:1;this._padding=i_(n.padding);const s=r*a_(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){const e=this.options.position;return"top"===e||"bottom"===e}_drawArgs(e){const{top:t,left:n,bottom:r,right:s,options:i}=this,a=i.align;let o,l,c,u=0;return this.isHorizontal()?(l=pw(a,n,s),c=t+e,o=s-n):("left"===i.position?(l=n+e,c=pw(a,r,t),u=-.5*Db):(l=s-e,c=pw(a,t,r),u=.5*Db),o=r-t),{titleX:l,titleY:c,maxWidth:o,rotation:u}}draw(){const e=this.ctx,t=this.options;if(!t.display)return;const n=a_(t.font),r=n.lineHeight/2+this._padding.top,{titleX:s,titleY:i,maxWidth:a,rotation:o}=this._drawArgs(r);Qw(e,t.text,0,0,n,{color:t.color,maxWidth:a,rotation:o,textAlign:mw(t.align),textBaseline:"middle",translation:[s,i]})}}var aE={id:"title",_element:iE,start(e,t,n){!function(e,t){const n=new iE({ctx:e.ctx,options:t,chart:e});tN.configure(e,n,t),tN.addBox(e,n),e.titleBlock=n}(e,n)},stop(e){const t=e.titleBlock;tN.removeBox(e,t),delete e.titleBlock},beforeUpdate(e,t,n){const r=e.titleBlock;tN.configure(e,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const oE=new WeakMap;var lE={id:"subtitle",start(e,t,n){const r=new iE({ctx:e.ctx,options:n,chart:e});tN.configure(e,r,n),tN.addBox(e,r),oE.set(e,r)},stop(e){tN.removeBox(e,oE.get(e)),oE.delete(e)},beforeUpdate(e,t,n){const r=oE.get(e);tN.configure(e,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const cE={average(e){if(!e.length)return!1;let t,n,r=new Set,s=0,i=0;for(t=0,n=e.length;t<n;++t){const n=e[t].element;if(n&&n.hasValue()){const e=n.tooltipPosition();r.add(e.x),s+=e.y,++i}}if(0===i||0===r.size)return!1;return{x:[...r].reduce(((e,t)=>e+t))/r.size,y:s/i}},nearest(e,t){if(!e.length)return!1;let n,r,s,i=t.x,a=t.y,o=Number.POSITIVE_INFINITY;for(n=0,r=e.length;n<r;++n){const r=e[n].element;if(r&&r.hasValue()){const e=ew(t,r.getCenterPoint());e<o&&(o=e,s=r)}}if(s){const e=s.tooltipPosition();i=e.x,a=e.y}return{x:i,y:a}}};function uE(e,t){return t&&(pb(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function dE(e){return("string"===typeof e||e instanceof String)&&e.indexOf("\n")>-1?e.split("\n"):e}function hE(e,t){const{element:n,datasetIndex:r,index:s}=t,i=e.getDatasetMeta(r).controller,{label:a,value:o}=i.getLabelAndValue(s);return{chart:e,label:a,parsed:i.getParsed(s),raw:e.data.datasets[r].data[s],formattedValue:o,dataset:i.getDataset(),dataIndex:s,datasetIndex:r,element:n}}function fE(e,t){const n=e.chart.ctx,{body:r,footer:s,title:i}=e,{boxWidth:a,boxHeight:o}=t,l=a_(t.bodyFont),c=a_(t.titleFont),u=a_(t.footerFont),d=i.length,h=s.length,f=r.length,m=i_(t.padding);let p=m.height,g=0,y=r.reduce(((e,t)=>e+t.before.length+t.lines.length+t.after.length),0);if(y+=e.beforeBody.length+e.afterBody.length,d&&(p+=d*c.lineHeight+(d-1)*t.titleSpacing+t.titleMarginBottom),y){p+=f*(t.displayColors?Math.max(o,l.lineHeight):l.lineHeight)+(y-f)*l.lineHeight+(y-1)*t.bodySpacing}h&&(p+=t.footerMarginTop+h*u.lineHeight+(h-1)*t.footerSpacing);let v=0;const x=function(e){g=Math.max(g,n.measureText(e).width+v)};return n.save(),n.font=c.string,_b(e.title,x),n.font=l.string,_b(e.beforeBody.concat(e.afterBody),x),v=t.displayColors?a+2+t.boxPadding:0,_b(r,(e=>{_b(e.before,x),_b(e.lines,x),_b(e.after,x)})),v=0,n.font=u.string,_b(e.footer,x),n.restore(),g+=m.width,{width:g,height:p}}function mE(e,t,n,r){const{x:s,width:i}=n,{width:a,chartArea:{left:o,right:l}}=e;let c="center";return"center"===r?c=s<=(o+l)/2?"left":"right":s<=i/2?c="left":s>=a-i/2&&(c="right"),function(e,t,n,r){const{x:s,width:i}=r,a=n.caretSize+n.caretPadding;return"left"===e&&s+i+a>t.width||"right"===e&&s-i-a<0||void 0}(c,e,t,n)&&(c="center"),c}function pE(e,t,n){const r=n.yAlign||t.yAlign||function(e,t){const{y:n,height:r}=t;return n<r/2?"top":n>e.height-r/2?"bottom":"center"}(e,n);return{xAlign:n.xAlign||t.xAlign||mE(e,t,n,r),yAlign:r}}function gE(e,t,n,r){const{caretSize:s,caretPadding:i,cornerRadius:a}=e,{xAlign:o,yAlign:l}=n,c=s+i,{topLeft:u,topRight:d,bottomLeft:h,bottomRight:f}=s_(a);let m=function(e,t){let{x:n,width:r}=e;return"right"===t?n-=r:"center"===t&&(n-=r/2),n}(t,o);const p=function(e,t,n){let{y:r,height:s}=e;return"top"===t?r+=n:r-="bottom"===t?s+n:s/2,r}(t,l,c);return"center"===l?"left"===o?m+=c:"right"===o&&(m-=c):"left"===o?m-=Math.max(u,h)+s:"right"===o&&(m+=Math.max(d,f)+s),{x:sw(m,0,r.width-t.width),y:sw(p,0,r.height-t.height)}}function yE(e,t,n){const r=i_(n.padding);return"center"===t?e.x+e.width/2:"right"===t?e.x+e.width-r.right:e.x+r.left}function vE(e){return uE([],dE(e))}function xE(e,t){const n=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return n?e.override(n):e}const bE={beforeTitle:hb,title(e){if(e.length>0){const t=e[0],n=t.chart.data.labels,r=n?n.length:0;if(this&&this.options&&"dataset"===this.options.mode)return t.dataset.label||"";if(t.label)return t.label;if(r>0&&t.dataIndex<r)return n[t.dataIndex]}return""},afterTitle:hb,beforeBody:hb,beforeLabel:hb,label(e){if(this&&this.options&&"dataset"===this.options.mode)return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const n=e.formattedValue;return mb(n)||(t+=n),t},labelColor(e){const t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:hb,afterBody:hb,beforeFooter:hb,footer:hb,afterFooter:hb};function wE(e,t,n,r){const s=e[t].call(n,r);return"undefined"===typeof s?bE[t].call(n,r):s}class _E extends xN{static positioners=(()=>cE)();constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const t=this.chart,n=this.options.setContext(this.getContext()),r=n.enabled&&t.options.animation&&n.animations,s=new lk(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(s)),s}getContext(){return this.$context||(this.$context=(e=this.chart.getContext(),t=this,n=this._tooltipItems,l_(e,{tooltip:t,tooltipItems:n,type:"tooltip"})));var e,t,n}getTitle(e,t){const{callbacks:n}=t,r=wE(n,"beforeTitle",this,e),s=wE(n,"title",this,e),i=wE(n,"afterTitle",this,e);let a=[];return a=uE(a,dE(r)),a=uE(a,dE(s)),a=uE(a,dE(i)),a}getBeforeBody(e,t){return vE(wE(t.callbacks,"beforeBody",this,e))}getBody(e,t){const{callbacks:n}=t,r=[];return _b(e,(e=>{const t={before:[],lines:[],after:[]},s=xE(n,e);uE(t.before,dE(wE(s,"beforeLabel",this,e))),uE(t.lines,wE(s,"label",this,e)),uE(t.after,dE(wE(s,"afterLabel",this,e))),r.push(t)})),r}getAfterBody(e,t){return vE(wE(t.callbacks,"afterBody",this,e))}getFooter(e,t){const{callbacks:n}=t,r=wE(n,"beforeFooter",this,e),s=wE(n,"footer",this,e),i=wE(n,"afterFooter",this,e);let a=[];return a=uE(a,dE(r)),a=uE(a,dE(s)),a=uE(a,dE(i)),a}_createItems(e){const t=this._active,n=this.chart.data,r=[],s=[],i=[];let a,o,l=[];for(a=0,o=t.length;a<o;++a)l.push(hE(this.chart,t[a]));return e.filter&&(l=l.filter(((t,r,s)=>e.filter(t,r,s,n)))),e.itemSort&&(l=l.sort(((t,r)=>e.itemSort(t,r,n)))),_b(l,(t=>{const n=xE(e.callbacks,t);r.push(wE(n,"labelColor",this,t)),s.push(wE(n,"labelPointStyle",this,t)),i.push(wE(n,"labelTextColor",this,t))})),this.labelColors=r,this.labelPointStyles=s,this.labelTextColors=i,this.dataPoints=l,l}update(e,t){const n=this.options.setContext(this.getContext()),r=this._active;let s,i=[];if(r.length){const e=cE[n.position].call(this,r,this._eventPosition);i=this._createItems(n),this.title=this.getTitle(i,n),this.beforeBody=this.getBeforeBody(i,n),this.body=this.getBody(i,n),this.afterBody=this.getAfterBody(i,n),this.footer=this.getFooter(i,n);const t=this._size=fE(this,n),a=Object.assign({},e,t),o=pE(this.chart,n,a),l=gE(n,a,o,this.chart);this.xAlign=o.xAlign,this.yAlign=o.yAlign,s={opacity:1,x:l.x,y:l.y,width:t.width,height:t.height,caretX:e.x,caretY:e.y}}else 0!==this.opacity&&(s={opacity:0});this._tooltipItems=i,this.$context=void 0,s&&this._resolveAnimations().update(this,s),e&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:t})}drawCaret(e,t,n,r){const s=this.getCaretPosition(e,n,r);t.lineTo(s.x1,s.y1),t.lineTo(s.x2,s.y2),t.lineTo(s.x3,s.y3)}getCaretPosition(e,t,n){const{xAlign:r,yAlign:s}=this,{caretSize:i,cornerRadius:a}=n,{topLeft:o,topRight:l,bottomLeft:c,bottomRight:u}=s_(a),{x:d,y:h}=e,{width:f,height:m}=t;let p,g,y,v,x,b;return"center"===s?(x=h+m/2,"left"===r?(p=d,g=p-i,v=x+i,b=x-i):(p=d+f,g=p+i,v=x-i,b=x+i),y=p):(g="left"===r?d+Math.max(o,c)+i:"right"===r?d+f-Math.max(l,u)-i:this.caretX,"top"===s?(v=h,x=v-i,p=g-i,y=g+i):(v=h+m,x=v+i,p=g+i,y=g-i),b=v),{x1:p,x2:g,x3:y,y1:v,y2:x,y3:b}}drawTitle(e,t,n){const r=this.title,s=r.length;let i,a,o;if(s){const l=W_(n.rtl,this.x,this.width);for(e.x=yE(this,n.titleAlign,n),t.textAlign=l.textAlign(n.titleAlign),t.textBaseline="middle",i=a_(n.titleFont),a=n.titleSpacing,t.fillStyle=n.titleColor,t.font=i.string,o=0;o<s;++o)t.fillText(r[o],l.x(e.x),e.y+i.lineHeight/2),e.y+=i.lineHeight+a,o+1===s&&(e.y+=n.titleMarginBottom-a)}}_drawColorBox(e,t,n,r,s){const i=this.labelColors[n],a=this.labelPointStyles[n],{boxHeight:o,boxWidth:l}=s,c=a_(s.bodyFont),u=yE(this,"left",s),d=r.x(u),h=o<c.lineHeight?(c.lineHeight-o)/2:0,f=t.y+h;if(s.usePointStyle){const t={radius:Math.min(l,o)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},n=r.leftForLtr(d,l)+l/2,c=f+o/2;e.strokeStyle=s.multiKeyBackground,e.fillStyle=s.multiKeyBackground,Uw(e,t,n,c),e.strokeStyle=i.borderColor,e.fillStyle=i.backgroundColor,Uw(e,t,n,c)}else{e.lineWidth=gb(i.borderWidth)?Math.max(...Object.values(i.borderWidth)):i.borderWidth||1,e.strokeStyle=i.borderColor,e.setLineDash(i.borderDash||[]),e.lineDashOffset=i.borderDashOffset||0;const t=r.leftForLtr(d,l),n=r.leftForLtr(r.xPlus(d,1),l-2),a=s_(i.borderRadius);Object.values(a).some((e=>0!==e))?(e.beginPath(),e.fillStyle=s.multiKeyBackground,Xw(e,{x:t,y:f,w:l,h:o,radius:a}),e.fill(),e.stroke(),e.fillStyle=i.backgroundColor,e.beginPath(),Xw(e,{x:n,y:f+1,w:l-2,h:o-2,radius:a}),e.fill()):(e.fillStyle=s.multiKeyBackground,e.fillRect(t,f,l,o),e.strokeRect(t,f,l,o),e.fillStyle=i.backgroundColor,e.fillRect(n,f+1,l-2,o-2))}e.fillStyle=this.labelTextColors[n]}drawBody(e,t,n){const{body:r}=this,{bodySpacing:s,bodyAlign:i,displayColors:a,boxHeight:o,boxWidth:l,boxPadding:c}=n,u=a_(n.bodyFont);let d=u.lineHeight,h=0;const f=W_(n.rtl,this.x,this.width),m=function(n){t.fillText(n,f.x(e.x+h),e.y+d/2),e.y+=d+s},p=f.textAlign(i);let g,y,v,x,b,w,_;for(t.textAlign=i,t.textBaseline="middle",t.font=u.string,e.x=yE(this,p,n),t.fillStyle=n.bodyColor,_b(this.beforeBody,m),h=a&&"right"!==p?"center"===i?l/2+c:l+2+c:0,x=0,w=r.length;x<w;++x){for(g=r[x],y=this.labelTextColors[x],t.fillStyle=y,_b(g.before,m),v=g.lines,a&&v.length&&(this._drawColorBox(t,e,x,f,n),d=Math.max(u.lineHeight,o)),b=0,_=v.length;b<_;++b)m(v[b]),d=u.lineHeight;_b(g.after,m)}h=0,d=u.lineHeight,_b(this.afterBody,m),e.y-=s}drawFooter(e,t,n){const r=this.footer,s=r.length;let i,a;if(s){const o=W_(n.rtl,this.x,this.width);for(e.x=yE(this,n.footerAlign,n),e.y+=n.footerMarginTop,t.textAlign=o.textAlign(n.footerAlign),t.textBaseline="middle",i=a_(n.footerFont),t.fillStyle=n.footerColor,t.font=i.string,a=0;a<s;++a)t.fillText(r[a],o.x(e.x),e.y+i.lineHeight/2),e.y+=i.lineHeight+n.footerSpacing}}drawBackground(e,t,n,r){const{xAlign:s,yAlign:i}=this,{x:a,y:o}=e,{width:l,height:c}=n,{topLeft:u,topRight:d,bottomLeft:h,bottomRight:f}=s_(r.cornerRadius);t.fillStyle=r.backgroundColor,t.strokeStyle=r.borderColor,t.lineWidth=r.borderWidth,t.beginPath(),t.moveTo(a+u,o),"top"===i&&this.drawCaret(e,t,n,r),t.lineTo(a+l-d,o),t.quadraticCurveTo(a+l,o,a+l,o+d),"center"===i&&"right"===s&&this.drawCaret(e,t,n,r),t.lineTo(a+l,o+c-f),t.quadraticCurveTo(a+l,o+c,a+l-f,o+c),"bottom"===i&&this.drawCaret(e,t,n,r),t.lineTo(a+h,o+c),t.quadraticCurveTo(a,o+c,a,o+c-h),"center"===i&&"left"===s&&this.drawCaret(e,t,n,r),t.lineTo(a,o+u),t.quadraticCurveTo(a,o,a+u,o),t.closePath(),t.fill(),r.borderWidth>0&&t.stroke()}_updateAnimationTarget(e){const t=this.chart,n=this.$animations,r=n&&n.x,s=n&&n.y;if(r||s){const n=cE[e.position].call(this,this._active,this._eventPosition);if(!n)return;const i=this._size=fE(this,e),a=Object.assign({},n,this._size),o=pE(t,e,a),l=gE(e,a,o,t);r._to===l.x&&s._to===l.y||(this.xAlign=o.xAlign,this.yAlign=o.yAlign,this.width=i.width,this.height=i.height,this.caretX=n.x,this.caretY=n.y,this._resolveAnimations().update(this,l))}}_willRender(){return!!this.opacity}draw(e){const t=this.options.setContext(this.getContext());let n=this.opacity;if(!n)return;this._updateAnimationTarget(t);const r={width:this.width,height:this.height},s={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;const i=i_(t.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;t.enabled&&a&&(e.save(),e.globalAlpha=n,this.drawBackground(s,e,r,t),q_(e,t.textDirection),s.y+=i.top,this.drawTitle(s,e,t),this.drawBody(s,e,t),this.drawFooter(s,e,t),K_(e,t.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,t){const n=this._active,r=e.map((e=>{let{datasetIndex:t,index:n}=e;const r=this.chart.getDatasetMeta(t);if(!r)throw new Error("Cannot find a dataset at index "+t);return{datasetIndex:t,element:r.data[n],index:n}})),s=!kb(n,r),i=this._positionChanged(r,t);(s||i)&&(this._active=r,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,s=this._active||[],i=this._getActiveElements(e,s,t,n),a=this._positionChanged(i,e),o=t||!kb(i,s)||a;return o&&(this._active=i,(r.enabled||r.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),o}_getActiveElements(e,t,n,r){const s=this.options;if("mouseout"===e.type)return[];if(!r)return t.filter((e=>this.chart.data.datasets[e.datasetIndex]&&void 0!==this.chart.getDatasetMeta(e.datasetIndex).controller.getParsed(e.index)));const i=this.chart.getElementsAtEventForMode(e,s.mode,s,n);return s.reverse&&i.reverse(),i}_positionChanged(e,t){const{caretX:n,caretY:r,options:s}=this,i=cE[s.position].call(this,e,t);return!1!==i&&(n!==i.x||r!==i.y)}}var kE={id:"tooltip",_element:_E,positioners:cE,afterInit(e,t,n){n&&(e.tooltip=new _E({chart:e,options:n}))},beforeUpdate(e,t,n){e.tooltip&&e.tooltip.initialize(n)},reset(e,t,n){e.tooltip&&e.tooltip.initialize(n)},afterDraw(e){const t=e.tooltip;if(t&&t._willRender()){const n={tooltip:t};if(!1===e.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0}))return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",n)}},afterEvent(e,t){if(e.tooltip){const n=t.replay;e.tooltip.handleEvent(t.event,n,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:bE},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>"filter"!==e&&"itemSort"!==e&&"external"!==e,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},NE=Object.freeze({__proto__:null,Colors:RS,Decimation:OS,Filler:eE,Legend:sE,SubTitle:lE,Title:aE,Tooltip:kE});function SE(e,t,n,r){const s=e.indexOf(t);if(-1===s)return((e,t,n,r)=>("string"===typeof t?(n=e.push(t)-1,r.unshift({index:n,label:t})):isNaN(t)&&(n=null),n))(e,t,n,r);return s!==e.lastIndexOf(t)?n:s}function EE(e){const t=this.getLabels();return e>=0&&e<t.length?t[e]:e}class jE extends TN{static id="category";static defaults=(()=>({ticks:{callback:EE}}))();constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const t=this._addedLabels;if(t.length){const e=this.getLabels();for(const{index:n,label:r}of t)e[n]===r&&e.splice(n,1);this._addedLabels=[]}super.init(e)}parse(e,t){if(mb(e))return null;const n=this.getLabels();return((e,t)=>null===e?null:sw(Math.round(e),0,t))(t=isFinite(t)&&n[t]===e?t:SE(n,e,xb(t,e),this._addedLabels),n.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let{min:n,max:r}=this.getMinMax(!0);"ticks"===this.options.bounds&&(e||(n=0),t||(r=this.getLabels().length-1)),this.min=n,this.max=r}buildTicks(){const e=this.min,t=this.max,n=this.options.offset,r=[];let s=this.getLabels();s=0===e&&t===s.length-1?s:s.slice(e,t+1),this._valueRange=Math.max(s.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let i=e;i<=t;i++)r.push({value:i});return r}getLabelForValue(e){return EE.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return"number"!==typeof e&&(e=this.parse(e)),null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}function CE(e,t){const n=[],{bounds:r,step:s,min:i,max:a,precision:o,count:l,maxTicks:c,maxDigits:u,includeBounds:d}=e,h=s||1,f=c-1,{min:m,max:p}=t,g=!mb(i),y=!mb(a),v=!mb(l),x=(p-m)/(u+1);let b,w,_,k,N=Kb((p-m)/f/h)*h;if(N<1e-14&&!g&&!y)return[{value:m},{value:p}];k=Math.ceil(p/N)-Math.floor(m/N),k>f&&(N=Kb(k*N/f/h)*h),mb(o)||(b=Math.pow(10,o),N=Math.ceil(N*b)/b),"ticks"===r?(w=Math.floor(m/N)*N,_=Math.ceil(p/N)*N):(w=m,_=p),g&&y&&s&&function(e,t){const n=Math.round(e);return n-t<=e&&n+t>=e}((a-i)/s,N/1e3)?(k=Math.round(Math.min((a-i)/N,c)),N=(a-i)/k,w=i,_=a):v?(w=g?i:w,_=y?a:_,k=l-1,N=(_-w)/k):(k=(_-w)/N,k=qb(k,Math.round(k),N/1e3)?Math.round(k):Math.ceil(k));const S=Math.max(Jb(N),Jb(w));b=Math.pow(10,mb(o)?S:o),w=Math.round(w*b)/b,_=Math.round(_*b)/b;let E=0;for(g&&(d&&w!==i?(n.push({value:i}),w<i&&E++,qb(Math.round((w+E*N)*b)/b,i,TE(i,x,e))&&E++):w<i&&E++);E<k;++E){const e=Math.round((w+E*N)*b)/b;if(y&&e>a)break;n.push({value:e})}return y&&d&&_!==a?n.length&&qb(n[n.length-1].value,a,TE(a,x,e))?n[n.length-1].value=a:n.push({value:a}):y&&_!==a||n.push({value:_}),n}function TE(e,t,n){let{horizontal:r,minRotation:s}=n;const i=Qb(s),a=(r?Math.sin(i):Math.cos(i))||.001,o=.75*t*(""+e).length;return Math.min(t/a,o)}class AE extends TN{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return mb(e)||("number"===typeof e||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:t,maxDefined:n}=this.getUserBounds();let{min:r,max:s}=this;const i=e=>r=t?r:e,a=e=>s=n?s:e;if(e){const e=Wb(r),t=Wb(s);e<0&&t<0?a(0):e>0&&t>0&&i(0)}if(r===s){let t=0===s?1:Math.abs(.05*s);a(s+t),e||i(r-t)}this.min=r,this.max=s}getTickLimit(){const e=this.options.ticks;let t,{maxTicksLimit:n,stepSize:r}=e;return r?(t=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,t>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${t} ticks. Limiting to 1000.`),t=1e3)):(t=this.computeTickLimit(),n=n||11),n&&(t=Math.min(n,t)),t}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,t=e.ticks;let n=this.getTickLimit();n=Math.max(2,n);const r=CE({maxTicks:n,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:!1!==t.includeBounds},this._range||this);return"ticks"===e.bounds&&Yb(r,this,"value"),e.reverse?(r.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),r}configure(){const e=this.ticks;let t=this.min,n=this.max;if(super.configure(),this.options.offset&&e.length){const r=(n-t)/Math.max(e.length-1,1)/2;t-=r,n+=r}this._startValue=t,this._endValue=n,this._valueRange=n-t}getLabelForValue(e){return Cw(e,this.chart.options.locale,this.options.ticks.format)}}class IE extends AE{static id="linear";static defaults=(()=>({ticks:{callback:Aw.formatters.numeric}}))();determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=yb(e)?e:0,this.max=yb(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),t=e?this.width:this.height,n=Qb(this.options.ticks.minRotation),r=(e?Math.sin(n):Math.cos(n))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,s.lineHeight/r))}getPixelForValue(e){return null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}const ME=e=>Math.floor(Hb(e)),PE=(e,t)=>Math.pow(10,ME(e)+t);function RE(e){return 1===e/Math.pow(10,ME(e))}function LE(e,t,n){const r=Math.pow(10,n),s=Math.floor(e/r);return Math.ceil(t/r)-s}function DE(e,t){let{min:n,max:r}=t;n=vb(e.min,n);const s=[],i=ME(n);let a=function(e,t){let n=ME(t-e);for(;LE(e,t,n)>10;)n++;for(;LE(e,t,n)<10;)n--;return Math.min(n,ME(e))}(n,r),o=a<0?Math.pow(10,Math.abs(a)):1;const l=Math.pow(10,a),c=i>a?Math.pow(10,i):0,u=Math.round((n-c)*o)/o,d=Math.floor((n-c)/l/10)*l*10;let h=Math.floor((u-d)/Math.pow(10,a)),f=vb(e.min,Math.round((c+d+h*Math.pow(10,a))*o)/o);for(;f<r;)s.push({value:f,major:RE(f),significand:h}),h>=10?h=h<15?15:20:h++,h>=20&&(a++,h=2,o=a>=0?1:o),f=Math.round((c+d+h*Math.pow(10,a))*o)/o;const m=vb(e.max,f);return s.push({value:m,major:RE(m),significand:h}),s}class OE extends TN{static id="logarithmic";static defaults=(()=>({ticks:{callback:Aw.formatters.logarithmic,major:{enabled:!0}}}))();constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,t){const n=AE.prototype.parse.apply(this,[e,t]);if(0!==n)return yb(n)&&n>0?n:null;this._zero=!0}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=yb(e)?Math.max(0,e):null,this.max=yb(t)?Math.max(0,t):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!yb(this._userMin)&&(this.min=e===PE(this.min,0)?PE(this.min,-1):PE(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let n=this.min,r=this.max;const s=t=>n=e?n:t,i=e=>r=t?r:e;n===r&&(n<=0?(s(1),i(10)):(s(PE(n,-1)),i(PE(r,1)))),n<=0&&s(PE(r,-1)),r<=0&&i(PE(n,1)),this.min=n,this.max=r}buildTicks(){const e=this.options,t=DE({min:this._userMin,max:this._userMax},this);return"ticks"===e.bounds&&Yb(t,this,"value"),e.reverse?(t.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),t}getLabelForValue(e){return void 0===e?"0":Cw(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=Hb(e),this._valueRange=Hb(this.max)-Hb(e)}getPixelForValue(e){return void 0!==e&&0!==e||(e=this.min),null===e||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(Hb(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const t=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+t*this._valueRange)}}function FE(e){const t=e.ticks;if(t.display&&e.display){const e=i_(t.backdropPadding);return xb(t.font&&t.font.size,Dw.font.size)+e.height}return 0}function VE(e,t,n,r,s){return e===r||e===s?{start:t-n/2,end:t+n/2}:e<r||e>s?{start:t-n,end:t}:{start:t,end:t+n}}function zE(e){const t={l:e.left+e._padding.left,r:e.right-e._padding.right,t:e.top+e._padding.top,b:e.bottom-e._padding.bottom},n=Object.assign({},t),r=[],s=[],i=e._pointLabels.length,a=e.options.pointLabels,o=a.centerPointLabels?Db/i:0;for(let d=0;d<i;d++){const i=a.setContext(e.getPointLabelContext(d));s[d]=i.padding;const h=e.getPointPosition(d,e.drawingArea+s[d],o),f=a_(i.font),m=(l=e.ctx,c=f,u=pb(u=e._pointLabels[d])?u:[u],{w:Fw(l,c.string,u),h:u.length*c.lineHeight});r[d]=m;const p=nw(e.getIndexAngle(d)+o),g=Math.round(Xb(p));UE(n,t,p,VE(g,h.x,m.w,0,180),VE(g,h.y,m.h,90,270))}var l,c,u;e.setCenterPoint(t.l-n.l,n.r-t.r,t.t-n.t,n.b-t.b),e._pointLabelItems=function(e,t,n){const r=[],s=e._pointLabels.length,i=e.options,{centerPointLabels:a,display:o}=i.pointLabels,l={extra:FE(i)/2,additionalAngle:a?Db/s:0};let c;for(let u=0;u<s;u++){l.padding=n[u],l.size=t[u];const s=BE(e,u,l);r.push(s),"auto"===o&&(s.visible=$E(s,c),s.visible&&(c=s))}return r}(e,r,s)}function UE(e,t,n,r,s){const i=Math.abs(Math.sin(n)),a=Math.abs(Math.cos(n));let o=0,l=0;r.start<t.l?(o=(t.l-r.start)/i,e.l=Math.min(e.l,t.l-o)):r.end>t.r&&(o=(r.end-t.r)/i,e.r=Math.max(e.r,t.r+o)),s.start<t.t?(l=(t.t-s.start)/a,e.t=Math.min(e.t,t.t-l)):s.end>t.b&&(l=(s.end-t.b)/a,e.b=Math.max(e.b,t.b+l))}function BE(e,t,n){const r=e.drawingArea,{extra:s,additionalAngle:i,padding:a,size:o}=n,l=e.getPointPosition(t,r+s+a,i),c=Math.round(Xb(nw(l.angle+Ub))),u=function(e,t,n){90===n||270===n?e-=t/2:(n>270||n<90)&&(e-=t);return e}(l.y,o.h,c),d=function(e){if(0===e||180===e)return"center";if(e<180)return"left";return"right"}(c),h=function(e,t,n){"right"===n?e-=t:"center"===n&&(e-=t/2);return e}(l.x,o.w,d);return{visible:!0,x:l.x,y:u,textAlign:d,left:h,top:u,right:h+o.w,bottom:u+o.h}}function $E(e,t){if(!t)return!0;const{left:n,top:r,right:s,bottom:i}=e;return!($w({x:n,y:r},t)||$w({x:n,y:i},t)||$w({x:s,y:r},t)||$w({x:s,y:i},t))}function HE(e,t,n){const{left:r,top:s,right:i,bottom:a}=n,{backdropColor:o}=t;if(!mb(o)){const n=s_(t.borderRadius),l=i_(t.backdropPadding);e.fillStyle=o;const c=r-l.left,u=s-l.top,d=i-r+l.width,h=a-s+l.height;Object.values(n).some((e=>0!==e))?(e.beginPath(),Xw(e,{x:c,y:u,w:d,h:h,radius:n}),e.fill()):e.fillRect(c,u,d,h)}}function WE(e,t,n,r){const{ctx:s}=e;if(n)s.arc(e.xCenter,e.yCenter,t,0,Ob);else{let n=e.getPointPosition(0,t);s.moveTo(n.x,n.y);for(let i=1;i<r;i++)n=e.getPointPosition(i,t),s.lineTo(n.x,n.y)}}class qE extends AE{static id="radialLinear";static defaults=(()=>({display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:Aw.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:e=>e,padding:5,centerPointLabels:!1}}))();static defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"};static descriptors={angleLines:{_fallback:"grid"}};constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=i_(FE(this.options)/2),t=this.width=this.maxWidth-e.width,n=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+t/2+e.left),this.yCenter=Math.floor(this.top+n/2+e.top),this.drawingArea=Math.floor(Math.min(t,n)/2)}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!1);this.min=yb(e)&&!isNaN(e)?e:0,this.max=yb(t)&&!isNaN(t)?t:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/FE(this.options))}generateTickLabels(e){AE.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map(((e,t)=>{const n=wb(this.options.pointLabels.callback,[e,t],this);return n||0===n?n:""})).filter(((e,t)=>this.chart.getDataVisibility(t)))}fit(){const e=this.options;e.display&&e.pointLabels.display?zE(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,t,n,r){this.xCenter+=Math.floor((e-t)/2),this.yCenter+=Math.floor((n-r)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,t,n,r))}getIndexAngle(e){return nw(e*(Ob/(this._pointLabels.length||1))+Qb(this.options.startAngle||0))}getDistanceFromCenterForValue(e){if(mb(e))return NaN;const t=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*t:(e-this.min)*t}getValueForDistanceFromCenter(e){if(mb(e))return NaN;const t=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-t:this.min+t}getPointLabelContext(e){const t=this._pointLabels||[];if(e>=0&&e<t.length){const n=t[e];return function(e,t,n){return l_(e,{label:n,index:t,type:"pointLabel"})}(this.getContext(),e,n)}}getPointPosition(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const r=this.getIndexAngle(e)-Ub+n;return{x:Math.cos(r)*t+this.xCenter,y:Math.sin(r)*t+this.yCenter,angle:r}}getPointPositionForValue(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:t,top:n,right:r,bottom:s}=this._pointLabelItems[e];return{left:t,top:n,right:r,bottom:s}}drawBackground(){const{backgroundColor:e,grid:{circular:t}}=this.options;if(e){const n=this.ctx;n.save(),n.beginPath(),WE(this,this.getDistanceFromCenterForValue(this._endValue),t,this._pointLabels.length),n.closePath(),n.fillStyle=e,n.fill(),n.restore()}}drawGrid(){const e=this.ctx,t=this.options,{angleLines:n,grid:r,border:s}=t,i=this._pointLabels.length;let a,o,l;if(t.pointLabels.display&&function(e,t){const{ctx:n,options:{pointLabels:r}}=e;for(let s=t-1;s>=0;s--){const t=e._pointLabelItems[s];if(!t.visible)continue;const i=r.setContext(e.getPointLabelContext(s));HE(n,i,t);const a=a_(i.font),{x:o,y:l,textAlign:c}=t;Qw(n,e._pointLabels[s],o,l+a.lineHeight/2,a,{color:i.color,textAlign:c,textBaseline:"middle"})}}(this,i),r.display&&this.ticks.forEach(((e,t)=>{if(0!==t||0===t&&this.min<0){o=this.getDistanceFromCenterForValue(e.value);const n=this.getContext(t),a=r.setContext(n),l=s.setContext(n);!function(e,t,n,r,s){const i=e.ctx,a=t.circular,{color:o,lineWidth:l}=t;!a&&!r||!o||!l||n<0||(i.save(),i.strokeStyle=o,i.lineWidth=l,i.setLineDash(s.dash||[]),i.lineDashOffset=s.dashOffset,i.beginPath(),WE(e,n,a,r),i.closePath(),i.stroke(),i.restore())}(this,a,o,i,l)}})),n.display){for(e.save(),a=i-1;a>=0;a--){const r=n.setContext(this.getPointLabelContext(a)),{color:s,lineWidth:i}=r;i&&s&&(e.lineWidth=i,e.strokeStyle=s,e.setLineDash(r.borderDash),e.lineDashOffset=r.borderDashOffset,o=this.getDistanceFromCenterForValue(t.reverse?this.min:this.max),l=this.getPointPosition(a,o),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(l.x,l.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,t=this.options,n=t.ticks;if(!n.display)return;const r=this.getIndexAngle(0);let s,i;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(r),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach(((r,a)=>{if(0===a&&this.min>=0&&!t.reverse)return;const o=n.setContext(this.getContext(a)),l=a_(o.font);if(s=this.getDistanceFromCenterForValue(this.ticks[a].value),o.showLabelBackdrop){e.font=l.string,i=e.measureText(r.label).width,e.fillStyle=o.backdropColor;const t=i_(o.backdropPadding);e.fillRect(-i/2-t.left,-s-l.size/2-t.top,i+t.width,l.size+t.height)}Qw(e,r.label,0,-s,l,{color:o.color,strokeColor:o.textStrokeColor,strokeWidth:o.textStrokeWidth})})),e.restore()}drawTitle(){}}const KE={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},GE=Object.keys(KE);function YE(e,t){return e-t}function QE(e,t){if(mb(t))return null;const n=e._adapter,{parser:r,round:s,isoWeekday:i}=e._parseOpts;let a=t;return"function"===typeof r&&(a=r(a)),yb(a)||(a="string"===typeof r?n.parse(a,r):n.parse(a)),null===a?null:(s&&(a="week"!==s||!Gb(i)&&!0!==i?n.startOf(a,s):n.startOf(a,"isoWeek",i)),+a)}function XE(e,t,n,r){const s=GE.length;for(let i=GE.indexOf(e);i<s-1;++i){const e=KE[GE[i]],s=e.steps?e.steps:Number.MAX_SAFE_INTEGER;if(e.common&&Math.ceil((n-t)/(s*e.size))<=r)return GE[i]}return GE[s-1]}function JE(e,t,n){if(n){if(n.length){const{lo:r,hi:s}=aw(n,t);e[n[r]>=t?n[r]:n[s]]=!0}}else e[t]=!0}function ZE(e,t,n){const r=[],s={},i=t.length;let a,o;for(a=0;a<i;++a)o=t[a],s[o]=a,r.push({value:o,major:!1});return 0!==i&&n?function(e,t,n,r){const s=e._adapter,i=+s.startOf(t[0].value,r),a=t[t.length-1].value;let o,l;for(o=i;o<=a;o=+s.add(o,1,r))l=n[o],l>=0&&(t[l].major=!0);return t}(e,r,s,n):r}class ej extends TN{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=e.time||(e.time={}),r=this._adapter=new Lk(e.adapters.date);r.init(t),Cb(n.displayFormats,r.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(e),this._normalized=t.normalized}parse(e,t){return void 0===e?null:QE(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,t=this._adapter,n=e.time.unit||"day";let{min:r,max:s,minDefined:i,maxDefined:a}=this.getUserBounds();function o(e){i||isNaN(e.min)||(r=Math.min(r,e.min)),a||isNaN(e.max)||(s=Math.max(s,e.max))}i&&a||(o(this._getLabelBounds()),"ticks"===e.bounds&&"labels"===e.ticks.source||o(this.getMinMax(!1))),r=yb(r)&&!isNaN(r)?r:+t.startOf(Date.now(),n),s=yb(s)&&!isNaN(s)?s:+t.endOf(Date.now(),n)+1,this.min=Math.min(r,s-1),this.max=Math.max(r+1,s)}_getLabelBounds(){const e=this.getLabelTimestamps();let t=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return e.length&&(t=e[0],n=e[e.length-1]),{min:t,max:n}}buildTicks(){const e=this.options,t=e.time,n=e.ticks,r="labels"===n.source?this.getLabelTimestamps():this._generate();"ticks"===e.bounds&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const s=this.min,i=function(e,t,n){let r=0,s=e.length;for(;r<s&&e[r]<t;)r++;for(;s>r&&e[s-1]>n;)s--;return r>0||s<e.length?e.slice(r,s):e}(r,s,this.max);return this._unit=t.unit||(n.autoSkip?XE(t.minUnit,this.min,this.max,this._getLabelCapacity(s)):function(e,t,n,r,s){for(let i=GE.length-1;i>=GE.indexOf(n);i--){const n=GE[i];if(KE[n].common&&e._adapter.diff(s,r,n)>=t-1)return n}return GE[n?GE.indexOf(n):0]}(this,i.length,t.minUnit,this.min,this.max)),this._majorUnit=n.major.enabled&&"year"!==this._unit?function(e){for(let t=GE.indexOf(e)+1,n=GE.length;t<n;++t)if(KE[GE[t]].common)return GE[t]}(this._unit):void 0,this.initOffsets(r),e.reverse&&i.reverse(),ZE(this,i,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map((e=>+e.value)))}initOffsets(){let e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=0,s=0;this.options.offset&&n.length&&(e=this.getDecimalForValue(n[0]),r=1===n.length?1-e:(this.getDecimalForValue(n[1])-e)/2,t=this.getDecimalForValue(n[n.length-1]),s=1===n.length?t:(t-this.getDecimalForValue(n[n.length-2]))/2);const i=n.length<3?.5:.25;r=sw(r,0,i),s=sw(s,0,i),this._offsets={start:r,end:s,factor:1/(r+1+s)}}_generate(){const e=this._adapter,t=this.min,n=this.max,r=this.options,s=r.time,i=s.unit||XE(s.minUnit,t,n,this._getLabelCapacity(t)),a=xb(r.ticks.stepSize,1),o="week"===i&&s.isoWeekday,l=Gb(o)||!0===o,c={};let u,d,h=t;if(l&&(h=+e.startOf(h,"isoWeek",o)),h=+e.startOf(h,l?"day":i),e.diff(n,t,i)>1e5*a)throw new Error(t+" and "+n+" are too far apart with stepSize of "+a+" "+i);const f="data"===r.ticks.source&&this.getDataTimestamps();for(u=h,d=0;u<n;u=+e.add(u,a,i),d++)JE(c,u,f);return u!==n&&"ticks"!==r.bounds&&1!==d||JE(c,u,f),Object.keys(c).sort(YE).map((e=>+e))}getLabelForValue(e){const t=this._adapter,n=this.options.time;return n.tooltipFormat?t.format(e,n.tooltipFormat):t.format(e,n.displayFormats.datetime)}format(e,t){const n=this.options.time.displayFormats,r=this._unit,s=t||n[r];return this._adapter.format(e,s)}_tickFormatFunction(e,t,n,r){const s=this.options,i=s.ticks.callback;if(i)return wb(i,[e,t,n],this);const a=s.time.displayFormats,o=this._unit,l=this._majorUnit,c=o&&a[o],u=l&&a[l],d=n[t],h=l&&u&&d&&d.major;return this._adapter.format(e,r||(h?u:c))}generateTickLabels(e){let t,n,r;for(t=0,n=e.length;t<n;++t)r=e[t],r.label=this._tickFormatFunction(r.value,t,e)}getDecimalForValue(e){return null===e?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const t=this._offsets,n=this.getDecimalForValue(e);return this.getPixelForDecimal((t.start+n)*t.factor)}getValueForPixel(e){const t=this._offsets,n=this.getDecimalForPixel(e)/t.factor-t.end;return this.min+n*(this.max-this.min)}_getLabelSize(e){const t=this.options.ticks,n=this.ctx.measureText(e).width,r=Qb(this.isHorizontal()?t.maxRotation:t.minRotation),s=Math.cos(r),i=Math.sin(r),a=this._resolveTickFontOptions(0).size;return{w:n*s+a*i,h:n*i+a*s}}_getLabelCapacity(e){const t=this.options.time,n=t.displayFormats,r=n[t.unit]||n.millisecond,s=this._tickFormatFunction(e,0,ZE(this,[e],this._majorUnit),r),i=this._getLabelSize(s),a=Math.floor(this.isHorizontal()?this.width/i.w:this.height/i.h)-1;return a>0?a:1}getDataTimestamps(){let e,t,n=this._cache.data||[];if(n.length)return n;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(e=0,t=r.length;e<t;++e)n=n.concat(r[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(n)}getLabelTimestamps(){const e=this._cache.labels||[];let t,n;if(e.length)return e;const r=this.getLabels();for(t=0,n=r.length;t<n;++t)e.push(QE(this,r[t]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return dw(e.sort(YE))}}function tj(e,t,n){let r,s,i,a,o=0,l=e.length-1;n?(t>=e[o].pos&&t<=e[l].pos&&({lo:o,hi:l}=ow(e,"pos",t)),({pos:r,time:i}=e[o]),({pos:s,time:a}=e[l])):(t>=e[o].time&&t<=e[l].time&&({lo:o,hi:l}=ow(e,"time",t)),({time:r,pos:i}=e[o]),({time:s,pos:a}=e[l]));const c=s-r;return c?i+(a-i)*(t-r)/c:i}class nj extends ej{static id="timeseries";static defaults=(()=>ej.defaults)();constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=tj(t,this.min),this._tableRange=tj(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:t,max:n}=this,r=[],s=[];let i,a,o,l,c;for(i=0,a=e.length;i<a;++i)l=e[i],l>=t&&l<=n&&r.push(l);if(r.length<2)return[{time:t,pos:0},{time:n,pos:1}];for(i=0,a=r.length;i<a;++i)c=r[i+1],o=r[i-1],l=r[i],Math.round((c+o)/2)!==l&&s.push({time:l,pos:i/(a-1)});return s}_generate(){const e=this.min,t=this.max;let n=super.getDataTimestamps();return n.includes(e)&&n.length||n.splice(0,0,e),n.includes(t)&&1!==n.length||n.push(t),n.sort(((e,t)=>e-t))}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const t=this.getDataTimestamps(),n=this.getLabelTimestamps();return e=t.length&&n.length?this.normalize(t.concat(n)):t.length?t:n,e=this._cache.all=e,e}getDecimalForValue(e){return(tj(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const t=this._offsets,n=this.getDecimalForPixel(e)/t.factor-t.end;return tj(this._table,n*this._tableRange+this._minPos,!0)}}const rj=[Mk,jS,NE,Object.freeze({__proto__:null,CategoryScale:jE,LinearScale:IE,LogarithmicScale:OE,RadialLinearScale:qE,TimeScale:ej,TimeSeriesScale:nj})],sj="label";function ij(e,t){"function"===typeof e?e(t):e&&(e.current=t)}function aj(e,t){e.labels=t}function oj(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:sj;const r=[];e.datasets=t.map((t=>{const s=e.datasets.find((e=>e[n]===t[n]));return s&&t.data&&!r.includes(s)?(r.push(s),Object.assign(s,t),s):{...t}}))}function lj(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:sj;const n={labels:[],datasets:[]};return aj(n,e.labels),oj(n,e.datasets,t),n}function cj(e,t){const{height:n=150,width:s=300,redraw:i=!1,datasetIdKey:a,type:o,data:l,options:c,plugins:u=[],fallbackContent:d,updateMode:h,...f}=e,m=(0,r.useRef)(null),p=(0,r.useRef)(null),g=()=>{m.current&&(p.current=new iS(m.current,{type:o,data:lj(l,a),options:c&&{...c},plugins:u}),ij(t,p.current))},y=()=>{ij(t,null),p.current&&(p.current.destroy(),p.current=null)};return(0,r.useEffect)((()=>{!i&&p.current&&c&&function(e,t){const n=e.options;n&&t&&Object.assign(n,t)}(p.current,c)}),[i,c]),(0,r.useEffect)((()=>{!i&&p.current&&aj(p.current.config.data,l.labels)}),[i,l.labels]),(0,r.useEffect)((()=>{!i&&p.current&&l.datasets&&oj(p.current.config.data,l.datasets,a)}),[i,l.datasets]),(0,r.useEffect)((()=>{p.current&&(i?(y(),setTimeout(g)):p.current.update(h))}),[i,c,l.labels,l.datasets,h]),(0,r.useEffect)((()=>{p.current&&(y(),setTimeout(g))}),[o]),(0,r.useEffect)((()=>(g(),()=>y())),[]),r.createElement("canvas",{ref:m,role:"img",height:n,width:s,...f},d)}const uj=(0,r.forwardRef)(cj);function dj(e,t){return iS.register(t),(0,r.forwardRef)(((t,n)=>r.createElement(uj,{...t,ref:n,type:e})))}const hj=dj("bar",Tk),fj="bg-white dark:bg-gray-800 text-gray-900 dark:text-white rounded-lg shadow-md overflow-hidden transition-colors duration-200",mj="px-6 py-4 bg-primary/5 dark:bg-gray-700 border-b border-gray-200 dark:border-gray-700 transition-colors duration-200",pj="text-lg font-semibold text-primary dark:text-white transition-colors duration-200",gj="p-6 text-gray-900 dark:text-white transition-colors duration-200",yj="overflow-x-auto rounded-lg shadow",vj="min-w-full divide-y divide-gray-200 dark:divide-gray-700",xj="bg-gray-50 dark:bg-gray-700 transition-colors duration-200",bj="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300 transition-colors duration-200",wj="bg-white divide-y divide-gray-200 dark:bg-gray-800 dark:divide-gray-700 transition-colors duration-200",_j="hover:bg-gray-50 dark:hover:bg-gray-700/40 transition-colors duration-200",kj="even:bg-gray-50 even:dark:bg-gray-700/30",Nj="px-6 py-4 whitespace-nowrap text-sm text-gray-700 dark:text-gray-300 transition-colors duration-200",Sj={base:"inline-flex items-center justify-center rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-offset-2 transition-colors",primary:"bg-primary hover:bg-primaryLight text-white focus:ring-primary",secondary:"bg-secondary hover:bg-secondaryLight text-gray-800 focus:ring-secondary",accent:"bg-accent hover:bg-accent/90 text-white focus:ring-accent",danger:"bg-red-600 hover:bg-red-700 text-white focus:ring-red-500",success:"bg-green-600 hover:bg-green-700 text-white focus:ring-green-500",info:"bg-blue-500 hover:bg-blue-600 text-white focus:ring-blue-400",warning:"bg-yellow-500 hover:bg-yellow-600 text-white focus:ring-yellow-400",outline:"border border-gray-300 dark:border-gray-600 bg-white dark:bg-transparent hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300",link:"text-primary dark:text-secondary hover:underline",icon:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full text-gray-600 dark:text-gray-300",disabled:"opacity-50 cursor-not-allowed",sizes:{xs:"px-2.5 py-1.5 text-xs",sm:"px-3 py-2 text-sm",md:"px-4 py-2 text-sm",lg:"px-4 py-2 text-base",xl:"px-6 py-3 text-base"}},Ej={wrapper:"p-6 bg-white dark:bg-gray-800 text-gray-900 dark:text-white rounded-lg shadow-md border border-gray-200 dark:border-gray-700 transition-colors duration-200",title:"text-sm font-medium text-gray-500 dark:text-gray-400 uppercase transition-colors duration-200",value:"mt-2 text-3xl font-bold text-gray-900 dark:text-white transition-colors duration-200",description:"mt-1 text-sm text-gray-600 dark:text-gray-400 transition-colors duration-200",iconWrapper:"absolute top-4 right-4 p-3 rounded-full transition-colors duration-200",footer:"mt-4 pt-4 flex items-center text-sm border-t border-gray-200 dark:border-gray-700 transition-colors duration-200",trend:{up:"flex items-center text-green-600 dark:text-green-400 transition-colors duration-200",down:"flex items-center text-red-600 dark:text-red-400 transition-colors duration-200",neutral:"flex items-center text-gray-600 dark:text-gray-400 transition-colors duration-200"}},jj={base:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",primary:"bg-primary/10 text-primary dark:bg-primary/20 dark:text-blue-300",secondary:"bg-secondary/10 text-yellow-800 dark:bg-secondary/20 dark:text-yellow-300",success:"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300",danger:"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300",warning:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300",info:"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300",outline:"bg-transparent border border-gray-300 text-gray-700 dark:border-gray-600 dark:text-gray-300"},Cj=e=>{let{children:t,className:n="",...r}=e;return(0,Jt.jsx)("div",{className:`${fj} ${n}`,...r,children:t})},Tj=e=>{let{title:t,icon:n,actions:r,className:s="",...i}=e;return(0,Jt.jsxs)("div",{className:`${mj} ${s} flex justify-between items-center`,...i,children:[(0,Jt.jsxs)("div",{className:"flex items-center",children:[n&&(0,Jt.jsx)("span",{className:"mr-2",children:n}),(0,Jt.jsx)("h3",{className:pj,children:t})]}),r&&(0,Jt.jsx)("div",{children:r})]})},Aj=e=>{let{children:t,className:n="",...r}=e;return(0,Jt.jsx)("div",{className:`${gj} ${n}`,...r,children:t})},Ij=e=>{let{children:t,variant:n="primary",size:r="md",disabled:s=!1,className:i="",...a}=e;const o=Sj[n]||Sj.primary,l=Sj.sizes[r]||Sj.sizes.md,c=s?Sj.disabled:"";return(0,Jt.jsx)("button",{className:`${Sj.base} ${o} ${l} ${c} ${i}`,disabled:s,...a,children:t})},Mj=e=>{let{children:t,className:n="",...r}=e;return(0,Jt.jsx)("div",{className:`${yj}`,children:(0,Jt.jsx)("table",{className:`${vj} ${n}`,...r,children:t})})},Pj=e=>{let{children:t,className:n="",...r}=e;return(0,Jt.jsx)("thead",{className:`${xj} ${n}`,...r,children:t})},Rj=e=>{let{children:t,className:n="",...r}=e;return(0,Jt.jsx)("tbody",{className:`${wj} ${n}`,...r,children:t})},Lj=e=>{let{children:t,striped:n=!1,className:r="",...s}=e;const i=n?kj:"";return(0,Jt.jsx)("tr",{className:`${_j} ${i} ${r}`,...s,children:t})},Dj=e=>{let{children:t,className:n="",...r}=e;return(0,Jt.jsx)("td",{className:`${Nj} ${n}`,...r,children:t})},Oj=e=>{let{children:t,className:n="",...r}=e;return(0,Jt.jsx)("th",{className:`${bj} ${n}`,...r,children:t})},Fj=e=>{let{title:t,value:n,icon:r,description:s,trend:i,trendValue:a,trendText:o,iconColor:l="primary",className:c="",...u}=e;const d={primary:"bg-primary/10 text-primary dark:bg-primary/20 dark:text-blue-300",secondary:"bg-secondary/10 text-yellow-800 dark:bg-secondary/20 dark:text-yellow-300",success:"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300",danger:"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300",warning:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300",info:"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300"},h=d[l]||d.primary;return(0,Jt.jsxs)("div",{className:`${Ej.wrapper} relative ${c}`,...u,children:[r&&(0,Jt.jsx)("div",{className:`${Ej.iconWrapper} ${h} transition-colors duration-200`,children:r}),(0,Jt.jsx)("h3",{className:Ej.title,children:t}),(0,Jt.jsx)("p",{className:Ej.value,children:n}),s&&(0,Jt.jsx)("p",{className:Ej.description,children:s}),i&&(0,Jt.jsx)("div",{className:Ej.footer,children:(0,Jt.jsxs)("span",{className:Ej.trend[i],children:[a,o&&(0,Jt.jsx)("span",{className:"ml-1",children:o})]})})]})},Vj=e=>{let{children:t,variant:n="primary",className:r="",...s}=e;const i=jj[n]||jj.primary;return(0,Jt.jsx)("span",{className:`${jj.base} ${i} ${r}`,...s,children:t})},zj=e=>{let{isOpen:t,onClose:n,title:r,children:s,footer:i,size:a="md",className:o="",...l}=e;if(!t)return null;const c={sm:"max-w-md",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl",full:"max-w-full mx-4"},u=c[a]||c.md;return(0,Jt.jsx)("div",{className:"fixed inset-0 z-50 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true",...l,children:(0,Jt.jsxs)("div",{className:"flex items-center justify-center min-h-screen p-4 text-center sm:p-0",children:[(0,Jt.jsx)("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity","aria-hidden":"true",onClick:n}),(0,Jt.jsxs)("div",{className:`inline-block align-bottom bg-white dark:bg-gray-800 rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle ${u} w-full ${o}`,children:[(0,Jt.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-700 px-4 py-3 flex justify-between items-center border-b border-gray-200 dark:border-gray-600",children:[(0,Jt.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white transition-colors duration-200",id:"modal-title",children:r}),(0,Jt.jsxs)("button",{type:"button",className:"text-gray-400 hover:text-gray-500 dark:text-gray-300 dark:hover:text-gray-200 transition-colors duration-200",onClick:n,children:[(0,Jt.jsx)("span",{className:"sr-only",children:"Close"}),(0,Jt.jsx)(px,{className:"h-5 w-5"})]})]}),(0,Jt.jsx)("div",{className:"px-4 py-3 sm:p-6 text-gray-900 dark:text-white transition-colors duration-200",children:s}),i&&(0,Jt.jsx)("div",{className:"bg-gray-50 dark:bg-gray-700 px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6 border-t border-gray-200 dark:border-gray-600 transition-colors duration-200",children:i})]})]})})},Uj=e=>{let{value:t,onChange:n,onSearch:r,placeholder:s="Search...",className:i="",...a}=e;return(0,Jt.jsxs)("div",{className:`relative ${i}`,children:[(0,Jt.jsx)("input",{type:"text",className:"block w-full pl-10 pr-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md leading-5 bg-white dark:bg-gray-700 placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-1 focus:ring-primary dark:focus:ring-secondary focus:border-primary dark:focus:border-secondary text-sm text-gray-900 dark:text-white transition-colors duration-200",placeholder:s,value:t,onChange:n,onKeyPress:e=>"Enter"===e.key&&r&&r(),...a}),(0,Jt.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,Jt.jsx)("svg",{className:"h-5 w-5 text-gray-400 dark:text-gray-300",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:(0,Jt.jsx)("path",{fillRule:"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z",clipRule:"evenodd"})})})]})},Bj=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{title:t="",icon:n=null,showHeader:s=!0,headerActions:i=null}=e;return e=>a=>{const{darkMode:o}=tn();return r.useEffect((()=>{t&&(document.title=t)}),[]),(0,Jt.jsxs)(Cx,{children:[s&&(0,Jt.jsx)("div",{className:"pt-20 px-6 max-w-7xl mx-auto",children:(0,Jt.jsx)("div",{className:"bg-white dark:bg-gray-800 shadow-lg rounded-lg p-6 mb-8 border-l-4 border-blue-500",children:(0,Jt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Jt.jsxs)("div",{children:[(0,Jt.jsxs)("h1",{className:"text-3xl font-bold text-gray-800 dark:text-white flex items-center",children:[n&&(0,Jt.jsx)("span",{className:"mr-3 text-blue-500",children:n}),t]}),(0,Jt.jsx)("p",{className:"text-gray-600 dark:text-gray-300 mt-2",children:"Visitor Logs"===t&&"Track and manage all visitor entries and access logs"})]}),i&&(0,Jt.jsx)("div",{className:"flex items-center space-x-2",children:i})]})})}),(0,Jt.jsx)("div",{className:"px-6 max-w-7xl mx-auto",children:(0,Jt.jsx)(e,{...a})})]})}};function $j(e){if("undefined"===typeof Proxy)return e;const t=new Map;return new Proxy((function(){return e(...arguments)}),{get:(n,r)=>"create"===r?e:(t.has(r)||t.set(r,e(r)),t.get(r))})}function Hj(e){return null!==e&&"object"===typeof e&&"function"===typeof e.start}function Wj(e){const t=[{},{}];return e?.values.forEach(((e,n)=>{t[0][n]=e.get(),t[1][n]=e.getVelocity()})),t}function qj(e,t,n,r){if("function"===typeof t){const[s,i]=Wj(r);t=t(void 0!==n?n:e.custom,s,i)}if("string"===typeof t&&(t=e.variants&&e.variants[t]),"function"===typeof t){const[s,i]=Wj(r);t=t(void 0!==n?n:e.custom,s,i)}return t}function Kj(e,t,n){const r=e.getProps();return qj(r,t,void 0!==n?n:r.custom,e)}function Gj(e,t){return e?.[t]??e?.default??e}const Yj=e=>e,Qj={},Xj=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],Jj={value:null,addProjectionMetrics:null};function Zj(e,t){let n=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},i=()=>n=!0,a=Xj.reduce(((e,n)=>(e[n]=function(e,t){let n=new Set,r=new Set,s=!1,i=!1;const a=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1},l=0;function c(t){a.has(t)&&(u.schedule(t),e()),l++,t(o)}const u={schedule:function(e){const t=arguments.length>2&&void 0!==arguments[2]&&arguments[2]&&s?n:r;return arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&a.add(e),t.has(e)||t.add(e),e},cancel:e=>{r.delete(e),a.delete(e)},process:e=>{o=e,s?i=!0:(s=!0,[n,r]=[r,n],n.forEach(c),t&&Jj.value&&Jj.value.frameloop[t].push(l),l=0,n.clear(),s=!1,i&&(i=!1,u.process(e)))}};return u}(i,t?n:void 0),e)),{}),{setup:o,read:l,resolveKeyframes:c,preUpdate:u,update:d,preRender:h,render:f,postRender:m}=a,p=()=>{const i=Qj.useManualTiming?s.timestamp:performance.now();n=!1,Qj.useManualTiming||(s.delta=r?1e3/60:Math.max(Math.min(i-s.timestamp,40),1)),s.timestamp=i,s.isProcessing=!0,o.process(s),l.process(s),c.process(s),u.process(s),d.process(s),h.process(s),f.process(s),m.process(s),s.isProcessing=!1,n&&t&&(r=!1,e(p))},g=Xj.reduce(((t,i)=>{const o=a[i];return t[i]=function(t){let i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return n||(n=!0,r=!0,s.isProcessing||e(p)),o.schedule(t,i,a)},t}),{});return{schedule:g,cancel:e=>{for(let t=0;t<Xj.length;t++)a[Xj[t]].cancel(e)},state:s,steps:a}}const{schedule:eC,cancel:tC,state:nC,steps:rC}=Zj("undefined"!==typeof requestAnimationFrame?requestAnimationFrame:Yj,!0),sC=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],iC=(()=>new Set(sC))(),aC=new Set(["width","height","top","left","right","bottom",...sC]);function oC(e,t){-1===e.indexOf(t)&&e.push(t)}function lC(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class cC{constructor(){this.subscriptions=[]}add(e){return oC(this.subscriptions,e),()=>lC(this.subscriptions,e)}notify(e,t,n){const r=this.subscriptions.length;if(r)if(1===r)this.subscriptions[0](e,t,n);else for(let s=0;s<r;s++){const r=this.subscriptions[s];r&&r(e,t,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function uC(e,t){return t?e*(1e3/t):0}let dC;function hC(){dC=void 0}const fC={now:()=>(void 0===dC&&fC.set(nC.isProcessing||Qj.useManualTiming?nC.timestamp:performance.now()),dC),set:e=>{dC=e,queueMicrotask(hC)}},mC={current:void 0};class pC{constructor(e){var t=this;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.version="__VERSION__",this.canTrackVelocity=null,this.events={},this.updateAndNotify=function(e){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const r=fC.now();if(t.updatedAt!==r&&t.setPrevFrameValue(),t.prev=t.current,t.setCurrent(e),t.current!==t.prev&&(t.events.change?.notify(t.current),t.dependents))for(const s of t.dependents)s.dirty();n&&t.events.renderRequest?.notify(t.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){var t;this.current=e,this.updatedAt=fC.now(),null===this.canTrackVelocity&&void 0!==e&&(this.canTrackVelocity=(t=this.current,!isNaN(parseFloat(t))))}setPrevFrameValue(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.current;this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new cC);const n=this.events[e].add(t);return"change"===e?()=>{n(),eC.read((()=>{this.events.change.getSize()||this.stop()}))}:n}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t&&this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e,t)}setWithVelocity(e,t,n){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-n}jump(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return mC.current&&mC.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){const e=fC.now();if(!this.canTrackVelocity||void 0===this.prevFrameValue||e-this.updatedAt>30)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,30);return uC(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise((t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()})).then((()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()}))}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function gC(e,t){return new pC(e,t)}const yC=e=>Array.isArray(e);function vC(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,gC(n))}function xC(e){return yC(e)?e[e.length-1]||0:e}const bC=e=>Boolean(e&&e.getVelocity);function wC(e,t){const n=e.getValue("willChange");if(r=n,Boolean(bC(r)&&r.add))return n.add(t);if(!n&&Qj.WillChange){const n=new Qj.WillChange("auto");e.addValue("willChange",n),n.add(t)}var r}const _C=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),kC="data-"+_C("framerAppearId");function NC(e){return e.props[kC]}const SC=(e,t)=>n=>t(e(n)),EC=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(SC)},jC=(e,t,n)=>n>t?t:n<e?e:n,CC=e=>1e3*e,TC=e=>e/1e3,AC={layout:0,mainThread:0,waapi:0};const IC=e=>t=>"string"===typeof t&&t.startsWith(e),MC=IC("--"),PC=IC("var(--"),RC=e=>!!PC(e)&&LC.test(e.split("/*")[0].trim()),LC=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,DC={test:e=>"number"===typeof e,parse:parseFloat,transform:e=>e},OC={...DC,transform:e=>jC(0,1,e)},FC={...DC,default:1},VC=e=>Math.round(1e5*e)/1e5,zC=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;const UC=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,BC=(e,t)=>n=>Boolean("string"===typeof n&&UC.test(n)&&n.startsWith(e)||t&&!function(e){return null==e}(n)&&Object.prototype.hasOwnProperty.call(n,t)),$C=(e,t,n)=>r=>{if("string"!==typeof r)return r;const[s,i,a,o]=r.match(zC);return{[e]:parseFloat(s),[t]:parseFloat(i),[n]:parseFloat(a),alpha:void 0!==o?parseFloat(o):1}},HC={...DC,transform:e=>Math.round((e=>jC(0,255,e))(e))},WC={test:BC("rgb","red"),parse:$C("red","green","blue"),transform:e=>{let{red:t,green:n,blue:r,alpha:s=1}=e;return"rgba("+HC.transform(t)+", "+HC.transform(n)+", "+HC.transform(r)+", "+VC(OC.transform(s))+")"}};const qC={test:BC("#"),parse:function(e){let t="",n="",r="",s="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),s=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),s=e.substring(4,5),t+=t,n+=n,r+=r,s+=s),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}},transform:WC.transform},KC=e=>({test:t=>"string"===typeof t&&t.endsWith(e)&&1===t.split(" ").length,parse:parseFloat,transform:t=>`${t}${e}`}),GC=KC("deg"),YC=KC("%"),QC=KC("px"),XC=KC("vh"),JC=KC("vw"),ZC=(()=>({...YC,parse:e=>YC.parse(e)/100,transform:e=>YC.transform(100*e)}))(),eT={test:BC("hsl","hue"),parse:$C("hue","saturation","lightness"),transform:e=>{let{hue:t,saturation:n,lightness:r,alpha:s=1}=e;return"hsla("+Math.round(t)+", "+YC.transform(VC(n))+", "+YC.transform(VC(r))+", "+VC(OC.transform(s))+")"}},tT={test:e=>WC.test(e)||qC.test(e)||eT.test(e),parse:e=>WC.test(e)?WC.parse(e):eT.test(e)?eT.parse(e):qC.parse(e),transform:e=>"string"===typeof e?e:e.hasOwnProperty("red")?WC.transform(e):eT.transform(e)},nT=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;const rT="number",sT="color",iT=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function aT(e){const t=e.toString(),n=[],r={color:[],number:[],var:[]},s=[];let i=0;const a=t.replace(iT,(e=>(tT.test(e)?(r.color.push(i),s.push(sT),n.push(tT.parse(e))):e.startsWith("var(")?(r.var.push(i),s.push("var"),n.push(e)):(r.number.push(i),s.push(rT),n.push(parseFloat(e))),++i,"${}"))).split("${}");return{values:n,split:a,indexes:r,types:s}}function oT(e){return aT(e).values}function lT(e){const{split:t,types:n}=aT(e),r=t.length;return e=>{let s="";for(let i=0;i<r;i++)if(s+=t[i],void 0!==e[i]){const t=n[i];s+=t===rT?VC(e[i]):t===sT?tT.transform(e[i]):e[i]}return s}}const cT=e=>"number"===typeof e?0:e;const uT={test:function(e){return isNaN(e)&&"string"===typeof e&&(e.match(zC)?.length||0)+(e.match(nT)?.length||0)>0},parse:oT,createTransformer:lT,getAnimatableNone:function(e){const t=oT(e);return lT(e)(t.map(cT))}};function dT(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function hT(e,t){return n=>n>0?t:e}const fT=(e,t,n)=>e+(t-e)*n,mT=(e,t,n)=>{const r=e*e,s=n*(t*t-r)+r;return s<0?0:Math.sqrt(s)},pT=[qC,WC,eT];function gT(e){const t=(e=>pT.find((t=>t.test(e))))(e);if(Boolean(t),!Boolean(t))return!1;let n=t.parse(e);return t===eT&&(n=function(e){let{hue:t,saturation:n,lightness:r,alpha:s}=e;t/=360,n/=100,r/=100;let i=0,a=0,o=0;if(n){const e=r<.5?r*(1+n):r+n-r*n,s=2*r-e;i=dT(s,e,t+1/3),a=dT(s,e,t),o=dT(s,e,t-1/3)}else i=a=o=r;return{red:Math.round(255*i),green:Math.round(255*a),blue:Math.round(255*o),alpha:s}}(n)),n}const yT=(e,t)=>{const n=gT(e),r=gT(t);if(!n||!r)return hT(e,t);const s={...n};return e=>(s.red=mT(n.red,r.red,e),s.green=mT(n.green,r.green,e),s.blue=mT(n.blue,r.blue,e),s.alpha=fT(n.alpha,r.alpha,e),WC.transform(s))},vT=new Set(["none","hidden"]);function xT(e,t){return n=>fT(e,t,n)}function bT(e){return"number"===typeof e?xT:"string"===typeof e?RC(e)?hT:tT.test(e)?yT:kT:Array.isArray(e)?wT:"object"===typeof e?tT.test(e)?yT:_T:hT}function wT(e,t){const n=[...e],r=n.length,s=e.map(((e,n)=>bT(e)(e,t[n])));return e=>{for(let t=0;t<r;t++)n[t]=s[t](e);return n}}function _T(e,t){const n={...e,...t},r={};for(const s in n)void 0!==e[s]&&void 0!==t[s]&&(r[s]=bT(e[s])(e[s],t[s]));return e=>{for(const t in r)n[t]=r[t](e);return n}}const kT=(e,t)=>{const n=uT.createTransformer(t),r=aT(e),s=aT(t);return r.indexes.var.length===s.indexes.var.length&&r.indexes.color.length===s.indexes.color.length&&r.indexes.number.length>=s.indexes.number.length?vT.has(e)&&!s.values.length||vT.has(t)&&!r.values.length?function(e,t){return vT.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}(e,t):EC(wT(function(e,t){const n=[],r={color:0,var:0,number:0};for(let s=0;s<t.values.length;s++){const i=t.types[s],a=e.indexes[i][r[i]],o=e.values[a]??0;n[s]=o,r[i]++}return n}(r,s),s.values),n):hT(e,t)};function NT(e,t,n){if("number"===typeof e&&"number"===typeof t&&"number"===typeof n)return fT(e,t,n);return bT(e)(e,t)}const ST=e=>{const t=t=>{let{timestamp:n}=t;return e(n)};return{start:function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return eC.update(t,e)},stop:()=>tC(t),now:()=>nC.isProcessing?nC.timestamp:fC.now()}},ET=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,r="";const s=Math.max(Math.round(t/n),2);for(let i=0;i<s;i++)r+=e(i/(s-1))+", ";return`linear(${r.substring(0,r.length-2)})`},jT=2e4;function CT(e){let t=0;let n=e.next(t);for(;!n.done&&t<jT;)t+=50,n=e.next(t);return t>=jT?1/0:t}function TT(e,t,n){const r=Math.max(t-5,0);return uC(n-e(r),t-r)}const AT={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},IT=.001;function MT(e){let t,n,{duration:r=AT.duration,bounce:s=AT.bounce,velocity:i=AT.velocity,mass:a=AT.mass}=e;CC(AT.maxDuration);let o=1-s;o=jC(AT.minDamping,AT.maxDamping,o),r=jC(AT.minDuration,AT.maxDuration,TC(r)),o<1?(t=e=>{const t=e*o,n=t*r,s=t-i,a=RT(e,o),l=Math.exp(-n);return IT-s/a*l},n=e=>{const n=e*o*r,s=n*i+i,a=Math.pow(o,2)*Math.pow(e,2)*r,l=Math.exp(-n),c=RT(Math.pow(e,2),o);return(-t(e)+IT>0?-1:1)*((s-a)*l)/c}):(t=e=>Math.exp(-e*r)*((e-i)*r+1)-.001,n=e=>Math.exp(-e*r)*(r*r*(i-e)));const l=function(e,t,n){let r=n;for(let s=1;s<PT;s++)r-=e(r)/t(r);return r}(t,n,5/r);if(r=CC(r),isNaN(l))return{stiffness:AT.stiffness,damping:AT.damping,duration:r};{const e=Math.pow(l,2)*a;return{stiffness:e,damping:2*o*Math.sqrt(a*e),duration:r}}}const PT=12;function RT(e,t){return e*Math.sqrt(1-t*t)}const LT=["duration","bounce"],DT=["stiffness","damping","mass"];function OT(e,t){return t.some((t=>void 0!==e[t]))}function FT(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:AT.visualDuration,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:AT.bounce;const n="object"!==typeof e?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:r,restDelta:s}=n;const i=n.keyframes[0],a=n.keyframes[n.keyframes.length-1],o={done:!1,value:i},{stiffness:l,damping:c,mass:u,duration:d,velocity:h,isResolvedFromDuration:f}=function(e){let t={velocity:AT.velocity,stiffness:AT.stiffness,damping:AT.damping,mass:AT.mass,isResolvedFromDuration:!1,...e};if(!OT(e,DT)&&OT(e,LT))if(e.visualDuration){const n=e.visualDuration,r=2*Math.PI/(1.2*n),s=r*r,i=2*jC(.05,1,1-(e.bounce||0))*Math.sqrt(s);t={...t,mass:AT.mass,stiffness:s,damping:i}}else{const n=MT(e);t={...t,...n,mass:AT.mass},t.isResolvedFromDuration=!0}return t}({...n,velocity:-TC(n.velocity||0)}),m=h||0,p=c/(2*Math.sqrt(l*u)),g=a-i,y=TC(Math.sqrt(l/u)),v=Math.abs(g)<5;let x;if(r||(r=v?AT.restSpeed.granular:AT.restSpeed.default),s||(s=v?AT.restDelta.granular:AT.restDelta.default),p<1){const e=RT(y,p);x=t=>{const n=Math.exp(-p*y*t);return a-n*((m+p*y*g)/e*Math.sin(e*t)+g*Math.cos(e*t))}}else if(1===p)x=e=>a-Math.exp(-y*e)*(g+(m+y*g)*e);else{const e=y*Math.sqrt(p*p-1);x=t=>{const n=Math.exp(-p*y*t),r=Math.min(e*t,300);return a-n*((m+p*y*g)*Math.sinh(r)+e*g*Math.cosh(r))/e}}const b={calculatedDuration:f&&d||null,next:e=>{const t=x(e);if(f)o.done=e>=d;else{let n=0===e?m:0;p<1&&(n=0===e?CC(m):TT(x,e,t));const i=Math.abs(n)<=r,l=Math.abs(a-t)<=s;o.done=i&&l}return o.value=o.done?a:t,o},toString:()=>{const e=Math.min(CT(b),jT),t=ET((t=>b.next(e*t).value),e,30);return e+"ms "+t},toTransition:()=>{}};return b}function VT(e){let{keyframes:t,velocity:n=0,power:r=.8,timeConstant:s=325,bounceDamping:i=10,bounceStiffness:a=500,modifyTarget:o,min:l,max:c,restDelta:u=.5,restSpeed:d}=e;const h=t[0],f={done:!1,value:h},m=e=>void 0===l?c:void 0===c||Math.abs(l-e)<Math.abs(c-e)?l:c;let p=r*n;const g=h+p,y=void 0===o?g:o(g);y!==g&&(p=y-h);const v=e=>-p*Math.exp(-e/s),x=e=>y+v(e),b=e=>{const t=v(e),n=x(e);f.done=Math.abs(t)<=u,f.value=f.done?y:n};let w,_;const k=e=>{(e=>void 0!==l&&e<l||void 0!==c&&e>c)(f.value)&&(w=e,_=FT({keyframes:[f.value,m(f.value)],velocity:TT(x,e,f.value),damping:i,stiffness:a,restDelta:u,restSpeed:d}))};return k(0),{calculatedDuration:null,next:e=>{let t=!1;return _||void 0!==w||(t=!0,b(e),k(e)),void 0!==w&&e>=w?_.next(e-w):(!t&&b(e),f)}}}FT.applyToOptions=e=>{const t=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;const n=(arguments.length>2?arguments[2]:void 0)({...e,keyframes:[0,t]}),r=Math.min(CT(n),jT);return{type:"keyframes",ease:e=>n.next(r*e).value/t,duration:TC(r)}}(e,100,FT);return e.ease=t.ease,e.duration=CC(t.duration),e.type="keyframes",e};const zT=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e;function UT(e,t,n,r){if(e===t&&n===r)return Yj;const s=t=>function(e,t,n,r,s){let i,a,o=0;do{a=t+(n-t)/2,i=zT(a,r,s)-e,i>0?n=a:t=a}while(Math.abs(i)>1e-7&&++o<12);return a}(t,0,1,e,n);return e=>0===e||1===e?e:zT(s(e),t,r)}const BT=UT(.42,0,1,1),$T=UT(0,0,.58,1),HT=UT(.42,0,.58,1),WT=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,qT=e=>t=>1-e(1-t),KT=UT(.33,1.53,.69,.99),GT=qT(KT),YT=WT(GT),QT=e=>(e*=2)<1?.5*GT(e):.5*(2-Math.pow(2,-10*(e-1))),XT=e=>1-Math.sin(Math.acos(e)),JT=qT(XT),ZT=WT(XT),eA=e=>Array.isArray(e)&&"number"===typeof e[0],tA={linear:Yj,easeIn:BT,easeInOut:HT,easeOut:$T,circIn:XT,circInOut:ZT,circOut:JT,backIn:GT,backInOut:YT,backOut:KT,anticipate:QT},nA=e=>{if(eA(e)){e.length;const[t,n,r,s]=e;return UT(t,n,r,s)}return"string"===typeof e?tA[e]:e},rA=(e,t,n)=>{const r=t-e;return 0===r?1:(n-e)/r};function sA(e,t){let{clamp:n=!0,ease:r,mixer:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=e.length;if(t.length,1===i)return()=>t[0];if(2===i&&t[0]===t[1])return()=>t[1];const a=e[0]===e[1];e[0]>e[i-1]&&(e=[...e].reverse(),t=[...t].reverse());const o=function(e,t,n){const r=[],s=n||Qj.mix||NT,i=e.length-1;for(let a=0;a<i;a++){let n=s(e[a],e[a+1]);if(t){const e=Array.isArray(t)?t[a]||Yj:t;n=EC(e,n)}r.push(n)}return r}(t,r,s),l=o.length,c=n=>{if(a&&n<e[0])return t[0];let r=0;if(l>1)for(;r<e.length-2&&!(n<e[r+1]);r++);const s=rA(e[r],e[r+1],n);return o[r](s)};return n?t=>c(jC(e[0],e[i-1],t)):c}function iA(e){const t=[0];return function(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const s=rA(0,t,r);e.push(fT(n,1,s))}}(t,e.length-1),t}function aA(e){let{duration:t=300,keyframes:n,times:r,ease:s="easeInOut"}=e;const i=(e=>Array.isArray(e)&&"number"!==typeof e[0])(s)?s.map(nA):nA(s),a={done:!1,value:n[0]},o=function(e,t){return e.map((e=>e*t))}(r&&r.length===n.length?r:iA(n),t),l=sA(o,n,{ease:Array.isArray(i)?i:(c=n,u=i,c.map((()=>u||HT)).splice(0,c.length-1))});var c,u;return{calculatedDuration:t,next:e=>(a.value=l(e),a.done=e>=t,a)}}const oA=e=>null!==e;function lA(e,t,n){let{repeat:r,repeatType:s="loop"}=t,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;const a=e.filter(oA),o=i<0||r&&"loop"!==s&&r%2===1?0:a.length-1;return o&&void 0!==n?n:a[o]}const cA={decay:VT,inertia:VT,tween:aA,keyframes:aA,spring:FT};function uA(e){"string"===typeof e.type&&(e.type=cA[e.type])}class dA{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise((e=>{this.resolve=e}))}notifyFinished(){this.resolve()}then(e,t){return this.finished.then(e,t)}}const hA=e=>e/100;class fA extends dA{constructor(e){var t;super(),t=this,this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=function(){if(!(arguments.length>0&&void 0!==arguments[0])||arguments[0]){const{motionValue:e}=t.options;e&&e.updatedAt!==fC.now()&&t.tick(fC.now())}t.isStopped=!0,"idle"!==t.state&&(t.teardown(),t.options.onStop?.())},AC.mainThread++,this.options=e,this.initAnimation(),this.play(),!1===e.autoplay&&this.pause()}initAnimation(){const{options:e}=this;uA(e);const{type:t=aA,repeat:n=0,repeatDelay:r=0,repeatType:s,velocity:i=0}=e;let{keyframes:a}=e;const o=t||aA;o!==aA&&"number"!==typeof a[0]&&(this.mixKeyframes=EC(hA,NT(a[0],a[1])),a=[0,100]);const l=o({...e,keyframes:a});"mirror"===s&&(this.mirroredGenerator=o({...e,keyframes:[...a].reverse(),velocity:-i})),null===l.calculatedDuration&&(l.calculatedDuration=CT(l));const{calculatedDuration:c}=l;this.calculatedDuration=c,this.resolvedDuration=c+r,this.totalDuration=this.resolvedDuration*(n+1)-r,this.generator=l}updateTime(e){const t=Math.round(e-this.startTime)*this.playbackSpeed;null!==this.holdTime?this.currentTime=this.holdTime:this.currentTime=t}tick(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{generator:n,totalDuration:r,mixKeyframes:s,mirroredGenerator:i,resolvedDuration:a,calculatedDuration:o}=this;if(null===this.startTime)return n.next(0);const{delay:l=0,keyframes:c,repeat:u,repeatType:d,repeatDelay:h,type:f,onUpdate:m,finalKeyframe:p}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-r/this.speed,this.startTime)),t?this.currentTime=e:this.updateTime(e);const g=this.currentTime-l*(this.playbackSpeed>=0?1:-1),y=this.playbackSpeed>=0?g<0:g>r;this.currentTime=Math.max(g,0),"finished"===this.state&&null===this.holdTime&&(this.currentTime=r);let v=this.currentTime,x=n;if(u){const e=Math.min(this.currentTime,r)/a;let t=Math.floor(e),n=e%1;!n&&e>=1&&(n=1),1===n&&t--,t=Math.min(t,u+1);Boolean(t%2)&&("reverse"===d?(n=1-n,h&&(n-=h/a)):"mirror"===d&&(x=i)),v=jC(0,1,n)*a}const b=y?{done:!1,value:c[0]}:x.next(v);s&&(b.value=s(b.value));let{done:w}=b;y||null===o||(w=this.playbackSpeed>=0?this.currentTime>=r:this.currentTime<=0);const _=null===this.holdTime&&("finished"===this.state||"running"===this.state&&w);return _&&f!==VT&&(b.value=lA(c,this.options,p,this.speed)),m&&m(b.value),_&&this.finish(),b}then(e,t){return this.finished.then(e,t)}get duration(){return TC(this.calculatedDuration)}get time(){return TC(this.currentTime)}set time(e){e=CC(e),this.currentTime=e,null===this.startTime||null!==this.holdTime||0===this.playbackSpeed?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(fC.now());const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=TC(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=ST,startTime:t}=this.options;this.driver||(this.driver=e((e=>this.tick(e)))),this.options.onPlay?.();const n=this.driver.now();"finished"===this.state?(this.updateFinished(),this.startTime=n):null!==this.holdTime?this.startTime=n-this.holdTime:this.startTime||(this.startTime=t??n),"finished"===this.state&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(fC.now()),this.holdTime=this.currentTime}complete(){"running"!==this.state&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null,AC.mainThread--}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}const mA=e=>180*e/Math.PI,pA=e=>{const t=mA(Math.atan2(e[1],e[0]));return yA(t)},gA={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:pA,rotateZ:pA,skewX:e=>mA(Math.atan(e[1])),skewY:e=>mA(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},yA=e=>((e%=360)<0&&(e+=360),e),vA=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),xA=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),bA={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:vA,scaleY:xA,scale:e=>(vA(e)+xA(e))/2,rotateX:e=>yA(mA(Math.atan2(e[6],e[5]))),rotateY:e=>yA(mA(Math.atan2(-e[2],e[0]))),rotateZ:pA,rotate:pA,skewX:e=>mA(Math.atan(e[4])),skewY:e=>mA(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function wA(e){return e.includes("scale")?1:0}function _A(e,t){if(!e||"none"===e)return wA(t);const n=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,s;if(n)r=bA,s=n;else{const t=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=gA,s=t}if(!s)return wA(t);const i=r[t],a=s[1].split(",").map(kA);return"function"===typeof i?i(a):a[i]}function kA(e){return parseFloat(e.trim())}const NA=e=>e===DC||e===QC,SA=new Set(["x","y","z"]),EA=sC.filter((e=>!SA.has(e)));const jA={width:(e,t)=>{let{x:n}=e,{paddingLeft:r="0",paddingRight:s="0"}=t;return n.max-n.min-parseFloat(r)-parseFloat(s)},height:(e,t)=>{let{y:n}=e,{paddingTop:r="0",paddingBottom:s="0"}=t;return n.max-n.min-parseFloat(r)-parseFloat(s)},top:(e,t)=>{let{top:n}=t;return parseFloat(n)},left:(e,t)=>{let{left:n}=t;return parseFloat(n)},bottom:(e,t)=>{let{y:n}=e,{top:r}=t;return parseFloat(r)+(n.max-n.min)},right:(e,t)=>{let{x:n}=e,{left:r}=t;return parseFloat(r)+(n.max-n.min)},x:(e,t)=>{let{transform:n}=t;return _A(n,"x")},y:(e,t)=>{let{transform:n}=t;return _A(n,"y")}};jA.translateX=jA.x,jA.translateY=jA.y;const CA=new Set;let TA=!1,AA=!1,IA=!1;function MA(){if(AA){const e=Array.from(CA).filter((e=>e.needsMeasurement)),t=new Set(e.map((e=>e.element))),n=new Map;t.forEach((e=>{const t=function(e){const t=[];return EA.forEach((n=>{const r=e.getValue(n);void 0!==r&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))})),t}(e);t.length&&(n.set(e,t),e.render())})),e.forEach((e=>e.measureInitialState())),t.forEach((e=>{e.render();const t=n.get(e);t&&t.forEach((t=>{let[n,r]=t;e.getValue(n)?.set(r)}))})),e.forEach((e=>e.measureEndState())),e.forEach((e=>{void 0!==e.suspendedScrollY&&window.scrollTo(0,e.suspendedScrollY)}))}AA=!1,TA=!1,CA.forEach((e=>e.complete(IA))),CA.clear()}function PA(){CA.forEach((e=>{e.readKeyframes(),e.needsMeasurement&&(AA=!0)}))}class RA{constructor(e,t,n,r,s){let i=arguments.length>5&&void 0!==arguments[5]&&arguments[5];this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=n,this.motionValue=r,this.element=s,this.isAsync=i}scheduleResolve(){this.state="scheduled",this.isAsync?(CA.add(this),TA||(TA=!0,eC.read(PA),eC.resolveKeyframes(MA))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:n,motionValue:r}=this;if(null===e[0]){const s=r?.get(),i=e[e.length-1];if(void 0!==s)e[0]=s;else if(n&&t){const r=n.readValue(t,i);void 0!==r&&null!==r&&(e[0]=r)}void 0===e[0]&&(e[0]=i),r&&void 0===s&&r.set(e[0])}!function(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),CA.delete(this)}cancel(){"scheduled"===this.state&&(CA.delete(this),this.state="pending")}resume(){"pending"===this.state&&this.scheduleResolve()}}function LA(e){let t;return()=>(void 0===t&&(t=e()),t)}const DA=LA((()=>void 0!==window.ScrollTimeline)),OA={};function FA(e,t){const n=LA(e);return()=>OA[t]??n()}const VA=FA((()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch(hF){return!1}return!0}),"linearEasing"),zA=e=>{let[t,n,r,s]=e;return`cubic-bezier(${t}, ${n}, ${r}, ${s})`},UA={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:zA([0,.65,.55,1]),circOut:zA([.55,0,1,.45]),backIn:zA([.31,.01,.66,-.59]),backOut:zA([.33,1.53,.69,.99])};function BA(e,t){return e?"function"===typeof e?VA()?ET(e,t):"ease-out":eA(e)?zA(e):Array.isArray(e)?e.map((e=>BA(e,t)||UA.easeOut)):UA[e]:void 0}function $A(e,t,n){let{delay:r=0,duration:s=300,repeat:i=0,repeatType:a="loop",ease:o="easeOut",times:l}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0;const u={[t]:n};l&&(u.offset=l);const d=BA(o,s);Array.isArray(d)&&(u.easing=d),Jj.value&&AC.waapi++;const h={delay:r,duration:s,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:i+1,direction:"reverse"===a?"alternate":"normal"};c&&(h.pseudoElement=c);const f=e.animate(u,h);return Jj.value&&f.finished.finally((()=>{AC.waapi--})),f}function HA(e){return"function"===typeof e&&"applyToOptions"in e}class WA extends dA{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:t,name:n,keyframes:r,pseudoElement:s,allowFlatten:i=!1,finalKeyframe:a,onComplete:o}=e;this.isPseudoElement=Boolean(s),this.allowFlatten=i,this.options=e,e.type;const l=function(e){let{type:t,...n}=e;return HA(t)&&VA()?t.applyToOptions(n):(n.duration??(n.duration=300),n.ease??(n.ease="easeOut"),n)}(e);this.animation=$A(t,n,r,l,s),!1===l.autoplay&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!s){const e=lA(r,this.options,a,this.speed);this.updateMotionValue?this.updateMotionValue(e):function(e,t,n){(e=>e.startsWith("--"))(t)?e.style.setProperty(t,n):e.style[t]=n}(t,n,e),this.animation.cancel()}o?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),"finished"===this.state&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch(hF){}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;"idle"!==e&&"finished"!==e&&(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return TC(Number(e))}get time(){return TC(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=CC(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return null!==this.finishedTime?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline(e){let{timeline:t,observe:n}=e;return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,t&&DA()?(this.animation.timeline=t,Yj):n(this)}}const qA={anticipate:QT,backInOut:YT,circInOut:ZT};function KA(e){"string"===typeof e.ease&&e.ease in qA&&(e.ease=qA[e.ease])}class GA extends WA{constructor(e){KA(e),uA(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:t,onUpdate:n,onComplete:r,element:s,...i}=this.options;if(!t)return;if(void 0!==e)return void t.set(e);const a=new fA({...i,autoplay:!1}),o=CC(this.finishedTime??this.time);t.setWithVelocity(a.sample(o-10).value,a.sample(o).value,10),a.stop()}}const YA=(e,t)=>"zIndex"!==t&&(!("number"!==typeof e&&!Array.isArray(e))||!("string"!==typeof e||!uT.test(e)&&"0"!==e||e.startsWith("url(")));const QA=new Set(["opacity","clipPath","filter","transform"]),XA=LA((()=>Object.hasOwnProperty.call(Element.prototype,"animate")));class JA extends dA{constructor(e){let{autoplay:t=!0,delay:n=0,type:r="keyframes",repeat:s=0,repeatDelay:i=0,repeatType:a="loop",keyframes:o,name:l,motionValue:c,element:u,...d}=e;super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=fC.now();const h={autoplay:t,delay:n,type:r,repeat:s,repeatDelay:i,repeatType:a,name:l,motionValue:c,element:u,...d},f=u?.KeyframeResolver||RA;this.keyframeResolver=new f(o,((e,t,n)=>this.onKeyframesResolved(e,t,h,!n)),l,c,u),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,t,n,r){this.keyframeResolver=void 0;const{name:s,type:i,velocity:a,delay:o,isHandoff:l,onUpdate:c}=n;this.resolvedAt=fC.now(),function(e,t,n,r){const s=e[0];if(null===s)return!1;if("display"===t||"visibility"===t)return!0;const i=e[e.length-1],a=YA(s,t),o=YA(i,t);return!(!a||!o)&&(function(e){const t=e[0];if(1===e.length)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}(e)||("spring"===n||HA(n))&&r)}(e,s,i,a)||(!Qj.instantAnimations&&o||c?.(lA(e,n,t)),e[0]=e[e.length-1],n.duration=0,n.repeat=0);const u={startTime:r?this.resolvedAt&&this.resolvedAt-this.createdAt>40?this.resolvedAt:this.createdAt:void 0,finalKeyframe:t,...n,keyframes:e},d=!l&&function(e){const{motionValue:t,name:n,repeatDelay:r,repeatType:s,damping:i,type:a}=e;if(!t||!t.owner||!(t.owner.current instanceof HTMLElement))return!1;const{onUpdate:o,transformTemplate:l}=t.owner.getProps();return XA()&&n&&QA.has(n)&&("transform"!==n||!l)&&!o&&!r&&"mirror"!==s&&0!==i&&"inertia"!==a}(u)?new GA({...u,element:u.motionValue.owner.current}):new fA(u);d.finished.then((()=>this.notifyFinished())).catch(Yj),this.pendingTimeline&&(this.stopTimeline=d.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=d}get finished(){return this._animation?this.animation.finished:this._finished}then(e,t){return this.finished.finally(e).then((()=>{}))}get animation(){return this._animation||(this.keyframeResolver?.resume(),IA=!0,PA(),MA(),IA=!1),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const ZA=e=>null!==e;const eI={type:"spring",stiffness:500,damping:25,restSpeed:10},tI={type:"keyframes",duration:.8},nI={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},rI=(e,t)=>{let{keyframes:n}=t;return n.length>2?tI:iC.has(e)?e.startsWith("scale")?{type:"spring",stiffness:550,damping:0===n[1]?2*Math.sqrt(550):30,restSpeed:10}:eI:nI};const sI=function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},s=arguments.length>4?arguments[4]:void 0,i=arguments.length>5?arguments[5]:void 0;return a=>{const o=Gj(r,e)||{},l=o.delay||r.delay||0;let{elapsed:c=0}=r;c-=CC(l);const u={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...o,delay:-c,onUpdate:e=>{t.set(e),o.onUpdate&&o.onUpdate(e)},onComplete:()=>{a(),o.onComplete&&o.onComplete()},name:e,motionValue:t,element:i?void 0:s};(function(e){let{when:t,delay:n,delayChildren:r,staggerChildren:s,staggerDirection:i,repeat:a,repeatType:o,repeatDelay:l,from:c,elapsed:u,...d}=e;return!!Object.keys(d).length})(o)||Object.assign(u,rI(e,u)),u.duration&&(u.duration=CC(u.duration)),u.repeatDelay&&(u.repeatDelay=CC(u.repeatDelay)),void 0!==u.from&&(u.keyframes[0]=u.from);let d=!1;if((!1===u.type||0===u.duration&&!u.repeatDelay)&&(u.duration=0,0===u.delay&&(d=!0)),(Qj.instantAnimations||Qj.skipAnimations)&&(d=!0,u.duration=0,u.delay=0),u.allowFlatten=!o.type&&!o.ease,d&&!i&&void 0!==t.get()){const e=function(e,t,n){let{repeat:r,repeatType:s="loop"}=t;const i=e.filter(ZA),a=r&&"loop"!==s&&r%2===1?0:i.length-1;return a&&void 0!==n?n:i[a]}(u.keyframes,o);if(void 0!==e)return void eC.update((()=>{u.onUpdate(e),u.onComplete()}))}return o.isSync?new fA(u):new JA(u)}};function iI(e,t){let{protectedKeys:n,needsAnimating:r}=e;const s=n.hasOwnProperty(t)&&!0!==r[t];return r[t]=!1,s}function aI(e,t){let{delay:n=0,transitionOverride:r,type:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{transition:i=e.getDefaultTransition(),transitionEnd:a,...o}=t;r&&(i=r);const l=[],c=s&&e.animationState&&e.animationState.getState()[s];for(const u in o){const t=e.getValue(u,e.latestValues[u]??null),r=o[u];if(void 0===r||c&&iI(c,u))continue;const s={delay:n,...Gj(i||{},u)},a=t.get();if(void 0!==a&&!t.isAnimating&&!Array.isArray(r)&&r===a&&!s.velocity)continue;let d=!1;if(window.MotionHandoffAnimation){const t=NC(e);if(t){const e=window.MotionHandoffAnimation(t,u,eC);null!==e&&(s.startTime=e,d=!0)}}wC(e,u),t.start(sI(u,t,r,e.shouldReduceMotion&&aC.has(u)?{type:!1}:s,e,d));const h=t.animation;h&&l.push(h)}return a&&Promise.all(l).then((()=>{eC.update((()=>{a&&function(e,t){const n=Kj(e,t);let{transitionEnd:r={},transition:s={},...i}=n||{};i={...i,...r};for(const a in i)vC(e,a,xC(i[a]))}(e,a)}))})),l}function oI(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=Kj(e,t,"exit"===n.type?e.presenceContext?.custom:void 0);let{transition:s=e.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(s=n.transitionOverride);const i=r?()=>Promise.all(aI(e,r,n)):()=>Promise.resolve(),a=e.variantChildren&&e.variantChildren.size?function(){let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;const{delayChildren:i=0,staggerChildren:a,staggerDirection:o}=s;return function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,i=arguments.length>5?arguments[5]:void 0;const a=[],o=(e.variantChildren.size-1)*r,l=1===s?function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)*r}:function(){return o-(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)*r};return Array.from(e.variantChildren).sort(lI).forEach(((e,r)=>{e.notify("AnimationStart",t),a.push(oI(e,t,{...i,delay:n+l(r)}).then((()=>e.notify("AnimationComplete",t))))})),Promise.all(a)}(e,t,i+r,a,o,n)}:()=>Promise.resolve(),{when:o}=s;if(o){const[e,t]="beforeChildren"===o?[i,a]:[a,i];return e().then((()=>t()))}return Promise.all([i(),a(n.delay)])}function lI(e,t){return e.sortNodePosition(t)}function cI(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}function uI(e){return"string"===typeof e||Array.isArray(e)}const dI=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],hI=["initial",...dI],fI=hI.length;function mI(e){if(!e)return;if(!e.isControllingVariants){const t=e.parent&&mI(e.parent)||{};return void 0!==e.props.initial&&(t.initial=e.props.initial),t}const t={};for(let n=0;n<fI;n++){const r=hI[n],s=e.props[r];(uI(s)||!1===s)&&(t[r]=s)}return t}const pI=[...dI].reverse(),gI=dI.length;function yI(e){return t=>Promise.all(t.map((t=>{let{animation:n,options:r}=t;return function(e,t){let n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e.notify("AnimationStart",t),Array.isArray(t)){const s=t.map((t=>oI(e,t,r)));n=Promise.all(s)}else if("string"===typeof t)n=oI(e,t,r);else{const s="function"===typeof t?Kj(e,t,r.custom):t;n=Promise.all(aI(e,s,r))}return n.then((()=>{e.notify("AnimationComplete",t)}))}(e,n,r)})))}function vI(e){let t=yI(e),n=wI(),r=!0;const s=t=>(n,r)=>{const s=Kj(e,r,"exit"===t?e.presenceContext?.custom:void 0);if(s){const{transition:e,transitionEnd:t,...r}=s;n={...n,...r,...t}}return n};function i(i){const{props:a}=e,o=mI(e.parent)||{},l=[],c=new Set;let u={},d=1/0;for(let t=0;t<gI;t++){const h=pI[t],f=n[h],m=void 0!==a[h]?a[h]:o[h],p=uI(m),g=h===i?f.isActive:null;!1===g&&(d=t);let y=m===o[h]&&m!==a[h]&&p;if(y&&r&&e.manuallyAnimateOnMount&&(y=!1),f.protectedKeys={...u},!f.isActive&&null===g||!m&&!f.prevProp||Hj(m)||"boolean"===typeof m)continue;const v=xI(f.prevProp,m);let x=v||h===i&&f.isActive&&!y&&p||t>d&&p,b=!1;const w=Array.isArray(m)?m:[m];let _=w.reduce(s(h),{});!1===g&&(_={});const{prevResolvedValues:k={}}=f,N={...k,..._},S=t=>{x=!0,c.has(t)&&(b=!0,c.delete(t)),f.needsAnimating[t]=!0;const n=e.getValue(t);n&&(n.liveStyle=!1)};for(const e in N){const t=_[e],n=k[e];if(u.hasOwnProperty(e))continue;let r=!1;r=yC(t)&&yC(n)?!cI(t,n):t!==n,r?void 0!==t&&null!==t?S(e):c.add(e):void 0!==t&&c.has(e)?S(e):f.protectedKeys[e]=!0}f.prevProp=m,f.prevResolvedValues=_,f.isActive&&(u={...u,..._}),r&&e.blockInitialAnimation&&(x=!1);x&&(!(y&&v)||b)&&l.push(...w.map((e=>({animation:e,options:{type:h}}))))}if(c.size){const t={};if("boolean"!==typeof a.initial){const n=Kj(e,Array.isArray(a.initial)?a.initial[0]:a.initial);n&&n.transition&&(t.transition=n.transition)}c.forEach((n=>{const r=e.getBaseTarget(n),s=e.getValue(n);s&&(s.liveStyle=!0),t[n]=r??null})),l.push({animation:t})}let h=Boolean(l.length);return!r||!1!==a.initial&&a.initial!==a.animate||e.manuallyAnimateOnMount||(h=!1),r=!1,h?t(l):Promise.resolve()}return{animateChanges:i,setActive:function(t,r){if(n[t].isActive===r)return Promise.resolve();e.variantChildren?.forEach((e=>e.animationState?.setActive(t,r))),n[t].isActive=r;const s=i(t);for(const e in n)n[e].protectedKeys={};return s},setAnimateFunction:function(n){t=n(e)},getState:()=>n,reset:()=>{n=wI(),r=!0}}}function xI(e,t){return"string"===typeof t?t!==e:!!Array.isArray(t)&&!cI(t,e)}function bI(){return{isActive:arguments.length>0&&void 0!==arguments[0]&&arguments[0],protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function wI(){return{animate:bI(!0),whileInView:bI(),whileHover:bI(),whileTap:bI(),whileDrag:bI(),whileFocus:bI(),exit:bI()}}class _I{constructor(e){this.isMounted=!1,this.node=e}update(){}}let kI=0;const NI={animation:{Feature:class extends _I{constructor(e){super(e),e.animationState||(e.animationState=vI(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Hj(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}},exit:{Feature:class extends _I{constructor(){super(...arguments),this.id=kI++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===n)return;const r=this.node.animationState.setActive("exit",!e);t&&!e&&r.then((()=>{t(this.id)}))}mount(){const{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}}},SI={x:!1,y:!1};function EI(){return SI.x||SI.y}function jI(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{passive:!0};return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}const CI=e=>"mouse"===e.pointerType?"number"!==typeof e.button||e.button<=0:!1!==e.isPrimary;function TI(e){return{point:{x:e.pageX,y:e.pageY}}}function AI(e,t,n,r){return jI(e,t,(e=>t=>CI(t)&&e(t,TI(t)))(n),r)}function II(e){let{top:t,left:n,right:r,bottom:s}=e;return{x:{min:n,max:r},y:{min:t,max:s}}}function MI(e){return e.max-e.min}function PI(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;e.origin=r,e.originPoint=fT(t.min,t.max,e.origin),e.scale=MI(n)/MI(t),e.translate=fT(n.min,n.max,e.origin)-e.originPoint,(e.scale>=.9999&&e.scale<=1.0001||isNaN(e.scale))&&(e.scale=1),(e.translate>=-.01&&e.translate<=.01||isNaN(e.translate))&&(e.translate=0)}function RI(e,t,n,r){PI(e.x,t.x,n.x,r?r.originX:void 0),PI(e.y,t.y,n.y,r?r.originY:void 0)}function LI(e,t,n){e.min=n.min+t.min,e.max=e.min+MI(t)}function DI(e,t,n){e.min=t.min-n.min,e.max=e.min+MI(t)}function OI(e,t,n){DI(e.x,t.x,n.x),DI(e.y,t.y,n.y)}const FI=()=>({x:{min:0,max:0},y:{min:0,max:0}});function VI(e){return[e("x"),e("y")]}function zI(e){return void 0===e||1===e}function UI(e){let{scale:t,scaleX:n,scaleY:r}=e;return!zI(t)||!zI(n)||!zI(r)}function BI(e){return UI(e)||$I(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function $I(e){return HI(e.x)||HI(e.y)}function HI(e){return e&&"0%"!==e}function WI(e,t,n){return n+t*(e-n)}function qI(e,t,n,r,s){return void 0!==s&&(e=WI(e,s,r)),WI(e,n,r)+t}function KI(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,s=arguments.length>4?arguments[4]:void 0;e.min=qI(e.min,t,n,r,s),e.max=qI(e.max,t,n,r,s)}function GI(e,t){let{x:n,y:r}=t;KI(e.x,n.translate,n.scale,n.originPoint),KI(e.y,r.translate,r.scale,r.originPoint)}const YI=.999999999999,QI=1.0000000000001;function XI(e,t){e.min=e.min+t,e.max=e.max+t}function JI(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.5;KI(e,t,n,fT(e.min,e.max,s),r)}function ZI(e,t){JI(e.x,t.x,t.scaleX,t.scale,t.originX),JI(e.y,t.y,t.scaleY,t.scale,t.originY)}function eM(e,t){return II(function(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}(e.getBoundingClientRect(),t))}const tM=e=>{let{current:t}=e;return t?t.ownerDocument.defaultView:null};function nM(e){return e&&"object"===typeof e&&Object.prototype.hasOwnProperty.call(e,"current")}const rM=(e,t)=>Math.abs(e-t);class sM{constructor(e,t){let{transformPagePoint:n,contextWindow:r,dragSnapToOrigin:s=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!this.lastMoveEvent||!this.lastMoveEventInfo)return;const e=oM(this.lastMoveEventInfo,this.history),t=null!==this.startEvent,n=function(e,t){const n=rM(e.x,t.x),r=rM(e.y,t.y);return Math.sqrt(n**2+r**2)}(e.offset,{x:0,y:0})>=3;if(!t&&!n)return;const{point:r}=e,{timestamp:s}=nC;this.history.push({...r,timestamp:s});const{onStart:i,onMove:a}=this.handlers;t||(i&&i(this.lastMoveEvent,e),this.startEvent=this.lastMoveEvent),a&&a(this.lastMoveEvent,e)},this.handlePointerMove=(e,t)=>{this.lastMoveEvent=e,this.lastMoveEventInfo=iM(t,this.transformPagePoint),eC.update(this.updatePoint,!0)},this.handlePointerUp=(e,t)=>{this.end();const{onEnd:n,onSessionEnd:r,resumeAnimation:s}=this.handlers;if(this.dragSnapToOrigin&&s&&s(),!this.lastMoveEvent||!this.lastMoveEventInfo)return;const i=oM("pointercancel"===e.type?this.lastMoveEventInfo:iM(t,this.transformPagePoint),this.history);this.startEvent&&n&&n(e,i),r&&r(e,i)},!CI(e))return;this.dragSnapToOrigin=s,this.handlers=t,this.transformPagePoint=n,this.contextWindow=r||window;const i=iM(TI(e),this.transformPagePoint),{point:a}=i,{timestamp:o}=nC;this.history=[{...a,timestamp:o}];const{onSessionStart:l}=t;l&&l(e,oM(i,this.history)),this.removeListeners=EC(AI(this.contextWindow,"pointermove",this.handlePointerMove),AI(this.contextWindow,"pointerup",this.handlePointerUp),AI(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),tC(this.updatePoint)}}function iM(e,t){return t?{point:t(e.point)}:e}function aM(e,t){return{x:e.x-t.x,y:e.y-t.y}}function oM(e,t){let{point:n}=e;return{point:n,delta:aM(n,cM(t)),offset:aM(n,lM(t)),velocity:uM(t,.1)}}function lM(e){return e[0]}function cM(e){return e[e.length-1]}function uM(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const s=cM(e);for(;n>=0&&(r=e[n],!(s.timestamp-r.timestamp>CC(t)));)n--;if(!r)return{x:0,y:0};const i=TC(s.timestamp-r.timestamp);if(0===i)return{x:0,y:0};const a={x:(s.x-r.x)/i,y:(s.y-r.y)/i};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function dM(e,t,n){return{min:void 0!==t?e.min+t:void 0,max:void 0!==n?e.max+n-(e.max-e.min):void 0}}function hM(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}const fM=.35;function mM(e,t,n){return{min:pM(e,t),max:pM(e,n)}}function pM(e,t){return"number"===typeof e?e:e[t]||0}const gM=new WeakMap;class yM{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic={x:{min:0,max:0},y:{min:0,max:0}},this.visualElement=e}start(e){let{snapToCursor:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{presenceContext:n}=this.visualElement;if(n&&!1===n.isPresent)return;const{dragSnapToOrigin:r}=this.getProps();this.panSession=new sM(e,{onSessionStart:e=>{const{dragSnapToOrigin:n}=this.getProps();n?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(TI(e).point)},onStart:(e,t)=>{const{drag:n,dragPropagation:r,onDragStart:s}=this.getProps();if(n&&!r&&(this.openDragLock&&this.openDragLock(),this.openDragLock="x"===(i=n)||"y"===i?SI[i]?null:(SI[i]=!0,()=>{SI[i]=!1}):SI.x||SI.y?null:(SI.x=SI.y=!0,()=>{SI.x=SI.y=!1}),!this.openDragLock))return;var i;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),VI((e=>{let t=this.getAxisMotionValue(e).get()||0;if(YC.test(t)){const{projection:n}=this.visualElement;if(n&&n.layout){const r=n.layout.layoutBox[e];if(r){t=MI(r)*(parseFloat(t)/100)}}}this.originPoint[e]=t})),s&&eC.postRender((()=>s(e,t))),wC(this.visualElement,"transform");const{animationState:a}=this.visualElement;a&&a.setActive("whileDrag",!0)},onMove:(e,t)=>{const{dragPropagation:n,dragDirectionLock:r,onDirectionLock:s,onDrag:i}=this.getProps();if(!n&&!this.openDragLock)return;const{offset:a}=t;if(r&&null===this.currentDirection)return this.currentDirection=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=null;Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x");return n}(a),void(null!==this.currentDirection&&s&&s(this.currentDirection));this.updateAxis("x",t.point,a),this.updateAxis("y",t.point,a),this.visualElement.render(),i&&i(e,t)},onSessionEnd:(e,t)=>this.stop(e,t),resumeAnimation:()=>VI((e=>"paused"===this.getAnimationState(e)&&this.getAxisMotionValue(e).animation?.play()))},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:r,contextWindow:tM(this.visualElement)})}stop(e,t){const n=this.isDragging;if(this.cancel(),!n)return;const{velocity:r}=t;this.startAnimation(r);const{onDragEnd:s}=this.getProps();s&&eC.postRender((()=>s(e,t)))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,n){const{drag:r}=this.getProps();if(!n||!vM(e,r,this.currentDirection))return;const s=this.getAxisMotionValue(e);let i=this.originPoint[e]+n[e];this.constraints&&this.constraints[e]&&(i=function(e,t,n){let{min:r,max:s}=t;return void 0!==r&&e<r?e=n?fT(r,e,n.min):Math.max(e,r):void 0!==s&&e>s&&(e=n?fT(s,e,n.max):Math.min(e,s)),e}(i,this.constraints[e],this.elastic[e])),s.set(i)}resolveConstraints(){const{dragConstraints:e,dragElastic:t}=this.getProps(),n=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,r=this.constraints;e&&nM(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):this.constraints=!(!e||!n)&&function(e,t){let{top:n,left:r,bottom:s,right:i}=t;return{x:dM(e.x,r,i),y:dM(e.y,n,s)}}(n.layoutBox,e),this.elastic=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fM;return!1===e?e=0:!0===e&&(e=fM),{x:mM(e,"left","right"),y:mM(e,"top","bottom")}}(t),r!==this.constraints&&n&&this.constraints&&!this.hasMutatedConstraints&&VI((e=>{!1!==this.constraints&&this.getAxisMotionValue(e)&&(this.constraints[e]=function(e,t){const n={};return void 0!==t.min&&(n.min=t.min-e.min),void 0!==t.max&&(n.max=t.max-e.min),n}(n.layoutBox[e],this.constraints[e]))}))}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!nM(e))return!1;const n=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const s=function(e,t,n){const r=eM(e,n),{scroll:s}=t;return s&&(XI(r.x,s.offset.x),XI(r.y,s.offset.y)),r}(n,r.root,this.visualElement.getTransformPagePoint());let i=function(e,t){return{x:hM(e.x,t.x),y:hM(e.y,t.y)}}(r.layout.layoutBox,s);if(t){const e=t(function(e){let{x:t,y:n}=e;return{top:n.min,right:t.max,bottom:n.max,left:t.min}}(i));this.hasMutatedConstraints=!!e,e&&(i=II(e))}return i}startAnimation(e){const{drag:t,dragMomentum:n,dragElastic:r,dragTransition:s,dragSnapToOrigin:i,onDragTransitionEnd:a}=this.getProps(),o=this.constraints||{},l=VI((a=>{if(!vM(a,t,this.currentDirection))return;let l=o&&o[a]||{};i&&(l={min:0,max:0});const c=r?200:1e6,u=r?40:1e7,d={type:"inertia",velocity:n?e[a]:0,bounceStiffness:c,bounceDamping:u,timeConstant:750,restDelta:1,restSpeed:10,...s,...l};return this.startAxisValueAnimation(a,d)}));return Promise.all(l).then(a)}startAxisValueAnimation(e,t){const n=this.getAxisMotionValue(e);return wC(this.visualElement,e),n.start(sI(e,n,0,t,this.visualElement,!1))}stopAnimation(){VI((e=>this.getAxisMotionValue(e).stop()))}pauseAnimation(){VI((e=>this.getAxisMotionValue(e).animation?.pause()))}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,n=this.visualElement.getProps(),r=n[t];return r||this.visualElement.getValue(e,(n.initial?n.initial[e]:void 0)||0)}snapToCursor(e){VI((t=>{const{drag:n}=this.getProps();if(!vM(t,n,this.currentDirection))return;const{projection:r}=this.visualElement,s=this.getAxisMotionValue(t);if(r&&r.layout){const{min:n,max:i}=r.layout.layoutBox[t];s.set(e[t]-fT(n,i,.5))}}))}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:n}=this.visualElement;if(!nM(t)||!n||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};VI((e=>{const t=this.getAxisMotionValue(e);if(t&&!1!==this.constraints){const n=t.get();r[e]=function(e,t){let n=.5;const r=MI(e),s=MI(t);return s>r?n=rA(t.min,t.max-r,e.min):r>s&&(n=rA(e.min,e.max-s,t.min)),jC(0,1,n)}({min:n,max:n},this.constraints[e])}}));const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),VI((t=>{if(!vM(t,e,null))return;const n=this.getAxisMotionValue(t),{min:s,max:i}=this.constraints[t];n.set(fT(s,i,r[t]))}))}addListeners(){if(!this.visualElement.current)return;gM.set(this.visualElement,this);const e=AI(this.visualElement.current,"pointerdown",(e=>{const{drag:t,dragListener:n=!0}=this.getProps();t&&n&&this.start(e)})),t=()=>{const{dragConstraints:e}=this.getProps();nM(e)&&e.current&&(this.constraints=this.resolveRefConstraints())},{projection:n}=this.visualElement,r=n.addEventListener("measure",t);n&&!n.layout&&(n.root&&n.root.updateScroll(),n.updateLayout()),eC.read(t);const s=jI(window,"resize",(()=>this.scalePositionWithinConstraints())),i=n.addEventListener("didUpdate",(e=>{let{delta:t,hasLayoutChanged:n}=e;this.isDragging&&n&&(VI((e=>{const n=this.getAxisMotionValue(e);n&&(this.originPoint[e]+=t[e].translate,n.set(n.get()+t[e].translate))})),this.visualElement.render())}));return()=>{s(),e(),r(),i&&i()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:n=!1,dragPropagation:r=!1,dragConstraints:s=!1,dragElastic:i=fM,dragMomentum:a=!0}=e;return{...e,drag:t,dragDirectionLock:n,dragPropagation:r,dragConstraints:s,dragElastic:i,dragMomentum:a}}}function vM(e,t,n){return(!0===t||t===e)&&(null===n||n===e)}const xM=e=>(t,n)=>{e&&eC.postRender((()=>e(t,n)))};const{schedule:bM,cancel:wM}=Zj(queueMicrotask,!1),_M=(0,r.createContext)(null);const kM=(0,r.createContext)({}),NM=(0,r.createContext)({}),SM={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function EM(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const jM={correct:(e,t)=>{if(!t.target)return e;if("string"===typeof e){if(!QC.test(e))return e;e=parseFloat(e)}return`${EM(e,t.target.x)}% ${EM(e,t.target.y)}%`}},CM={correct:(e,t)=>{let{treeScale:n,projectionDelta:r}=t;const s=e,i=uT.parse(e);if(i.length>5)return s;const a=uT.createTransformer(e),o="number"!==typeof i[0]?1:0,l=r.x.scale*n.x,c=r.y.scale*n.y;i[0+o]/=l,i[1+o]/=c;const u=fT(l,c,.5);return"number"===typeof i[2+o]&&(i[2+o]/=u),"number"===typeof i[3+o]&&(i[3+o]/=u),a(i)}},TM={};class AM extends r.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n,layoutId:r}=this.props,{projection:s}=e;!function(e){for(const t in e)TM[t]=e[t],MC(t)&&(TM[t].isCSSVariable=!0)}(MM),s&&(t.group&&t.group.add(s),n&&n.register&&r&&n.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",(()=>{this.safeToRemove()})),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),SM.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:n,drag:r,isPresent:s}=this.props,{projection:i}=n;return i?(i.isPresent=s,r||e.layoutDependency!==t||void 0===t||e.isPresent!==s?i.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?i.promote():i.relegate()||eC.postRender((()=>{const e=i.getStack();e&&e.members.length||this.safeToRemove()}))),null):null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),bM.postRender((()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()})))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n}=this.props,{projection:r}=e;r&&(r.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(r),n&&n.deregister&&n.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function IM(e){const[t,n]=function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const t=(0,r.useContext)(_M);if(null===t)return[!0,null];const{isPresent:n,onExitComplete:s,register:i}=t,a=(0,r.useId)();(0,r.useEffect)((()=>{if(e)return i(a)}),[e]);const o=(0,r.useCallback)((()=>e&&s&&s(a)),[a,s,e]);return!n&&s?[!1,o]:[!0]}(),s=(0,r.useContext)(kM);return(0,Jt.jsx)(AM,{...e,layoutGroup:s,switchLayoutGroup:(0,r.useContext)(NM),isPresent:t,safeToRemove:n})}const MM={borderRadius:{...jM,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:jM,borderTopRightRadius:jM,borderBottomLeftRadius:jM,borderBottomRightRadius:jM,boxShadow:CM};const PM=(e,t)=>e.depth-t.depth;class RM{constructor(){this.children=[],this.isDirty=!1}add(e){oC(this.children,e),this.isDirty=!0}remove(e){lC(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(PM),this.isDirty=!1,this.children.forEach(e)}}function LM(e,t){const n=fC.now(),r=s=>{let{timestamp:i}=s;const a=i-n;a>=t&&(tC(r),e(a-t))};return eC.setup(r,!0),()=>tC(r)}function DM(e){return bC(e)?e.get():e}const OM=["TopLeft","TopRight","BottomLeft","BottomRight"],FM=OM.length,VM=e=>"string"===typeof e?parseFloat(e):e,zM=e=>"number"===typeof e||QC.test(e);function UM(e,t){return void 0!==e[t]?e[t]:e.borderRadius}const BM=HM(0,.5,JT),$M=HM(.5,.95,Yj);function HM(e,t,n){return r=>r<e?0:r>t?1:n(rA(e,t,r))}function WM(e,t){e.min=t.min,e.max=t.max}function qM(e,t){WM(e.x,t.x),WM(e.y,t.y)}function KM(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function GM(e,t,n,r,s){return e=WI(e-=t,1/n,r),void 0!==s&&(e=WI(e,1/s,r)),e}function YM(e,t,n,r,s){let[i,a,o]=n;!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,s=arguments.length>4?arguments[4]:void 0,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:e,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:e;YC.test(t)&&(t=parseFloat(t),t=fT(a.min,a.max,t/100)-a.min);if("number"!==typeof t)return;let o=fT(i.min,i.max,r);e===i&&(o-=t),e.min=GM(e.min,t,n,o,s),e.max=GM(e.max,t,n,o,s)}(e,t[i],t[a],t[o],t.scale,r,s)}const QM=["x","scaleX","originX"],XM=["y","scaleY","originY"];function JM(e,t,n,r){YM(e.x,t,QM,n?n.x:void 0,r?r.x:void 0),YM(e.y,t,XM,n?n.y:void 0,r?r.y:void 0)}function ZM(e){return 0===e.translate&&1===e.scale}function eP(e){return ZM(e.x)&&ZM(e.y)}function tP(e,t){return e.min===t.min&&e.max===t.max}function nP(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function rP(e,t){return nP(e.x,t.x)&&nP(e.y,t.y)}function sP(e){return MI(e.x)/MI(e.y)}function iP(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class aP{constructor(){this.members=[]}add(e){oC(this.members,e),e.scheduleRender()}remove(e){if(lC(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const e=this.members[this.members.length-1];e&&this.promote(e)}}relegate(e){const t=this.members.findIndex((t=>e===t));if(0===t)return!1;let n;for(let r=t;r>=0;r--){const e=this.members[r];if(!1!==e.isPresent){n=e;break}}return!!n&&(this.promote(n),!0)}promote(e,t){const n=this.lead;if(e!==n&&(this.prevLead=n,this.lead=e,e.show(),n)){n.instance&&n.scheduleRender(),e.scheduleRender(),e.resumeFrom=n,t&&(e.resumeFrom.preserveOpacity=!0),n.snapshot&&(e.snapshot=n.snapshot,e.snapshot.latestValues=n.animationValues||n.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;!1===r&&n.hide()}}exitAnimationComplete(){this.members.forEach((e=>{const{options:t,resumingFrom:n}=e;t.onExitComplete&&t.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()}))}scheduleRender(){this.members.forEach((e=>{e.instance&&e.scheduleRender(!1)}))}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const oP={nodes:0,calculatedTargetDeltas:0,calculatedProjections:0},lP=["","X","Y","Z"],cP={visibility:"hidden"};let uP=0;function dP(e,t,n,r){const{latestValues:s}=t;s[e]&&(n[e]=s[e],t.setStaticValue(e,0),r&&(r[e]=0))}function hP(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=NC(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:t,layoutId:r}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",eC,!(t||r))}const{parent:r}=e;r&&!r.hasCheckedOptimisedAppear&&hP(r)}function fP(e){let{attachResizeListener:t,defaultParent:n,measureScroll:r,checkIsScrollRoot:s,resetTransform:i}=e;return class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n?.();this.id=uP++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Jj.value&&(oP.nodes=oP.calculatedTargetDeltas=oP.calculatedProjections=0),this.nodes.forEach(gP),this.nodes.forEach(kP),this.nodes.forEach(NP),this.nodes.forEach(yP),Jj.addProjectionMetrics&&Jj.addProjectionMetrics(oP)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=e,this.root=t?t.root||t:this,this.path=t?[...t.path,t]:[],this.parent=t,this.depth=t?t.depth+1:0;for(let n=0;n<this.path.length;n++)this.path[n].shouldResetTransform=!0;this.root===this&&(this.nodes=new RM)}addEventListener(e,t){return this.eventHandlers.has(e)||this.eventHandlers.set(e,new cC),this.eventHandlers.get(e).add(t)}notifyListeners(e){const t=this.eventHandlers.get(e);for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];t&&t.notify(...r)}hasListeners(e){return this.eventHandlers.has(e)}mount(e){if(this.instance)return;var n;this.isSVG=(n=e)instanceof SVGElement&&"svg"!==n.tagName,this.instance=e;const{layoutId:r,layout:s,visualElement:i}=this.options;if(i&&!i.current&&i.mount(e),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(s||r)&&(this.isLayoutDirty=!0),t){let n;const r=()=>this.root.updateBlockedByResize=!1;t(e,(()=>{this.root.updateBlockedByResize=!0,n&&n(),n=LM(r,250),SM.hasAnimatedSinceResize&&(SM.hasAnimatedSinceResize=!1,this.nodes.forEach(_P))}))}r&&this.root.registerSharedNode(r,this),!1!==this.options.animate&&i&&(r||s)&&this.addEventListener("didUpdate",(e=>{let{delta:t,hasLayoutChanged:n,hasRelativeLayoutChanged:r,layout:s}=e;if(this.isTreeAnimationBlocked())return this.target=void 0,void(this.relativeTarget=void 0);const a=this.options.transition||i.getDefaultTransition()||AP,{onLayoutAnimationStart:o,onLayoutAnimationComplete:l}=i.getProps(),c=!this.targetLayout||!rP(this.targetLayout,s),u=!n&&r;if(this.options.layoutRoot||this.resumeFrom||u||n&&(c||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(t,u);const e={...Gj(a,"layout"),onPlay:o,onComplete:l};(i.shouldReduceMotion||this.options.layoutRoot)&&(e.delay=0,e.type=!1),this.startAnimation(e)}else n||_P(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=s}))}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const e=this.getStack();e&&e.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),tC(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(SP),this.animationId++)}getTransformTemplate(){const{visualElement:e}=this.options;return e&&e.getProps().transformTemplate}willUpdate(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked())return void(this.options.onExitComplete&&this.options.onExitComplete());if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&hP(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let s=0;s<this.path.length;s++){const e=this.path[s];e.shouldResetTransform=!0,e.updateScroll("snapshot"),e.options.layoutRoot&&e.willUpdate(!1)}const{layoutId:t,layout:n}=this.options;if(void 0===t&&!n)return;const r=this.getTransformTemplate();this.prevTransformTemplateValue=r?r(this.latestValues,""):void 0,this.updateSnapshot(),e&&this.notifyListeners("willUpdate")}update(){this.updateScheduled=!1;if(this.isUpdateBlocked())return this.unblockUpdate(),this.clearAllSnapshots(),void this.nodes.forEach(xP);this.isUpdating||this.nodes.forEach(bP),this.isUpdating=!1,this.nodes.forEach(wP),this.nodes.forEach(mP),this.nodes.forEach(pP),this.clearAllSnapshots();const e=fC.now();nC.delta=jC(0,1e3/60,e-nC.timestamp),nC.timestamp=e,nC.isProcessing=!0,rC.update.process(nC),rC.preRender.process(nC),rC.render.process(nC),nC.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,bM.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(vP),this.sharedNodes.forEach(EP)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,eC.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){eC.postRender((()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()}))}updateSnapshot(){!this.snapshot&&this.instance&&(this.snapshot=this.measure(),!this.snapshot||MI(this.snapshot.measuredBox.x)||MI(this.snapshot.measuredBox.y)||(this.snapshot=void 0))}updateLayout(){if(!this.instance)return;if(this.updateScroll(),(!this.options.alwaysMeasureLayout||!this.isLead())&&!this.isLayoutDirty)return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let n=0;n<this.path.length;n++){this.path[n].updateScroll()}const e=this.layout;this.layout=this.measure(!1),this.layoutCorrected={x:{min:0,max:0},y:{min:0,max:0}},this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:t}=this.options;t&&t.notify("LayoutMeasure",this.layout.layoutBox,e?e.layoutBox:void 0)}updateScroll(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"measure",t=Boolean(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===e&&(t=!1),t&&this.instance){const t=s(this.instance);this.scroll={animationId:this.root.animationId,phase:e,isRoot:t,offset:r(this.instance),wasRoot:this.scroll?this.scroll.isRoot:t}}}resetTransform(){if(!i)return;const e=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,t=this.projectionDelta&&!eP(this.projectionDelta),n=this.getTransformTemplate(),r=n?n(this.latestValues,""):void 0,s=r!==this.prevTransformTemplateValue;e&&this.instance&&(t||BI(this.latestValues)||s)&&(i(this.instance,r),this.shouldResetTransform=!1,this.scheduleRender())}measure(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const t=this.measurePageBox();let n=this.removeElementScroll(t);var r;return e&&(n=this.removeTransform(n)),PP((r=n).x),PP(r.y),{animationId:this.root.animationId,measuredBox:t,layoutBox:n,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:e}=this.options;if(!e)return{x:{min:0,max:0},y:{min:0,max:0}};const t=e.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(LP))){const{scroll:e}=this.root;e&&(XI(t.x,e.offset.x),XI(t.y,e.offset.y))}return t}removeElementScroll(e){const t={x:{min:0,max:0},y:{min:0,max:0}};if(qM(t,e),this.scroll?.wasRoot)return t;for(let n=0;n<this.path.length;n++){const r=this.path[n],{scroll:s,options:i}=r;r!==this.root&&s&&i.layoutScroll&&(s.wasRoot&&qM(t,e),XI(t.x,s.offset.x),XI(t.y,s.offset.y))}return t}applyTransform(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n={x:{min:0,max:0},y:{min:0,max:0}};qM(n,e);for(let r=0;r<this.path.length;r++){const e=this.path[r];!t&&e.options.layoutScroll&&e.scroll&&e!==e.root&&ZI(n,{x:-e.scroll.offset.x,y:-e.scroll.offset.y}),BI(e.latestValues)&&ZI(n,e.latestValues)}return BI(this.latestValues)&&ZI(n,this.latestValues),n}removeTransform(e){const t={x:{min:0,max:0},y:{min:0,max:0}};qM(t,e);for(let n=0;n<this.path.length;n++){const e=this.path[n];if(!e.instance)continue;if(!BI(e.latestValues))continue;UI(e.latestValues)&&e.updateSnapshot();const r={x:{min:0,max:0},y:{min:0,max:0}};qM(r,e.measurePageBox()),JM(t,e.latestValues,e.snapshot?e.snapshot.layoutBox:void 0,r)}return BI(this.latestValues)&&JM(t,this.latestValues),t}setTargetDelta(e){this.targetDelta=e,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(e){this.options={...this.options,...e,crossfade:void 0===e.crossfade||e.crossfade}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==nC.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=t.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=t.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=t.isSharedProjectionDirty);const n=Boolean(this.resumingFrom)||this!==t;if(!(e||n&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:r,layoutId:s}=this.options;if(this.layout&&(r||s)){if(this.resolvedRelativeTargetAt=nC.timestamp,!this.targetDelta&&!this.relativeTarget){const e=this.getClosestProjectingParent();e&&e.layout&&1!==this.animationProgress?(this.relativeParent=e,this.forceRelativeParentToResolveTarget(),this.relativeTarget={x:{min:0,max:0},y:{min:0,max:0}},this.relativeTargetOrigin={x:{min:0,max:0},y:{min:0,max:0}},OI(this.relativeTargetOrigin,this.layout.layoutBox,e.layout.layoutBox),qM(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(this.relativeTarget||this.targetDelta){var i,a,o;if(this.target||(this.target={x:{min:0,max:0},y:{min:0,max:0}},this.targetWithTransforms={x:{min:0,max:0},y:{min:0,max:0}}),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),i=this.target,a=this.relativeTarget,o=this.relativeParent.target,LI(i.x,a.x,o.x),LI(i.y,a.y,o.y)):this.targetDelta?(Boolean(this.resumingFrom)?this.target=this.applyTransform(this.layout.layoutBox):qM(this.target,this.layout.layoutBox),GI(this.target,this.targetDelta)):qM(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const e=this.getClosestProjectingParent();e&&Boolean(e.resumingFrom)===Boolean(this.resumingFrom)&&!e.options.layoutScroll&&e.target&&1!==this.animationProgress?(this.relativeParent=e,this.forceRelativeParentToResolveTarget(),this.relativeTarget={x:{min:0,max:0},y:{min:0,max:0}},this.relativeTargetOrigin={x:{min:0,max:0},y:{min:0,max:0}},OI(this.relativeTargetOrigin,this.target,e.target),qM(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Jj.value&&oP.calculatedTargetDeltas++}}}getClosestProjectingParent(){if(this.parent&&!UI(this.parent.latestValues)&&!$I(this.parent.latestValues))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return Boolean((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const e=this.getLead(),t=Boolean(this.resumingFrom)||this!==e;let n=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(n=!1),t&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(n=!1),this.resolvedRelativeTargetAt===nC.timestamp&&(n=!1),n)return;const{layout:r,layoutId:s}=this.options;if(this.isTreeAnimating=Boolean(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!r&&!s)return;qM(this.layoutCorrected,this.layout.layoutBox);const i=this.treeScale.x,a=this.treeScale.y;!function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const s=n.length;if(!s)return;let i,a;t.x=t.y=1;for(let o=0;o<s;o++){i=n[o],a=i.projectionDelta;const{visualElement:s}=i.options;s&&s.props.style&&"contents"===s.props.style.display||(r&&i.options.layoutScroll&&i.scroll&&i!==i.root&&ZI(e,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),a&&(t.x*=a.x.scale,t.y*=a.y.scale,GI(e,a)),r&&BI(i.latestValues)&&ZI(e,i.latestValues))}t.x<QI&&t.x>YI&&(t.x=1),t.y<QI&&t.y>YI&&(t.y=1)}(this.layoutCorrected,this.treeScale,this.path,t),!e.layout||e.target||1===this.treeScale.x&&1===this.treeScale.y||(e.target=e.layout.layoutBox,e.targetWithTransforms={x:{min:0,max:0},y:{min:0,max:0}});const{target:o}=e;o?(this.projectionDelta&&this.prevProjectionDelta?(KM(this.prevProjectionDelta.x,this.projectionDelta.x),KM(this.prevProjectionDelta.y,this.projectionDelta.y)):this.createProjectionDeltas(),RI(this.projectionDelta,this.layoutCorrected,o,this.latestValues),this.treeScale.x===i&&this.treeScale.y===a&&iP(this.projectionDelta.x,this.prevProjectionDelta.x)&&iP(this.projectionDelta.y,this.prevProjectionDelta.y)||(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",o)),Jj.value&&oP.calculatedProjections++):this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender())}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.options.visualElement?.scheduleRender(),e){const e=this.getStack();e&&e.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}},this.projectionDelta={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}},this.projectionDeltaWithTransform={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}}}setAnimationOrigin(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=this.snapshot,r=n?n.latestValues:{},s={...this.latestValues},i={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};this.relativeParent&&this.relativeParent.options.layoutRoot||(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!t;const a={x:{min:0,max:0},y:{min:0,max:0}},o=(n?n.source:void 0)!==(this.layout?this.layout.source:void 0),l=this.getStack(),c=!l||l.members.length<=1,u=Boolean(o&&!c&&!0===this.options.crossfade&&!this.path.some(TP));let d;this.animationProgress=0,this.mixTargetDelta=t=>{const n=t/1e3;jP(i.x,e.x,n),jP(i.y,e.y,n),this.setTargetDelta(i),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(OI(a,this.layout.layoutBox,this.relativeParent.layout.layoutBox),function(e,t,n,r){CP(e.x,t.x,n.x,r),CP(e.y,t.y,n.y,r)}(this.relativeTarget,this.relativeTargetOrigin,a,n),d&&function(e,t){return tP(e.x,t.x)&&tP(e.y,t.y)}(this.relativeTarget,d)&&(this.isProjectionDirty=!1),d||(d={x:{min:0,max:0},y:{min:0,max:0}}),qM(d,this.relativeTarget)),o&&(this.animationValues=s,function(e,t,n,r,s,i){s?(e.opacity=fT(0,n.opacity??1,BM(r)),e.opacityExit=fT(t.opacity??1,0,$M(r))):i&&(e.opacity=fT(t.opacity??1,n.opacity??1,r));for(let a=0;a<FM;a++){const s=`border${OM[a]}Radius`;let i=UM(t,s),o=UM(n,s);void 0===i&&void 0===o||(i||(i=0),o||(o=0),0===i||0===o||zM(i)===zM(o)?(e[s]=Math.max(fT(VM(i),VM(o),r),0),(YC.test(o)||YC.test(i))&&(e[s]+="%")):e[s]=o)}(t.rotate||n.rotate)&&(e.rotate=fT(t.rotate||0,n.rotate||0,r))}(s,r,this.latestValues,n,u,c)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=n},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(e){this.notifyListeners("animationStart"),this.currentAnimation?.stop(!1),this.resumingFrom?.currentAnimation?.stop(!1),this.pendingAnimation&&(tC(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=eC.update((()=>{SM.hasAnimatedSinceResize=!0,AC.layout++,this.motionValue||(this.motionValue=gC(0)),this.currentAnimation=function(e,t,n){const r=bC(e)?e:gC(e);return r.start(sI("",r,t,n)),r.animation}(this.motionValue,[0,1e3],{...e,isSync:!0,onUpdate:t=>{this.mixTargetDelta(t),e.onUpdate&&e.onUpdate(t)},onStop:()=>{AC.layout--},onComplete:()=>{AC.layout--,e.onComplete&&e.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0}))}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const e=this.getStack();e&&e.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(1e3),this.currentAnimation.stop(!1)),this.completeAnimation()}applyTransformsToTarget(){const e=this.getLead();let{targetWithTransforms:t,target:n,layout:r,latestValues:s}=e;if(t&&n&&r){if(this!==e&&this.layout&&r&&RP(this.options.animationType,this.layout.layoutBox,r.layoutBox)){n=this.target||{x:{min:0,max:0},y:{min:0,max:0}};const t=MI(this.layout.layoutBox.x);n.x.min=e.target.x.min,n.x.max=n.x.min+t;const r=MI(this.layout.layoutBox.y);n.y.min=e.target.y.min,n.y.max=n.y.min+r}qM(t,n),ZI(t,s),RI(this.projectionDeltaWithTransform,this.layoutCorrected,t,s)}}registerSharedNode(e,t){this.sharedNodes.has(e)||this.sharedNodes.set(e,new aP);this.sharedNodes.get(e).add(t);const n=t.options.initialPromotionConfig;t.promote({transition:n?n.transition:void 0,preserveFollowOpacity:n&&n.shouldPreserveFollowOpacity?n.shouldPreserveFollowOpacity(t):void 0})}isLead(){const e=this.getStack();return!e||e.lead===this}getLead(){const{layoutId:e}=this.options;return e&&this.getStack()?.lead||this}getPrevLead(){const{layoutId:e}=this.options;return e?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:e}=this.options;if(e)return this.root.sharedNodes.get(e)}promote(){let{needsReset:e,transition:t,preserveFollowOpacity:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const r=this.getStack();r&&r.promote(this,n),e&&(this.projectionDelta=void 0,this.needsReset=!0),t&&this.setOptions({transition:t})}relegate(){const e=this.getStack();return!!e&&e.relegate(this)}resetSkewAndRotation(){const{visualElement:e}=this.options;if(!e)return;let t=!1;const{latestValues:n}=e;if((n.z||n.rotate||n.rotateX||n.rotateY||n.rotateZ||n.skewX||n.skewY)&&(t=!0),!t)return;const r={};n.z&&dP("z",e,r,this.animationValues);for(let s=0;s<lP.length;s++)dP(`rotate${lP[s]}`,e,r,this.animationValues),dP(`skew${lP[s]}`,e,r,this.animationValues);e.render();for(const s in r)e.setStaticValue(s,r[s]),this.animationValues&&(this.animationValues[s]=r[s]);e.scheduleRender()}getProjectionStyles(e){if(!this.instance||this.isSVG)return;if(!this.isVisible)return cP;const t={visibility:""},n=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,t.opacity="",t.pointerEvents=DM(e?.pointerEvents)||"",t.transform=n?n(this.latestValues,""):"none",t;const r=this.getLead();if(!this.projectionDelta||!this.layout||!r.target){const t={};return this.options.layoutId&&(t.opacity=void 0!==this.latestValues.opacity?this.latestValues.opacity:1,t.pointerEvents=DM(e?.pointerEvents)||""),this.hasProjected&&!BI(this.latestValues)&&(t.transform=n?n({},""):"none",this.hasProjected=!1),t}const s=r.animationValues||r.latestValues;this.applyTransformsToTarget(),t.transform=function(e,t,n){let r="";const s=e.x.translate/t.x,i=e.y.translate/t.y,a=n?.z||0;if((s||i||a)&&(r=`translate3d(${s}px, ${i}px, ${a}px) `),1===t.x&&1===t.y||(r+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:e,rotate:t,rotateX:s,rotateY:i,skewX:a,skewY:o}=n;e&&(r=`perspective(${e}px) ${r}`),t&&(r+=`rotate(${t}deg) `),s&&(r+=`rotateX(${s}deg) `),i&&(r+=`rotateY(${i}deg) `),a&&(r+=`skewX(${a}deg) `),o&&(r+=`skewY(${o}deg) `)}const o=e.x.scale*t.x,l=e.y.scale*t.y;return 1===o&&1===l||(r+=`scale(${o}, ${l})`),r||"none"}(this.projectionDeltaWithTransform,this.treeScale,s),n&&(t.transform=n(s,t.transform));const{x:i,y:a}=this.projectionDelta;t.transformOrigin=`${100*i.origin}% ${100*a.origin}% 0`,r.animationValues?t.opacity=r===this?s.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:s.opacityExit:t.opacity=r===this?void 0!==s.opacity?s.opacity:"":void 0!==s.opacityExit?s.opacityExit:0;for(const o in TM){if(void 0===s[o])continue;const{correct:e,applyTo:n,isCSSVariable:i}=TM[o],a="none"===t.transform?s[o]:e(s[o],r);if(n){const e=n.length;for(let r=0;r<e;r++)t[n[r]]=a}else i?this.options.visualElement.renderState.vars[o]=a:t[o]=a}return this.options.layoutId&&(t.pointerEvents=r===this?DM(e?.pointerEvents)||"":"none"),t}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach((e=>e.currentAnimation?.stop(!1))),this.root.nodes.forEach(xP),this.root.sharedNodes.clear()}}}function mP(e){e.updateLayout()}function pP(e){const t=e.resumeFrom?.snapshot||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:r}=e.layout,{animationType:s}=e.options,i=t.source!==e.layout.source;"size"===s?VI((e=>{const r=i?t.measuredBox[e]:t.layoutBox[e],s=MI(r);r.min=n[e].min,r.max=r.min+s})):RP(s,t.layoutBox,n)&&VI((r=>{const s=i?t.measuredBox[r]:t.layoutBox[r],a=MI(n[r]);s.max=s.min+a,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[r].max=e.relativeTarget[r].min+a)}));const a={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};RI(a,n,t.layoutBox);const o={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};i?RI(o,e.applyTransform(r,!0),t.measuredBox):RI(o,n,t.layoutBox);const l=!eP(a);let c=!1;if(!e.resumeFrom){const r=e.getClosestProjectingParent();if(r&&!r.resumeFrom){const{snapshot:s,layout:i}=r;if(s&&i){const a={x:{min:0,max:0},y:{min:0,max:0}};OI(a,t.layoutBox,s.layoutBox);const o={x:{min:0,max:0},y:{min:0,max:0}};OI(o,n,i.layoutBox),rP(a,o)||(c=!0),r.options.layoutRoot&&(e.relativeTarget=o,e.relativeTargetOrigin=a,e.relativeParent=r)}}}e.notifyListeners("didUpdate",{layout:n,snapshot:t,delta:o,layoutDelta:a,hasLayoutChanged:l,hasRelativeLayoutChanged:c})}else if(e.isLead()){const{onExitComplete:t}=e.options;t&&t()}e.options.transition=void 0}function gP(e){Jj.value&&oP.nodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=Boolean(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function yP(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function vP(e){e.clearSnapshot()}function xP(e){e.clearMeasurements()}function bP(e){e.isLayoutDirty=!1}function wP(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function _P(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function kP(e){e.resolveTargetDelta()}function NP(e){e.calcProjection()}function SP(e){e.resetSkewAndRotation()}function EP(e){e.removeLeadSnapshot()}function jP(e,t,n){e.translate=fT(t.translate,0,n),e.scale=fT(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function CP(e,t,n,r){e.min=fT(t.min,n.min,r),e.max=fT(t.max,n.max,r)}function TP(e){return e.animationValues&&void 0!==e.animationValues.opacityExit}const AP={duration:.45,ease:[.4,0,.1,1]},IP=e=>"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),MP=IP("applewebkit/")&&!IP("chrome/")?Math.round:Yj;function PP(e){e.min=MP(e.min),e.max=MP(e.max)}function RP(e,t,n){return"position"===e||"preserve-aspect"===e&&(r=sP(t),s=sP(n),i=.2,!(Math.abs(r-s)<=i));var r,s,i}function LP(e){return e!==e.root&&e.scroll?.wasRoot}const DP=fP({attachResizeListener:(e,t)=>jI(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),OP={current:void 0},FP=fP({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!OP.current){const e=new DP({});e.mount(window),e.setOptions({layoutScroll:!0}),OP.current=e}return OP.current},resetTransform:(e,t)=>{e.style.transform=void 0!==t?t:"none"},checkIsScrollRoot:e=>Boolean("fixed"===window.getComputedStyle(e).position)}),VP={pan:{Feature:class extends _I{constructor(){super(...arguments),this.removePointerDownListener=Yj}onPointerDown(e){this.session=new sM(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:tM(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:n,onPanEnd:r}=this.node.getProps();return{onSessionStart:xM(e),onStart:xM(t),onMove:n,onEnd:(e,t)=>{delete this.session,r&&eC.postRender((()=>r(e,t)))}}}mount(){this.removePointerDownListener=AI(this.node.current,"pointerdown",(e=>this.onPointerDown(e)))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}},drag:{Feature:class extends _I{constructor(e){super(e),this.removeGroupControls=Yj,this.removeListeners=Yj,this.controls=new yM(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Yj}unmount(){this.removeGroupControls(),this.removeListeners()}},ProjectionNode:FP,MeasureLayout:IM}};function zP(e,t){const n=function(e,t,n){if(e instanceof EventTarget)return[e];if("string"===typeof e){let r=document;t&&(r=t.current);const s=n?.[e]??r.querySelectorAll(e);return s?Array.from(s):[]}return Array.from(e)}(e),r=new AbortController;return[n,{passive:!0,...t,signal:r.signal},()=>r.abort()]}function UP(e){return!("touch"===e.pointerType||EI())}function BP(e,t,n){const{props:r}=e;e.animationState&&r.whileHover&&e.animationState.setActive("whileHover","Start"===n);const s=r["onHover"+n];s&&eC.postRender((()=>s(t,TI(t))))}const $P=(e,t)=>!!t&&(e===t||$P(e,t.parentElement)),HP=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);const WP=new WeakSet;function qP(e){return t=>{"Enter"===t.key&&e(t)}}function KP(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}function GP(e){return CI(e)&&!EI()}function YP(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const[r,s,i]=zP(e,n),a=e=>{const r=e.currentTarget;if(!GP(e))return;WP.add(r);const i=t(r,e),a=(e,t)=>{window.removeEventListener("pointerup",o),window.removeEventListener("pointercancel",l),WP.has(r)&&WP.delete(r),GP(e)&&"function"===typeof i&&i(e,{success:t})},o=e=>{a(e,r===window||r===document||n.useGlobalTarget||$P(r,e.target))},l=e=>{a(e,!1)};window.addEventListener("pointerup",o,s),window.addEventListener("pointercancel",l,s)};return r.forEach((e=>{var t;(n.useGlobalTarget?window:e).addEventListener("pointerdown",a,s),e instanceof HTMLElement&&(e.addEventListener("focus",(e=>((e,t)=>{const n=e.currentTarget;if(!n)return;const r=qP((()=>{if(WP.has(n))return;KP(n,"down");const e=qP((()=>{KP(n,"up")}));n.addEventListener("keyup",e,t),n.addEventListener("blur",(()=>KP(n,"cancel")),t)}));n.addEventListener("keydown",r,t),n.addEventListener("blur",(()=>n.removeEventListener("keydown",r)),t)})(e,s))),t=e,HP.has(t.tagName)||-1!==t.tabIndex||e.hasAttribute("tabindex")||(e.tabIndex=0))})),i}function QP(e,t,n){const{props:r}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&r.whileTap&&e.animationState.setActive("whileTap","Start"===n);const s=r["onTap"+("End"===n?"":n)];s&&eC.postRender((()=>s(t,TI(t))))}const XP=new WeakMap,JP=new WeakMap,ZP=e=>{const t=XP.get(e.target);t&&t(e)},eR=e=>{e.forEach(ZP)};function tR(e,t,n){const r=function(e){let{root:t,...n}=e;const r=t||document;JP.has(r)||JP.set(r,{});const s=JP.get(r),i=JSON.stringify(n);return s[i]||(s[i]=new IntersectionObserver(eR,{root:t,...n})),s[i]}(t);return XP.set(e,n),r.observe(e),()=>{XP.delete(e),r.unobserve(e)}}const nR={some:0,all:1};const rR={inView:{Feature:class extends _I{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:n,amount:r="some",once:s}=e,i={root:t?t.current:void 0,rootMargin:n,threshold:"number"===typeof r?r:nR[r]};return tR(this.node.current,i,(e=>{const{isIntersecting:t}=e;if(this.isInView===t)return;if(this.isInView=t,s&&!t&&this.hasEnteredView)return;t&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",t);const{onViewportEnter:n,onViewportLeave:r}=this.node.getProps(),i=t?n:r;i&&i(e)}))}mount(){this.startObserver()}update(){if("undefined"===typeof IntersectionObserver)return;const{props:e,prevProps:t}=this.node,n=["amount","margin","root"].some(function(e){let{viewport:t={}}=e,{viewport:n={}}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e=>t[e]!==n[e]}(e,t));n&&this.startObserver()}unmount(){}}},tap:{Feature:class extends _I{mount(){const{current:e}=this.node;e&&(this.unmount=YP(e,((e,t)=>(QP(this.node,t,"Start"),(e,t)=>{let{success:n}=t;return QP(this.node,e,n?"End":"Cancel")})),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}},focus:{Feature:class extends _I{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch(hF){e=!0}e&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){this.isActive&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=EC(jI(this.node.current,"focus",(()=>this.onFocus())),jI(this.node.current,"blur",(()=>this.onBlur())))}unmount(){}}},hover:{Feature:class extends _I{mount(){const{current:e}=this.node;e&&(this.unmount=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const[r,s,i]=zP(e,n),a=e=>{if(!UP(e))return;const{target:n}=e,r=t(n,e);if("function"!==typeof r||!n)return;const i=e=>{UP(e)&&(r(e),n.removeEventListener("pointerleave",i))};n.addEventListener("pointerleave",i,s)};return r.forEach((e=>{e.addEventListener("pointerenter",a,s)})),i}(e,((e,t)=>(BP(this.node,t,"Start"),e=>BP(this.node,e,"End")))))}unmount(){}}}},sR={layout:{ProjectionNode:FP,MeasureLayout:IM}},iR=(0,r.createContext)({strict:!1}),aR=(0,r.createContext)({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),oR=(0,r.createContext)({});function lR(e){return Hj(e.animate)||hI.some((t=>uI(e[t])))}function cR(e){return Boolean(lR(e)||e.variants)}function uR(e){const{initial:t,animate:n}=function(e,t){if(lR(e)){const{initial:t,animate:n}=e;return{initial:!1===t||uI(t)?t:void 0,animate:uI(n)?n:void 0}}return!1!==e.inherit?t:{}}(e,(0,r.useContext)(oR));return(0,r.useMemo)((()=>({initial:t,animate:n})),[dR(t),dR(n)])}function dR(e){return Array.isArray(e)?e.join(" "):e}const hR="undefined"!==typeof window,fR={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},mR={};for(const YV in fR)mR[YV]={isEnabled:e=>fR[YV].some((t=>!!e[t]))};const pR=Symbol.for("motionComponentSymbol");function gR(e,t,n){return(0,r.useCallback)((r=>{r&&e.onMount&&e.onMount(r),t&&(r?t.mount(r):t.unmount()),n&&("function"===typeof n?n(r):nM(n)&&(n.current=r))}),[t])}const yR=hR?r.useLayoutEffect:r.useEffect;function vR(e,t,n,s,i){const{visualElement:a}=(0,r.useContext)(oR),o=(0,r.useContext)(iR),l=(0,r.useContext)(_M),c=(0,r.useContext)(aR).reducedMotion,u=(0,r.useRef)(null);s=s||o.renderer,!u.current&&s&&(u.current=s(e,{visualState:t,parent:a,props:n,presenceContext:l,blockInitialAnimation:!!l&&!1===l.initial,reducedMotionConfig:c}));const d=u.current,h=(0,r.useContext)(NM);!d||d.projection||!i||"html"!==d.type&&"svg"!==d.type||function(e,t,n,r){const{layoutId:s,layout:i,drag:a,dragConstraints:o,layoutScroll:l,layoutRoot:c,layoutCrossfade:u}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:xR(e.parent)),e.projection.setOptions({layoutId:s,layout:i,alwaysMeasureLayout:Boolean(a)||o&&nM(o),visualElement:e,animationType:"string"===typeof i?i:"both",initialPromotionConfig:r,crossfade:u,layoutScroll:l,layoutRoot:c})}(u.current,n,i,h);const f=(0,r.useRef)(!1);(0,r.useInsertionEffect)((()=>{d&&f.current&&d.update(n,l)}));const m=n[kC],p=(0,r.useRef)(Boolean(m)&&!window.MotionHandoffIsComplete?.(m)&&window.MotionHasOptimisedAnimation?.(m));return yR((()=>{d&&(f.current=!0,window.MotionIsMounted=!0,d.updateFeatures(),bM.render(d.render),p.current&&d.animationState&&d.animationState.animateChanges())})),(0,r.useEffect)((()=>{d&&(!p.current&&d.animationState&&d.animationState.animateChanges(),p.current&&(queueMicrotask((()=>{window.MotionHandoffMarkAsComplete?.(m)})),p.current=!1))})),d}function xR(e){if(e)return!1!==e.options.allowProjection?e.projection:xR(e.parent)}function bR(e){let{preloadedFeatures:t,createVisualElement:n,useRender:s,useVisualState:i,Component:a}=e;function o(e,t){let o;const l={...(0,r.useContext)(aR),...e,layoutId:wR(e)},{isStatic:c}=l,u=uR(e),d=i(e,c);if(!c&&hR){!function(){(0,r.useContext)(iR).strict;0}();const e=function(e){const{drag:t,layout:n}=mR;if(!t&&!n)return{};const r={...t,...n};return{MeasureLayout:t?.isEnabled(e)||n?.isEnabled(e)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}(l);o=e.MeasureLayout,u.visualElement=vR(a,d,l,n,e.ProjectionNode)}return(0,Jt.jsxs)(oR.Provider,{value:u,children:[o&&u.visualElement?(0,Jt.jsx)(o,{visualElement:u.visualElement,...l}):null,s(a,e,gR(d,u.visualElement,t),d,c,u.visualElement)]})}t&&function(e){for(const t in e)mR[t]={...mR[t],...e[t]}}(t),o.displayName=`motion.${"string"===typeof a?a:`create(${a.displayName??a.name??""})`}`;const l=(0,r.forwardRef)(o);return l[pR]=a,l}function wR(e){let{layoutId:t}=e;const n=(0,r.useContext)(kM).id;return n&&void 0!==t?n+"-"+t:t}function _R(e,t){let{layout:n,layoutId:r}=t;return iC.has(e)||e.startsWith("origin")||(n||void 0!==r)&&(!!TM[e]||"opacity"===e)}const kR=(e,t)=>t&&"number"===typeof e?t.transform(e):e,NR={...DC,transform:Math.round},SR={borderWidth:QC,borderTopWidth:QC,borderRightWidth:QC,borderBottomWidth:QC,borderLeftWidth:QC,borderRadius:QC,radius:QC,borderTopLeftRadius:QC,borderTopRightRadius:QC,borderBottomRightRadius:QC,borderBottomLeftRadius:QC,width:QC,maxWidth:QC,height:QC,maxHeight:QC,top:QC,right:QC,bottom:QC,left:QC,padding:QC,paddingTop:QC,paddingRight:QC,paddingBottom:QC,paddingLeft:QC,margin:QC,marginTop:QC,marginRight:QC,marginBottom:QC,marginLeft:QC,backgroundPositionX:QC,backgroundPositionY:QC,...{rotate:GC,rotateX:GC,rotateY:GC,rotateZ:GC,scale:FC,scaleX:FC,scaleY:FC,scaleZ:FC,skew:GC,skewX:GC,skewY:GC,distance:QC,translateX:QC,translateY:QC,translateZ:QC,x:QC,y:QC,z:QC,perspective:QC,transformPerspective:QC,opacity:OC,originX:ZC,originY:ZC,originZ:QC},zIndex:NR,fillOpacity:OC,strokeOpacity:OC,numOctaves:NR},ER={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},jR=sC.length;function CR(e,t,n){const{style:r,vars:s,transformOrigin:i}=e;let a=!1,o=!1;for(const l in t){const e=t[l];if(iC.has(l))a=!0;else if(MC(l))s[l]=e;else{const t=kR(e,SR[l]);l.startsWith("origin")?(o=!0,i[l]=t):r[l]=t}}if(t.transform||(a||n?r.transform=function(e,t,n){let r="",s=!0;for(let i=0;i<jR;i++){const a=sC[i],o=e[a];if(void 0===o)continue;let l=!0;if(l="number"===typeof o?o===(a.startsWith("scale")?1:0):0===parseFloat(o),!l||n){const e=kR(o,SR[a]);l||(s=!1,r+=`${ER[a]||a}(${e}) `),n&&(t[a]=e)}}return r=r.trim(),n?r=n(t,s?"":r):s&&(r="none"),r}(t,e.transform,n):r.transform&&(r.transform="none")),o){const{originX:e="50%",originY:t="50%",originZ:n=0}=i;r.transformOrigin=`${e} ${t} ${n}`}}const TR=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function AR(e,t,n){for(const r in t)bC(t[r])||_R(r,n)||(e[r]=t[r])}function IR(e,t){const n={};return AR(n,e.style||{},e),Object.assign(n,function(e,t){let{transformTemplate:n}=e;return(0,r.useMemo)((()=>{const e={style:{},transform:{},transformOrigin:{},vars:{}};return CR(e,t,n),Object.assign({},e.vars,e.style)}),[t])}(e,t)),n}function MR(e,t){const n={},r=IR(e,t);return e.drag&&!1!==e.dragListener&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=!0===e.drag?"none":"pan-"+("x"===e.drag?"y":"x")),void 0===e.tabIndex&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=r,n}const PR=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function RR(e){return e.startsWith("while")||e.startsWith("drag")&&"draggable"!==e||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||PR.has(e)}let LR=e=>!RR(e);try{(DR=require("@emotion/is-prop-valid").default)&&(LR=e=>e.startsWith("on")?!RR(e):DR(e))}catch{}var DR;const OR=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function FR(e){return"string"===typeof e&&!e.includes("-")&&!!(OR.indexOf(e)>-1||/[A-Z]/u.test(e))}const VR={offset:"stroke-dashoffset",array:"stroke-dasharray"},zR={offset:"strokeDashoffset",array:"strokeDasharray"};function UR(e,t,n,r,s){let{attrX:i,attrY:a,attrScale:o,pathLength:l,pathSpacing:c=1,pathOffset:u=0,...d}=t;if(CR(e,d,r),n)return void(e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox));e.attrs=e.style,e.style={};const{attrs:h,style:f}=e;h.transform&&(f.transform=h.transform,delete h.transform),(f.transform||h.transformOrigin)&&(f.transformOrigin=h.transformOrigin??"50% 50%",delete h.transformOrigin),f.transform&&(f.transformBox=s?.transformBox??"fill-box",delete h.transformBox),void 0!==i&&(h.x=i),void 0!==a&&(h.y=a),void 0!==o&&(h.scale=o),void 0!==l&&function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];e.pathLength=1;const i=s?VR:zR;e[i.offset]=QC.transform(-r);const a=QC.transform(t),o=QC.transform(n);e[i.array]=`${a} ${o}`}(h,l,c,u,!1)}const BR=()=>({style:{},transform:{},transformOrigin:{},vars:{},attrs:{}}),$R=e=>"string"===typeof e&&"svg"===e.toLowerCase();function HR(e,t,n,s){const i=(0,r.useMemo)((()=>{const n={style:{},transform:{},transformOrigin:{},vars:{},attrs:{}};return UR(n,t,$R(s),e.transformTemplate,e.style),{...n.attrs,style:{...n.style}}}),[t]);if(e.style){const t={};AR(t,e.style,e),i.style={...t,...i.style}}return i}function WR(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(t,n,s,i,a)=>{let{latestValues:o}=i;const l=(FR(t)?HR:MR)(n,o,a,t),c=function(e,t,n){const r={};for(const s in e)"values"===s&&"object"===typeof e.values||(LR(s)||!0===n&&RR(s)||!t&&!RR(s)||e.draggable&&s.startsWith("onDrag"))&&(r[s]=e[s]);return r}(n,"string"===typeof t,e),u=t!==r.Fragment?{...c,...l,ref:s}:{},{children:d}=n,h=(0,r.useMemo)((()=>bC(d)?d.get():d),[d]);return(0,r.createElement)(t,{...u,children:h})}}const qR=e=>(t,n)=>{const s=(0,r.useContext)(oR),i=(0,r.useContext)(_M),a=()=>function(e,t,n,r){let{scrapeMotionValuesFromProps:s,createRenderState:i}=e;return{latestValues:KR(t,n,r,s),renderState:i()}}(e,t,s,i);return n?a():function(e){const t=(0,r.useRef)(null);return null===t.current&&(t.current=e()),t.current}(a)};function KR(e,t,n,r){const s={},i=r(e,{});for(const h in i)s[h]=DM(i[h]);let{initial:a,animate:o}=e;const l=lR(e),c=cR(e);t&&c&&!l&&!1!==e.inherit&&(void 0===a&&(a=t.initial),void 0===o&&(o=t.animate));let u=!!n&&!1===n.initial;u=u||!1===a;const d=u?o:a;if(d&&"boolean"!==typeof d&&!Hj(d)){const t=Array.isArray(d)?d:[d];for(let n=0;n<t.length;n++){const r=qj(e,t[n]);if(r){const{transitionEnd:e,transition:t,...n}=r;for(const r in n){let e=n[r];if(Array.isArray(e)){e=e[u?e.length-1:0]}null!==e&&(s[r]=e)}for(const r in e)s[r]=e[r]}}}return s}function GR(e,t,n){const{style:r}=e,s={};for(const i in r)(bC(r[i])||t.style&&bC(t.style[i])||_R(i,e)||void 0!==n?.getValue(i)?.liveStyle)&&(s[i]=r[i]);return s}const YR={useVisualState:qR({scrapeMotionValuesFromProps:GR,createRenderState:TR})};function QR(e,t,n){const r=GR(e,t,n);for(const s in e)if(bC(e[s])||bC(t[s])){r[-1!==sC.indexOf(s)?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s]=e[s]}return r}const XR={useVisualState:qR({scrapeMotionValuesFromProps:QR,createRenderState:BR})};function JR(e,t){return function(n){let{forwardMotionProps:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{forwardMotionProps:!1};return bR({...FR(n)?XR:YR,preloadedFeatures:e,useRender:WR(r),createVisualElement:t,Component:n})}}const ZR=e=>t=>t.test(e),eL=[DC,QC,YC,GC,JC,XC,{test:e=>"auto"===e,parse:e=>e}],tL=e=>eL.find(ZR(e)),nL=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e),rL=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function sL(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;const[r,s]=function(e){const t=rL.exec(e);if(!t)return[,];const[,n,r,s]=t;return[`--${n??r}`,s]}(e);if(!r)return;const i=window.getComputedStyle(t).getPropertyValue(r);if(i){const e=i.trim();return nL(e)?parseFloat(e):e}return RC(s)?sL(s,t,n+1):s}const iL=e=>/^0[^.\s]+$/u.test(e);const aL=new Set(["brightness","contrast","saturate","opacity"]);function oL(e){const[t,n]=e.slice(0,-1).split("(");if("drop-shadow"===t)return e;const[r]=n.match(zC)||[];if(!r)return e;const s=n.replace(r,"");let i=aL.has(t)?1:0;return r!==n&&(i*=100),t+"("+i+s+")"}const lL=/\b([a-z-]*)\(.*?\)/gu,cL={...uT,getAnimatableNone:e=>{const t=e.match(lL);return t?t.map(oL).join(" "):e}},uL={...SR,color:tT,backgroundColor:tT,outlineColor:tT,fill:tT,stroke:tT,borderColor:tT,borderTopColor:tT,borderRightColor:tT,borderBottomColor:tT,borderLeftColor:tT,filter:cL,WebkitFilter:cL},dL=e=>uL[e];function hL(e,t){let n=dL(e);return n!==cL&&(n=uT),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const fL=new Set(["auto","none","0"]);class mL extends RA{constructor(e,t,n,r,s){super(e,t,n,r,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:n}=this;if(!t||!t.current)return;super.readKeyframes();for(let o=0;o<e.length;o++){let n=e[o];if("string"===typeof n&&(n=n.trim(),RC(n))){const r=sL(n,t.current);void 0!==r&&(e[o]=r),o===e.length-1&&(this.finalKeyframe=n)}}if(this.resolveNoneKeyframes(),!aC.has(n)||2!==e.length)return;const[r,s]=e,i=tL(r),a=tL(s);if(i!==a)if(NA(i)&&NA(a))for(let o=0;o<e.length;o++){const t=e[o];"string"===typeof t&&(e[o]=parseFloat(t))}else jA[n]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,n=[];for(let s=0;s<e.length;s++)(null===e[s]||("number"===typeof(r=e[s])?0===r:null===r||"none"===r||"0"===r||iL(r)))&&n.push(s);var r;n.length&&function(e,t,n){let r,s=0;for(;s<e.length&&!r;){const t=e[s];"string"===typeof t&&!fL.has(t)&&aT(t).values.length&&(r=e[s]),s++}if(r&&n)for(const i of t)e[i]=hL(n,r)}(e,n,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:n}=this;if(!e||!e.current)return;"height"===n&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=jA[n](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const r=t[t.length-1];void 0!==r&&e.getValue(n,r).jump(r,!1)}measureEndState(){const{element:e,name:t,unresolvedKeyframes:n}=this;if(!e||!e.current)return;const r=e.getValue(t);r&&r.jump(this.measuredOrigin,!1);const s=n.length-1,i=n[s];n[s]=jA[t](e.measureViewportBox(),window.getComputedStyle(e.current)),null!==i&&void 0===this.finalKeyframe&&(this.finalKeyframe=i),this.removedTransforms?.length&&this.removedTransforms.forEach((t=>{let[n,r]=t;e.getValue(n).set(r)})),this.resolveNoneKeyframes()}}const pL=[...eL,tT,uT],gL={current:null},yL={current:!1};const vL=new WeakMap;const xL=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class bL{scrapeMotionValuesFromProps(e,t,n){return{}}constructor(e){let{parent:t,props:n,presenceContext:r,reducedMotionConfig:s,blockInitialAnimation:i,visualState:a}=e,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=RA,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const e=fC.now();this.renderScheduledAt<e&&(this.renderScheduledAt=e,eC.render(this.render,!1,!0))};const{latestValues:l,renderState:c}=a;this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=c,this.parent=t,this.props=n,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=s,this.options=o,this.blockInitialAnimation=Boolean(i),this.isControllingVariants=lR(n),this.isVariantNode=cR(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=Boolean(t&&t.current);const{willChange:u,...d}=this.scrapeMotionValuesFromProps(n,{},this);for(const h in d){const e=d[h];void 0!==l[h]&&bC(e)&&e.set(l[h],!1)}}mount(e){this.current=e,vL.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach(((e,t)=>this.bindToMotionValue(t,e))),yL.current||function(){if(yL.current=!0,hR)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>gL.current=e.matches;e.addListener(t),t()}else gL.current=!1}(),this.shouldReduceMotion="never"!==this.reducedMotionConfig&&("always"===this.reducedMotionConfig||gL.current),this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),tC(this.notifyUpdate),tC(this.render),this.valueSubscriptions.forEach((e=>e())),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const n=iC.has(e);n&&this.onBindTransform&&this.onBindTransform();const r=t.on("change",(t=>{this.latestValues[e]=t,this.props.onUpdate&&eC.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0)})),s=t.on("renderRequest",this.scheduleRender);let i;window.MotionCheckAppearSync&&(i=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,(()=>{r(),s(),i&&i(),t.owner&&t.stop()}))}sortNodePosition(e){return this.current&&this.sortInstanceNodePosition&&this.type===e.type?this.sortInstanceNodePosition(this.current,e.current):0}updateFeatures(){let e="animation";for(e in mR){const t=mR[e];if(!t)continue;const{isEnabled:n,Feature:r}=t;if(!this.features[e]&&r&&n(this.props)&&(this.features[e]=new r(this)),this.features[e]){const t=this.features[e];t.isMounted?t.update():(t.mount(),t.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):{x:{min:0,max:0},y:{min:0,max:0}}}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let n=0;n<xL.length;n++){const t=xL[n];this.propEventSubscriptions[t]&&(this.propEventSubscriptions[t](),delete this.propEventSubscriptions[t]);const r=e["on"+t];r&&(this.propEventSubscriptions[t]=this.on(t,r))}this.prevMotionValues=function(e,t,n){for(const r in t){const s=t[r],i=n[r];if(bC(s))e.addValue(r,s);else if(bC(i))e.addValue(r,gC(s,{owner:e}));else if(i!==s)if(e.hasValue(r)){const t=e.getValue(r);!0===t.liveStyle?t.jump(s):t.hasAnimated||t.set(s)}else{const t=e.getStaticValue(r);e.addValue(r,gC(void 0!==t?t:s,{owner:e}))}}for(const r in n)void 0===t[r]&&e.removeValue(r);return t}(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const n=this.values.get(e);t!==n&&(n&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let n=this.values.get(e);return void 0===n&&void 0!==t&&(n=gC(null===t?void 0:t,{owner:this}),this.addValue(e,n)),n}readValue(e,t){let n=void 0===this.latestValues[e]&&this.current?this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options):this.latestValues[e];return void 0!==n&&null!==n&&("string"===typeof n&&(nL(n)||iL(n))?n=parseFloat(n):!(e=>pL.find(ZR(e)))(n)&&uT.test(t)&&(n=hL(e,t)),this.setBaseTarget(e,bC(n)?n.get():n)),bC(n)?n.get():n}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){const{initial:t}=this.props;let n;if("string"===typeof t||"object"===typeof t){const r=qj(this.props,t,this.presenceContext?.custom);r&&(n=r[e])}if(t&&void 0!==n)return n;const r=this.getBaseTargetFromProps(this.props,e);return void 0===r||bC(r)?void 0!==this.initialValues[e]&&void 0===n?void 0:this.baseTarget[e]:r}on(e,t){return this.events[e]||(this.events[e]=new cC),this.events[e].add(t)}notify(e){if(this.events[e]){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.events[e].notify(...n)}}}class wL extends bL{constructor(){super(...arguments),this.KeyframeResolver=mL}sortInstanceNodePosition(e,t){return 2&e.compareDocumentPosition(t)?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,t){let{vars:n,style:r}=t;delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;bC(e)&&(this.childSubscription=e.on("change",(e=>{this.current&&(this.current.textContent=`${e}`)})))}}function _L(e,t,n,r){let{style:s,vars:i}=t;Object.assign(e.style,s,r&&r.getProjectionStyles(n));for(const a in i)e.style.setProperty(a,i[a])}class kL extends wL{constructor(){super(...arguments),this.type="html",this.renderInstance=_L}readValueFromInstance(e,t){if(iC.has(t))return((e,t)=>{const{transform:n="none"}=getComputedStyle(e);return _A(n,t)})(e,t);{const r=(n=e,window.getComputedStyle(n)),s=(MC(t)?r.getPropertyValue(t):r[t])||0;return"string"===typeof s?s.trim():s}var n}measureInstanceViewportBox(e,t){let{transformPagePoint:n}=t;return eM(e,n)}build(e,t,n){CR(e,t,n.transformTemplate)}scrapeMotionValuesFromProps(e,t,n){return GR(e,t,n)}}const NL=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);class SL extends wL{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=FI}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(iC.has(t)){const e=dL(t);return e&&e.default||0}return t=NL.has(t)?t:_C(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,n){return QR(e,t,n)}build(e,t,n){UR(e,t,this.isSVGTag,n.transformTemplate,n.style)}renderInstance(e,t,n,r){!function(e,t,n,r){_L(e,t,void 0,r);for(const s in t.attrs)e.setAttribute(NL.has(s)?s:_C(s),t.attrs[s])}(e,t,0,r)}mount(e){this.isSVGTag=$R(e.tagName),super.mount(e)}}const EL=(e,t)=>FR(e)?new SL(t):new kL(t,{allowProjection:e!==r.Fragment}),jL=$j(JR({...NI,...rR,...VP,...sR},EL));iS.register(...rj);const CL=function(){const[e,t]=(0,r.useState)(!0),[n,s]=(0,r.useState)({totalHomeowners:0,pendingRequests:0,activeStaff:0,idsLeft:0,currentMonthVisitors:0,lowStockItems:0,averageRating:0,currentMonth:""}),[i,a]=(0,r.useState)([]),[o,l]=(0,r.useState)([]),[c,u]=(0,r.useState)([]),[d,h]=(0,r.useState)({labels:["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],counts:[0,0,0,0,0,0,0],totalVisitors:0}),[f,m]=(0,r.useState)({1:0,2:0,3:0,4:0,5:0}),[p,g]=(0,r.useState)({}),[y,v]=(0,r.useState)({totalMonthlyVisitors:0,scannedByGuards:0}),[x,b]=(0,r.useState)((new Date).getFullYear()),[w,_]=(0,r.useState)({labels:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],visitors:[0,0,0,0,0,0,0,0,0,0,0,0]}),[k,N]=(0,r.useState)(0),S=re();(0,r.useEffect)((()=>{document.title="Admin Dashboard";const e=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var s,i,a;e=Fn(e);let o={includeMetadataChanges:!1,source:"default"},l=0;"object"!=typeof n[l]||Mg(n[l])||(o=n[l],l++);const c={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(Mg(n[l])){const e=n[l];n[l]=null===(s=e.next)||void 0===s?void 0:s.bind(e),n[l+1]=null===(i=e.error)||void 0===i?void 0:i.bind(e),n[l+2]=null===(a=e.complete)||void 0===a?void 0:a.bind(e)}let u,d,h;if(e instanceof Sg)d=vg(e.firestore,Pg),h=sd(e._key.path),u={next:t=>{n[l]&&n[l](Uy(d,e,t))},error:n[l+1],complete:n[l+2]};else{const t=vg(e,Ng);d=vg(t.firestore,Pg),h=t._query;const r=new Ry(d);u={next:e=>{n[l]&&n[l](new Iy(d,r,t,e))},error:n[l+1],complete:n[l+2]},hy(e._query)}return function(e,t,n,r){const s=new tg(r),i=new wp(t,s,n);return e.asyncQueue.enqueueAndForget((async()=>mp(await cg(e),i))),()=>{s.yu(),e.asyncQueue.enqueueAndForget((async()=>pp(await cg(e),i)))}}(Rg(d),h,c,u)}(py(jg(Cv,"services"),yy("status","==","Pending")),(e=>{const t=e.docs.map((e=>({id:e.id,...e.data()})));l(t),s((e=>({...e,pendingRequests:t.length})))}));return C(),E(),j(),()=>e()}),[x]);const E=async()=>{try{const e=new Date(x,0,1),t=new Date(x,11,31,23,59,59,999),n=Rl.fromDate(e),r=Rl.fromDate(t),s=py(jg(Cv,"visitor_qr_codes"),yy("created_at",">=",n),yy("created_at","<=",r)),i=await Ly(s),a=Array(12).fill(0);let o=0;i.forEach((e=>{const t=e.data();if(t.created_at&&t.created_at.seconds){const e=new Date(1e3*t.created_at.seconds).getMonth();a[e]++}t.scanned_by&&t.scanned_at&&o++}));const l=a.reduce(((e,t)=>e+t),0);v({totalMonthlyVisitors:l,scannedByGuards:o}),_({labels:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],visitors:a})}catch(KV){console.error("Error fetching visitor statistics:",KV),Ut.error("Error fetching visitor statistics: "+KV.message)}},j=async()=>{try{const e=new Date,t=e.getMonth(),n=e.getFullYear(),r=["January","February","March","April","May","June","July","August","September","October","November","December"][t],i=new Date(n,t,1),a=new Date(n,t+1,0,23,59,59,999),o=Rl.fromDate(i),l=Rl.fromDate(a),c=py(jg(Cv,"visitor_qr_codes"),yy("created_at",">=",o),yy("created_at","<=",l)),u=(await Ly(c)).size;s((e=>({...e,currentMonthVisitors:u,currentMonth:r})))}catch(KV){console.error("Error fetching current month visitors:",KV),Ut.error("Error fetching current month visitors: "+KV.message)}},C=async()=>{try{t(!0);(new Date).setHours(0,0,0,0);const e=py(jg(Cv,"users"),by("created_at","desc"),_y(5)),n=await Ly(e),r=n.docs.map((e=>({id:e.id,...e.data(),createdAt:e.data().created_at?new Date(1e3*e.data().created_at.seconds):new Date}))),i=py(jg(Cv,"services"),yy("status","==","Pending"),_y(5)),o=await Ly(i),c=py(jg(Cv,"staff"),yy("status","==","Active")),d=await Ly(c),h=py(jg(Cv,"inventory")),f=(await Ly(h)).docs.map((e=>e.data())).filter((e=>e.quantity<=e.reorderPoint)).length,p=py(jg(Cv,"serviceRequests"),yy("status","==","Completed")),v=((await Ly(p)).docs.reduce(((e,t)=>e+(t.data().fee||0)),0),py(jg(Cv,"users"))),x=(await Ly(v),py(jg(Cv,"service_feedback"),by("timestamp","desc"),_y(50))),b=(await Ly(x)).docs.map((e=>({id:e.id,...e.data()}))),w=b.slice(0,5);u(w);const _={1:0,2:0,3:0,4:0,5:0};b.forEach((e=>{const t=parseInt(e.rating)||0;t>=1&&t<=5&&(_[t]+=1)})),m(_);const k=b.reduce(((e,t)=>e+(parseInt(t.rating)||0)),0),N=b.length>0?(k/b.length).toFixed(1):0,S={};b.forEach((e=>{const t=e.service_name,n=parseInt(e.rating)||0;t&&0!==n&&(S[t]||(S[t]={total:0,count:0,average:0}),S[t].total+=n,S[t].count+=1)})),Object.keys(S).forEach((e=>{const{total:t,count:n}=S[e];S[e].average=n>0?(t/n).toFixed(1):0})),g(S);const E=py(jg(Cv,"left_ids")),j=(await Ly(E)).size;s((e=>({...e,totalHomeowners:n.size,pendingRequests:o.size,activeStaff:d.size,idsLeft:j,totalVisitors2025:y.totalMonthlyVisitors,lowStockItems:f,averageRating:N}))),a(r),l(o.docs.map((e=>({id:e.id,...e.data()}))));const C=py(jg(Cv,"services"),by("created_at","desc"),_y(10)),T=(await Ly(C)).docs.map((e=>({id:e.id,...e.data(),type:"service"}))),A=py(jg(Cv,"facility_request"),by("created_at","desc"),_y(10)),I=(await Ly(A)).docs.map((e=>({id:e.id,...e.data(),type:"facility"}))),M=[...T,...I].sort(((e,t)=>{const n=e.created_at||e.updatedAt,r=t.created_at||t.updatedAt;if(!n)return 1;if(!r)return-1;const s=n.seconds?n.seconds:new Date(n).getTime()/1e3;return(r.seconds?r.seconds:new Date(r).getTime()/1e3)-s})).slice(0,5).map((e=>"service"===e.type?{...e,userName:e.resident_name||"Unknown",serviceName:e.type_of_request||e.service_provider||"Service Request",facilityName:null}:{...e,userName:e.homeowner_name||"Unknown",serviceName:null,facilityName:e.facility||"Facility Request"}));l(M)}catch(KV){Ut.error("Error fetching dashboard data: "+KV.message)}finally{t(!1)}},T=e=>{if(!e)return"No date";if(e&&e.seconds){const t=new Date(1e3*e.seconds);return t.toLocaleDateString()+" "+t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!0})}try{const t=new Date(e);return isNaN(t.getTime())?"Invalid date":t.toLocaleDateString()+" "+t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!0})}catch(hF){return"Invalid date"}},A=e=>{const t=[],n=parseInt(e)||0;for(let r=1;r<=5;r++)t.push((0,Jt.jsx)(dx,{className:"inline-block "+(r<=n?"text-yellow-400":"text-gray-300")},r));return t};return(0,Jt.jsx)(Cx,{children:(0,Jt.jsxs)("div",{className:"pt-20 px-6 max-w-7xl mx-auto",children:[(0,Jt.jsx)("div",{className:"bg-white dark:bg-gray-800 shadow-lg rounded-lg p-6 mb-8 border-l-4 border-blue-500",children:(0,Jt.jsxs)("div",{className:"flex flex-wrap justify-between items-start",children:[(0,Jt.jsxs)("div",{children:[(0,Jt.jsxs)("h1",{className:"text-3xl font-bold text-gray-800 dark:text-white flex items-center",children:[(0,Jt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 mr-3 text-blue-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Jt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),"Dashboard Overview"]}),(0,Jt.jsx)("p",{className:"text-gray-600 dark:text-gray-300 mt-2",children:"Monitor community statistics and key performance indicators"})]}),(0,Jt.jsxs)("button",{onClick:()=>{t(!0),N((e=>e+1))},disabled:e,className:`flex items-center px-4 py-2 rounded-lg text-sm ${e?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-blue-50 text-blue-600 hover:bg-blue-100"} transition-colors mt-2 sm:mt-0`,children:[(0,Jt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-2 "+(e?"animate-spin":""),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Jt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),e?"Refreshing...":"Refresh Data"]})]})}),e?(0,Jt.jsxs)("div",{className:"flex flex-col items-center justify-center py-12",children:[(0,Jt.jsx)("div",{className:"w-16 h-16 border-4 border-blue-200 border-t-blue-600 rounded-full animate-spin mb-4"}),(0,Jt.jsx)("p",{className:"text-gray-600",children:"Loading dashboard data..."})]}):(0,Jt.jsxs)(Jt.Fragment,{children:[(0,Jt.jsxs)("div",{className:"bg-white rounded-lg shadow mb-8",children:[(0,Jt.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,Jt.jsx)("h2",{className:"text-lg font-semibold",children:"Quick Actions"})}),(0,Jt.jsxs)("div",{className:"p-4 grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,Jt.jsxs)("button",{onClick:()=>S("/admin/visitor-logs"),className:"flex flex-col items-center justify-center p-4 bg-blue-50 rounded-lg hover:bg-blue-100 transition-colors",children:[(0,Jt.jsx)(ox,{className:"h-8 w-8 text-blue-600 mb-2"}),(0,Jt.jsx)("span",{className:"text-sm font-medium",children:"View Visitor QR"})]}),(0,Jt.jsxs)("button",{onClick:()=>S("/admin/guard-accounts"),className:"flex flex-col items-center justify-center p-4 bg-green-50 rounded-lg hover:bg-green-100 transition-colors",children:[(0,Jt.jsx)(bx,{className:"h-8 w-8 text-green-600 mb-2"}),(0,Jt.jsx)("span",{className:"text-sm font-medium",children:"Manage Guards"})]}),(0,Jt.jsxs)("button",{onClick:()=>S("/admin/user-accounts"),className:"flex flex-col items-center justify-center p-4 bg-purple-50 rounded-lg hover:bg-purple-100 transition-colors",children:[(0,Jt.jsx)(wx,{className:"h-8 w-8 text-purple-600 mb-2"}),(0,Jt.jsx)("span",{className:"text-sm font-medium",children:"Manage Users"})]}),(0,Jt.jsxs)("button",{onClick:()=>S("/admin/feedback"),className:"flex flex-col items-center justify-center p-4 bg-yellow-50 rounded-lg hover:bg-yellow-100 transition-colors",children:[(0,Jt.jsx)(Yv,{className:"h-8 w-8 text-yellow-600 mb-2"}),(0,Jt.jsx)("span",{className:"text-sm font-medium",children:"View Feedback"})]})]})]}),(0,Jt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-8",children:[(0,Jt.jsx)(jL.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"bg-white rounded-lg shadow p-6",children:(0,Jt.jsx)("div",{className:"flex items-center justify-between",children:(0,Jt.jsxs)("div",{className:"flex items-center",children:[(0,Jt.jsx)("div",{className:"p-3 rounded-full bg-blue-100 bg-opacity-75",children:(0,Jt.jsx)(Tx,{className:"h-8 w-8 text-blue-600"})}),(0,Jt.jsxs)("div",{className:"ml-4",children:[(0,Jt.jsx)("h2",{className:"text-gray-600 text-sm",children:"Total Homeowners"}),(0,Jt.jsx)("p",{className:"text-2xl font-semibold text-gray-800",children:n.totalHomeowners})]})]})})}),(0,Jt.jsx)(jL.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"bg-white rounded-lg shadow p-6",children:(0,Jt.jsxs)("div",{className:"flex items-center",children:[(0,Jt.jsx)("div",{className:"p-3 rounded-full bg-yellow-100 bg-opacity-75",children:(0,Jt.jsx)(Ax,{className:"h-8 w-8 text-yellow-600"})}),(0,Jt.jsxs)("div",{className:"ml-4",children:[(0,Jt.jsx)("h2",{className:"text-gray-600 text-sm",children:"Pending Requests"}),(0,Jt.jsx)("p",{className:"text-2xl font-semibold text-gray-800",children:n.pendingRequests})]})]})}),(0,Jt.jsx)(jL.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"bg-white rounded-lg shadow p-6",children:(0,Jt.jsxs)("div",{className:"flex items-center",children:[(0,Jt.jsx)("div",{className:"p-3 rounded-full bg-green-100 bg-opacity-75",children:(0,Jt.jsx)(_x,{className:"h-8 w-8 text-green-600"})}),(0,Jt.jsxs)("div",{className:"ml-4",children:[(0,Jt.jsxs)("h2",{className:"text-gray-600 text-sm",children:[n.currentMonth," Visitors"]}),(0,Jt.jsx)("p",{className:"text-2xl font-semibold text-gray-800",children:n.currentMonthVisitors})]})]})}),(0,Jt.jsx)(jL.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"bg-white rounded-lg shadow p-6",children:(0,Jt.jsxs)("div",{className:"flex items-center",children:[(0,Jt.jsx)("div",{className:"p-3 rounded-full bg-purple-100 bg-opacity-75",children:(0,Jt.jsx)(Ix,{className:"h-8 w-8 text-purple-600"})}),(0,Jt.jsxs)("div",{className:"ml-4",children:[(0,Jt.jsx)("h2",{className:"text-gray-600 text-sm",children:"Active Staff"}),(0,Jt.jsx)("p",{className:"text-2xl font-semibold text-gray-800",children:n.activeStaff})]})]})}),(0,Jt.jsx)(jL.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"bg-white rounded-lg shadow p-6",children:(0,Jt.jsxs)("div",{className:"flex items-center",children:[(0,Jt.jsx)("div",{className:"p-3 rounded-full bg-indigo-100 bg-opacity-75",children:(0,Jt.jsx)(Mx,{className:"h-8 w-8 text-indigo-600"})}),(0,Jt.jsxs)("div",{className:"ml-4",children:[(0,Jt.jsx)("h2",{className:"text-gray-600 text-sm",children:"IDs Left"}),(0,Jt.jsx)("p",{className:"text-2xl font-semibold text-gray-800",children:n.idsLeft})]})]})}),(0,Jt.jsx)(jL.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"bg-white rounded-lg shadow p-6",children:(0,Jt.jsxs)("div",{className:"flex items-center",children:[(0,Jt.jsx)("div",{className:"p-3 rounded-full bg-yellow-100 bg-opacity-75",children:(0,Jt.jsx)(dx,{className:"h-8 w-8 text-yellow-600"})}),(0,Jt.jsxs)("div",{className:"ml-4",children:[(0,Jt.jsx)("h2",{className:"text-gray-600 text-sm",children:"Average Rating"}),(0,Jt.jsxs)("div",{className:"flex items-center",children:[(0,Jt.jsx)("p",{className:"text-2xl font-semibold text-gray-800 mr-2",children:n.averageRating}),(0,Jt.jsx)("div",{className:"text-yellow-400 text-sm",children:A(n.averageRating)})]})]})]})})]}),(0,Jt.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8",children:[(0,Jt.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,Jt.jsxs)("div",{className:"px-6 py-4 border-b border-gray-200 flex justify-between items-center",children:[(0,Jt.jsx)("h2",{className:"text-lg font-semibold",children:"Visitor Statistics"}),(0,Jt.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Jt.jsx)("button",{onClick:()=>{b((e=>e-1))},className:"p-1 rounded hover:bg-gray-100","aria-label":"Previous year",children:(0,Jt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-gray-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Jt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),(0,Jt.jsx)("span",{className:"font-medium",children:x}),(0,Jt.jsx)("button",{onClick:()=>{const e=x+1;e<=(new Date).getFullYear()&&b(e)},className:"p-1 rounded hover:bg-gray-100","aria-label":"Next year",disabled:x>=(new Date).getFullYear(),children:(0,Jt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-gray-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Jt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]})]}),(0,Jt.jsxs)("div",{className:"p-6",children:[(0,Jt.jsx)("div",{className:"mb-6 h-64",children:(0,Jt.jsx)(hj,{data:{labels:w.labels,datasets:[{label:"Visitors",data:w.visitors,backgroundColor:"rgba(59, 130, 246, 0.7)",borderColor:"rgb(59, 130, 246)",borderWidth:1}]},options:{responsive:!0,maintainAspectRatio:!1,scales:{y:{beginAtZero:!0,ticks:{precision:0}}},plugins:{legend:{display:!0,position:"top"},title:{display:!0,text:`Monthly Visitors for ${x}`,font:{size:16}},tooltip:{callbacks:{title:e=>{if(!e.length)return"";w.labels.indexOf(e[0].label);return`${e[0].label} ${x}`},label:e=>`Visitors: ${e.formattedValue}`}}}}})}),(0,Jt.jsx)("div",{className:"mt-6 text-center",children:(0,Jt.jsx)("button",{onClick:()=>S("/admin/visitor-logs"),className:"text-sm text-indigo-600 hover:text-indigo-800",children:"View all visitor logs"})})]})]}),(0,Jt.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,Jt.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Rating Distribution"}),(0,Jt.jsx)("div",{className:"flex justify-center",children:(0,Jt.jsx)("div",{className:"w-full h-64",children:(0,Jt.jsx)(hj,{data:{labels:["1\u2605","2\u2605","3\u2605","4\u2605","5\u2605"],datasets:[{label:"All Services",data:[f[1],f[2],f[3],f[4],f[5]],backgroundColor:"rgba(99, 102, 241, 0.7)",borderColor:"rgb(99, 102, 241)",borderWidth:1,barPercentage:.6,categoryPercentage:.7},...Object.keys(p).filter((e=>["plumber","street sweeper","electrician"].includes(e.toLowerCase())&&p[e].count>0)).map(((e,t)=>{const n=[{bg:"rgba(239, 68, 68, 0.7)",border:"rgb(239, 68, 68)"},{bg:"rgba(16, 185, 129, 0.7)",border:"rgb(16, 185, 129)"},{bg:"rgba(245, 158, 11, 0.7)",border:"rgb(245, 158, 11)"}],r={1:0,2:0,3:0,4:0,5:0};return c.filter((t=>t.service_name&&t.service_name.toLowerCase()===e.toLowerCase())).forEach((e=>{const t=parseInt(e.rating)||0;t>=1&&t<=5&&(r[t]+=1)})),{label:e,data:[r[1],r[2],r[3],r[4],r[5]],backgroundColor:n[t%n.length].bg,borderColor:n[t%n.length].border,borderWidth:1,barPercentage:.6,categoryPercentage:.7}}))]},options:{responsive:!0,maintainAspectRatio:!1,scales:{y:{beginAtZero:!0,ticks:{precision:0},title:{display:!0,text:"Number of Ratings",font:{size:12,weight:"bold"}}},x:{title:{display:!0,text:"Rating Stars",font:{size:12,weight:"bold"}}}},plugins:{legend:{display:!0,position:"top",labels:{boxWidth:12,font:{size:11}}},tooltip:{callbacks:{title:e=>`${e[0].label} Star Rating`,label:e=>{const t=e.raw;return"number"===typeof t?"Average Rating"===e.dataset.label?`${e.dataset.label}: ${t.toFixed(1)}`:`${e.dataset.label}: ${t}`:`${e.dataset.label}: ${t||"N/A"}`}}},title:{display:!0,text:"Feedback Ratings by Service Type",font:{size:16,weight:"bold"},padding:{bottom:10}}}}})})}),(0,Jt.jsxs)("div",{className:"mt-4 text-xs text-gray-500 border-t pt-3",children:[(0,Jt.jsx)("p",{children:"This chart shows the distribution of star ratings across different services. Higher bars for 4-5 star ratings indicate better service satisfaction."}),(0,Jt.jsx)("p",{className:"mt-1",children:"Note: Only services with at least one rating are shown in the chart."})]})]})]}),(0,Jt.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,Jt.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,Jt.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,Jt.jsx)("h2",{className:"text-lg font-semibold",children:"Recent Requests"})}),(0,Jt.jsx)("div",{className:"p-6",children:0===o.length?(0,Jt.jsx)("p",{className:"text-gray-500",children:"No recent requests"}):(0,Jt.jsx)("div",{className:"space-y-4",children:o.map((e=>(0,Jt.jsxs)("div",{className:"flex items-center p-3 bg-gray-50 rounded-lg",children:["service"===e.type?(0,Jt.jsx)("div",{className:"p-2 rounded-full bg-blue-100 mr-3",children:(0,Jt.jsx)(kx,{className:"h-6 w-6 text-blue-600"})}):(0,Jt.jsx)("div",{className:"p-2 rounded-full bg-purple-100 mr-3",children:(0,Jt.jsx)(Hv,{className:"h-6 w-6 text-purple-600"})}),(0,Jt.jsxs)("div",{className:"flex-1",children:[(0,Jt.jsxs)("div",{className:"flex justify-between",children:[(0,Jt.jsx)("p",{className:"text-sm font-medium text-gray-900",children:"service"===e.type?e.serviceName:e.facilityName}),(0,Jt.jsx)("span",{className:"px-2 py-1 text-xs font-semibold rounded-full "+("Pending"===e.status?"bg-yellow-100 text-yellow-800":"Approved"===e.status?"bg-green-100 text-green-800":"Completed"===e.status?"bg-blue-100 text-blue-800":"bg-red-100 text-red-800"),children:e.status})]}),(0,Jt.jsxs)("p",{className:"text-xs text-gray-500",children:["From: ",e.userName||"Unknown User"]}),(0,Jt.jsx)("p",{className:"text-xs text-gray-400",children:T(e.timestamp||e.created_at)})]})]},e.id)))})})]}),(0,Jt.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,Jt.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,Jt.jsx)("h2",{className:"text-lg font-semibold",children:"Recent Feedback"})}),(0,Jt.jsxs)("div",{className:"p-6",children:[0===c.length?(0,Jt.jsx)("p",{className:"text-gray-500",children:"No recent feedback"}):(0,Jt.jsx)("div",{className:"space-y-4",children:c.map((e=>(0,Jt.jsxs)("div",{className:"border-b border-gray-100 pb-4 last:border-b-0 last:pb-0",children:[(0,Jt.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,Jt.jsxs)("div",{className:"flex items-center",children:[(0,Jt.jsx)("div",{className:"text-yellow-400 mr-2",children:A(e.rating)}),(0,Jt.jsxs)("span",{className:"text-sm text-gray-500",children:["for ",e.service_name||"Unknown Service"]})]}),(0,Jt.jsx)("span",{className:"text-xs text-gray-400",children:T(e.timestamp)})]}),(0,Jt.jsxs)("p",{className:"text-sm text-gray-700",children:['"',e.feedback||"No comment provided",'"']})]},e.id)))}),(0,Jt.jsx)("div",{className:"mt-4 text-center",children:(0,Jt.jsx)("button",{onClick:()=>S("/admin/feedback"),className:"text-sm text-indigo-600 hover:text-indigo-800",children:"View all feedback"})})]})]}),(0,Jt.jsx)("div",{className:"mb-8",children:(0,Jt.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,Jt.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Service Ratings"}),(0,Jt.jsx)("div",{className:"h-64",children:(0,Jt.jsx)(hj,{data:{labels:Object.keys(p),datasets:[{label:"Average Rating",data:Object.keys(p).map((e=>p[e].average)),backgroundColor:"rgba(99, 102, 241, 0.7)",borderColor:"rgb(99, 102, 241)",borderWidth:1},{label:"Number of Reviews",data:Object.keys(p).map((e=>p[e].count)),backgroundColor:"rgba(16, 185, 129, 0.7)",borderColor:"rgb(16, 185, 129)",borderWidth:1}]},options:{responsive:!0,maintainAspectRatio:!1,scales:{y:{beginAtZero:!0,title:{display:!0,text:"Value",font:{size:12,weight:"bold"}}},x:{title:{display:!0,text:"Services",font:{size:12,weight:"bold"}}}},plugins:{legend:{display:!0,position:"top",labels:{boxWidth:12,font:{size:11}}},tooltip:{callbacks:{label:e=>{const t=e.raw;return"number"===typeof t?"Average Rating"===e.dataset.label?`${e.dataset.label}: ${t.toFixed(1)}`:`${e.dataset.label}: ${t}`:`${e.dataset.label}: ${t||"N/A"}`}}},title:{display:!0,text:"Service Ratings Overview",font:{size:16,weight:"bold"},padding:{bottom:10}}}}})})]})})]})]})]})})};const TL=r.forwardRef((function(e,t){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor","aria-hidden":"true",ref:t},e),r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"}))}));const AL=r.forwardRef((function(e,t){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor","aria-hidden":"true",ref:t},e),r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}))}));const IL=r.forwardRef((function(e,t){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor","aria-hidden":"true",ref:t},e),r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 17h8m0 0V9m0 8l-8-8-4 4-6-6"}))}));const ML=function(){const[e,t]=(0,r.useState)([]),[n,s]=(0,r.useState)(!0),[i,a]=(0,r.useState)(!1),[o,l]=(0,r.useState)({name:"",category:"",quantity:"",unit:"",reorderPoint:"",status:"In Stock"}),[c,u]=(0,r.useState)(""),[d,h]=(0,r.useState)(""),[f,m]=(0,r.useState)(""),[p,g]=(0,r.useState)({totalItems:0,lowStock:0,outOfStock:0});(0,r.useEffect)((()=>{document.title="Inventory Management",y()}),[]);const y=async()=>{try{const e=(await Ly(jg(Cv,"inventory"))).docs.map((e=>{var t,n;return{id:e.id,...e.data(),lastUpdated:(null===(t=e.data().lastUpdated)||void 0===t||null===(n=t.toDate())||void 0===n?void 0:n.toLocaleDateString())||(new Date).toLocaleDateString()}})),n={totalItems:e.length,lowStock:e.filter((e=>e.quantity<=e.reorderPoint)).length,outOfStock:e.filter((e=>0===e.quantity)).length};g(n),t(e)}catch(KV){Ut.error("Error fetching inventory: "+KV.message)}finally{s(!1)}},v=(e,t,n)=>{if(0===t)return"bg-red-100 text-red-800";if(t<=n)return"bg-yellow-100 text-yellow-800";if(!e)return"bg-gray-100 text-gray-800";switch(e.toLowerCase()){case"in stock":return"bg-green-100 text-green-800";case"low stock":return"bg-yellow-100 text-yellow-800";case"out of stock":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},x=e.filter((e=>{const t=(e.name||"").toLowerCase().includes(c.toLowerCase()),n=!d||e.category===d,r=!f||e.status===f;return t&&n&&r}));return(0,Jt.jsx)(Cx,{children:(0,Jt.jsxs)("div",{className:"pt-20 px-6",children:[(0,Jt.jsx)("div",{className:"bg-white dark:bg-gray-800 shadow-md rounded-lg p-4 mb-6",children:(0,Jt.jsx)("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"Inventory Management"})}),(0,Jt.jsx)("div",{className:"flex justify-between items-center mb-6",children:(0,Jt.jsx)("button",{onClick:()=>a(!0),className:"bg-primary text-white px-4 py-2 rounded-md hover:bg-blue-700",children:"Add New Item"})}),(0,Jt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[(0,Jt.jsx)("div",{className:"bg-white rounded-lg shadow p-4",children:(0,Jt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Jt.jsxs)("div",{children:[(0,Jt.jsx)("p",{className:"text-gray-500",children:"Total Items"}),(0,Jt.jsx)("p",{className:"text-2xl font-bold",children:p.totalItems})]}),(0,Jt.jsx)("div",{className:"text-primary",children:(0,Jt.jsx)(TL,{className:"h-8 w-8"})})]})}),(0,Jt.jsx)("div",{className:"bg-white rounded-lg shadow p-4",children:(0,Jt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Jt.jsxs)("div",{children:[(0,Jt.jsx)("p",{className:"text-gray-500",children:"Low Stock Items"}),(0,Jt.jsx)("p",{className:"text-2xl font-bold",children:p.lowStock})]}),(0,Jt.jsx)("div",{className:"text-yellow-500",children:(0,Jt.jsx)(AL,{className:"h-8 w-8"})})]})}),(0,Jt.jsx)("div",{className:"bg-white rounded-lg shadow p-4",children:(0,Jt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Jt.jsxs)("div",{children:[(0,Jt.jsx)("p",{className:"text-gray-500",children:"Out of Stock"}),(0,Jt.jsx)("p",{className:"text-2xl font-bold",children:p.outOfStock})]}),(0,Jt.jsx)("div",{className:"text-red-500",children:(0,Jt.jsx)(IL,{className:"h-8 w-8"})})]})})]}),i&&(0,Jt.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center",children:(0,Jt.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg w-full max-w-md",children:[(0,Jt.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,Jt.jsx)("h2",{className:"text-lg font-semibold",children:"Add New Item"}),(0,Jt.jsx)("button",{onClick:()=>a(!1),className:"text-gray-500 hover:text-gray-700",children:"\xd7"})]}),(0,Jt.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{const e={...o,quantity:parseInt(o.quantity),reorderPoint:parseInt(o.reorderPoint),lastUpdated:new Date};await Vy(jg(Cv,"inventory"),e),Ut.success("Item added successfully"),a(!1),l({name:"",category:"",quantity:"",unit:"",reorderPoint:"",status:"In Stock"}),y()}catch(KV){Ut.error("Error adding item: "+KV.message)}},className:"space-y-4",children:[(0,Jt.jsxs)("div",{children:[(0,Jt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Item Name"}),(0,Jt.jsx)("input",{type:"text",required:!0,value:o.name,onChange:e=>l({...o,name:e.target.value}),className:"w-full px-4 py-2 rounded-md border border-gray-300 focus:outline-none focus:ring-2 focus:ring-primary"})]}),(0,Jt.jsxs)("div",{children:[(0,Jt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),(0,Jt.jsxs)("select",{required:!0,value:o.category,onChange:e=>l({...o,category:e.target.value}),className:"w-full px-4 py-2 rounded-md border border-gray-300 focus:outline-none focus:ring-2 focus:ring-primary",children:[(0,Jt.jsx)("option",{value:"",children:"Select category"}),(0,Jt.jsx)("option",{value:"Medicine",children:"Medicine"}),(0,Jt.jsx)("option",{value:"Supplies",children:"Supplies"}),(0,Jt.jsx)("option",{value:"Equipment",children:"Equipment"})]})]}),(0,Jt.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,Jt.jsxs)("div",{children:[(0,Jt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Quantity"}),(0,Jt.jsx)("input",{type:"number",required:!0,min:"0",value:o.quantity,onChange:e=>l({...o,quantity:e.target.value}),className:"w-full px-4 py-2 rounded-md border border-gray-300 focus:outline-none focus:ring-2 focus:ring-primary"})]}),(0,Jt.jsxs)("div",{children:[(0,Jt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unit"}),(0,Jt.jsx)("input",{type:"text",required:!0,value:o.unit,onChange:e=>l({...o,unit:e.target.value}),className:"w-full px-4 py-2 rounded-md border border-gray-300 focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"e.g., boxes, pieces"})]})]}),(0,Jt.jsxs)("div",{children:[(0,Jt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Reorder Point"}),(0,Jt.jsx)("input",{type:"number",required:!0,min:"0",value:o.reorderPoint,onChange:e=>l({...o,reorderPoint:e.target.value}),className:"w-full px-4 py-2 rounded-md border border-gray-300 focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"Minimum quantity before reorder"})]}),(0,Jt.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,Jt.jsx)("button",{type:"button",onClick:()=>a(!1),className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:"Cancel"}),(0,Jt.jsx)("button",{type:"submit",className:"px-4 py-2 bg-primary text-white rounded-md hover:bg-blue-700",children:"Add Item"})]})]})]})}),(0,Jt.jsxs)("div",{className:"mb-6 flex flex-wrap gap-4",children:[(0,Jt.jsx)("input",{type:"text",placeholder:"Search inventory...",value:c,onChange:e=>u(e.target.value),className:"w-full md:w-1/3 px-4 py-2 rounded-md border border-gray-300 focus:outline-none focus:ring-2 focus:ring-primary"}),(0,Jt.jsxs)("select",{value:d,onChange:e=>h(e.target.value),className:"px-4 py-2 rounded-md border border-gray-300 focus:outline-none focus:ring-2 focus:ring-primary",children:[(0,Jt.jsx)("option",{value:"",children:"All Categories"}),(0,Jt.jsx)("option",{value:"Medicine",children:"Medicine"}),(0,Jt.jsx)("option",{value:"Supplies",children:"Supplies"}),(0,Jt.jsx)("option",{value:"Equipment",children:"Equipment"})]}),(0,Jt.jsxs)("select",{value:f,onChange:e=>m(e.target.value),className:"px-4 py-2 rounded-md border border-gray-300 focus:outline-none focus:ring-2 focus:ring-primary",children:[(0,Jt.jsx)("option",{value:"",children:"All Status"}),(0,Jt.jsx)("option",{value:"In Stock",children:"In Stock"}),(0,Jt.jsx)("option",{value:"Low Stock",children:"Low Stock"}),(0,Jt.jsx)("option",{value:"Out of Stock",children:"Out of Stock"})]})]}),(0,Jt.jsx)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:n?(0,Jt.jsx)("div",{className:"p-4 text-center",children:"Loading..."}):(0,Jt.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Jt.jsx)("thead",{className:"bg-gray-50",children:(0,Jt.jsxs)("tr",{children:[(0,Jt.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Item Details"}),(0,Jt.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),(0,Jt.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Quantity"}),(0,Jt.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,Jt.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,Jt.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:x.map((e=>(0,Jt.jsxs)("tr",{children:[(0,Jt.jsx)("td",{className:"px-6 py-4",children:(0,Jt.jsx)("div",{className:"flex items-center",children:(0,Jt.jsxs)("div",{className:"ml-4",children:[(0,Jt.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.name}),(0,Jt.jsxs)("div",{className:"text-sm text-gray-500",children:["Last updated: ",e.lastUpdated]})]})})}),(0,Jt.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Jt.jsx)("div",{className:"text-sm text-gray-900",children:e.category})}),(0,Jt.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,Jt.jsxs)("div",{className:"text-sm text-gray-900",children:[e.quantity," ",e.unit]}),(0,Jt.jsxs)("div",{className:"text-xs text-gray-500",children:["Reorder at: ",e.reorderPoint]})]}),(0,Jt.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Jt.jsx)("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${v(e.status,e.quantity,e.reorderPoint)}`,children:e.status})}),(0,Jt.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[(0,Jt.jsx)("button",{onClick:()=>(async(e,t,n)=>{const r=window.prompt("Enter new quantity:");if(null===r)return;const s=parseInt(r);if(isNaN(s))Ut.error("Please enter a valid number");else try{const t=0===s?"Out of Stock":s<=n?"Low Stock":"In Stock";await Oy(Cg(Cv,"inventory",e),{quantity:s,status:t,lastUpdated:new Date}),Ut.success("Stock updated successfully"),y()}catch(KV){Ut.error("Error updating stock: "+KV.message)}})(e.id,e.quantity,e.reorderPoint),className:"text-primary hover:text-blue-700 mr-3",children:"Update Stock"}),(0,Jt.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this item?"))try{await Fy(Cg(Cv,"inventory",e)),Ut.success("Item deleted successfully"),y()}catch(KV){Ut.error("Error deleting item: "+KV.message)}})(e.id),className:"text-red-600 hover:text-red-700",children:"Delete"})]})]},e.id)))})]})})]})})};const PL=function(){const[e,t]=(0,r.useState)([]),[n,s]=(0,r.useState)(!0),[i,a]=(0,r.useState)(!1),[o,l]=(0,r.useState)(!1),[c,u]=(0,r.useState)(null),[d,h]=(0,r.useState)({name:"",positions:[],email:"",phone:"",status:"Active",isHeadStaff:!1,subordinates:[]}),[f,m]=(0,r.useState)(""),[p,g]=(0,r.useState)(""),y=["Head Staff","Plumber","Street Sweeper","Electrician"];(0,r.useEffect)((()=>{document.title="Staff list",v()}),[]);const v=async()=>{try{const e=(await Ly(jg(Cv,"staff"))).docs.map((e=>({id:e.id,...e.data(),positions:e.data().positions||[]})));t(e)}catch(KV){Ut.error("Error fetching staff members: "+KV.message)}finally{s(!1)}},x=()=>{a(!1),l(!1),u(null),h({name:"",positions:[],email:"",phone:"",status:"Active"})},b=e.filter((e=>{const t=(e.name||"").toLowerCase().includes(f.toLowerCase())||(e.email||"").toLowerCase().includes(f.toLowerCase()),n=!p||e.positions&&e.positions.includes(p);return t&&n})),w=e=>{const t=e.replace(/[^\d+]/g,"");return 10===(t.startsWith("+63")?t.substring(3):t).length};return(0,Jt.jsx)(Cx,{children:(0,Jt.jsxs)("div",{className:"pt-20 px-6 max-w-7xl mx-auto",children:[(0,Jt.jsxs)("div",{className:"bg-white dark:bg-gray-800 shadow-lg rounded-lg p-6 mb-8 border-l-4 border-blue-500",children:[(0,Jt.jsxs)("h1",{className:"text-3xl font-bold text-gray-800 dark:text-white flex items-center",children:[(0,Jt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 mr-3 text-blue-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Jt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),"Staff Management"]}),(0,Jt.jsx)("p",{className:"text-gray-600 dark:text-gray-300 mt-2",children:"Manage maintenance personnel and community staff members"})]}),(0,Jt.jsx)("div",{className:"flex justify-between items-center mb-6",children:(0,Jt.jsxs)("button",{onClick:()=>{l(!1),h({name:"",positions:[],email:"",phone:"",status:"Active"}),a(!0)},className:"flex items-center bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-all shadow-sm",children:[(0,Jt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Jt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add New Staff"]})}),(0,Jt.jsxs)("div",{className:"mb-6 flex gap-4",children:[(0,Jt.jsx)("input",{type:"text",placeholder:"Search staff...",value:f,onChange:e=>m(e.target.value),className:"w-full md:w-1/3 px-4 py-2 rounded-md border border-gray-300 focus:outline-none focus:ring-2 focus:ring-primary"}),(0,Jt.jsxs)("select",{value:p,onChange:e=>g(e.target.value),className:"px-4 py-2 rounded-md border border-gray-300 focus:outline-none focus:ring-2 focus:ring-primary",children:[(0,Jt.jsx)("option",{value:"",children:"All Positions"}),y.map((e=>(0,Jt.jsx)("option",{value:e,children:e},e)))]})]}),i&&(0,Jt.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50",children:(0,Jt.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg w-full max-w-md",children:[(0,Jt.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,Jt.jsx)("h2",{className:"text-lg font-semibold",children:o?"Edit Staff Member":"Add New Staff Member"}),(0,Jt.jsx)("button",{onClick:x,className:"text-gray-500 hover:text-gray-700",children:"\xd7"})]}),(0,Jt.jsxs)("form",{onSubmit:o?async e=>{if(e.preventDefault(),w(d.phone))if(0!==d.positions.length)try{const e=await Py(Cg(Cv,"staff",c)),t=e.exists()&&e.data().subordinates||[];if(await Oy(Cg(Cv,"staff",c),{...d,isHeadStaff:d.positions.includes("Head Staff")}),d.positions.includes("Head Staff")){const e=Wy(Cv),n=t.filter((e=>!d.subordinates.includes(e)));for(const t of n)e.update(Cg(Cv,"staff",t),{headStaffId:null});const r=d.subordinates.filter((e=>!t.includes(e)));for(const t of r)e.update(Cg(Cv,"staff",t),{headStaffId:c});await e.commit()}else if(t.length>0){const e=Wy(Cv);for(const n of t)e.update(Cg(Cv,"staff",n),{headStaffId:null});await e.commit()}Ut.success("Staff member updated successfully"),a(!1),l(!1),u(null),h({name:"",positions:[],email:"",phone:"",status:"Active",isHeadStaff:!1,subordinates:[]}),v()}catch(KV){Ut.error("Error updating staff member: "+KV.message)}else Ut.error("Please select at least one position");else Ut.error("Please enter a valid 10-digit phone number")}:async e=>{if(e.preventDefault(),w(d.phone))if(0!==d.positions.length)try{const e=await Vy(jg(Cv,"staff"),{...d,isHeadStaff:d.positions.includes("Head Staff")});if(d.positions.includes("Head Staff")&&d.subordinates.length>0){const t=Wy(Cv);for(const n of d.subordinates)t.update(Cg(Cv,"staff",n),{headStaffId:e.id});await t.commit()}Ut.success("Staff member added successfully"),a(!1),h({name:"",positions:[],email:"",phone:"",status:"Active",isHeadStaff:!1,subordinates:[]}),v()}catch(KV){Ut.error("Error adding staff member: "+KV.message)}else Ut.error("Please select at least one position");else Ut.error("Please enter a valid 10-digit phone number")},className:"space-y-4",children:[(0,Jt.jsxs)("div",{children:[(0,Jt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),(0,Jt.jsx)("input",{type:"text",required:!0,value:d.name,onChange:e=>h({...d,name:e.target.value}),className:"w-full px-4 py-2 rounded-md border border-gray-300 focus:outline-none focus:ring-2 focus:ring-primary"})]}),(0,Jt.jsxs)("div",{children:[(0,Jt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Positions (Select all that apply)"}),(0,Jt.jsx)("div",{className:"space-y-2",children:y.map((e=>(0,Jt.jsxs)("div",{className:"flex items-center",children:[(0,Jt.jsx)("input",{type:"checkbox",id:`position-${e}`,checked:d.positions.includes(e),onChange:()=>(e=>{h((t=>t.positions.includes(e)?{...t,positions:t.positions.filter((t=>t!==e))}:{...t,positions:[...t.positions,e]}))})(e),className:"h-4 w-4 text-primary focus:ring-primary border-gray-300 rounded"}),(0,Jt.jsx)("label",{htmlFor:`position-${e}`,className:"ml-2 block text-sm text-gray-900",children:e})]},e)))}),0===d.positions.length&&(0,Jt.jsx)("p",{className:"text-red-500 text-xs mt-1",children:"Please select at least one position"}),d.positions.includes("Head Staff")&&(0,Jt.jsxs)("div",{className:"mt-4 p-3 border border-primary rounded-md",children:[(0,Jt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Head Staff Role"}),(0,Jt.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:"A Head Staff can manage other staff members in their department."}),(0,Jt.jsxs)("div",{className:"mt-3",children:[(0,Jt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Select staff to manage:"}),(0,Jt.jsx)("div",{className:"max-h-40 overflow-y-auto border rounded-md p-2",children:e.filter((e=>{var t;return!(null!==(t=e.positions)&&void 0!==t&&t.includes("Head Staff"))&&e.id!==c})).map((e=>{var t,n;return(0,Jt.jsxs)("label",{className:"flex items-center py-1",children:[(0,Jt.jsx)("input",{type:"checkbox",checked:null===(t=d.subordinates)||void 0===t?void 0:t.includes(e.id),onChange:()=>{h((t=>{var n;return{...t,subordinates:null!==(n=t.subordinates)&&void 0!==n&&n.includes(e.id)?t.subordinates.filter((t=>t!==e.id)):[...t.subordinates||[],e.id]}}))},className:"rounded text-primary focus:ring-primary"}),(0,Jt.jsxs)("span",{className:"ml-2",children:[e.name," (",(null===(n=e.positions)||void 0===n?void 0:n.join(", "))||"No position",")"]})]},e.id)}))})]})]})]}),(0,Jt.jsxs)("div",{children:[(0,Jt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),(0,Jt.jsx)("input",{type:"email",required:!0,value:d.email,onChange:e=>h({...d,email:e.target.value}),className:"w-full px-4 py-2 rounded-md border border-gray-300 focus:outline-none focus:ring-2 focus:ring-primary"})]}),(0,Jt.jsxs)("div",{children:[(0,Jt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone"}),(0,Jt.jsx)("input",{type:"tel",required:!0,value:d.phone||"+63 ",onChange:e=>{let t=e.target.value;t.startsWith("+63")||(t="+63 "+t.replace("+63",""));const n=(e=>{const t=e.replace(/[^\d+]/g,""),n=t.startsWith("+63")?t.substring(3):t;if(n.length>0){let e="+63 ";return n.length>3?e+=n.substring(0,3)+" ":e+=n,n.length>6?(e+=n.substring(3,6)+" ",e+=n.substring(6,10)):n.length>3&&(e+=n.substring(3)),e}return"+63 "})(t);h({...d,phone:n})},onFocus:e=>{e.target.value||h({...d,phone:"+63 "})},onBlur:e=>{"+63 "===e.target.value?h({...d,phone:""}):w(e.target.value)||Ut.error("Please enter a valid 10-digit phone number")},placeholder:"+63 945 754 0793",className:"w-full px-4 py-2 rounded-md border border-gray-300 focus:outline-none focus:ring-2 focus:ring-primary"}),(0,Jt.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"Format: +63 XXX XXX XXXX"})]}),(0,Jt.jsxs)("div",{children:[(0,Jt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),(0,Jt.jsxs)("select",{value:d.status,onChange:e=>h({...d,status:e.target.value}),className:"w-full px-4 py-2 rounded-md border border-gray-300 focus:outline-none focus:ring-2 focus:ring-primary",children:[(0,Jt.jsx)("option",{value:"Active",children:"Active"}),(0,Jt.jsx)("option",{value:"Inactive",children:"Inactive"})]})]}),(0,Jt.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,Jt.jsx)("button",{type:"button",onClick:x,className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:"Cancel"}),(0,Jt.jsx)("button",{type:"submit",className:"px-4 py-2 bg-primary text-white rounded-md hover:bg-blue-700",children:o?"Update Staff":"Add Staff"})]})]})]})}),(0,Jt.jsx)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:n?(0,Jt.jsx)("div",{className:"p-4 text-center",children:"Loading..."}):(0,Jt.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Jt.jsx)("thead",{className:"bg-gray-50",children:(0,Jt.jsxs)("tr",{children:[(0,Jt.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Staff Member"}),(0,Jt.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Positions"}),(0,Jt.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contact"}),(0,Jt.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,Jt.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,Jt.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:0===b.length?(0,Jt.jsx)("tr",{children:(0,Jt.jsx)("td",{colSpan:"5",className:"px-6 py-4 text-center text-gray-500",children:"No staff members found"})}):b.map((t=>{var n,r;return(0,Jt.jsxs)("tr",{children:[(0,Jt.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Jt.jsxs)("div",{className:"flex items-center",children:[(0,Jt.jsx)(Tx,{className:"h-10 w-10 text-gray-400"}),(0,Jt.jsx)("div",{className:"ml-4",children:(0,Jt.jsx)("div",{className:"text-sm font-medium text-gray-900",children:t.name})})]})}),(0,Jt.jsx)("td",{className:"px-6 py-4",children:(0,Jt.jsxs)("div",{className:"text-sm text-gray-900",children:[t.positions&&t.positions.length>0?(0,Jt.jsx)("div",{className:"flex flex-wrap gap-1",children:t.positions.map((e=>(0,Jt.jsx)("span",{className:"px-2 py-1 text-xs rounded-full bg-blue-100 text-blue-800",children:e},e)))}):"No positions assigned",(null===(n=t.positions)||void 0===n?void 0:n.includes("Head Staff"))&&(0,Jt.jsxs)("div",{className:"mt-2",children:[(0,Jt.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-primary text-white",children:"Head Staff"}),t.subordinates&&t.subordinates.length>0&&(0,Jt.jsxs)("span",{className:"ml-2 text-xs text-gray-500",children:["(Managing ",t.subordinates.length," staff)"]})]}),t.headStaffId&&(0,Jt.jsxs)("div",{className:"mt-2 text-xs text-gray-500",children:["Reports to: ",(null===(r=e.find((e=>e.id===t.headStaffId)))||void 0===r?void 0:r.name)||"Unknown"]})]})}),(0,Jt.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,Jt.jsx)("div",{className:"text-sm text-gray-900",children:t.email}),(0,Jt.jsx)("div",{className:"text-sm text-gray-500",children:t.phone})]}),(0,Jt.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Jt.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full "+("Active"===t.status?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:t.status||"Active"})}),(0,Jt.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[(0,Jt.jsx)("button",{onClick:()=>(e=>{var t;h({name:e.name||"",positions:e.positions||[],email:e.email||"",phone:e.phone||"",status:e.status||"Active",isHeadStaff:(null===(t=e.positions)||void 0===t?void 0:t.includes("Head Staff"))||!1,subordinates:e.subordinates||[]}),u(e.id),l(!0),a(!0)})(t),className:"text-blue-600 hover:text-blue-800 mr-3",children:"Edit"}),(0,Jt.jsx)("button",{onClick:()=>(async(e,t)=>{try{await Oy(Cg(Cv,"staff",e),{status:"Active"===t?"Inactive":"Active"}),Ut.success("Staff status updated successfully"),v()}catch(KV){Ut.error("Error updating staff status: "+KV.message)}})(t.id,t.status),className:"text-yellow-600 hover:text-yellow-700 mr-3",children:"Toggle Status"}),(0,Jt.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this staff member?"))try{await Fy(Cg(Cv,"staff",e)),Ut.success("Staff member deleted successfully"),v()}catch(KV){Ut.error("Error deleting staff member: "+KV.message)}})(t.id),className:"text-red-600 hover:text-red-700",children:"Delete"})]})]},t.id)}))})]})})]})})};const RL=function(){const[e,t]=(0,r.useState)([]),[n,s]=(0,r.useState)([]),[i,a]=(0,r.useState)(!0),[o,l]=(0,r.useState)(!0),[c,u]=(0,r.useState)(!1),[d,h]=(0,r.useState)(!1),[f,m]=(0,r.useState)(null),[p,g]=(0,r.useState)(!1),[y,v]=(0,r.useState)(null),[x,b]=(0,r.useState)(!1),[w,_]=(0,r.useState)(null),[k,N]=(0,r.useState)({firstName:"",lastName:"",username:"",email:"",contactNumber:"",house_no:null,block:"",lot:"",role:"Homeowner",status:"Active",isActive:!0,recordStatus:"Neutral",password:"",fcmToken:"",houseModel:"Standard"}),[S,E]=(0,r.useState)("");(0,r.useEffect)((()=>{document.title="Homeowner Accounts",T(),C()}),[]);const j={1:20,2:25,3:15,4:22,5:18},C=async()=>{try{l(!0);const e=[];Object.keys(j).forEach((t=>{for(let n=1;n<=j[t];n++){const r=`B${t}-L${n.toString().padStart(2,"0")}`,s=100*parseInt(t)+n;e.push({id:r,block:parseInt(t),lot:n,house_no:s,status:"Vacant",house_owner:null,owner_id:null,houseModel:"Standard",created_at:null,displayName:`Block ${t}, Lot ${n} (House #${s})`})}}));try{const t=py(jg(Cv,"lots"));(await Ly(t)).docs.forEach((t=>{const n=t.data(),r=n.house_no;if(r){const t=e.findIndex((e=>e.house_no===r));-1!==t&&(e[t]={...e[t],status:n.status||"Vacant",house_owner:n.house_owner||null,owner_id:n.owner_id||null,houseModel:n.houseModel||"Standard",description:n.description,price:n.price,size:n.size,created_at:n.created_at})}}))}catch(KV){console.log("Checking lots collection:",KV)}const t=py(jg(Cv,"users")),n=await Ly(t),r={};n.docs.forEach((e=>{const t=e.data();t.house_no&&(r[t.house_no]={owner_id:e.id,house_owner:t.username||`${t.firstName||""} ${t.lastName||""}`.trim()||"Unknown",houseModel:t.houseModel||"Standard"})}));for(let s of e)r[s.house_no]&&"Occupied"!==s.status&&(s.house_owner=r[s.house_no].house_owner,s.owner_id=r[s.house_no].owner_id,s.status="Occupied",s.houseModel=r[s.house_no].houseModel);const i=e.filter((e=>"Vacant"===e.status||!e.status));i.forEach((e=>{e.displayName=`Block ${e.block}, Lot ${e.lot} (House #${e.house_no})`})),s(i)}catch(KV){console.error("Error fetching available lots:",KV),Ut.error("Error fetching available lots")}finally{l(!1)}},T=async()=>{a(!0);try{const e=(await Ly(jg(Cv,"users"))).docs.map((e=>({id:e.id,...e.data()})));t(e)}catch(KV){Ut.error("Error fetching users: "+KV.message)}finally{a(!1)}},A=async(e,t)=>{_(e);try{await Oy(Cg(Cv,"users",e),{recordStatus:t,last_updated:Hy()});const n=await Py(Cg(Cv,"users",e));if(n.exists()){const e=n.data().username||"Homeowner";let r="";r="Good"===t?`${e}, your record status has been set to Good. You have full access to all community amenities and services.`:"Bad"===t?`${e}, your record status has been set to Bad. This may restrict your access to some community amenities and services. Please contact the admin office.`:`${e}, your record status has been updated to Neutral.`}Ut.success(`Homeowner record status marked as ${t}`),T()}catch(KV){Ut.error(`Error updating homeowner record: ${KV.message}`)}finally{_(null)}},I=e=>{m(e),h(!0),g(!1)},M=e=>{const t=e.target.value;N({...k,username:t,email:`${t}@example.com`})},P=()=>{N({firstName:"",lastName:"",username:"",email:"",contactNumber:"",house_no:null,block:"",lot:"",role:"Homeowner",status:"Active",isActive:!0,recordStatus:"Neutral",password:"",fcmToken:"",houseModel:"Standard"}),v(null)},R=e.filter((e=>(e.firstName||"").toLowerCase().includes(S.toLowerCase())||(e.lastName||"").toLowerCase().includes(S.toLowerCase())||(e.username||"").toLowerCase().includes(S.toLowerCase())||(e.email||"").toLowerCase().includes(S.toLowerCase()))),L=e=>e.firstName&&e.lastName?`${e.firstName} ${e.lastName}`:e.name?e.name:e.username||"Unknown";return(0,Jt.jsx)(Cx,{children:(0,Jt.jsxs)("div",{className:"pt-20 px-6 max-w-7xl mx-auto",children:[(0,Jt.jsxs)("div",{className:"bg-white dark:bg-gray-800 shadow-lg rounded-lg p-6 mb-8 border-l-4 border-blue-500",children:[(0,Jt.jsxs)("h1",{className:"text-3xl font-bold text-gray-800 dark:text-white flex items-center",children:[(0,Jt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 mr-3 text-blue-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Jt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})}),"User Accounts"]}),(0,Jt.jsx)("p",{className:"text-gray-600 dark:text-gray-300 mt-2",children:"Manage resident accounts and their access permissions"})]}),(0,Jt.jsx)("div",{className:"flex justify-between items-center mb-6",children:(0,Jt.jsxs)("button",{onClick:()=>{P(),u(!0)},className:"flex items-center bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-all shadow-sm",children:[(0,Jt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Jt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add New User"]})}),(0,Jt.jsx)("div",{className:"mb-6",children:(0,Jt.jsx)("input",{type:"text",placeholder:"Search users by name, username or email...",value:S,onChange:e=>E(e.target.value),className:"w-full md:w-1/3 px-4 py-2 rounded-md border border-gray-300 focus:outline-none focus:ring-2 focus:ring-primary"})}),c&&(0,Jt.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:(0,Jt.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl my-8",children:[(0,Jt.jsxs)("div",{className:"flex justify-between items-center p-6 border-b",children:[(0,Jt.jsx)("h2",{className:"text-xl font-semibold text-gray-800",children:"Create New Homeowner Account"}),(0,Jt.jsx)("button",{onClick:()=>u(!1),className:"text-gray-500 hover:text-gray-700 focus:outline-none",children:(0,Jt.jsx)(px,{className:"h-5 w-5"})})]}),(0,Jt.jsxs)("div",{className:"flex flex-col md:flex-row p-6",children:[(0,Jt.jsx)("div",{className:"user-details flex-1 md:pr-6",children:(0,Jt.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),b(!0),!k.house_no&&y&&N({...k,house_no:y.house_no,block:y.block,lot:y.lot}),!k.house_no&&!y)return Ut.error("Please select a lot for this homeowner"),void b(!1);const t=k.email||`${k.username}@example.com`,n=k.password||k.username;try{const e=(await ga(jv,t,n)).user.uid;await Dy(Cg(Cv,"users",e),{firstName:k.firstName,lastName:k.lastName,username:k.username,email:t,contactNumber:k.contactNumber,house_no:y.house_no,block:y.block,lot:y.lot,role:"Homeowner",status:"Active",isActive:!0,recordStatus:"Neutral",password:n,fcmToken:"",houseModel:k.houseModel||"Standard",uid:e,created_at:Hy(),last_updated:Hy()});try{const t=Cg(Cv,"lots",y.id);await Dy(t,{house_no:y.house_no,block:y.block,lot:y.lot,status:"Occupied",owner_id:e,house_owner:k.username||`${k.firstName} ${k.lastName}`.trim(),houseModel:k.houseModel||"Standard",last_updated:Hy(),created_at:Hy()},{merge:!0})}catch(KV){console.error("Error updating lot status:",KV)}Ut.success("User added successfully and lot assigned"),u(!1),P(),T(),C()}catch(KV){"auth/email-already-in-use"===KV.code?Ut.error("Email already in use. Please use a different email."):"auth/invalid-email"===KV.code?Ut.error("Invalid email format."):"auth/weak-password"===KV.code?Ut.error("Password is too weak. Please use a stronger password."):Ut.error("Error adding user: "+KV.message)}finally{b(!1)}},className:"space-y-5",children:[(0,Jt.jsxs)("div",{className:"bg-blue-50 rounded-lg p-4 mb-6 border border-blue-100",children:[(0,Jt.jsxs)("h3",{className:"font-medium text-blue-800 mb-2 flex items-center",children:[(0,Jt.jsx)(wx,{className:"mr-2"})," Personal Information"]}),(0,Jt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Jt.jsxs)("div",{children:[(0,Jt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"First Name *"}),(0,Jt.jsx)("input",{type:"text",required:!0,value:k.firstName,onChange:e=>N({...k,firstName:e.target.value}),className:"w-full px-4 py-2 rounded-md border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500 shadow-sm",placeholder:"John"})]}),(0,Jt.jsxs)("div",{children:[(0,Jt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Name *"}),(0,Jt.jsx)("input",{type:"text",required:!0,value:k.lastName,onChange:e=>N({...k,lastName:e.target.value}),className:"w-full px-4 py-2 rounded-md border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500 shadow-sm",placeholder:"Doe"})]})]})]}),(0,Jt.jsxs)("div",{className:"bg-indigo-50 rounded-lg p-4 mb-6 border border-indigo-100",children:[(0,Jt.jsxs)("h3",{className:"font-medium text-indigo-800 mb-2 flex items-center",children:[(0,Jt.jsx)("i",{className:"fas fa-user-lock mr-2"})," Account Information"]}),(0,Jt.jsxs)("div",{className:"space-y-4",children:[(0,Jt.jsxs)("div",{children:[(0,Jt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Username *"}),(0,Jt.jsxs)("div",{className:"relative",children:[(0,Jt.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,Jt.jsx)("span",{className:"text-gray-500 sm:text-sm",children:"@"})}),(0,Jt.jsx)("input",{type:"text",required:!0,value:k.username,onChange:M,className:"w-full pl-8 pr-4 py-2 rounded-md border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500 shadow-sm",placeholder:"johndoe"})]})]}),(0,Jt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Jt.jsxs)("div",{children:[(0,Jt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),(0,Jt.jsx)("input",{type:"email",value:k.email,onChange:e=>N({...k,email:e.target.value}),className:"w-full px-4 py-2 rounded-md border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500 shadow-sm",placeholder:k.username?`${k.username}@example.com`:"email@example.com"}),(0,Jt.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Auto-generated if left empty"})]}),(0,Jt.jsxs)("div",{children:[(0,Jt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),(0,Jt.jsx)("input",{type:"password",value:k.password,onChange:e=>N({...k,password:e.target.value}),className:"w-full px-4 py-2 rounded-md border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500 shadow-sm",placeholder:"Leave blank to use username"}),(0,Jt.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Default: same as username"})]})]}),(0,Jt.jsxs)("div",{children:[(0,Jt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Contact Number"}),(0,Jt.jsx)("input",{type:"tel",value:k.contactNumber,onChange:e=>N({...k,contactNumber:e.target.value}),className:"w-full px-4 py-2 rounded-md border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500 shadow-sm",placeholder:"e.g. 09123456789"})]})]})]}),(0,Jt.jsxs)("div",{className:"bg-amber-50 rounded-lg p-4 mb-6 border border-amber-100",children:[(0,Jt.jsxs)("h3",{className:"font-medium text-amber-800 mb-2 flex items-center",children:[(0,Jt.jsx)(sx,{className:"mr-2"})," Property Assignment"]}),(0,Jt.jsxs)("div",{className:"space-y-4",children:[(0,Jt.jsxs)("div",{children:[(0,Jt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Select Available Lot *"}),(0,Jt.jsxs)("div",{className:"relative",children:[(0,Jt.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,Jt.jsx)(sx,{className:"text-amber-600"})}),o?(0,Jt.jsxs)("div",{className:"w-full px-4 py-2 pl-10 rounded-md border border-gray-300 bg-gray-50",children:[(0,Jt.jsx)(ux,{className:"animate-spin inline mr-2 text-gray-500"}),"Loading available lots..."]}):(0,Jt.jsxs)("select",{value:y?y.id:"",onChange:e=>{const t=n.find((t=>t.id===e.target.value));v(t),t&&N({...k,house_no:t.house_no,block:t.block,lot:t.lot})},className:"w-full px-4 py-2 pl-10 rounded-md border border-gray-300 focus:ring-amber-500 focus:border-amber-500 shadow-sm",required:!0,children:[(0,Jt.jsx)("option",{value:"",children:"-- Select a lot --"}),n.map((e=>(0,Jt.jsx)("option",{value:e.id,children:e.displayName},e.id)))]})]}),(0,Jt.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Only showing vacant lots that are available for assignment"}),y&&(0,Jt.jsxs)("div",{className:"mt-3 p-3 bg-white rounded-lg border border-amber-200",children:[(0,Jt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Jt.jsx)("span",{className:"font-medium text-amber-700",children:"Selected Lot Details:"}),(0,Jt.jsxs)("span",{className:"px-2 py-0.5 text-xs font-medium rounded-full bg-amber-100 text-amber-800",children:["#",y.house_no]})]}),(0,Jt.jsx)("div",{className:"mt-2 text-sm",children:(0,Jt.jsxs)("div",{className:"flex items-center text-gray-700",children:[(0,Jt.jsx)(rx,{className:"mr-1 text-amber-500"}),"Block ",y.block,", Lot ",y.lot]})})]})]}),(0,Jt.jsxs)("div",{children:[(0,Jt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"House Model"}),(0,Jt.jsxs)("div",{className:"relative",children:[(0,Jt.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,Jt.jsx)("i",{className:"fas fa-home text-amber-600"})}),(0,Jt.jsxs)("select",{value:k.houseModel,onChange:e=>N({...k,houseModel:e.target.value}),className:"w-full px-4 py-2 pl-10 rounded-md border border-gray-300 focus:ring-amber-500 focus:border-amber-500 shadow-sm",children:[(0,Jt.jsx)("option",{value:"Standard",children:"Standard Model"}),(0,Jt.jsx)("option",{value:"Premium",children:"Premium Model"}),(0,Jt.jsx)("option",{value:"Deluxe",children:"Deluxe Model"}),(0,Jt.jsx)("option",{value:"Executive",children:"Executive Model"}),(0,Jt.jsx)("option",{value:"Custom",children:"Custom Build"})]})]})]})]})]}),(0,Jt.jsx)("div",{className:"bg-gray-50 rounded-lg p-4 mt-4 border border-gray-200",children:(0,Jt.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,Jt.jsxs)("button",{type:"button",disabled:x,onClick:()=>u(!1),className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-100 disabled:opacity-50 transition-colors duration-150 ease-in-out shadow-sm",children:[(0,Jt.jsx)("i",{className:"fas fa-times mr-2"}),"Cancel"]}),(0,Jt.jsx)("button",{type:"submit",disabled:x,className:"px-5 py-2 bg-primary text-white rounded-md hover:bg-blue-700 disabled:opacity-50 flex items-center justify-center transition-colors duration-150 ease-in-out shadow-sm",children:x?(0,Jt.jsxs)(Jt.Fragment,{children:[(0,Jt.jsx)(ux,{className:"animate-spin mr-2"}),"Processing..."]}):(0,Jt.jsxs)(Jt.Fragment,{children:[(0,Jt.jsx)("i",{className:"fas fa-user-plus mr-2"}),"Create Homeowner Account"]})})]})})]})}),(0,Jt.jsx)("div",{className:"user-preview hidden md:block bg-white p-6 rounded-lg shadow-md md:w-72 lg:w-80 ml-4 border border-gray-100",children:(0,Jt.jsxs)("div",{className:"text-center",children:[(0,Jt.jsx)("h4",{className:"text-sm uppercase tracking-wide text-gray-500 mb-4",children:"Account Preview"}),(0,Jt.jsx)("div",{className:"w-24 h-24 mx-auto bg-gradient-to-r from-blue-500 to-indigo-600 rounded-full flex items-center justify-center text-white text-3xl font-bold mb-3 shadow-md",children:k.firstName&&k.lastName?k.firstName[0]+k.lastName[0]:"U"}),(0,Jt.jsxs)("h3",{className:"font-semibold text-xl",children:[k.firstName," ",k.lastName]}),(0,Jt.jsxs)("p",{className:"text-sm text-gray-500 mb-3",children:["@",k.username||"username"]}),(0,Jt.jsxs)("div",{className:"border-t border-gray-100 pt-4 mt-3",children:[(0,Jt.jsxs)("div",{className:"flex items-center justify-center space-x-2 mb-3",children:[(0,Jt.jsx)(rx,{className:"text-amber-500"}),(0,Jt.jsx)("p",{className:"text-sm font-medium",children:y?`Block ${y.block}, Lot ${y.lot}`:"No lot selected"})]}),(0,Jt.jsx)("div",{className:"bg-amber-50 rounded-lg px-3 py-2 mb-4",children:(0,Jt.jsxs)("p",{className:"text-sm text-center font-medium text-amber-800",children:["House #",k.house_no||"---"]})}),(0,Jt.jsx)("div",{className:"mt-2 flex justify-center",children:(0,Jt.jsx)("span",{className:"px-3 py-1 text-xs font-medium rounded-full bg-green-100 text-green-800 shadow-sm",children:"Active Homeowner"})})]})]})})]})]})}),d&&f&&(0,Jt.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50",children:(0,Jt.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg w-full max-w-md",children:[(0,Jt.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,Jt.jsx)("h2",{className:"text-lg font-semibold",children:p?"Edit User":"User Details"}),(0,Jt.jsx)("button",{onClick:()=>{h(!1),m(null),g(!1)},className:"text-gray-500 hover:text-gray-700",children:(0,Jt.jsx)(px,{})})]}),p?(0,Jt.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),b(!0),f)try{const e=k.email||`${k.username}@example.com`,t=f.house_no!==k.house_no||f.block!==k.block||f.lot!==k.lot;if(await Oy(Cg(Cv,"users",f.id),{...k,email:e,last_updated:Hy()}),t)try{if(f.house_no){const e=Math.floor(f.house_no/100),t=f.house_no%100,n=`B${e}-L${t.toString().padStart(2,"0")}`;await Dy(Cg(Cv,"lots",n),{house_no:f.house_no,block:e,lot:t,status:"Vacant",owner_id:null,house_owner:null,last_updated:Hy()},{merge:!0})}if(k.house_no){const e=`B${k.block}-L${k.lot.toString().padStart(2,"0")}`;await Dy(Cg(Cv,"lots",e),{house_no:k.house_no,block:k.block,lot:k.lot,status:"Occupied",owner_id:f.id,house_owner:k.username||`${k.firstName} ${k.lastName}`.trim(),houseModel:k.houseModel||"Standard",last_updated:Hy()},{merge:!0})}Ut.success("User and lot assignment updated successfully")}catch(KV){console.error("Error updating lot status:",KV),Ut.warning("User updated but there was an issue updating lot status")}else Ut.success("User updated successfully");h(!1),g(!1),m(null),P(),T(),C()}catch(KV){Ut.error("Error updating user: "+KV.message)}finally{b(!1)}},className:"space-y-4",children:[(0,Jt.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,Jt.jsxs)("div",{children:[(0,Jt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"First Name"}),(0,Jt.jsx)("input",{type:"text",required:!0,value:k.firstName,onChange:e=>N({...k,firstName:e.target.value}),className:"w-full px-4 py-2 rounded-md border border-gray-300 focus:outline-none focus:ring-2 focus:ring-primary"})]}),(0,Jt.jsxs)("div",{children:[(0,Jt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Name"}),(0,Jt.jsx)("input",{type:"text",required:!0,value:k.lastName,onChange:e=>N({...k,lastName:e.target.value}),className:"w-full px-4 py-2 rounded-md border border-gray-300 focus:outline-none focus:ring-2 focus:ring-primary"})]})]}),(0,Jt.jsxs)("div",{children:[(0,Jt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Username"}),(0,Jt.jsx)("input",{type:"text",required:!0,value:k.username,onChange:M,className:"w-full px-4 py-2 rounded-md border border-gray-300 focus:outline-none focus:ring-2 focus:ring-primary"})]}),(0,Jt.jsxs)("div",{children:[(0,Jt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),(0,Jt.jsx)("input",{type:"email",value:k.email,onChange:e=>N({...k,email:e.target.value}),className:"w-full px-4 py-2 rounded-md border border-gray-300 focus:outline-none focus:ring-2 focus:ring-primary"})]}),(0,Jt.jsxs)("div",{children:[(0,Jt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Property Assignment"}),(0,Jt.jsxs)("div",{className:"p-3 bg-amber-50 rounded-md border border-amber-100",children:[(0,Jt.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,Jt.jsx)("span",{className:"text-sm font-medium text-amber-700",children:"Current House Number:"}),(0,Jt.jsxs)("span",{className:"px-2 py-0.5 text-xs font-medium rounded-full bg-amber-100 text-amber-800",children:["#",k.house_no]})]}),(0,Jt.jsxs)("div",{className:"text-sm text-gray-600 mb-2",children:["Block ",k.block,", Lot ",k.lot]}),(0,Jt.jsxs)("div",{className:"mt-3",children:[(0,Jt.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Change Lot Assignment"}),(0,Jt.jsxs)("select",{value:"",onChange:e=>{const t=n.find((t=>t.id===e.target.value));t&&N({...k,house_no:t.house_no,block:t.block,lot:t.lot})},className:"w-full px-4 py-2 rounded-md border border-gray-300 focus:ring-amber-500 focus:border-amber-500",children:[(0,Jt.jsx)("option",{value:"",children:"-- Keep current assignment --"}),o?(0,Jt.jsx)("option",{disabled:!0,children:"Loading available lots..."}):n.map((e=>(0,Jt.jsx)("option",{value:e.id,children:e.displayName},e.id)))]}),(0,Jt.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Only vacant lots are available for reassignment"})]})]})]}),(0,Jt.jsxs)("div",{children:[(0,Jt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),(0,Jt.jsxs)("select",{value:k.status,onChange:e=>N({...k,status:e.target.value,isActive:"Active"===e.target.value}),className:"w-full px-4 py-2 rounded-md border border-gray-300 focus:outline-none focus:ring-2 focus:ring-primary",children:[(0,Jt.jsx)("option",{value:"Active",children:"Active"}),(0,Jt.jsx)("option",{value:"Inactive",children:"Inactive"})]})]}),(0,Jt.jsxs)("div",{children:[(0,Jt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Record Status"}),(0,Jt.jsxs)("select",{value:k.recordStatus,onChange:e=>N({...k,recordStatus:e.target.value}),className:"w-full px-4 py-2 rounded-md border border-gray-300 focus:outline-none focus:ring-2 focus:ring-primary",children:[(0,Jt.jsx)("option",{value:"Neutral",children:"Neutral"}),(0,Jt.jsx)("option",{value:"Good",children:"Good"}),(0,Jt.jsx)("option",{value:"Bad",children:"Bad"})]}),(0,Jt.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Bad record status will restrict access to some facilities and services"})]}),(0,Jt.jsxs)("div",{children:[(0,Jt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Contact Number"}),(0,Jt.jsx)("input",{type:"tel",value:k.contactNumber,onChange:e=>N({...k,contactNumber:e.target.value}),className:"w-full px-4 py-2 rounded-md border border-gray-300 focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"e.g. 09123456789"})]}),(0,Jt.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,Jt.jsx)("button",{type:"button",disabled:x,onClick:()=>g(!1),className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 disabled:opacity-50",children:"Cancel"}),(0,Jt.jsx)("button",{type:"submit",disabled:x,className:"px-4 py-2 bg-primary text-white rounded-md hover:bg-blue-700 disabled:opacity-50 flex items-center justify-center",children:x?(0,Jt.jsxs)(Jt.Fragment,{children:[(0,Jt.jsx)(ux,{className:"animate-spin mr-2"}),"Updating..."]}):"Update User"})]})]}):(0,Jt.jsxs)("div",{className:"space-y-4",children:[(0,Jt.jsx)("div",{className:"flex items-center justify-center mb-6",children:(0,Jt.jsx)("div",{className:"h-20 w-20 rounded-full bg-primary text-white flex items-center justify-center text-3xl",children:(0,Jt.jsx)(wx,{})})}),(0,Jt.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,Jt.jsxs)("div",{children:[(0,Jt.jsx)("p",{className:"text-sm text-gray-500",children:"First Name"}),(0,Jt.jsx)("p",{className:"font-medium",children:f.firstName||"N/A"})]}),(0,Jt.jsxs)("div",{children:[(0,Jt.jsx)("p",{className:"text-sm text-gray-500",children:"Last Name"}),(0,Jt.jsx)("p",{className:"font-medium",children:f.lastName||"N/A"})]})]}),(0,Jt.jsxs)("div",{children:[(0,Jt.jsx)("p",{className:"text-sm text-gray-500",children:"Username"}),(0,Jt.jsx)("p",{className:"font-medium",children:f.username||"N/A"})]}),(0,Jt.jsxs)("div",{children:[(0,Jt.jsx)("p",{className:"text-sm text-gray-500",children:"Email"}),(0,Jt.jsx)("p",{className:"font-medium",children:f.email||"N/A"})]}),(0,Jt.jsxs)("div",{className:"p-2 bg-amber-50 rounded-md",children:[(0,Jt.jsx)("p",{className:"text-sm text-gray-700",children:"Property Details"}),(0,Jt.jsxs)("div",{className:"flex items-center justify-between mt-1",children:[(0,Jt.jsxs)("div",{children:[(0,Jt.jsxs)("p",{className:"font-medium",children:["House #",f.house_no||"N/A"]}),f.block&&f.lot&&(0,Jt.jsxs)("p",{className:"text-sm text-gray-600",children:["Block ",f.block,", Lot ",f.lot]})]}),(0,Jt.jsx)("span",{className:"px-2 py-0.5 text-xs font-medium rounded-full bg-amber-100 text-amber-800",children:f.houseModel||"Standard"})]})]}),(0,Jt.jsxs)("div",{children:[(0,Jt.jsx)("p",{className:"text-sm text-gray-500",children:"Role"}),(0,Jt.jsx)("p",{className:"font-medium",children:f.role||"Homeowner"})]}),(0,Jt.jsxs)("div",{children:[(0,Jt.jsx)("p",{className:"text-sm text-gray-500",children:"Status"}),(0,Jt.jsx)("p",{className:"font-medium "+("Active"===f.status?"text-green-600":"text-red-600"),children:f.status||"N/A"})]}),(0,Jt.jsxs)("div",{children:[(0,Jt.jsx)("p",{className:"text-sm text-gray-500",children:"Record Status"}),(0,Jt.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium "+("Good"===f.recordStatus?"bg-green-100 text-green-800":"Bad"===f.recordStatus?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"),children:f.recordStatus||"Neutral"})]}),(0,Jt.jsxs)("div",{children:[(0,Jt.jsx)("p",{className:"text-sm text-gray-500",children:"Contact Number"}),(0,Jt.jsx)("p",{className:"font-medium",children:f.contactNumber||"N/A"})]}),(0,Jt.jsx)("div",{className:"flex justify-end space-x-2 mt-6",children:(0,Jt.jsxs)("button",{onClick:()=>{f&&(C(),N({firstName:f.firstName||"",lastName:f.lastName||"",username:f.username||"",email:f.email||"",contactNumber:f.contactNumber||"",house_no:f.house_no||null,block:f.block||"",lot:f.lot||"",role:f.role||"Homeowner",status:f.status||"Active",isActive:void 0===f.isActive||f.isActive,password:f.password||"",fcmToken:f.fcmToken||"",houseModel:f.houseModel||"Standard"}),g(!0))},className:"px-4 py-2 bg-primary text-white rounded-md hover:bg-blue-700 flex items-center",children:[(0,Jt.jsx)(Jv,{className:"mr-2"}),"Edit User"]})})]})]})}),(0,Jt.jsxs)("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden border border-gray-100",children:[(0,Jt.jsx)("div",{className:"p-4 bg-gradient-to-r from-blue-50 to-indigo-50 border-b border-gray-100",children:(0,Jt.jsxs)("h2",{className:"text-lg font-semibold text-gray-800 flex items-center",children:[(0,Jt.jsx)("i",{className:"fas fa-users text-blue-500 mr-2"}),"Homeowner Accounts",(0,Jt.jsxs)("span",{className:"ml-3 px-3 py-0.5 text-xs rounded-full bg-blue-100 text-blue-600",children:[R.length," ",1===R.length?"user":"users"]})]})}),i?(0,Jt.jsxs)("div",{className:"p-12 text-center",children:[(0,Jt.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 border-4 border-gray-100 border-t-blue-500 rounded-full animate-spin"}),(0,Jt.jsx)("p",{className:"text-gray-600",children:"Loading homeowner accounts..."})]}):(0,Jt.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 border-collapse",children:[(0,Jt.jsx)("thead",{className:"bg-gradient-to-r from-blue-50 to-indigo-50",children:(0,Jt.jsxs)("tr",{children:[(0,Jt.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider",children:(0,Jt.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,Jt.jsx)(wx,{className:"text-blue-500"}),(0,Jt.jsx)("span",{children:"User"})]})}),(0,Jt.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider",children:(0,Jt.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,Jt.jsx)(rx,{className:"text-amber-500"}),(0,Jt.jsx)("span",{children:"Property Details"})]})}),(0,Jt.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider",children:(0,Jt.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,Jt.jsx)("i",{className:"fas fa-envelope text-blue-500"}),(0,Jt.jsx)("span",{children:"Email"})]})}),(0,Jt.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider",children:(0,Jt.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,Jt.jsx)("i",{className:"fas fa-circle text-green-500"}),(0,Jt.jsx)("span",{children:"Status"})]})}),(0,Jt.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider",children:(0,Jt.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,Jt.jsx)("i",{className:"fas fa-shield-alt text-purple-500"}),(0,Jt.jsx)("span",{children:"Record"})]})}),(0,Jt.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider",children:(0,Jt.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,Jt.jsx)("i",{className:"fas fa-sliders-h text-gray-500"}),(0,Jt.jsx)("span",{children:"Actions"})]})})]})}),(0,Jt.jsx)("tbody",{className:"bg-white divide-y divide-gray-100",children:0===R.length?(0,Jt.jsx)("tr",{children:(0,Jt.jsx)("td",{colSpan:"6",className:"px-6 py-8 text-center",children:(0,Jt.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,Jt.jsx)(wx,{className:"h-10 w-10 text-gray-200 mb-2"}),(0,Jt.jsx)("p",{className:"text-gray-500 font-medium",children:"No users found"}),(0,Jt.jsx)("p",{className:"text-gray-400 text-sm",children:"Try adjusting your search criteria"})]})})}):R.map((e=>{var t;return(0,Jt.jsxs)("tr",{className:`${w===e.id?"bg-gray-50":""} \n                        hover:bg-blue-50/30 transition-colors duration-150\n                        ${"Inactive"===e.status?"bg-red-50/20":""}`,children:[(0,Jt.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Jt.jsxs)("button",{onClick:()=>I(e),className:"flex items-center hover:text-primary group",children:[(0,Jt.jsx)("div",{className:"h-10 w-10 rounded-full bg-gradient-to-r from-blue-500 to-indigo-600 text-white flex items-center justify-center mr-3 shadow-sm group-hover:shadow group-hover:scale-105 transition-all duration-200",children:e.username?e.username.charAt(0).toUpperCase():"U"}),(0,Jt.jsxs)("div",{className:"ml-0",children:[(0,Jt.jsxs)("div",{className:"text-sm font-medium text-gray-900 group-hover:text-blue-600 transition-colors",children:["@",e.username||"N/A"]}),(0,Jt.jsx)("div",{className:"text-xs text-gray-500",children:L(e)}),e.contactNumber&&(0,Jt.jsxs)("div",{className:"text-xs text-gray-400 flex items-center mt-1",children:[(0,Jt.jsx)("i",{className:"fas fa-phone-alt mr-1 text-gray-300"}),e.contactNumber]})]})]})}),(0,Jt.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:e.house_no?(0,Jt.jsxs)("div",{className:"flex flex-col",children:[(0,Jt.jsx)("div",{className:"flex items-center mb-1",children:(0,Jt.jsxs)("span",{className:"font-medium text-amber-700 bg-amber-50 px-2 py-0.5 rounded-md text-sm",children:["#",e.house_no]})}),(0,Jt.jsxs)("div",{className:"flex items-center gap-1",children:[(0,Jt.jsxs)("div",{className:"text-xs bg-blue-50 text-blue-700 px-2 py-0.5 rounded",children:["Block ",e.block||Math.floor(e.house_no/100)]}),(0,Jt.jsxs)("div",{className:"text-xs bg-green-50 text-green-700 px-2 py-0.5 rounded",children:["Lot ",e.lot||e.house_no%100]})]}),e.houseModel&&(0,Jt.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:[e.houseModel," Model"]})]}):(0,Jt.jsx)("span",{className:"text-sm text-gray-500 italic",children:"No property assigned"})}),(0,Jt.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Jt.jsxs)("div",{className:"flex items-center",children:[(0,Jt.jsx)("div",{className:"bg-blue-50 rounded-full p-1 mr-2",children:(0,Jt.jsx)("i",{className:"fas fa-envelope text-blue-400 text-xs"})}),(0,Jt.jsxs)("div",{children:[(0,Jt.jsx)("div",{className:"text-sm text-gray-700",children:e.email||"N/A"}),(0,Jt.jsxs)("div",{className:"text-xs text-gray-400",children:["Account ID: ",null===(t=e.id)||void 0===t?void 0:t.substring(0,8),"..."]})]})]})}),(0,Jt.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Jt.jsx)("div",{className:"flex items-center",children:(0,Jt.jsxs)("span",{className:"px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full "+("Active"===e.status?"bg-green-100 text-green-800 border border-green-200":"bg-red-100 text-red-800 border border-red-200"),children:[(0,Jt.jsx)("span",{className:"mr-1 h-2 w-2 rounded-full "+("Active"===e.status?"bg-green-500":"bg-red-500")}),e.status||"Active"]})})}),(0,Jt.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Jt.jsxs)("span",{className:"px-3 py-1 inline-flex items-center text-xs leading-5 font-semibold rounded-full "+("Good"===e.recordStatus?"bg-green-100 text-green-800 border border-green-200":"Bad"===e.recordStatus?"bg-red-100 text-red-800 border border-red-200":"bg-gray-100 text-gray-800 border border-gray-200"),children:[(0,Jt.jsx)("i",{className:"fas "+("Good"===e.recordStatus?"fa-thumbs-up mr-1 text-green-600":"Bad"===e.recordStatus?"fa-thumbs-down mr-1 text-red-600":"fa-minus mr-1 text-gray-500")}),e.recordStatus||"Neutral"]})}),(0,Jt.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:w===e.id?(0,Jt.jsx)("div",{className:"flex items-center justify-center",children:(0,Jt.jsx)(ux,{className:"animate-spin text-primary"})}):(0,Jt.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,Jt.jsxs)("button",{onClick:()=>I(e),className:"px-2 py-1 text-xs bg-blue-50 text-blue-600 rounded border border-blue-100 hover:bg-blue-100 transition-colors flex items-center",children:[(0,Jt.jsx)("i",{className:"fas fa-eye mr-1"}),"View"]}),(0,Jt.jsxs)("button",{onClick:()=>(async(e,t)=>{_(e);try{await Oy(Cg(Cv,"users",e),{status:"Active"===t?"Inactive":"Active",isActive:"Active"!==t,last_updated:Hy()}),Ut.success("User status updated"),T()}catch(KV){Ut.error("Error updating user status: "+KV.message)}finally{_(null)}})(e.id,e.status),className:"px-2 py-1 text-xs rounded border flex items-center "+("Active"===e.status?"bg-red-50 text-red-600 border-red-100 hover:bg-red-100":"bg-green-50 text-green-600 border-green-100 hover:bg-green-100"),children:[(0,Jt.jsx)("i",{className:`fas fa-toggle-${"Active"===e.status?"off":"on"} mr-1`}),"Active"===e.status?"Deactivate":"Activate"]}),(0,Jt.jsxs)("div",{className:"flex gap-1",children:[(0,Jt.jsx)("button",{onClick:()=>A(e.id,"Good"),className:"p-1 text-xs bg-green-50 text-green-600 rounded border border-green-100 hover:bg-green-100",title:"Mark Good Record",children:(0,Jt.jsx)("i",{className:"fas fa-thumbs-up"})}),(0,Jt.jsx)("button",{onClick:()=>A(e.id,"Neutral"),className:"p-1 text-xs bg-gray-50 text-gray-600 rounded border border-gray-100 hover:bg-gray-100",title:"Reset Record Status",children:(0,Jt.jsx)("i",{className:"fas fa-minus"})}),(0,Jt.jsx)("button",{onClick:()=>A(e.id,"Bad"),className:"p-1 text-xs bg-red-50 text-red-600 rounded border border-red-100 hover:bg-red-100",title:"Mark Bad Record",children:(0,Jt.jsx)("i",{className:"fas fa-thumbs-down"})})]}),(0,Jt.jsxs)("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this user?")){_(e);try{await Fy(Cg(Cv,"users",e)),Ut.success("User deleted successfully"),T()}catch(KV){Ut.error("Error deleting user: "+KV.message)}finally{_(null)}}})(e.id),className:"px-2 py-1 text-xs bg-red-50 text-red-600 rounded border border-red-100 hover:bg-red-100 flex items-center",children:[(0,Jt.jsx)("i",{className:"fas fa-trash-alt mr-1"}),"Delete"]})]})})]},e.id)}))})]}),!i&&R.length>0&&(0,Jt.jsxs)("div",{className:"bg-gray-50 px-6 py-3 border-t border-gray-100 flex justify-between items-center",children:[(0,Jt.jsxs)("div",{className:"text-sm text-gray-500",children:["Showing ",R.length," homeowner account",1!==R.length?"s":""]}),(0,Jt.jsxs)("div",{className:"text-sm text-gray-500",children:[(0,Jt.jsx)("span",{className:"font-medium text-blue-600",children:R.filter((e=>e.house_no)).length})," users with property assigned"]})]})]})]})})};const LL=r.forwardRef((function(e,t){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor","aria-hidden":"true",ref:t},e),r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}))}));const DL=r.forwardRef((function(e,t){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor","aria-hidden":"true",ref:t},e),r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"}))}));const OL=r.forwardRef((function(e,t){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor","aria-hidden":"true",ref:t},e),r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"}))}));const FL=r.forwardRef((function(e,t){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor","aria-hidden":"true",ref:t},e),r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"}))}));const VL=r.forwardRef((function(e,t){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor","aria-hidden":"true",ref:t},e),r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"}))})),zL={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function UL(e){return function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const BL={date:UL({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:UL({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:UL({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},$L={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function HL(e){return(t,n)=>{let r;if("formatting"===(n?.context?String(n.context):"standalone")&&e.formattingValues){const t=e.defaultFormattingWidth||e.defaultWidth,s=n?.width?String(n.width):t;r=e.formattingValues[s]||e.formattingValues[t]}else{const t=e.defaultWidth,s=n?.width?String(n.width):e.defaultWidth;r=e.values[s]||e.values[t]}return r[e.argumentCallback?e.argumentCallback(t):t]}}const WL={ordinalNumber:(e,t)=>{const n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},era:HL({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:HL({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:e=>e-1}),month:HL({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:HL({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:HL({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})};function qL(e){return function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=n.width,s=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],i=t.match(s);if(!i)return null;const a=i[0],o=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],l=Array.isArray(o)?function(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n;return}(o,(e=>e.test(a))):function(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n;return}(o,(e=>e.test(a)));let c;c=e.valueCallback?e.valueCallback(l):l,c=n.valueCallback?n.valueCallback(c):c;return{value:c,rest:t.slice(a.length)}}}const KL={ordinalNumber:(GL={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:e=>parseInt(e,10)},function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=e.match(GL.matchPattern);if(!n)return null;const r=n[0],s=e.match(GL.parsePattern);if(!s)return null;let i=GL.valueCallback?GL.valueCallback(s[0]):s[0];return i=t.valueCallback?t.valueCallback(i):i,{value:i,rest:e.slice(r.length)}}),era:qL({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:qL({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:e=>e+1}),month:qL({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:qL({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:qL({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})};var GL;const YL={code:"en-US",formatDistance:(e,t,n)=>{let r;const s=zL[e];return r="string"===typeof s?s:1===t?s.one:s.other.replace("{{count}}",t.toString()),n?.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r},formatLong:BL,formatRelative:(e,t,n,r)=>$L[e],localize:WL,match:KL,options:{weekStartsOn:0,firstWeekContainsDate:1}};let QL={};function XL(){return QL}Math.pow(10,8);const JL=6048e5,ZL=Symbol.for("constructDateFrom");function eD(e,t){return"function"===typeof e?e(t):e&&"object"===typeof e&&ZL in e?e[ZL](t):e instanceof Date?new e.constructor(t):new Date(t)}function tD(e,t){return eD(t||e,e)}function nD(e){const t=tD(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function rD(e,t){const n=tD(e,t?.in);return n.setHours(0,0,0,0),n}function sD(e,t,n){const[r,s]=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const s=eD.bind(null,e||n.find((e=>"object"===typeof e)));return n.map(s)}(n?.in,e,t),i=rD(r),a=rD(s),o=+i-nD(i),l=+a-nD(a);return Math.round((o-l)/864e5)}function iD(e,t){const n=tD(e,t?.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}function aD(e,t){const n=tD(e,t?.in);return sD(n,iD(n))+1}function oD(e,t){const n=XL(),r=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,s=tD(e,t?.in),i=s.getDay(),a=(i<r?7:0)+i-r;return s.setDate(s.getDate()-a),s.setHours(0,0,0,0),s}function lD(e,t){return oD(e,{...t,weekStartsOn:1})}function cD(e,t){const n=tD(e,t?.in),r=n.getFullYear(),s=eD(n,0);s.setFullYear(r+1,0,4),s.setHours(0,0,0,0);const i=lD(s),a=eD(n,0);a.setFullYear(r,0,4),a.setHours(0,0,0,0);const o=lD(a);return n.getTime()>=i.getTime()?r+1:n.getTime()>=o.getTime()?r:r-1}function uD(e,t){const n=cD(e,t),r=eD(t?.in||e,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),lD(r)}function dD(e,t){const n=tD(e,t?.in),r=+lD(n)-+uD(n);return Math.round(r/JL)+1}function hD(e,t){const n=tD(e,t?.in),r=n.getFullYear(),s=XL(),i=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??s.firstWeekContainsDate??s.locale?.options?.firstWeekContainsDate??1,a=eD(t?.in||e,0);a.setFullYear(r+1,0,i),a.setHours(0,0,0,0);const o=oD(a,t),l=eD(t?.in||e,0);l.setFullYear(r,0,i),l.setHours(0,0,0,0);const c=oD(l,t);return+n>=+o?r+1:+n>=+c?r:r-1}function fD(e,t){const n=XL(),r=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??n.firstWeekContainsDate??n.locale?.options?.firstWeekContainsDate??1,s=hD(e,t),i=eD(t?.in||e,0);i.setFullYear(s,0,r),i.setHours(0,0,0,0);return oD(i,t)}function mD(e,t){const n=tD(e,t?.in),r=+oD(n,t)-+fD(n,t);return Math.round(r/JL)+1}function pD(e,t){return(e<0?"-":"")+Math.abs(e).toString().padStart(t,"0")}const gD={y(e,t){const n=e.getFullYear(),r=n>0?n:1-n;return pD("yy"===t?r%100:r,t.length)},M(e,t){const n=e.getMonth();return"M"===t?String(n+1):pD(n+1,2)},d:(e,t)=>pD(e.getDate(),t.length),a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];default:return"am"===n?"a.m.":"p.m."}},h:(e,t)=>pD(e.getHours()%12||12,t.length),H:(e,t)=>pD(e.getHours(),t.length),m:(e,t)=>pD(e.getMinutes(),t.length),s:(e,t)=>pD(e.getSeconds(),t.length),S(e,t){const n=t.length,r=e.getMilliseconds();return pD(Math.trunc(r*Math.pow(10,n-3)),t.length)}},yD="midnight",vD="noon",xD="morning",bD="afternoon",wD="evening",_D="night",kD={G:function(e,t,n){const r=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if("yo"===t){const t=e.getFullYear(),r=t>0?t:1-t;return n.ordinalNumber(r,{unit:"year"})}return gD.y(e,t)},Y:function(e,t,n,r){const s=hD(e,r),i=s>0?s:1-s;if("YY"===t){return pD(i%100,2)}return"Yo"===t?n.ordinalNumber(i,{unit:"year"}):pD(i,t.length)},R:function(e,t){return pD(cD(e),t.length)},u:function(e,t){return pD(e.getFullYear(),t.length)},Q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return pD(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return pD(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){const r=e.getMonth();switch(t){case"M":case"MM":return gD.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){const r=e.getMonth();switch(t){case"L":return String(r+1);case"LL":return pD(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){const s=mD(e,r);return"wo"===t?n.ordinalNumber(s,{unit:"week"}):pD(s,t.length)},I:function(e,t,n){const r=dD(e);return"Io"===t?n.ordinalNumber(r,{unit:"week"}):pD(r,t.length)},d:function(e,t,n){return"do"===t?n.ordinalNumber(e.getDate(),{unit:"date"}):gD.d(e,t)},D:function(e,t,n){const r=aD(e);return"Do"===t?n.ordinalNumber(r,{unit:"dayOfYear"}):pD(r,t.length)},E:function(e,t,n){const r=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){const s=e.getDay(),i=(s-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return pD(i,2);case"eo":return n.ordinalNumber(i,{unit:"day"});case"eee":return n.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(s,{width:"short",context:"formatting"});default:return n.day(s,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){const s=e.getDay(),i=(s-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return pD(i,t.length);case"co":return n.ordinalNumber(i,{unit:"day"});case"ccc":return n.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(s,{width:"narrow",context:"standalone"});case"cccccc":return n.day(s,{width:"short",context:"standalone"});default:return n.day(s,{width:"wide",context:"standalone"})}},i:function(e,t,n){const r=e.getDay(),s=0===r?7:r;switch(t){case"i":return String(s);case"ii":return pD(s,t.length);case"io":return n.ordinalNumber(s,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){const r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(e,t,n){const r=e.getHours();let s;switch(s=12===r?vD:0===r?yD:r/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(s,{width:"narrow",context:"formatting"});default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(e,t,n){const r=e.getHours();let s;switch(s=r>=17?wD:r>=12?bD:r>=4?xD:_D,t){case"B":case"BB":case"BBB":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(s,{width:"narrow",context:"formatting"});default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(e,t,n){if("ho"===t){let t=e.getHours()%12;return 0===t&&(t=12),n.ordinalNumber(t,{unit:"hour"})}return gD.h(e,t)},H:function(e,t,n){return"Ho"===t?n.ordinalNumber(e.getHours(),{unit:"hour"}):gD.H(e,t)},K:function(e,t,n){const r=e.getHours()%12;return"Ko"===t?n.ordinalNumber(r,{unit:"hour"}):pD(r,t.length)},k:function(e,t,n){let r=e.getHours();return 0===r&&(r=24),"ko"===t?n.ordinalNumber(r,{unit:"hour"}):pD(r,t.length)},m:function(e,t,n){return"mo"===t?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):gD.m(e,t)},s:function(e,t,n){return"so"===t?n.ordinalNumber(e.getSeconds(),{unit:"second"}):gD.s(e,t)},S:function(e,t){return gD.S(e,t)},X:function(e,t,n){const r=e.getTimezoneOffset();if(0===r)return"Z";switch(t){case"X":return SD(r);case"XXXX":case"XX":return ED(r);default:return ED(r,":")}},x:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"x":return SD(r);case"xxxx":case"xx":return ED(r);default:return ED(r,":")}},O:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+ND(r,":");default:return"GMT"+ED(r,":")}},z:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+ND(r,":");default:return"GMT"+ED(r,":")}},t:function(e,t,n){return pD(Math.trunc(+e/1e3),t.length)},T:function(e,t,n){return pD(+e,t.length)}};function ND(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const n=e>0?"-":"+",r=Math.abs(e),s=Math.trunc(r/60),i=r%60;return 0===i?n+String(s):n+String(s)+t+pD(i,2)}function SD(e,t){if(e%60===0){return(e>0?"-":"+")+pD(Math.abs(e)/60,2)}return ED(e,t)}function ED(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const n=e>0?"-":"+",r=Math.abs(e);return n+pD(Math.trunc(r/60),2)+t+pD(r%60,2)}const jD=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},CD=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}},TD={p:CD,P:(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],r=n[1],s=n[2];if(!s)return jD(e,t);let i;switch(r){case"P":i=t.dateTime({width:"short"});break;case"PP":i=t.dateTime({width:"medium"});break;case"PPP":i=t.dateTime({width:"long"});break;default:i=t.dateTime({width:"full"})}return i.replace("{{date}}",jD(r,t)).replace("{{time}}",CD(s,t))}},AD=/^D+$/,ID=/^Y+$/,MD=["D","DD","YY","YYYY"];function PD(e){return e instanceof Date||"object"===typeof e&&"[object Date]"===Object.prototype.toString.call(e)}function RD(e){return!(!PD(e)&&"number"!==typeof e||isNaN(+tD(e)))}const LD=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,DD=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,OD=/^'([^]*?)'?$/,FD=/''/g,VD=/[a-zA-Z]/;function zD(e,t,n){const r=XL(),s=n?.locale??r.locale??YL,i=n?.firstWeekContainsDate??n?.locale?.options?.firstWeekContainsDate??r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,a=n?.weekStartsOn??n?.locale?.options?.weekStartsOn??r.weekStartsOn??r.locale?.options?.weekStartsOn??0,o=tD(e,n?.in);if(!RD(o))throw new RangeError("Invalid time value");let l=t.match(DD).map((e=>{const t=e[0];if("p"===t||"P"===t){return(0,TD[t])(e,s.formatLong)}return e})).join("").match(LD).map((e=>{if("''"===e)return{isToken:!1,value:"'"};const t=e[0];if("'"===t)return{isToken:!1,value:UD(e)};if(kD[t])return{isToken:!0,value:e};if(t.match(VD))throw new RangeError("Format string contains an unescaped latin alphabet character `"+t+"`");return{isToken:!1,value:e}}));s.localize.preprocessor&&(l=s.localize.preprocessor(o,l));const c={firstWeekContainsDate:i,weekStartsOn:a,locale:s};return l.map((r=>{if(!r.isToken)return r.value;const i=r.value;(!n?.useAdditionalWeekYearTokens&&function(e){return ID.test(e)}(i)||!n?.useAdditionalDayOfYearTokens&&function(e){return AD.test(e)}(i))&&function(e,t,n){const r=function(e,t,n){const r="Y"===e[0]?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}(e,t,n);if(console.warn(r),MD.includes(e))throw new RangeError(r)}(i,t,String(e));return(0,kD[i[0]])(o,i,s.localize,c)})).join("")}function UD(e){const t=e.match(OD);return t?t[1].replace(FD,"'"):e}const BD=function(){const[e,t]=(0,r.useState)([]),[n,s]=(0,r.useState)([]),[i,a]=(0,r.useState)(!0),[o,l]=(0,r.useState)(""),[c,u]=(0,r.useState)(""),[d,h]=(0,r.useState)(""),[f,m]=(0,r.useState)(!1),[p,g]=(0,r.useState)("list"),[y,v]=(0,r.useState)({name:"",description:"",opening_time:"08:00",closing_time:"20:00",status:"active",location:"",purposes:["","",""]}),[x,b]=(0,r.useState)({}),[w,_]=(0,r.useState)(null),[k,N]=(0,r.useState)("all"),[S,E]=(0,r.useState)(""),[j,C]=(0,r.useState)(null),[T,A]=(0,r.useState)(""),[I,M]=(0,r.useState)(!1),[P,R]=(0,r.useState)(!1),[L,D]=(0,r.useState)(""),[O,F]=(0,r.useState)(null),[V,z]=(0,r.useState)(null),[U,B]=(0,r.useState)(!1),[$,H]=(0,r.useState)(0);(0,r.useEffect)((()=>{document.title="Facility Requests",K(),G()}),[$]);const W=e=>{if(!e)return"N/A";let t;if("object"===typeof e&&e.toDate)t=e.toDate();else if(e.seconds)t=new Date(1e3*e.seconds);else try{t=new Date(e)}catch(hF){return"Invalid Date"}return zD(t,"yyyy-MM-dd")},q=e=>{if(!e)return"N/A";const[t,n]=e.split(":").map(Number);if(isNaN(t)||isNaN(n))return e;const r=t>=12?"PM":"AM";return`${t%12||12}:${n.toString().padStart(2,"0")} ${r}`},K=async()=>{try{const e=py(jg(Cv,"facility_requests"),by("created_at","desc")),n=(await Ly(e)).docs.map((e=>({id:e.id,...e.data()}))),r=await Promise.all(n.map((async e=>{if(e.user_id){const t=await Q(e.user_id);return{...e,hasBadRecord:t}}return e})));t(r)}catch(KV){Ut.error("Error fetching facility requests: "+KV.message)}finally{a(!1)}},G=async()=>{try{const e=(await Ly(jg(Cv,"facilities"))).docs.map((e=>({id:e.id,name:e.data().name,description:e.data().description||"",opening_time:e.data().opening_time||"08:00",closing_time:e.data().closing_time||"20:00",status:e.data().status||"active",location:e.data().location||"",purposes:e.data().purposes||[]})));s(e)}catch(KV){Ut.error("Error fetching facilities: "+KV.message)}},Y=async e=>{try{const t=py(jg(Cv,"facility_comments"),yy("request_id","==",e),_y(1)),n=await Ly(t);return n.empty?"No comment available.":n.docs[0].data().comment||"No comment available."}catch(KV){return console.error("Error fetching comment:",KV),"Error fetching comment."}},Q=async e=>{try{if(!e)return!1;const t=await Py(Cg(Cv,"users",e));if(!t.exists())return!1;return"Bad"===t.data().recordStatus}catch(KV){return console.error("Error checking user record status:",KV),!1}},X=e=>{const{name:t,value:n}=e.target;if(t.startsWith("purpose-")){const e=parseInt(t.split("-")[1],10);v((t=>{const r=[...t.purposes||["","",""]];return r[e]=n,{...t,purposes:r}}))}else v((e=>({...e,[t]:n})));x[t]&&b((e=>({...e,[t]:null})))},J=()=>n.filter((e=>{const t="all"===k||e.status===k,n=e.name.toLowerCase().includes(S.toLowerCase())||e.description&&e.description.toLowerCase().includes(S.toLowerCase())||e.location&&e.location.toLowerCase().includes(S.toLowerCase());return t&&n})),Z=async(e,t,n)=>{if("Rejected"===t||"\u274c"===t)return F(e),z(n),D(""),void R(!0);try{const r=(await Py(Cg(Cv,"facility_requests",e))).data(),s=(null===r||void 0===r?void 0:r.facility)||"N/A";if(("Approved"===t||"\u2705"===t)&&n){if(await Q(n))return Ut.error("Cannot approve request. User has a bad record status."),F(e),z(n),D("Request automatically rejected due to bad record status."),void R(!0)}await Oy(Cg(Cv,"facility_requests",e),{status:t,...L&&{rejection_reason:L},last_updated:Hy()});let i="";switch(t){case"\u2705":case"Approved":i=`Your ${s} facility request has been approved.`;break;case"Confirmation":i=`Please confirm your ${s} facility request details.`;break;case"Complete":i=`Your ${s} facility request has been completed.`;break;default:i=`Your ${s} facility request status has been updated to ${t}.`}await Vy(jg(Cv,"notifications"),{user_id:n||(null===r||void 0===r?void 0:r.user_id),message:i,timestamp:Hy(),status:"unread"});let a="";switch(t){case"\u2705":a="approved";break;case"Confirmation":a="sent for confirmation";break;case"Complete":a="marked as complete";break;default:a=t.toLowerCase()}Ut.success(`Request ${a} successfully`),K()}catch(KV){Ut.error("Error updating request: "+KV.message)}},ee=()=>{C(null),A(""),M(!1)},te=e.filter((e=>{const t=(e.facility||"").toLowerCase().includes(o.toLowerCase())||(e.homeowner_name||"").toLowerCase().includes(o.toLowerCase())||(String(e.house_no)||"").includes(o),n=!c||e.facility===c,r=!d||e.status===d;return t&&n&&r})),ne={};return c?(ne[c]=[],te.forEach((e=>{e.facility===c&&ne[c].push(e)}))):(n.forEach((e=>{ne[e.name]=[]})),te.forEach((e=>{const t=e.facility||"Unspecified";ne[t]||(ne[t]=[]),ne[t].push(e)}))),(0,Jt.jsxs)(Cx,{children:[(0,Jt.jsxs)("div",{className:"pt-20 px-6 max-w-7xl mx-auto",children:[(0,Jt.jsx)("div",{className:"bg-white dark:bg-gray-800 shadow-lg rounded-lg p-6 mb-8 border-l-4 border-blue-500",children:(0,Jt.jsxs)("div",{className:"flex flex-wrap justify-between items-start",children:[(0,Jt.jsxs)("div",{children:[(0,Jt.jsxs)("h1",{className:"text-3xl font-bold text-gray-800 dark:text-white flex items-center",children:[(0,Jt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 mr-3 text-blue-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Jt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),"Facility Requests Management"]}),(0,Jt.jsx)("p",{className:"text-gray-600 dark:text-gray-300 mt-2",children:"Manage community facilities and facility usage requests"})]}),(0,Jt.jsxs)("button",{onClick:()=>{a(!0),H((e=>e+1))},disabled:i,className:`flex items-center px-4 py-2 rounded-lg text-sm ${i?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-blue-50 text-blue-600 hover:bg-blue-100"} transition-colors mt-2 sm:mt-0`,children:[(0,Jt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-2 "+(i?"animate-spin":""),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Jt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),i?"Refreshing...":"Refresh Data"]})]})}),(0,Jt.jsxs)("div",{className:"mb-6 bg-white p-4 rounded-lg shadow flex justify-between items-center",children:[(0,Jt.jsx)("h2",{className:"text-lg font-semibold",children:"Facilities Management"}),(0,Jt.jsx)("div",{children:(0,Jt.jsxs)(Ij,{variant:"primary",onClick:()=>function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"list";"add"===e&&(v({name:"",description:"",opening_time:"08:00",closing_time:"20:00",status:"active",location:"",purposes:["","",""]}),_(null),b({})),g(e),m(!0)}("list"),className:"flex items-center",size:"sm",children:[(0,Jt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Jt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 10h16M4 14h16M4 18h16"})}),"Manage Facilities"]})})]}),(0,Jt.jsxs)("div",{className:"mb-6 flex flex-wrap gap-4",children:[(0,Jt.jsx)("input",{type:"text",placeholder:"Search requests...",value:o,onChange:e=>l(e.target.value),className:"w-full md:w-1/3 px-4 py-2 rounded-md border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,Jt.jsxs)("select",{value:c,onChange:e=>u(e.target.value),className:"px-4 py-2 rounded-md border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,Jt.jsx)("option",{value:"",children:"All Facilities"}),n.map((e=>(0,Jt.jsx)("option",{value:e.name,children:e.name},e.id)))]}),(0,Jt.jsxs)("select",{value:d,onChange:e=>h(e.target.value),className:"px-4 py-2 rounded-md border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,Jt.jsx)("option",{value:"",children:"All Status"}),(0,Jt.jsx)("option",{value:"Pending",children:"Pending"}),(0,Jt.jsx)("option",{value:"Confirmation",children:"Confirmation"}),(0,Jt.jsx)("option",{value:"\u2705",children:"Approved"}),(0,Jt.jsx)("option",{value:"Complete",children:"Complete"}),(0,Jt.jsx)("option",{value:"\u274c",children:"Rejected"})]})]}),i&&(0,Jt.jsxs)("div",{className:"text-center p-4",children:[(0,Jt.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-700 mx-auto"}),(0,Jt.jsx)("p",{className:"mt-2 text-gray-600",children:"Loading requests..."})]}),!i&&(0,Jt.jsxs)(Jt.Fragment,{children:[0===n.length&&(0,Jt.jsx)("div",{className:"text-center p-6 bg-white rounded-lg shadow",children:(0,Jt.jsx)("p",{className:"text-gray-500",children:"No facilities found. Add a facility above to get started."})}),n.length>0&&0===Object.keys(ne).length&&(0,Jt.jsx)("div",{className:"text-center p-6 bg-white rounded-lg shadow",children:(0,Jt.jsx)("p",{className:"text-gray-500",children:"No facilities match the current filters."})})]}),Object.entries(ne).map((e=>{let[t,n]=e;return(0,Jt.jsxs)("div",{className:"mb-8",children:[(0,Jt.jsx)("div",{className:"border-b pb-2 mb-4",children:(0,Jt.jsxs)("h2",{className:"text-xl font-semibold text-gray-800",children:[t," Requests"]})}),(0,Jt.jsx)("div",{className:"bg-white rounded-lg shadow overflow-x-auto",children:(0,Jt.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Jt.jsx)("thead",{className:"bg-gray-50",children:(0,Jt.jsxs)("tr",{children:[(0,Jt.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"#"}),(0,Jt.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Homeowner"}),(0,Jt.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"House No."}),(0,Jt.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Request Date"}),(0,Jt.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Usage Date"}),(0,Jt.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Time In"}),(0,Jt.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Time Out"}),(0,Jt.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Purpose"}),(0,Jt.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,Jt.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,Jt.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:n.length>0?n.map(((e,t)=>(0,Jt.jsxs)("tr",{children:[(0,Jt.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:t+1}),(0,Jt.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.homeowner_name||"N/A"}),(0,Jt.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.house_no||"N/A"}),(0,Jt.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:W(e.created_at)}),(0,Jt.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.usage_date||"N/A"}),(0,Jt.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.time_in||"N/A"}),(0,Jt.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.time_out||"N/A"}),(0,Jt.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:(0,Jt.jsx)("button",{onClick:()=>{return t=e.purpose||"No purpose specified",void Ut.info(t,{autoClose:!1,closeOnClick:!0,draggable:!0});var t},className:"text-blue-600 hover:text-blue-800",children:(0,Jt.jsx)(LL,{className:"h-5 w-5"})})}),(0,Jt.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Jt.jsx)(Vj,{variant:"Pending"===e.status?"warning":"Confirmation"===e.status?"secondary":"\u2705"===e.status||"Approved"===e.status||"Complete"===e.status?"success":"\u274c"===e.status||"Rejected"===e.status?"danger":"default",children:e.status||"Unknown"})}),(0,Jt.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,Jt.jsxs)("div",{className:"flex space-x-2",children:["Pending"===e.status&&(0,Jt.jsxs)(Jt.Fragment,{children:[(0,Jt.jsx)("button",{onClick:()=>Z(e.id,"\u2705",e.user_id),className:"text-green-600 hover:text-green-900",title:"Approve",children:(0,Jt.jsx)(DL,{className:"h-5 w-5"})}),(0,Jt.jsx)("button",{onClick:()=>Z(e.id,"\u274c",e.user_id),className:"text-red-600 hover:text-red-900",title:"Reject",children:(0,Jt.jsx)(OL,{className:"h-5 w-5"})})]}),"Confirmation"===e.status&&(0,Jt.jsx)("button",{onClick:()=>Z(e.id,"Complete",e.user_id),className:"text-emerald-600 hover:text-emerald-900",title:"Mark Complete",children:(0,Jt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Jt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),(0,Jt.jsx)("button",{onClick:()=>(async e=>{C(e);const t=await Y(e.id);A("No comment available."!==t?t:""),e.user_id&&await Q(e.user_id)&&"Pending"===e.status&&Ut.warning("Warning: This homeowner has a bad record status. Consider carefully before approving.")})(e),className:"text-blue-600 hover:text-blue-900",title:"Details",children:(0,Jt.jsx)(LL,{className:"h-5 w-5"})})]})})]},e.id))):(0,Jt.jsx)("tr",{children:(0,Jt.jsx)("td",{colSpan:10,className:"px-6 py-10 text-center text-gray-500",children:"No requests for this facility yet. Homeowners can submit requests using the mobile app."})})})]})})]},t)})),j&&(0,Jt.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,Jt.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,Jt.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,Jt.jsx)("h2",{className:"text-xl font-bold",children:"Request Details"}),(0,Jt.jsx)("button",{onClick:ee,className:"text-gray-500 hover:text-gray-700",children:(0,Jt.jsx)(OL,{className:"h-6 w-6"})})]}),(0,Jt.jsxs)("div",{className:"space-y-4",children:[(0,Jt.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,Jt.jsxs)("div",{className:"flex justify-between border-b pb-2",children:[(0,Jt.jsx)("span",{className:"font-semibold",children:"\ud83c\udfe0 Homeowner:"}),(0,Jt.jsxs)("div",{className:"flex items-center",children:[(0,Jt.jsx)("span",{children:j.homeowner_name||"N/A"}),j.hasBadRecord&&(0,Jt.jsxs)("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-red-100 text-red-800",children:[(0,Jt.jsx)(FL,{className:"h-3 w-3 mr-1"}),"Bad Record"]})]})]}),(0,Jt.jsxs)("div",{className:"flex justify-between border-b pb-2",children:[(0,Jt.jsx)("span",{className:"font-semibold",children:"\ud83c\udfe1 House No.:"}),(0,Jt.jsx)("span",{children:j.house_no||"N/A"})]}),(0,Jt.jsxs)("div",{className:"flex justify-between border-b pb-2",children:[(0,Jt.jsx)("span",{className:"font-semibold",children:"\ud83c\udfc0 Facility:"}),(0,Jt.jsx)("span",{children:j.facility||"N/A"})]}),(0,Jt.jsxs)("div",{className:"flex justify-between border-b pb-2",children:[(0,Jt.jsx)("span",{className:"font-semibold",children:"\ud83d\udcc5 Requested On:"}),(0,Jt.jsx)("span",{children:W(j.created_at)})]}),(0,Jt.jsxs)("div",{className:"flex justify-between border-b pb-2",children:[(0,Jt.jsx)("span",{className:"font-semibold",children:"\ud83d\udcc6 Usage Date:"}),(0,Jt.jsx)("span",{children:j.usage_date||"N/A"})]}),(0,Jt.jsxs)("div",{className:"flex justify-between border-b pb-2",children:[(0,Jt.jsx)("span",{className:"font-semibold",children:"\u23f0 Time In:"}),(0,Jt.jsx)("span",{children:j.time_in||"N/A"})]}),(0,Jt.jsxs)("div",{className:"flex justify-between border-b pb-2",children:[(0,Jt.jsx)("span",{className:"font-semibold",children:"\u23f3 Time Out:"}),(0,Jt.jsx)("span",{children:j.time_out||"N/A"})]}),(0,Jt.jsxs)("div",{className:"flex justify-between border-b pb-2",children:[(0,Jt.jsx)("span",{className:"font-semibold",children:"\ud83d\udccc Status:"}),(0,Jt.jsx)(Vj,{variant:"Pending"===j.status?"warning":"Confirmation"===j.status?"secondary":"\u2705"===j.status||"Approved"===j.status||"Complete"===j.status?"success":"\u274c"===j.status||"Rejected"===j.status?"danger":"default",children:j.status||"Unknown"})]}),j.rejection_reason&&(0,Jt.jsxs)("div",{className:"mt-4 p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-md",children:[(0,Jt.jsx)("h4",{className:"font-medium text-red-800 dark:text-red-300",children:"Rejection Reason:"}),(0,Jt.jsx)("p",{className:"text-red-700 dark:text-red-200",children:j.rejection_reason})]})]}),(0,Jt.jsxs)("div",{className:"mt-6",children:[(0,Jt.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,Jt.jsx)("span",{className:"font-semibold",children:"Admin Comment:"}),(0,Jt.jsxs)("button",{onClick:()=>(async e=>{const t=await Y(e);Ut.info(t,{autoClose:!1,closeOnClick:!0,draggable:!0})})(j.id),className:"text-blue-600 hover:text-blue-800 flex items-center",children:[(0,Jt.jsx)(VL,{className:"h-5 w-5 mr-1"})," View"]})]}),(0,Jt.jsx)("textarea",{value:T,onChange:e=>A(e.target.value),className:"w-full p-2 border rounded-md",rows:4,placeholder:"Enter your comment here..."}),(0,Jt.jsxs)("div",{className:"flex items-center mt-2",children:[(0,Jt.jsx)("input",{type:"checkbox",id:"commentDone",checked:I,onChange:e=>M(e.target.checked),className:"mr-2"}),(0,Jt.jsx)("label",{htmlFor:"commentDone",children:"Mark as done"})]})]})]}),(0,Jt.jsxs)("div",{className:"flex justify-end mt-6 space-x-2",children:[(0,Jt.jsx)("button",{onClick:async()=>{if(j)if(T.trim())try{const t=py(jg(Cv,"facility_comments"),yy("request_id","==",j.id)),n=await Ly(t);var e;if(n.empty)await Vy(jg(Cv,"facility_comments"),{request_id:j.id,comment:T,admin_id:(null===(e=jv.currentUser)||void 0===e?void 0:e.uid)||"Unknown",timestamp:Hy(),is_done:I}),await Oy(Cg(Cv,"facility_requests",j.id),{admin_comment:T,last_updated:Hy()}),Ut.success("Comment added successfully");else await Oy(Cg(Cv,"facility_comments",n.docs[0].id),{comment:T,is_done:I,updated_at:Hy()}),Ut.success("Comment updated successfully");ee()}catch(KV){Ut.error(`Error saving comment: ${KV.message}`)}else Ut.error("Comment cannot be empty")},className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Save Comment"}),(0,Jt.jsx)("button",{onClick:ee,className:"px-4 py-2 bg-gray-200 text-gray-800 rounded hover:bg-gray-300",children:"Cancel"})]})]})})]}),(0,Jt.jsx)(zj,{isOpen:P,onClose:()=>R(!1),title:"Reject Facility Request",size:"md",footer:(0,Jt.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,Jt.jsx)(Ij,{variant:"outline",onClick:()=>R(!1),children:"Cancel"}),(0,Jt.jsx)(Ij,{variant:"danger",onClick:async()=>{if(L.trim())try{const e=(await Py(Cg(Cv,"facility_requests",O))).data(),t=(null===e||void 0===e?void 0:e.facility)||"N/A";await Oy(Cg(Cv,"facility_requests",O),{status:"Rejected",rejection_reason:L,admin_comment:L}),await Vy(jg(Cv,"notifications"),{user_id:V||(null===e||void 0===e?void 0:e.user_id),message:`Your ${t} facility request has been Rejected. Reason: ${L}`,timestamp:Hy(),status:"unread"}),Ut.success("Request rejected successfully"),K(),R(!1)}catch(KV){Ut.error("Error rejecting request: "+KV.message)}else Ut.error("Please enter a reason for rejection")},children:"Submit Rejection"})]}),children:(0,Jt.jsxs)("div",{className:"mb-4",children:[(0,Jt.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Rejection Reason (Required)"}),(0,Jt.jsx)("textarea",{className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md focus:ring-primary dark:focus:ring-secondary dark:bg-gray-700 dark:text-white",rows:4,value:L,onChange:e=>D(e.target.value),placeholder:"Please provide a detailed reason for rejection. This will be visible to the homeowner."}),(0,Jt.jsx)("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"This comment will be stored in the database and sent as a notification to the homeowner."})]})}),(0,Jt.jsxs)(zj,{isOpen:f,onClose:()=>{m(!1),_(null),g("list")},title:"Facility Management",size:"lg",children:[(0,Jt.jsx)("div",{className:"mb-4 border-b border-gray-200",children:(0,Jt.jsxs)("ul",{className:"flex flex-wrap -mb-px text-sm font-medium text-center",children:[(0,Jt.jsx)("li",{className:"mr-2",children:(0,Jt.jsx)("button",{className:"inline-block p-4 rounded-t-lg "+("list"===p?"text-blue-600 border-b-2 border-blue-600":"hover:text-gray-600 hover:border-gray-300"),onClick:()=>g("list"),children:"Facilities List"})}),(0,Jt.jsx)("li",{className:"mr-2",children:(0,Jt.jsx)("button",{className:"inline-block p-4 rounded-t-lg "+("add"===p?"text-blue-600 border-b-2 border-blue-600":"hover:text-gray-600 hover:border-gray-300"),onClick:()=>{_(null),g("add"),v({name:"",description:"",location:"",opening_time:"08:00",closing_time:"17:00",status:"active"}),b({})},children:"Add New Facility"})}),w&&"edit"===p&&(0,Jt.jsx)("li",{className:"mr-2",children:(0,Jt.jsx)("button",{className:"inline-block p-4 rounded-t-lg text-blue-600 border-b-2 border-blue-600",children:"Edit Facility"})})]})}),"list"===p&&(0,Jt.jsxs)("div",{className:"space-y-4",children:[(0,Jt.jsxs)("div",{className:"flex flex-wrap gap-4 mb-4",children:[(0,Jt.jsx)("div",{className:"flex-1",children:(0,Jt.jsx)("input",{type:"text",placeholder:"Search facilities...",value:S,onChange:e=>E(e.target.value),className:"w-full px-4 py-2 rounded-md border border-gray-300 focus:outline-none focus:ring-2 focus:ring-primary"})}),(0,Jt.jsxs)("select",{value:k,onChange:e=>N(e.target.value),className:"px-4 py-2 rounded-md border border-gray-300 focus:outline-none focus:ring-2 focus:ring-primary",children:[(0,Jt.jsx)("option",{value:"all",children:"All Statuses"}),(0,Jt.jsx)("option",{value:"active",children:"Active Only"}),(0,Jt.jsx)("option",{value:"inactive",children:"Inactive Only"}),(0,Jt.jsx)("option",{value:"maintenance",children:"Maintenance Only"})]})]}),(0,Jt.jsx)("div",{className:"overflow-x-auto max-h-96",children:0===n.length?(0,Jt.jsxs)("div",{className:"text-center py-8 bg-gray-50 rounded-lg border border-gray-200",children:[(0,Jt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Jt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})}),(0,Jt.jsx)("p",{className:"mt-2 text-gray-500 text-lg",children:"No facilities available"}),(0,Jt.jsx)("p",{className:"mt-1 text-gray-400 text-sm",children:"Add facilities first to manage them"})]}):0===J().length?(0,Jt.jsxs)("div",{className:"text-center py-8 bg-gray-50 rounded-lg border border-gray-200",children:[(0,Jt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Jt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),(0,Jt.jsx)("p",{className:"mt-2 text-gray-500 text-lg",children:"No matching facilities found"}),(0,Jt.jsx)("p",{className:"mt-1 text-gray-400 text-sm",children:"Try adjusting your search or filter criteria"})]}):(0,Jt.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Jt.jsx)("thead",{className:"bg-gray-50",children:(0,Jt.jsxs)("tr",{children:[(0,Jt.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Facility"}),(0,Jt.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Hours"}),(0,Jt.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Purposes"}),(0,Jt.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,Jt.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,Jt.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:J().map((e=>(0,Jt.jsxs)("tr",{children:[(0,Jt.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Jt.jsx)("div",{className:"flex items-center",children:(0,Jt.jsxs)("div",{children:[(0,Jt.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.name}),(0,Jt.jsx)("div",{className:"text-sm text-gray-500",children:e.location})]})})}),(0,Jt.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Jt.jsxs)("div",{className:"text-sm text-gray-900",children:[q(e.opening_time)," - ",q(e.closing_time)]})}),(0,Jt.jsx)("td",{className:"px-6 py-4",children:(0,Jt.jsx)("div",{className:"text-sm text-gray-900",children:e.purposes&&e.purposes.length>0?(0,Jt.jsx)("div",{children:e.purposes.map(((e,t)=>(0,Jt.jsx)("div",{className:"mb-1",children:(0,Jt.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800",children:e})},t)))}):(0,Jt.jsx)("span",{className:"text-gray-500 text-xs",children:"No purposes defined"})})}),(0,Jt.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Jt.jsx)("span",{className:"inline-flex rounded-full px-2 text-xs font-semibold leading-5 "+("active"===e.status?"bg-green-100 text-green-800":"inactive"===e.status?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"),children:e.status.charAt(0).toUpperCase()+e.status.slice(1)})}),(0,Jt.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,Jt.jsxs)("div",{className:"flex space-x-2 justify-end",children:[(0,Jt.jsxs)("select",{value:e.status,onChange:t=>(async(e,t)=>{try{await Oy(Cg(Cv,"facilities",e),{status:t,updated_at:Hy()}),Ut.success(`Facility status changed to ${t}`),G()}catch(KV){Ut.error("Error updating facility status: "+KV.message)}})(e.id,t.target.value),className:"px-2 py-1 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[(0,Jt.jsx)("option",{value:"active",children:"Set Active"}),(0,Jt.jsx)("option",{value:"inactive",children:"Set Inactive"}),(0,Jt.jsx)("option",{value:"maintenance",children:"Set Maintenance"})]}),(0,Jt.jsx)(Ij,{variant:"outline",size:"sm",onClick:()=>(e=>{const t=e.purposes||[],n=[t[0]||"",t[1]||"",t[2]||""];v({name:e.name||"",description:e.description||"",opening_time:e.opening_time||"08:00",closing_time:e.closing_time||"20:00",status:e.status||"active",location:e.location||"",purposes:n}),_(e),b({}),g("edit"),f||m(!0)})(e),children:"Edit"}),(0,Jt.jsx)(Ij,{variant:"danger",size:"sm",onClick:()=>(async e=>{if(e&&window.confirm("Are you sure you want to delete this facility? This action cannot be undone."))try{const t=py(jg(Cv,"facility_requests"),yy("facility_id","==",e),_y(1));if(!(await Ly(t)).empty)return void Ut.error("Cannot delete facility that has pending requests. Please resolve all requests first.");await Fy(Cg(Cv,"facilities",e)),Ut.success("Facility deleted successfully!"),G()}catch(KV){Ut.error(`Error deleting facility: ${KV.message}`)}})(e.id),children:"Delete"})]})})]},e.id)))})]})})]}),("add"===p||"edit"===p)&&(0,Jt.jsxs)("div",{className:"space-y-4",children:[(0,Jt.jsxs)("div",{children:[(0,Jt.jsxs)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:["Facility Name ",(0,Jt.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Jt.jsx)("input",{type:"text",name:"name",id:"name",value:y.name,onChange:X,className:"mt-1 block w-full rounded-md shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm "+(x.name?"border-red-300":"border-gray-300"),placeholder:"e.g., Swimming Pool, Basketball Court, etc."}),x.name&&(0,Jt.jsx)("p",{className:"mt-1 text-sm text-red-600",children:x.name})]}),(0,Jt.jsxs)("div",{children:[(0,Jt.jsx)("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700",children:"Description"}),(0,Jt.jsx)("textarea",{name:"description",id:"description",rows:3,value:y.description,onChange:X,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",placeholder:"Describe the facility, its features, capacity, etc."})]}),(0,Jt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Jt.jsxs)("div",{children:[(0,Jt.jsxs)("label",{htmlFor:"opening_time",className:"block text-sm font-medium text-gray-700",children:["Opening Time ",(0,Jt.jsx)("span",{className:"text-red-500",children:"*"})," ",(0,Jt.jsxs)("span",{className:"text-xs text-gray-500",children:["(Current: ",q(y.opening_time),")"]})]}),(0,Jt.jsx)("input",{type:"time",name:"opening_time",id:"opening_time",value:y.opening_time,onChange:X,className:"mt-1 block w-full rounded-md shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm "+(x.opening_time?"border-red-300":"border-gray-300")}),x.opening_time&&(0,Jt.jsx)("p",{className:"mt-1 text-sm text-red-600",children:x.opening_time})]}),(0,Jt.jsxs)("div",{children:[(0,Jt.jsxs)("label",{htmlFor:"closing_time",className:"block text-sm font-medium text-gray-700",children:["Closing Time ",(0,Jt.jsx)("span",{className:"text-red-500",children:"*"})," ",(0,Jt.jsxs)("span",{className:"text-xs text-gray-500",children:["(Current: ",q(y.closing_time),")"]})]}),(0,Jt.jsx)("input",{type:"time",name:"closing_time",id:"closing_time",value:y.closing_time,onChange:X,className:"mt-1 block w-full rounded-md shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm "+(x.closing_time?"border-red-300":"border-gray-300")}),x.closing_time&&(0,Jt.jsx)("p",{className:"mt-1 text-sm text-red-600",children:x.closing_time})]})]}),(0,Jt.jsxs)("div",{children:[(0,Jt.jsx)("label",{htmlFor:"location",className:"block text-sm font-medium text-gray-700",children:"Location"}),(0,Jt.jsx)("input",{type:"text",name:"location",id:"location",value:y.location,onChange:X,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",placeholder:"e.g., Building B, Ground Floor, etc."})]}),(0,Jt.jsxs)("div",{className:"border-t border-gray-200 pt-4 mt-4",children:[(0,Jt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Purposes (Up to 3)"}),(0,Jt.jsx)("p",{className:"text-xs text-gray-500 mb-3",children:"List up to 3 specific purposes for which this facility can be used."}),[0,1,2].map((e=>(0,Jt.jsx)("div",{className:"mb-2",children:(0,Jt.jsxs)("div",{className:"flex items-center",children:[(0,Jt.jsxs)("span",{className:"mr-2 text-sm text-gray-500",children:[e+1,"."]}),(0,Jt.jsx)("input",{type:"text",name:`purpose-${e}`,value:y.purposes&&y.purposes[e]||"",onChange:X,className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",placeholder:"e.g., "+(0===e?"Celebration":1===e?"Meeting":"Exercise")})]})},e)))]}),(0,Jt.jsxs)("div",{children:[(0,Jt.jsx)("label",{htmlFor:"status",className:"block text-sm font-medium text-gray-700",children:"Status"}),(0,Jt.jsxs)("select",{name:"status",id:"status",value:y.status,onChange:X,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",children:[(0,Jt.jsx)("option",{value:"active",children:"Active"}),(0,Jt.jsx)("option",{value:"inactive",children:"Inactive"}),(0,Jt.jsx)("option",{value:"maintenance",children:"Under Maintenance"})]}),(0,Jt.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"Active facilities can be booked by homeowners, inactive facilities will not appear in their booking options."})]}),(0,Jt.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,Jt.jsx)(Ij,{variant:"outline",onClick:()=>g("list"),children:"Cancel"}),(0,Jt.jsx)(Ij,{variant:"primary",onClick:async()=>{if((()=>{const e={};return y.name.trim()||(e.name="Facility name is required"),y.opening_time||(e.opening_time="Opening time is required"),y.closing_time||(e.closing_time="Closing time is required"),b(e),0===Object.keys(e).length})())try{w?(await Oy(Cg(Cv,"facilities",w.id),{name:y.name.trim(),description:y.description.trim(),opening_time:y.opening_time,closing_time:y.closing_time,status:y.status,location:y.location.trim(),purposes:(y.purposes||[]).filter((e=>e&&""!==e.trim())),updated_at:Hy()}),Ut.success("Facility updated successfully!")):(await Vy(jg(Cv,"facilities"),{name:y.name.trim(),description:y.description.trim(),opening_time:y.opening_time,closing_time:y.closing_time,status:y.status,location:y.location.trim(),purposes:(y.purposes||[]).filter((e=>e&&""!==e.trim())),created_at:Hy(),updated_at:Hy()}),Ut.success("New facility added successfully!")),_(null),G(),g("list")}catch(KV){Ut.error(`Error ${w?"updating":"adding"} facility: ${KV.message}`)}},children:"edit"===p?"Update Facility":"Add Facility"})]})]})]})]})};function $D(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Array.from(new Set(t.flatMap((e=>"string"==typeof e?e.split(" "):[])))).filter(Boolean).join(" ")}function HD(e,t){if(e in t){let i=t[e];for(var n=arguments.length,r=new Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];return"function"==typeof i?i(...r):i}let i=new Error(`Tried to handle "${e}" but there is no handler defined. Only defined handlers are: ${Object.keys(t).map((e=>`"${e}"`)).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(i,HD),i}var WD=(e=>(e[e.None=0]="None",e[e.RenderStrategy=1]="RenderStrategy",e[e.Static=2]="Static",e))(WD||{}),qD=(e=>(e[e.Unmount=0]="Unmount",e[e.Hidden=1]="Hidden",e))(qD||{});function KD(e){let{ourProps:t,theirProps:n,slot:r,defaultTag:s,features:i,visible:a=!0,name:o}=e,l=YD(n,t);if(a)return GD(l,r,s,o);let c=null!=i?i:0;if(2&c){let{static:e=!1,...t}=l;if(e)return GD(t,r,s,o)}if(1&c){let{unmount:e=!0,...t}=l;return HD(e?0:1,{0:()=>null,1:()=>GD({...t,hidden:!0,style:{display:"none"}},r,s,o)})}return GD(l,r,s,o)}function GD(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0,{as:i=n,children:a,refName:o="ref",...l}=JD(e,["unmount","static"]),c=void 0!==e.ref?{[o]:e.ref}:{},u="function"==typeof a?a(t):a;"className"in l&&l.className&&"function"==typeof l.className&&(l.className=l.className(t));let d={};if(t){let e=!1,n=[];for(let[r,s]of Object.entries(t))"boolean"==typeof s&&(e=!0),!0===s&&n.push(r);e&&(d["data-headlessui-state"]=n.join(" "))}if(i===r.Fragment&&Object.keys(XD(l)).length>0){if(!(0,r.isValidElement)(u)||Array.isArray(u)&&u.length>1)throw new Error(['Passing props on "Fragment"!',"",`The current component <${s} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(l).map((e=>`  - ${e}`)).join("\n"),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map((e=>`  - ${e}`)).join("\n")].join("\n"));let e=u.props,t="function"==typeof(null==e?void 0:e.className)?function(){return $D(null==e?void 0:e.className(...arguments),l.className)}:$D(null==e?void 0:e.className,l.className),n=t?{className:t}:{};return(0,r.cloneElement)(u,Object.assign({},YD(u.props,XD(JD(l,["ref"]))),d,c,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return{ref:t.every((e=>null==e))?void 0:e=>{for(let n of t)null!=n&&("function"==typeof n?n(e):n.current=e)}}}(u.ref,c.ref),n))}return(0,r.createElement)(i,Object.assign({},JD(l,["ref"]),i!==r.Fragment&&c,i!==r.Fragment&&d),u)}function YD(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(0===t.length)return{};if(1===t.length)return t[0];let r={},s={};for(let i of t)for(let e in i)e.startsWith("on")&&"function"==typeof i[e]?(null!=s[e]||(s[e]=[]),s[e].push(i[e])):r[e]=i[e];if(r.disabled||r["aria-disabled"])return Object.assign(r,Object.fromEntries(Object.keys(s).map((e=>[e,void 0]))));for(let i in s)Object.assign(r,{[i](e){let t=s[i];for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];for(let s of t){if((e instanceof Event||(null==e?void 0:e.nativeEvent)instanceof Event)&&e.defaultPrevented)return;s(e,...r)}}});return r}function QD(e){var t;return Object.assign((0,r.forwardRef)(e),{displayName:null!=(t=e.displayName)?t:e.name})}function XD(e){let t=Object.assign({},e);for(let n in t)void 0===t[n]&&delete t[n];return t}function JD(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=Object.assign({},e);for(let r of t)r in n&&delete n[r];return n}let ZD=(0,r.createContext)(null);ZD.displayName="OpenClosedContext";var eO=(e=>(e[e.Open=1]="Open",e[e.Closed=2]="Closed",e[e.Closing=4]="Closing",e[e.Opening=8]="Opening",e))(eO||{});function tO(){return(0,r.useContext)(ZD)}function nO(e){let{value:t,children:n}=e;return r.createElement(ZD.Provider,{value:t},n)}var rO=Object.defineProperty,sO=(e,t,n)=>(((e,t,n)=>{t in e?rO(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);let iO=new class{constructor(){sO(this,"current",this.detect()),sO(this,"handoffState","pending"),sO(this,"currentId",0)}set(e){this.current!==e&&(this.handoffState="pending",this.currentId=0,this.current=e)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return"server"===this.current}get isClient(){return"client"===this.current}detect(){return"undefined"==typeof window||"undefined"==typeof document?"server":"client"}handoff(){"pending"===this.handoffState&&(this.handoffState="complete")}get isHandoffComplete(){return"complete"===this.handoffState}},aO=(e,t)=>{iO.isServer?(0,r.useEffect)(e,t):(0,r.useLayoutEffect)(e,t)};function oO(){let e=(0,r.useRef)(!1);return aO((()=>(e.current=!0,()=>{e.current=!1})),[]),e}function lO(e){let t=(0,r.useRef)(e);return aO((()=>{t.current=e}),[e]),t}function cO(){let e=function(){let e="undefined"==typeof document;return(e=>e.useSyncExternalStore)(s)((()=>()=>{}),(()=>!1),(()=>!e))}(),[t,n]=r.useState(iO.isHandoffComplete);return t&&!1===iO.isHandoffComplete&&n(!1),r.useEffect((()=>{!0!==t&&n(!0)}),[t]),r.useEffect((()=>iO.handoff()),[]),!e&&t}let uO=function(e){let t=lO(e);return r.useCallback((function(){return t.current(...arguments)}),[t])},dO=Symbol();function hO(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];let s=(0,r.useRef)(t);(0,r.useEffect)((()=>{s.current=t}),[t]);let i=uO((e=>{for(let t of s.current)null!=t&&("function"==typeof t?t(e):t.current=e)}));return t.every((e=>null==e||(null==e?void 0:e[dO])))?void 0:i}function fO(e){"function"==typeof queueMicrotask?queueMicrotask(e):Promise.resolve().then(e).catch((e=>setTimeout((()=>{throw e}))))}function mO(){let e=[],t={addEventListener:(e,n,r,s)=>(e.addEventListener(n,r,s),t.add((()=>e.removeEventListener(n,r,s)))),requestAnimationFrame(){let e=requestAnimationFrame(...arguments);return t.add((()=>cancelAnimationFrame(e)))},nextFrame(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.requestAnimationFrame((()=>t.requestAnimationFrame(...n)))},setTimeout(){let e=setTimeout(...arguments);return t.add((()=>clearTimeout(e)))},microTask(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];let s={current:!0};return fO((()=>{s.current&&n[0]()})),t.add((()=>{s.current=!1}))},style(e,t,n){let r=e.style.getPropertyValue(t);return Object.assign(e.style,{[t]:n}),this.add((()=>{Object.assign(e.style,{[t]:r})}))},group(e){let t=mO();return e(t),this.add((()=>t.dispose()))},add:t=>(e.push(t),()=>{let n=e.indexOf(t);if(n>=0)for(let t of e.splice(n,1))t()}),dispose(){for(let t of e.splice(0))t()}};return t}function pO(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e&&n.length>0&&e.classList.add(...n)}function gO(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e&&n.length>0&&e.classList.remove(...n)}function yO(e,t,n,r){let s=n?"enter":"leave",i=mO(),a=void 0!==r?function(e){let t={called:!1};return function(){if(!t.called)return t.called=!0,e(...arguments)}}(r):()=>{};"enter"===s&&(e.removeAttribute("hidden"),e.style.display="");let o=HD(s,{enter:()=>t.enter,leave:()=>t.leave}),l=HD(s,{enter:()=>t.enterTo,leave:()=>t.leaveTo}),c=HD(s,{enter:()=>t.enterFrom,leave:()=>t.leaveFrom});return gO(e,...t.base,...t.enter,...t.enterTo,...t.enterFrom,...t.leave,...t.leaveFrom,...t.leaveTo,...t.entered),pO(e,...t.base,...o,...c),i.nextFrame((()=>{gO(e,...t.base,...o,...c),pO(e,...t.base,...o,...l),function(e,t){let n=mO();if(!e)return n.dispose;let{transitionDuration:r,transitionDelay:s}=getComputedStyle(e),[i,a]=[r,s].map((e=>{let[t=0]=e.split(",").filter(Boolean).map((e=>e.includes("ms")?parseFloat(e):1e3*parseFloat(e))).sort(((e,t)=>t-e));return t})),o=i+a;if(0!==o){n.group((n=>{n.setTimeout((()=>{t(),n.dispose()}),o),n.addEventListener(e,"transitionrun",(e=>{e.target===e.currentTarget&&n.dispose()}))}));let r=n.addEventListener(e,"transitionend",(e=>{e.target===e.currentTarget&&(t(),r())}))}else t();n.add((()=>t())),n.dispose}(e,(()=>(gO(e,...t.base,...o),pO(e,...t.base,...t.entered),a())))})),i.dispose}function vO(){let[e]=(0,r.useState)(mO);return(0,r.useEffect)((()=>()=>e.dispose()),[e]),e}function xO(e){let{immediate:t,container:n,direction:r,classes:s,onStart:i,onStop:a}=e,o=oO(),l=vO(),c=lO(r);aO((()=>{t&&(c.current="enter")}),[t]),aO((()=>{let e=mO();l.add(e.dispose);let t=n.current;if(t&&"idle"!==c.current&&o.current)return e.dispose(),i.current(c.current),e.add(yO(t,s.current,"enter"===c.current,(()=>{e.dispose(),a.current(c.current)}))),e.dispose}),[r])}function bO(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,[t,n]=(0,r.useState)(e),s=oO(),i=(0,r.useCallback)((e=>{s.current&&n((t=>t|e))}),[t,s]),a=(0,r.useCallback)((e=>Boolean(t&e)),[t]),o=(0,r.useCallback)((e=>{s.current&&n((t=>t&~e))}),[n,s]),l=(0,r.useCallback)((e=>{s.current&&n((t=>t^e))}),[n]);return{flags:t,addFlag:i,hasFlag:a,removeFlag:o,toggleFlag:l}}function wO(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").split(" ").filter((e=>e.trim().length>1))}let _O=(0,r.createContext)(null);_O.displayName="TransitionContext";var kO=(e=>(e.Visible="visible",e.Hidden="hidden",e))(kO||{});let NO=(0,r.createContext)(null);function SO(e){return"children"in e?SO(e.children):e.current.filter((e=>{let{el:t}=e;return null!==t.current})).filter((e=>{let{state:t}=e;return"visible"===t})).length>0}function EO(e,t){let n=lO(e),s=(0,r.useRef)([]),i=oO(),a=vO(),o=uO((function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:qD.Hidden,r=s.current.findIndex((t=>{let{el:n}=t;return n===e}));-1!==r&&(HD(t,{[qD.Unmount](){s.current.splice(r,1)},[qD.Hidden](){s.current[r].state="hidden"}}),a.microTask((()=>{var e;!SO(s)&&i.current&&(null==(e=n.current)||e.call(n))})))})),l=uO((e=>{let t=s.current.find((t=>{let{el:n}=t;return n===e}));return t?"visible"!==t.state&&(t.state="visible"):s.current.push({el:e,state:"visible"}),()=>o(e,qD.Unmount)})),c=(0,r.useRef)([]),u=(0,r.useRef)(Promise.resolve()),d=(0,r.useRef)({enter:[],leave:[],idle:[]}),h=uO(((e,n,r)=>{c.current.splice(0),t&&(t.chains.current[n]=t.chains.current[n].filter((t=>{let[n]=t;return n!==e}))),null==t||t.chains.current[n].push([e,new Promise((e=>{c.current.push(e)}))]),null==t||t.chains.current[n].push([e,new Promise((e=>{Promise.all(d.current[n].map((e=>{let[t,n]=e;return n}))).then((()=>e()))}))]),"enter"===n?u.current=u.current.then((()=>null==t?void 0:t.wait.current)).then((()=>r(n))):r(n)})),f=uO(((e,t,n)=>{Promise.all(d.current[t].splice(0).map((e=>{let[t,n]=e;return n}))).then((()=>{var e;null==(e=c.current.shift())||e()})).then((()=>n(t)))}));return(0,r.useMemo)((()=>({children:s,register:l,unregister:o,onStart:h,onStop:f,wait:u,chains:d})),[l,o,s,h,f,d,u])}function jO(){}NO.displayName="NestingContext";let CO=["beforeEnter","afterEnter","beforeLeave","afterLeave"];function TO(e){var t;let n={};for(let r of CO)n[r]=null!=(t=e[r])?t:jO;return n}let AO=WD.RenderStrategy;let IO=QD((function(e,t){let{show:n,appear:s=!1,unmount:i=!0,...a}=e,o=(0,r.useRef)(null),l=hO(o,t);cO();let c=tO();if(void 0===n&&null!==c&&(n=(c&eO.Open)===eO.Open),![!0,!1].includes(n))throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[u,d]=(0,r.useState)(n?"visible":"hidden"),h=EO((()=>{d("hidden")})),[f,m]=(0,r.useState)(!0),p=(0,r.useRef)([n]);aO((()=>{!1!==f&&p.current[p.current.length-1]!==n&&(p.current.push(n),m(!1))}),[p,n]);let g=(0,r.useMemo)((()=>({show:n,appear:s,initial:f})),[n,s,f]);(0,r.useEffect)((()=>{if(n)d("visible");else if(SO(h)){let e=o.current;if(!e)return;let t=e.getBoundingClientRect();0===t.x&&0===t.y&&0===t.width&&0===t.height&&d("hidden")}else d("hidden")}),[n,h]);let y={unmount:i},v=uO((()=>{var t;f&&m(!1),null==(t=e.beforeEnter)||t.call(e)})),x=uO((()=>{var t;f&&m(!1),null==(t=e.beforeLeave)||t.call(e)}));return r.createElement(NO.Provider,{value:h},r.createElement(_O.Provider,{value:g},KD({ourProps:{...y,as:r.Fragment,children:r.createElement(MO,{ref:l,...y,...a,beforeEnter:v,beforeLeave:x})},theirProps:{},defaultTag:r.Fragment,features:AO,visible:"visible"===u,name:"Transition"})))})),MO=QD((function(e,t){var n,s;let{beforeEnter:i,afterEnter:a,beforeLeave:o,afterLeave:l,enter:c,enterFrom:u,enterTo:d,entered:h,leave:f,leaveFrom:m,leaveTo:p,...g}=e,y=(0,r.useRef)(null),v=hO(y,t),x=null==(n=g.unmount)||n?qD.Unmount:qD.Hidden,{show:b,appear:w,initial:_}=function(){let e=(0,r.useContext)(_O);if(null===e)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}(),[k,N]=(0,r.useState)(b?"visible":"hidden"),S=function(){let e=(0,r.useContext)(NO);if(null===e)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}(),{register:E,unregister:j}=S;(0,r.useEffect)((()=>E(y)),[E,y]),(0,r.useEffect)((()=>{if(x===qD.Hidden&&y.current)return b&&"visible"!==k?void N("visible"):HD(k,{hidden:()=>j(y),visible:()=>E(y)})}),[k,y,E,j,b,x]);let C=lO({base:wO(g.className),enter:wO(c),enterFrom:wO(u),enterTo:wO(d),entered:wO(h),leave:wO(f),leaveFrom:wO(m),leaveTo:wO(p)}),T=function(e){let t=(0,r.useRef)(TO(e));return(0,r.useEffect)((()=>{t.current=TO(e)}),[e]),t}({beforeEnter:i,afterEnter:a,beforeLeave:o,afterLeave:l}),A=cO();(0,r.useEffect)((()=>{if(A&&"visible"===k&&null===y.current)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")}),[y,k,A]);let I=w&&b&&_,M=!A||_&&!w?"idle":b?"enter":"leave",P=bO(0),R=uO((e=>HD(e,{enter:()=>{P.addFlag(eO.Opening),T.current.beforeEnter()},leave:()=>{P.addFlag(eO.Closing),T.current.beforeLeave()},idle:()=>{}}))),L=uO((e=>HD(e,{enter:()=>{P.removeFlag(eO.Opening),T.current.afterEnter()},leave:()=>{P.removeFlag(eO.Closing),T.current.afterLeave()},idle:()=>{}}))),D=EO((()=>{N("hidden"),j(y)}),S);xO({immediate:I,container:y,classes:C,direction:M,onStart:lO((e=>{D.onStart(y,e,R)})),onStop:lO((e=>{D.onStop(y,e,L),"leave"===e&&!SO(D)&&(N("hidden"),j(y))}))});let O=g,F={ref:v};return I?O={...O,className:$D(g.className,...C.current.enter,...C.current.enterFrom)}:(O.className=$D(g.className,null==(s=y.current)?void 0:s.className),""===O.className&&delete O.className),r.createElement(NO.Provider,{value:D},r.createElement(nO,{value:HD(k,{visible:eO.Open,hidden:eO.Closed})|P.flags},KD({ourProps:F,theirProps:O,defaultTag:"div",features:AO,visible:"visible"===k,name:"Transition.Child"})))})),PO=QD((function(e,t){let n=null!==(0,r.useContext)(_O),s=null!==tO();return r.createElement(r.Fragment,null,!n&&s?r.createElement(IO,{ref:t,...e}):r.createElement(MO,{ref:t,...e}))})),RO=Object.assign(IO,{Child:PO,Root:IO});var LO,DO=(e=>(e.Space=" ",e.Enter="Enter",e.Escape="Escape",e.Backspace="Backspace",e.Delete="Delete",e.ArrowLeft="ArrowLeft",e.ArrowUp="ArrowUp",e.ArrowRight="ArrowRight",e.ArrowDown="ArrowDown",e.Home="Home",e.End="End",e.PageUp="PageUp",e.PageDown="PageDown",e.Tab="Tab",e))(DO||{});function OO(e){let t=e.parentElement,n=null;for(;t&&!(t instanceof HTMLFieldSetElement);)t instanceof HTMLLegendElement&&(n=t),t=t.parentElement;let r=""===(null==t?void 0:t.getAttribute("disabled"));return(!r||!function(e){if(!e)return!1;let t=e.previousElementSibling;for(;null!==t;){if(t instanceof HTMLLegendElement)return!1;t=t.previousElementSibling}return!0}(n))&&r}let FO=null!=(LO=r.useId)?LO:function(){let e=cO(),[t,n]=r.useState(e?()=>iO.nextId():null);return aO((()=>{null===t&&n(iO.nextId())}),[t]),null!=t?""+t:void 0};var VO=(e=>(e[e.None=1]="None",e[e.Focusable=2]="Focusable",e[e.Hidden=4]="Hidden",e))(VO||{});let zO=QD((function(e,t){let{features:n=1,...r}=e;return KD({ourProps:{ref:t,"aria-hidden":2===(2&n)||void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...4===(4&n)&&2!==(2&n)&&{display:"none"}}},theirProps:r,slot:{},defaultTag:"div",name:"Hidden"})}));function UO(e){return iO.isServer?null:e instanceof Node?e.ownerDocument:null!=e&&e.hasOwnProperty("current")&&e.current instanceof Node?e.current.ownerDocument:document}let BO=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map((e=>`${e}:not([tabindex='-1'])`)).join(",");var $O=(e=>(e[e.First=1]="First",e[e.Previous=2]="Previous",e[e.Next=4]="Next",e[e.Last=8]="Last",e[e.WrapAround=16]="WrapAround",e[e.NoScroll=32]="NoScroll",e))($O||{}),HO=(e=>(e[e.Error=0]="Error",e[e.Overflow=1]="Overflow",e[e.Success=2]="Success",e[e.Underflow=3]="Underflow",e))(HO||{}),WO=(e=>(e[e.Previous=-1]="Previous",e[e.Next=1]="Next",e))(WO||{});function qO(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.body;return null==e?[]:Array.from(e.querySelectorAll(BO)).sort(((e,t)=>Math.sign((e.tabIndex||Number.MAX_SAFE_INTEGER)-(t.tabIndex||Number.MAX_SAFE_INTEGER))))}var KO=(e=>(e[e.Strict=0]="Strict",e[e.Loose=1]="Loose",e))(KO||{});function GO(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;var n;return e!==(null==(n=UO(e))?void 0:n.body)&&HD(t,{0:()=>e.matches(BO),1(){let t=e;for(;null!==t;){if(t.matches(BO))return!0;t=t.parentElement}return!1}})}var YO=(e=>(e[e.Keyboard=0]="Keyboard",e[e.Mouse=1]="Mouse",e))(YO||{});function QO(e){null==e||e.focus({preventScroll:!0})}"undefined"!=typeof window&&"undefined"!=typeof document&&(document.addEventListener("keydown",(e=>{e.metaKey||e.altKey||e.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")}),!0),document.addEventListener("click",(e=>{1===e.detail?delete document.documentElement.dataset.headlessuiFocusVisible:0===e.detail&&(document.documentElement.dataset.headlessuiFocusVisible="")}),!0));let XO=["textarea","input"].join(",");function JO(e,t){let{sorted:n=!0,relativeTo:r=null,skipElements:s=[]}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=Array.isArray(e)?e.length>0?e[0].ownerDocument:document:e.ownerDocument,a=Array.isArray(e)?n?function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e=>e;return e.slice().sort(((e,n)=>{let r=t(e),s=t(n);if(null===r||null===s)return 0;let i=r.compareDocumentPosition(s);return i&Node.DOCUMENT_POSITION_FOLLOWING?-1:i&Node.DOCUMENT_POSITION_PRECEDING?1:0}))}(e):e:qO(e);s.length>0&&a.length>1&&(a=a.filter((e=>!s.includes(e)))),r=null!=r?r:i.activeElement;let o,l=(()=>{if(5&t)return 1;if(10&t)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),c=(()=>{if(1&t)return 0;if(2&t)return Math.max(0,a.indexOf(r))-1;if(4&t)return Math.max(0,a.indexOf(r))+1;if(8&t)return a.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),u=32&t?{preventScroll:!0}:{},d=0,h=a.length;do{if(d>=h||d+h<=0)return 0;let e=c+d;if(16&t)e=(e+h)%h;else{if(e<0)return 3;if(e>=h)return 1}o=a[e],null==o||o.focus(u),d+=l}while(o!==i.activeElement);return 6&t&&function(e){var t,n;return null!=(n=null==(t=null==e?void 0:e.matches)?void 0:t.call(e,XO))&&n}(o)&&o.select(),2}function ZO(e,t,n){let s=lO(t);(0,r.useEffect)((()=>{function t(e){s.current(e)}return window.addEventListener(e,t,n),()=>window.removeEventListener(e,t,n)}),[e,n])}var eF=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(eF||{});function tF(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,r.useMemo)((()=>UO(...t)),[...t])}function nF(e,t,n,s){let i=lO(n);(0,r.useEffect)((()=>{function n(e){i.current(e)}return(e=null!=e?e:window).addEventListener(t,n,s),()=>e.removeEventListener(t,n,s)}),[e,t,s])}function rF(e,t){let n=(0,r.useRef)([]),s=uO(e);(0,r.useEffect)((()=>{let e=[...n.current];for(let[r,i]of t.entries())if(n.current[r]!==i){let r=s(t,e);return n.current=t,r}}),[s,...t])}function sF(e){let t=uO(e),n=(0,r.useRef)(!1);(0,r.useEffect)((()=>(n.current=!1,()=>{n.current=!0,fO((()=>{n.current&&t()}))})),[t])}function iF(e){if(!e)return new Set;if("function"==typeof e)return new Set(e());let t=new Set;for(let n of e.current)n.current instanceof HTMLElement&&t.add(n.current);return t}var aF=(e=>(e[e.None=1]="None",e[e.InitialFocus=2]="InitialFocus",e[e.TabLock=4]="TabLock",e[e.FocusLock=8]="FocusLock",e[e.RestoreFocus=16]="RestoreFocus",e[e.All=30]="All",e))(aF||{});let oF=QD((function(e,t){let n=(0,r.useRef)(null),s=hO(n,t),{initialFocus:i,containers:a,features:o=30,...l}=e;cO()||(o=1);let c=tF(n);!function(e,t){let{ownerDocument:n}=e,s=function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=(0,r.useRef)(cF.slice());return rF(((e,n)=>{let[r]=e,[s]=n;!0===s&&!1===r&&fO((()=>{t.current.splice(0)})),!1===s&&!0===r&&(t.current=cF.slice())}),[e,cF,t]),uO((()=>{var e;return null!=(e=t.current.find((e=>null!=e&&e.isConnected)))?e:null}))}(t);rF((()=>{t||(null==n?void 0:n.activeElement)===(null==n?void 0:n.body)&&QO(s())}),[t]),sF((()=>{t&&QO(s())}))}({ownerDocument:c},Boolean(16&o));let u=function(e,t){let{ownerDocument:n,container:s,initialFocus:i}=e,a=(0,r.useRef)(null),o=oO();return rF((()=>{if(!t)return;let e=s.current;e&&fO((()=>{if(!o.current)return;let t=null==n?void 0:n.activeElement;if(null!=i&&i.current){if((null==i?void 0:i.current)===t)return void(a.current=t)}else if(e.contains(t))return void(a.current=t);null!=i&&i.current?QO(i.current):JO(e,$O.First)===HO.Error&&console.warn("There are no focusable elements inside the <FocusTrap />"),a.current=null==n?void 0:n.activeElement}))}),[t]),a}({ownerDocument:c,container:n,initialFocus:i},Boolean(2&o));!function(e,t){let{ownerDocument:n,container:r,containers:s,previousActiveElement:i}=e,a=oO();nF(null==n?void 0:n.defaultView,"focus",(e=>{if(!t||!a.current)return;let n=iF(s);r.current instanceof HTMLElement&&n.add(r.current);let o=i.current;if(!o)return;let l=e.target;l&&l instanceof HTMLElement?uF(n,l)?(i.current=l,QO(l)):(e.preventDefault(),e.stopPropagation(),QO(o)):QO(i.current)}),!0)}({ownerDocument:c,container:n,containers:a,previousActiveElement:u},Boolean(8&o));let d=function(){let e=(0,r.useRef)(0);return ZO("keydown",(t=>{"Tab"===t.key&&(e.current=t.shiftKey?1:0)}),!0),e}(),h=uO((e=>{let t=n.current;t&&HD(d.current,{[eF.Forwards]:()=>{JO(t,$O.First,{skipElements:[e.relatedTarget]})},[eF.Backwards]:()=>{JO(t,$O.Last,{skipElements:[e.relatedTarget]})}})})),f=vO(),m=(0,r.useRef)(!1),p={ref:s,onKeyDown(e){"Tab"==e.key&&(m.current=!0,f.requestAnimationFrame((()=>{m.current=!1})))},onBlur(e){let t=iF(a);n.current instanceof HTMLElement&&t.add(n.current);let r=e.relatedTarget;r instanceof HTMLElement&&"true"!==r.dataset.headlessuiFocusGuard&&(uF(t,r)||(m.current?JO(n.current,HD(d.current,{[eF.Forwards]:()=>$O.Next,[eF.Backwards]:()=>$O.Previous})|$O.WrapAround,{relativeTo:e.target}):e.target instanceof HTMLElement&&QO(e.target)))}};return r.createElement(r.Fragment,null,Boolean(4&o)&&r.createElement(zO,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:h,features:VO.Focusable}),KD({ourProps:p,theirProps:l,defaultTag:"div",name:"FocusTrap"}),Boolean(4&o)&&r.createElement(zO,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:h,features:VO.Focusable}))})),lF=Object.assign(oF,{features:aF}),cF=[];function uF(e,t){for(let n of e)if(n.contains(t))return!0;return!1}!function(e){function t(){"loading"!==document.readyState&&(e(),document.removeEventListener("DOMContentLoaded",t))}"undefined"!=typeof window&&"undefined"!=typeof document&&(document.addEventListener("DOMContentLoaded",t),t())}((()=>{function e(e){e.target instanceof HTMLElement&&e.target!==document.body&&cF[0]!==e.target&&(cF.unshift(e.target),cF=cF.filter((e=>null!=e&&e.isConnected)),cF.splice(10))}window.addEventListener("click",e,{capture:!0}),window.addEventListener("mousedown",e,{capture:!0}),window.addEventListener("focus",e,{capture:!0}),document.body.addEventListener("click",e,{capture:!0}),document.body.addEventListener("mousedown",e,{capture:!0}),document.body.addEventListener("focus",e,{capture:!0})}));var dF=n(119);let hF=(0,r.createContext)(!1);function fF(){return(0,r.useContext)(hF)}function mF(e){return r.createElement(hF.Provider,{value:e.force},e.children)}let pF=r.Fragment;let gF=r.Fragment,yF=(0,r.createContext)(null);let vF=(0,r.createContext)(null);let xF=QD((function(e,t){let n=e,s=(0,r.useRef)(null),i=hO(function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return Object.assign(e,{[dO]:t})}((e=>{s.current=e})),t),a=tF(s),o=function(e){let t=fF(),n=(0,r.useContext)(yF),s=tF(e),[i,a]=(0,r.useState)((()=>{if(!t&&null!==n||iO.isServer)return null;let e=null==s?void 0:s.getElementById("headlessui-portal-root");if(e)return e;if(null===s)return null;let r=s.createElement("div");return r.setAttribute("id","headlessui-portal-root"),s.body.appendChild(r)}));return(0,r.useEffect)((()=>{null!==i&&(null!=s&&s.body.contains(i)||null==s||s.body.appendChild(i))}),[i,s]),(0,r.useEffect)((()=>{t||null!==n&&a(n.current)}),[n,a,t]),i}(s),[l]=(0,r.useState)((()=>{var e;return iO.isServer?null:null!=(e=null==a?void 0:a.createElement("div"))?e:null})),c=(0,r.useContext)(vF),u=cO();return aO((()=>{!o||!l||o.contains(l)||(l.setAttribute("data-headlessui-portal",""),o.appendChild(l))}),[o,l]),aO((()=>{if(l&&c)return c.register(l)}),[c,l]),sF((()=>{var e;!o||!l||(l instanceof Node&&o.contains(l)&&o.removeChild(l),o.childNodes.length<=0&&(null==(e=o.parentElement)||e.removeChild(o)))})),u&&o&&l?(0,dF.createPortal)(KD({ourProps:{ref:i},theirProps:n,defaultTag:pF,name:"Portal"}),l):null})),bF=QD((function(e,t){let{target:n,...s}=e,i={ref:hO(t)};return r.createElement(yF.Provider,{value:n},KD({ourProps:i,theirProps:s,defaultTag:gF,name:"Popover.Group"}))})),wF=Object.assign(xF,{Group:bF}),_F=(0,r.createContext)(null);function kF(){let e=(0,r.useContext)(_F);if(null===e){let e=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(e,kF),e}return e}let NF=QD((function(e,t){let n=FO(),{id:r=`headlessui-description-${n}`,...s}=e,i=kF(),a=hO(t);return aO((()=>i.register(r)),[r,i.register]),KD({ourProps:{ref:a,...i.props,id:r},theirProps:s,slot:i.slot||{},defaultTag:"p",name:i.name||"Description"})})),SF=Object.assign(NF,{}),EF=(0,r.createContext)((()=>{}));EF.displayName="StackContext";var jF=(e=>(e[e.Add=0]="Add",e[e.Remove=1]="Remove",e))(jF||{});function CF(e){let{children:t,onUpdate:n,type:s,element:i,enabled:a}=e,o=(0,r.useContext)(EF),l=uO((function(){null==n||n(...arguments),o(...arguments)}));return aO((()=>{let e=void 0===a||!0===a;return e&&l(0,s,i),()=>{e&&l(1,s,i)}}),[l,s,i,a]),r.createElement(EF.Provider,{value:l},t)}function TF(e,t,n){let s=lO(t);(0,r.useEffect)((()=>{function t(e){s.current(e)}return document.addEventListener(e,t,n),()=>document.removeEventListener(e,t,n)}),[e,n])}function AF(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],s=(0,r.useRef)(!1);function i(n,r){if(!s.current||n.defaultPrevented)return;let i=r(n);if(null===i||!i.getRootNode().contains(i)||!i.isConnected)return;let a=function e(t){return"function"==typeof t?e(t()):Array.isArray(t)||t instanceof Set?t:[t]}(e);for(let e of a){if(null===e)continue;let t=e instanceof HTMLElement?e:e.current;if(null!=t&&t.contains(i)||n.composed&&n.composedPath().includes(t))return}return!GO(i,KO.Loose)&&-1!==i.tabIndex&&n.preventDefault(),t(n,i)}(0,r.useEffect)((()=>{requestAnimationFrame((()=>{s.current=n}))}),[n]);let a=(0,r.useRef)(null);TF("pointerdown",(e=>{var t,n;s.current&&(a.current=(null==(n=null==(t=e.composedPath)?void 0:t.call(e))?void 0:n[0])||e.target)}),!0),TF("mousedown",(e=>{var t,n;s.current&&(a.current=(null==(n=null==(t=e.composedPath)?void 0:t.call(e))?void 0:n[0])||e.target)}),!0),TF("click",(e=>{a.current&&(i(e,(()=>a.current)),a.current=null)}),!0),TF("touchend",(e=>i(e,(()=>e.target instanceof HTMLElement?e.target:null))),!0),ZO("blur",(e=>i(e,(()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null))),!0)}const IF="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},{useState:MF,useEffect:PF,useLayoutEffect:RF,useDebugValue:LF}=s;function DF(e){const t=e.getSnapshot,n=e.value;try{const e=t();return!IF(n,e)}catch{return!0}}"undefined"!=typeof window&&"undefined"!=typeof window.document&&window.document.createElement;const OF=(e=>e.useSyncExternalStore)(s);function FF(){let e;return{before(t){let{doc:n}=t;var r;let s=n.documentElement;e=(null!=(r=n.defaultView)?r:window).innerWidth-s.clientWidth},after(t){let{doc:n,d:r}=t,s=n.documentElement,i=s.clientWidth-s.offsetWidth,a=e-i;r.style(s,"paddingRight",`${a}px`)}}}function VF(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function zF(){if(!VF())return{};let e;return{before(){e=window.pageYOffset},after(t){let{doc:n,d:r,meta:s}=t;function i(e){return s.containers.flatMap((e=>e())).some((t=>t.contains(e)))}r.microTask((()=>{if("auto"!==window.getComputedStyle(n.documentElement).scrollBehavior){let e=mO();e.style(n.documentElement,"scroll-behavior","auto"),r.add((()=>r.microTask((()=>e.dispose()))))}r.style(n.body,"marginTop",`-${e}px`),window.scrollTo(0,0);let t=null;r.addEventListener(n,"click",(e=>{if(e.target instanceof HTMLElement)try{let r=e.target.closest("a");if(!r)return;let{hash:s}=new URL(r.href),a=n.querySelector(s);a&&!i(a)&&(t=a)}catch{}}),!0),r.addEventListener(n,"touchmove",(e=>{e.target instanceof HTMLElement&&!i(e.target)&&e.preventDefault()}),{passive:!1}),r.add((()=>{window.scrollTo(0,window.pageYOffset+e),t&&t.isConnected&&(t.scrollIntoView({block:"nearest"}),t=null)}))}))}}}function UF(e){let t={};for(let n of e)Object.assign(t,n(t));return t}let BF=function(e,t){let n=e(),r=new Set;return{getSnapshot:()=>n,subscribe:e=>(r.add(e),()=>r.delete(e)),dispatch(e){for(var s=arguments.length,i=new Array(s>1?s-1:0),a=1;a<s;a++)i[a-1]=arguments[a];let o=t[e].call(n,...i);o&&(n=o,r.forEach((e=>e())))}}}((()=>new Map),{PUSH(e,t){var n;let r=null!=(n=this.get(e))?n:{doc:e,count:0,d:mO(),meta:new Set};return r.count++,r.meta.add(t),this.set(e,r),this},POP(e,t){let n=this.get(e);return n&&(n.count--,n.meta.delete(t)),this},SCROLL_PREVENT(e){let{doc:t,d:n,meta:r}=e,s={doc:t,d:n,meta:UF(r)},i=[zF(),FF(),{before(e){let{doc:t,d:n}=e;n.style(t.documentElement,"overflow","hidden")}}];i.forEach((e=>{let{before:t}=e;return null==t?void 0:t(s)})),i.forEach((e=>{let{after:t}=e;return null==t?void 0:t(s)}))},SCROLL_ALLOW(e){let{d:t}=e;t.dispose()},TEARDOWN(e){let{doc:t}=e;this.delete(t)}});function $F(e,t,n){let r=function(e){return OF(e.subscribe,e.getSnapshot,e.getSnapshot)}(BF),s=e?r.get(e):void 0,i=!!s&&s.count>0;return aO((()=>{if(e&&t)return BF.dispatch("PUSH",e,n),()=>BF.dispatch("POP",e,n)}),[t,e]),i}BF.subscribe((()=>{let e=BF.getSnapshot(),t=new Map;for(let[n]of e)t.set(n,n.documentElement.style.overflow);for(let n of e.values()){let e="hidden"===t.get(n.doc),r=0!==n.count;(r&&!e||!r&&e)&&BF.dispatch(n.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",n),0===n.count&&BF.dispatch("TEARDOWN",n)}}));let HF=new Map,WF=new Map;function qF(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];aO((()=>{var n;if(!t)return;let r="function"==typeof e?e():e.current;if(!r)return;let s=null!=(n=WF.get(r))?n:0;return WF.set(r,s+1),0!==s||(HF.set(r,{"aria-hidden":r.getAttribute("aria-hidden"),inert:r.inert}),r.setAttribute("aria-hidden","true"),r.inert=!0),function(){var e;if(!r)return;let t=null!=(e=WF.get(r))?e:1;if(1===t?WF.delete(r):WF.set(r,t-1),1!==t)return;let n=HF.get(r);n&&(null===n["aria-hidden"]?r.removeAttribute("aria-hidden"):r.setAttribute("aria-hidden",n["aria-hidden"]),r.inert=n.inert,HF.delete(r))}}),[e,t])}function KF(){let{defaultContainers:e=[],portals:t,mainTreeNodeRef:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var s;let i=(0,r.useRef)(null!=(s=null==n?void 0:n.current)?s:null),a=tF(i),o=uO((()=>{var n;let r=[];for(let t of e)null!==t&&(t instanceof HTMLElement?r.push(t):"current"in t&&t.current instanceof HTMLElement&&r.push(t.current));if(null!=t&&t.current)for(let e of t.current)r.push(e);for(let e of null!=(n=null==a?void 0:a.querySelectorAll("html > *, body > *"))?n:[])e!==document.body&&e!==document.head&&e instanceof HTMLElement&&"headlessui-portal-root"!==e.id&&(e.contains(i.current)||r.some((t=>e.contains(t)))||r.push(e));return r}));return{resolveContainers:o,contains:uO((e=>o().some((t=>t.contains(e))))),mainTreeNodeRef:i,MainTreeNode:(0,r.useMemo)((()=>function(){return null!=n?null:r.createElement(zO,{features:VO.Hidden,ref:i})}),[i,n])}}var GF=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(GF||{}),YF=(e=>(e[e.SetTitleId=0]="SetTitleId",e))(YF||{});let QF={0:(e,t)=>e.titleId===t.id?e:{...e,titleId:t.id}},XF=(0,r.createContext)(null);function JF(e){let t=(0,r.useContext)(XF);if(null===t){let t=new Error(`<${e} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,JF),t}return t}function ZF(e,t){return HD(t.type,QF,e,t)}XF.displayName="DialogContext";let eV=WD.RenderStrategy|WD.Static;let tV=QD((function(e,t){var n;let s=FO(),{id:i=`headlessui-dialog-${s}`,open:a,onClose:o,initialFocus:l,__demoMode:c=!1,...u}=e,[d,h]=(0,r.useState)(0),f=tO();void 0===a&&null!==f&&(a=(f&eO.Open)===eO.Open);let m=(0,r.useRef)(null),p=hO(m,t),g=tF(m),y=e.hasOwnProperty("open")||null!==f,v=e.hasOwnProperty("onClose");if(!y&&!v)throw new Error("You have to provide an `open` and an `onClose` prop to the `Dialog` component.");if(!y)throw new Error("You provided an `onClose` prop to the `Dialog`, but forgot an `open` prop.");if(!v)throw new Error("You provided an `open` prop to the `Dialog`, but forgot an `onClose` prop.");if("boolean"!=typeof a)throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${a}`);if("function"!=typeof o)throw new Error(`You provided an \`onClose\` prop to the \`Dialog\`, but the value is not a function. Received: ${o}`);let x=a?0:1,[b,w]=(0,r.useReducer)(ZF,{titleId:null,descriptionId:null,panelRef:(0,r.createRef)()}),_=uO((()=>o(!1))),k=uO((e=>w({type:0,id:e}))),N=!!cO()&&(!c&&0===x),S=d>1,E=null!==(0,r.useContext)(XF),[j,C]=function(){let e=(0,r.useContext)(vF),t=(0,r.useRef)([]),n=uO((n=>(t.current.push(n),e&&e.register(n),()=>s(n)))),s=uO((n=>{let r=t.current.indexOf(n);-1!==r&&t.current.splice(r,1),e&&e.unregister(n)})),i=(0,r.useMemo)((()=>({register:n,unregister:s,portals:t})),[n,s,t]);return[t,(0,r.useMemo)((()=>function(e){let{children:t}=e;return r.createElement(vF.Provider,{value:i},t)}),[i])]}(),{resolveContainers:T,mainTreeNodeRef:A,MainTreeNode:I}=KF({portals:j,defaultContainers:[null!=(n=b.panelRef.current)?n:m.current]}),M=S?"parent":"leaf",P=null!==f&&(f&eO.Closing)===eO.Closing,R=!E&&!P&&N,L=(0,r.useCallback)((()=>{var e,t;return null!=(t=Array.from(null!=(e=null==g?void 0:g.querySelectorAll("body > *"))?e:[]).find((e=>"headlessui-portal-root"!==e.id&&(e.contains(A.current)&&e instanceof HTMLElement))))?t:null}),[A]);qF(L,R);let D=!!S||N,O=(0,r.useCallback)((()=>{var e,t;return null!=(t=Array.from(null!=(e=null==g?void 0:g.querySelectorAll("[data-headlessui-portal]"))?e:[]).find((e=>e.contains(A.current)&&e instanceof HTMLElement)))?t:null}),[A]);qF(O,D),AF(T,_,!(!N||S));let F=!(S||0!==x);nF(null==g?void 0:g.defaultView,"keydown",(e=>{F&&(e.defaultPrevented||e.key===DO.Escape&&(e.preventDefault(),e.stopPropagation(),_()))})),function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>[document.body];$F(e,t,(e=>{var t;return{containers:[...null!=(t=e.containers)?t:[],n]}}))}(g,!(P||0!==x||E),T),(0,r.useEffect)((()=>{if(0!==x||!m.current)return;let e=new ResizeObserver((e=>{for(let t of e){let e=t.target.getBoundingClientRect();0===e.x&&0===e.y&&0===e.width&&0===e.height&&_()}}));return e.observe(m.current),()=>e.disconnect()}),[x,m,_]);let[V,z]=function(){let[e,t]=(0,r.useState)([]);return[e.length>0?e.join(" "):void 0,(0,r.useMemo)((()=>function(e){let n=uO((e=>(t((t=>[...t,e])),()=>t((t=>{let n=t.slice(),r=n.indexOf(e);return-1!==r&&n.splice(r,1),n}))))),s=(0,r.useMemo)((()=>({register:n,slot:e.slot,name:e.name,props:e.props})),[n,e.slot,e.name,e.props]);return r.createElement(_F.Provider,{value:s},e.children)}),[t])]}(),U=(0,r.useMemo)((()=>[{dialogState:x,close:_,setTitleId:k},b]),[x,b,_,k]),B=(0,r.useMemo)((()=>({open:0===x})),[x]),$={ref:p,id:i,role:"dialog","aria-modal":0===x||void 0,"aria-labelledby":b.titleId,"aria-describedby":V};return r.createElement(CF,{type:"Dialog",enabled:0===x,element:m,onUpdate:uO(((e,t)=>{"Dialog"===t&&HD(e,{[jF.Add]:()=>h((e=>e+1)),[jF.Remove]:()=>h((e=>e-1))})}))},r.createElement(mF,{force:!0},r.createElement(wF,null,r.createElement(XF.Provider,{value:U},r.createElement(wF.Group,{target:m},r.createElement(mF,{force:!1},r.createElement(z,{slot:B,name:"Dialog.Description"},r.createElement(lF,{initialFocus:l,containers:T,features:N?HD(M,{parent:lF.features.RestoreFocus,leaf:lF.features.All&~lF.features.FocusLock}):lF.features.None},r.createElement(C,null,KD({ourProps:$,theirProps:u,slot:B,defaultTag:"div",features:eV,visible:0===x,name:"Dialog"}))))))))),r.createElement(I,null))})),nV=QD((function(e,t){let n=FO(),{id:s=`headlessui-dialog-backdrop-${n}`,...i}=e,[{dialogState:a},o]=JF("Dialog.Backdrop"),l=hO(t);(0,r.useEffect)((()=>{if(null===o.panelRef.current)throw new Error("A <Dialog.Backdrop /> component is being used, but a <Dialog.Panel /> component is missing.")}),[o.panelRef]);let c=(0,r.useMemo)((()=>({open:0===a})),[a]);return r.createElement(mF,{force:!0},r.createElement(wF,null,KD({ourProps:{ref:l,id:s,"aria-hidden":!0},theirProps:i,slot:c,defaultTag:"div",name:"Dialog.Backdrop"})))})),rV=QD((function(e,t){let n=FO(),{id:s=`headlessui-dialog-panel-${n}`,...i}=e,[{dialogState:a},o]=JF("Dialog.Panel"),l=hO(t,o.panelRef),c=(0,r.useMemo)((()=>({open:0===a})),[a]);return KD({ourProps:{ref:l,id:s,onClick:uO((e=>{e.stopPropagation()}))},theirProps:i,slot:c,defaultTag:"div",name:"Dialog.Panel"})})),sV=QD((function(e,t){let n=FO(),{id:s=`headlessui-dialog-overlay-${n}`,...i}=e,[{dialogState:a,close:o}]=JF("Dialog.Overlay");return KD({ourProps:{ref:hO(t),id:s,"aria-hidden":!0,onClick:uO((e=>{if(e.target===e.currentTarget){if(OO(e.currentTarget))return e.preventDefault();e.preventDefault(),e.stopPropagation(),o()}}))},theirProps:i,slot:(0,r.useMemo)((()=>({open:0===a})),[a]),defaultTag:"div",name:"Dialog.Overlay"})})),iV=QD((function(e,t){let n=FO(),{id:s=`headlessui-dialog-title-${n}`,...i}=e,[{dialogState:a,setTitleId:o}]=JF("Dialog.Title"),l=hO(t);(0,r.useEffect)((()=>(o(s),()=>o(null))),[s,o]);let c=(0,r.useMemo)((()=>({open:0===a})),[a]);return KD({ourProps:{ref:l,id:s},theirProps:i,slot:c,defaultTag:"h2",name:"Dialog.Title"})})),aV=Object.assign(tV,{Backdrop:nV,Panel:rV,Overlay:sV,Title:iV,Description:SF});const oV=function(){const[e,t]=(0,r.useState)([]),[n,s]=(0,r.useState)(!0),[i,a]=(0,r.useState)(""),[o,l]=(0,r.useState)(""),[c,u]=(0,r.useState)(""),[d,h]=(0,r.useState)([]),[f,m]=(0,r.useState)([]),[p,g]=(0,r.useState)([]),[y,v]=(0,r.useState)(!1),[x,b]=(0,r.useState)(!1),[w,_]=(0,r.useState)(""),[k,N]=(0,r.useState)("all"),[S,E]=(0,r.useState)({name:"",description:"",price:"",status:"active",estimated_time:"",category:"general",duration_unit:"hours"}),[j,C]=(0,r.useState)({}),[T,A]=(0,r.useState)(!1),[I,M]=(0,r.useState)(null),[P,R]=(0,r.useState)(!1),[L,D]=(0,r.useState)(!1),[O,F]=(0,r.useState)(!1),[V,z]=(0,r.useState)(null),[U,B]=(0,r.useState)(!1),[$,H]=(0,r.useState)(!1),[W,q]=(0,r.useState)(!1),[K,G]=(0,r.useState)(!1),[Y,Q]=(0,r.useState)(!1),[X,J]=(0,r.useState)(!1),[Z,ee]=(0,r.useState)(""),[te,ne]=(0,r.useState)(""),[re,se]=(0,r.useState)(""),[ie,ae]=(0,r.useState)(null),[oe,le]=(0,r.useState)({residentName:"",residentUid:"",staffName:"",issue:""}),[ce,ue]=(0,r.useState)([]),[de,he]=(0,r.useState)({name:"",description:"",active:!0}),[fe,me]=(0,r.useState)({}),[pe,ge]=(0,r.useState)(!1),[ye,ve]=(0,r.useState)(null),[xe,be]=(0,r.useState)(!1),[we,_e]=(0,r.useState)({house_no:"",resident_name:"",type_of_request:"",issue:"",additional_notes:"",scheduled_date:"",scheduled_time:"",image_url:"",status:"Pending"}),[ke,Ne]=(0,r.useState)({}),[Se,Ee]=(0,r.useState)([]),[je,Ce]=(0,r.useState)(0);(0,r.useEffect)((()=>{document.title="Service Requests",Te(),Ae(),Me(),Re(),Ie()}),[je]);const Te=async()=>{try{const e=py(jg(Cv,"services"),by("created_at","desc")),n=(await Ly(e)).docs.map((e=>{const t=e.data();console.log("Request data:",t);return{id:e.id,...t,timestamp:t.timestamp?t.timestamp:null}}));t(n)}catch(KV){console.error("Error fetching requests:",KV),Ut.error("Error fetching service requests: "+KV.message)}finally{s(!1)}},Ae=async()=>{try{const e=(await Ly(jg(Cv,"staff"))).docs.map((e=>({id:e.id,...e.data()})));h(e)}catch(KV){console.error("Error fetching staff:",KV),Ut.error("Error fetching staff list: "+KV.message)}},Ie=async()=>{try{const e=(await Ly(jg(Cv,"service_types"))).docs.map((e=>({id:e.id,...e.data()}))).sort(((e,t)=>e.name.localeCompare(t.name)));ue(e),0===e.length&&console.log("No service types found in database. Consider running the migration script: npm run seed-service-types")}catch(KV){console.error("Error fetching service types:",KV),Ut.error("Failed to load service types")}},Me=async()=>{try{s(!0);const e=(await Ly(jg(Cv,"available_services"))).docs.map((e=>({id:e.id,...e.data(),category:e.data().category||"general",duration_unit:e.data().duration_unit||"hours"}))).sort(((e,t)=>"active"===e.status&&"active"!==t.status?-1:"active"!==e.status&&"active"===t.status?1:e.name.localeCompare(t.name)));m(e),Pe(e,w,k)}catch(KV){console.error("Error fetching available services:",KV),Ut.error("Error fetching available services: "+KV.message)}finally{s(!1)}},Pe=function(){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:w,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:k,n=[...arguments.length>0&&void 0!==arguments[0]?arguments[0]:f];if("all"!==t&&(n=n.filter((e=>e.status===t))),e){const t=e.toLowerCase();n=n.filter((e=>{var n;return e.name.toLowerCase().includes(t)||e.description.toLowerCase().includes(t)||(null===(n=e.category)||void 0===n?void 0:n.toLowerCase().includes(t))}))}g(n)},Re=async()=>{try{const e=(await Ly(jg(Cv,"users"))).docs.map((e=>({id:e.id,...e.data(),fullName:e.data().name||`${e.data().first_name||""} ${e.data().last_name||""}`.trim()})));Ee(e)}catch(KV){console.error("Error fetching homeowners:",KV),Ut.error("Error fetching homeowner list: "+KV.message)}},Le=e=>{const{name:t,value:n,type:r,checked:s}=e.target;he({...de,[t]:"checkbox"===r?s:n})},De=async(e,t)=>{try{await Oy(Cg(Cv,"available_services",e),{status:t,updatedAt:Hy()}),Ut.success(`Service status updated to ${t}`),Me(),D(!1)}catch(KV){console.error("Error updating service status:",KV),Ut.error("Error updating service status: "+KV.message)}},Oe=e=>{const{name:t,value:n}=e.target;if(_e((e=>({...e,[t]:n}))),ke[t]&&Ne((e=>({...e,[t]:""}))),"resident_name"===t){const e=Se.find((e=>e.id===n));e&&_e((t=>({...t,house_no:e.house_no||""})))}},Fe=()=>{z(null),R(!1)},Ve=async e=>{let{residentName:t,residentUid:n,staffName:r,issue:s}=e;try{const e=(i=r,d.find((e=>e.name===i))||{}),a=`${r} (${(null===e||void 0===e?void 0:e.position)||"staff"}) is on the way to fix the issue: ${s}`;await Vy(jg(Cv,"notifications"),{to:t,user_id:n,message:a,timestamp:Hy()}),Ut.success(`Notification sent to ${t}`),q(!1)}catch(KV){console.error("Error sending notification:",KV),Ut.error("Error sending notification: "+KV.message)}var i},ze=async(e,t)=>{try{await Oy(Cg(Cv,"services",e),{status:t,updatedAt:new Date}),Ut.success(`Request ${t.toLowerCase()} successfully`),Te()}catch(KV){console.error("Error updating status:",KV),Ut.error("Error updating request: "+KV.message)}},Ue=e=>{if(!e)return"warning";switch(null===e||void 0===e?void 0:e.toLowerCase()){case"pending":return"warning";case"in-progress":return"info";case"confirmed":return"success";case"completed":return"primary";case"cancelled":return"danger";default:return"outline"}},Be=e.filter((e=>{const t=(e.issue||"").toLowerCase().includes(i.toLowerCase())||(e.house_no||"").toString().includes(i),n=!o||e.type_of_request===o||e.request_type===o,r=!c||e.status===c;return t&&n&&r})),$e=e=>{if(!e)return"N/A";try{return(e.toDate?e.toDate():new Date(e)).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch(KV){return e.toString?e.toString().substring(0,10):"Invalid date"}},He=e=>{if(!e)return"N/A";try{return(e.toDate?e.toDate():new Date(e)).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})}catch(KV){return e.toString?e.toString().substring(11,19):"Invalid time"}};return(0,Jt.jsx)(Cx,{children:(0,Jt.jsxs)("div",{className:"pt-20 px-6 max-w-7xl mx-auto",children:[(0,Jt.jsx)("div",{className:"bg-white dark:bg-gray-800 shadow-lg rounded-lg p-6 mb-8 border-l-4 border-blue-500",children:(0,Jt.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between",children:[(0,Jt.jsxs)("div",{children:[(0,Jt.jsxs)("h1",{className:"text-3xl font-bold text-gray-800 dark:text-white flex items-center",children:[(0,Jt.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 mr-3 text-blue-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[(0,Jt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),(0,Jt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),"Service Requests"]}),(0,Jt.jsx)("p",{className:"text-gray-600 dark:text-gray-300 mt-2",children:"Manage maintenance and repair requests from residents"})]}),(0,Jt.jsxs)("button",{onClick:()=>{s(!0),Ce((e=>e+1))},disabled:n,className:`flex items-center px-4 py-2 rounded-lg text-sm ${n?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-blue-50 text-blue-600 hover:bg-blue-100"} transition-colors mt-4 md:mt-0`,children:[(0,Jt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-2 "+(n?"animate-spin":""),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Jt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),n?"Refreshing...":"Refresh Data"]}),(0,Jt.jsxs)(Ij,{variant:"secondary",onClick:()=>F(!0),className:"flex items-center mt-4 md:mt-0 bg-blue-50 hover:bg-blue-100 text-blue-700",size:"sm",children:[(0,Jt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:(0,Jt.jsx)("path",{d:"M5 3a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2V5a2 2 0 00-2-2H5zM5 11a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2v-2a2 2 0 00-2-2H5zM11 5a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V5zM11 13a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})}),"Manage Service Types"]})]})}),(0,Jt.jsxs)("div",{className:"mb-6 flex flex-wrap gap-4",children:[(0,Jt.jsx)(Uj,{placeholder:"Search requests...",value:i,onChange:e=>a(e.target.value),className:"w-full md:w-1/3"}),(0,Jt.jsxs)("select",{value:o,onChange:e=>l(e.target.value),className:"px-4 py-2 rounded-md border border-gray-300 focus:outline-none focus:ring-2 focus:ring-primary",children:[(0,Jt.jsx)("option",{value:"",children:"All Request Types"}),ce.map((e=>(0,Jt.jsx)("option",{value:e.name,children:e.name},e.id)))]}),(0,Jt.jsxs)("select",{value:c,onChange:e=>u(e.target.value),className:"px-4 py-2 rounded-md border border-gray-300 focus:outline-none focus:ring-2 focus:ring-primary",children:[(0,Jt.jsx)("option",{value:"",children:"All Status"}),(0,Jt.jsx)("option",{value:"Pending",children:"Pending"}),(0,Jt.jsx)("option",{value:"In-Progress",children:"In-Progress"}),(0,Jt.jsx)("option",{value:"Confirmed",children:"Confirmed"}),(0,Jt.jsx)("option",{value:"Completed",children:"Completed"}),(0,Jt.jsx)("option",{value:"Cancelled",children:"Cancelled"})]})]}),(0,Jt.jsxs)(Cj,{children:[(0,Jt.jsx)(Tj,{title:"Service Requests",action:(0,Jt.jsx)(Ij,{variant:"primary",onClick:()=>be(!0),size:"sm",children:"+ New Request"})}),(0,Jt.jsx)(Aj,{children:n?(0,Jt.jsxs)("div",{className:"flex justify-center items-center p-8",children:[(0,Jt.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"}),(0,Jt.jsx)("span",{className:"ml-3 text-lg text-gray-600",children:"Loading requests..."})]}):(0,Jt.jsx)("div",{className:"overflow-x-auto",children:(0,Jt.jsxs)(Mj,{children:[(0,Jt.jsx)(Pj,{children:(0,Jt.jsxs)(Lj,{children:[(0,Jt.jsx)(Oj,{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Resident Info"}),(0,Jt.jsx)(Oj,{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Request Details"}),(0,Jt.jsx)(Oj,{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Content"}),(0,Jt.jsx)(Oj,{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Submitted"}),(0,Jt.jsx)(Oj,{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,Jt.jsx)(Oj,{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Assignment"}),(0,Jt.jsx)(Oj,{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,Jt.jsx)(Rj,{children:0===Be.length?(0,Jt.jsx)(Lj,{children:(0,Jt.jsx)(Dj,{colSpan:"7",className:"text-center py-8",children:(0,Jt.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,Jt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-12 w-12 text-gray-400 mb-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Jt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,Jt.jsx)("p",{className:"text-lg font-medium text-gray-500",children:"No service requests found"}),(0,Jt.jsx)("p",{className:"text-sm text-gray-400 mt-1",children:"Try adjusting your filters"})]})})}):Be.map((e=>(0,Jt.jsxs)(Lj,{className:"hover:bg-gray-50",children:[(0,Jt.jsx)(Dj,{className:"px-6 py-4",children:(0,Jt.jsxs)("div",{className:"flex items-start",children:[(0,Jt.jsx)("div",{className:"flex-shrink-0 bg-blue-100 rounded-full p-2",children:(0,Jt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-blue-600",viewBox:"0 0 20 20",fill:"currentColor",children:(0,Jt.jsx)("path",{d:"M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z"})})}),(0,Jt.jsxs)("div",{className:"ml-3",children:[(0,Jt.jsxs)("div",{className:"text-sm font-medium text-gray-900",children:["House #",void 0!==e.house_no?e.house_no:"N/A"]}),(0,Jt.jsx)("div",{className:"text-sm text-gray-500",children:e.fullName||e.resident_name||"Unnamed resident"})]})]})}),(0,Jt.jsxs)(Dj,{className:"px-6 py-4",children:[(0,Jt.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.type_of_request||e.request_type||"N/A"}),e.scheduled_date&&(0,Jt.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:["Scheduled: ",e.scheduled_date," ",e.scheduled_time&&`at ${e.scheduled_time}`]})]}),(0,Jt.jsx)(Dj,{className:"px-6 py-4",children:(0,Jt.jsxs)("div",{className:"flex space-x-2",children:[(0,Jt.jsx)("button",{onClick:()=>{var t;(t=e.issue)&&"null"!==t&&"undefined"!==t&&""!==t.trim()?(ee(t),B(!0)):J(!0)},className:"p-1.5 rounded-md bg-blue-50 hover:bg-blue-100 transition-colors",title:"View Issue Details",children:(0,Jt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-blue-600",viewBox:"0 0 20 20",fill:"currentColor",children:(0,Jt.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),e.image_url&&"null"!==e.image_url&&"undefined"!==e.image_url?(0,Jt.jsx)("button",{onClick:()=>{var t;(t=e.image_url)&&"null"!==t&&"undefined"!==t&&(se(t),Q(!0))},className:"p-1.5 rounded-md bg-purple-50 hover:bg-purple-100 transition-colors",title:"View Image",children:(0,Jt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-purple-600",viewBox:"0 0 20 20",fill:"currentColor",children:(0,Jt.jsx)("path",{fillRule:"evenodd",d:"M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z",clipRule:"evenodd"})})}):(0,Jt.jsx)("div",{className:"text-sm text-gray-500",children:"None"}),(0,Jt.jsx)("button",{onClick:()=>(async e=>{try{ae(e);const t=await Py(Cg(Cv,"services",e));if(t.exists()){const e=t.data();e.comment&&""!==e.comment.trim()?(ne(e.comment),H(!0)):G(!0)}else G(!0)}catch(KV){console.error("Error fetching comment:",KV),Ut.error("Error fetching comment: "+KV.message),G(!0)}})(e.id),className:"p-1.5 rounded-md bg-green-50 hover:bg-green-100 transition-colors",title:"View Comments",children:(0,Jt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-green-600",viewBox:"0 0 20 20",fill:"currentColor",children:(0,Jt.jsx)("path",{fillRule:"evenodd",d:"M18 10c0 3.866-3.582 7-8 7a8.841 8.841 0 01-4.083-.98L2 17l1.338-3.123C2.493 12.767 2 11.434 2 10c0-3.866 3.582-7 8-7s8 3.134 8 7zM7 9H5v2h2V9zm8 0h-2v2h2V9zM9 9h2v2H9V9z",clipRule:"evenodd"})})})]})}),(0,Jt.jsx)(Dj,{className:"px-6 py-4",children:(0,Jt.jsxs)("div",{className:"flex flex-col text-sm text-gray-900",children:[(0,Jt.jsxs)("div",{className:"flex items-center",children:[(0,Jt.jsx)("span",{className:"mr-1",children:"\ud83d\udcc5"}),$e(e.timestamp||e.created_at)]}),(0,Jt.jsxs)("div",{className:"flex items-center mt-1",children:[(0,Jt.jsx)("span",{className:"mr-1",children:"\u23f0"}),He(e.timestamp||e.created_at)]})]})}),(0,Jt.jsx)(Dj,{className:"px-6 py-4",children:(0,Jt.jsx)(Vj,{variant:Ue(e.status),children:e.status||"Pending"})}),(0,Jt.jsx)(Dj,{className:"px-6 py-4",children:(0,Jt.jsxs)("select",{value:e.staff||"",onChange:t=>(async(e,t)=>{try{await Oy(Cg(Cv,"services",e),{staff:t,updatedAt:new Date}),Ut.success("Staff assigned successfully"),Te()}catch(KV){console.error("Error assigning staff:",KV),Ut.error("Error assigning staff: "+KV.message)}})(e.id,t.target.value),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary",children:[(0,Jt.jsx)("option",{value:"",children:"Assign Staff"}),d.map((e=>(0,Jt.jsx)("option",{value:e.name,children:e.name},e.id)))]})}),(0,Jt.jsx)(Dj,{className:"px-6 py-4",children:(0,Jt.jsxs)("div",{className:"flex space-x-2",children:[(0,Jt.jsx)("button",{disabled:!e.staff,onClick:()=>(e=>{e.staff?(le({residentName:e.fullName||e.resident_name||`${e.first_name||""} ${e.last_name||""}`.trim(),residentUid:e.uid||e.user_id||"",staffName:e.staff,issue:e.issue||""}),q(!0)):Ut.warning("Please assign a staff member first")})(e),className:"bg-blue-500 text-white px-3 py-1 rounded-md disabled:bg-gray-300 disabled:cursor-not-allowed",children:"Notify"}),(!e.status||"Pending"===e.status)&&(0,Jt.jsxs)(Jt.Fragment,{children:[(0,Jt.jsx)(Ij,{variant:"info",size:"sm",onClick:()=>ze(e.id,"In-Progress"),className:"mr-2",children:"Start Progress"}),(0,Jt.jsx)(Ij,{variant:"success",size:"sm",onClick:()=>ze(e.id,"Confirmed"),children:"Confirm"})]}),"In-Progress"===e.status&&(0,Jt.jsx)(Ij,{variant:"success",size:"sm",onClick:()=>ze(e.id,"Confirmed"),children:"Confirm"}),"Confirmed"===e.status&&(0,Jt.jsx)(Ij,{variant:"primary",size:"sm",onClick:()=>ze(e.id,"Completed"),children:"Complete"})]})})]},e.id)))})]})})})]}),(0,Jt.jsx)(RO,{appear:!0,show:U,as:r.Fragment,children:(0,Jt.jsx)(aV,{as:"div",className:"fixed inset-0 z-50 overflow-y-auto",onClose:()=>B(!1),children:(0,Jt.jsxs)("div",{className:"flex min-h-screen items-center justify-center px-4 text-center",children:[(0,Jt.jsx)(RO.Child,{as:r.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,Jt.jsx)(aV.Overlay,{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"})}),(0,Jt.jsx)(RO.Child,{as:r.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",enterTo:"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 translate-y-0 sm:scale-100",leaveTo:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",children:(0,Jt.jsxs)("div",{className:"inline-block transform overflow-hidden rounded-lg bg-white px-6 py-4 text-left align-middle shadow-xl transition-all sm:max-w-lg sm:w-full",children:[(0,Jt.jsx)(aV.Title,{as:"h3",className:"text-lg font-medium leading-6 text-gray-900",children:"Issue Details"}),(0,Jt.jsx)("div",{className:"mt-2",children:(0,Jt.jsx)("p",{className:"text-sm text-gray-500",children:Z})}),(0,Jt.jsx)("div",{className:"mt-4 flex justify-end",children:(0,Jt.jsx)("button",{type:"button",className:"inline-flex justify-center rounded-md border border-transparent bg-blue-100 px-4 py-2 text-sm font-medium text-blue-900 hover:bg-blue-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2",onClick:()=>B(!1),children:"Close"})})]})})]})})}),(0,Jt.jsx)(RO,{appear:!0,show:X,as:r.Fragment,children:(0,Jt.jsx)(aV,{as:"div",className:"fixed inset-0 z-50 overflow-y-auto",onClose:()=>J(!1),children:(0,Jt.jsxs)("div",{className:"flex min-h-screen items-center justify-center px-4 text-center",children:[(0,Jt.jsx)(RO.Child,{as:r.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,Jt.jsx)(aV.Overlay,{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"})}),(0,Jt.jsx)(RO.Child,{as:r.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",enterTo:"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 translate-y-0 sm:scale-100",leaveTo:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",children:(0,Jt.jsxs)("div",{className:"inline-block transform overflow-hidden rounded-lg bg-white px-6 py-4 text-left align-middle shadow-xl transition-all sm:max-w-lg sm:w-full",children:[(0,Jt.jsx)(aV.Title,{as:"h3",className:"text-lg font-medium leading-6 text-gray-900",children:"No Issue Details"}),(0,Jt.jsx)("div",{className:"mt-2",children:(0,Jt.jsx)("p",{className:"text-sm text-gray-500",children:"No issue details were provided for this request."})}),(0,Jt.jsx)("div",{className:"mt-4 flex justify-end",children:(0,Jt.jsx)("button",{type:"button",className:"inline-flex justify-center rounded-md border border-transparent bg-blue-100 px-4 py-2 text-sm font-medium text-blue-900 hover:bg-blue-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2",onClick:()=>J(!1),children:"Close"})})]})})]})})}),(0,Jt.jsx)(zj,{isOpen:P,onClose:Fe,title:"Delete Service",children:(0,Jt.jsx)("div",{className:"p-4",children:V&&(0,Jt.jsxs)(Jt.Fragment,{children:[(0,Jt.jsx)("div",{className:"bg-red-50 p-4 rounded-md mb-4",children:(0,Jt.jsxs)("div",{className:"flex",children:[(0,Jt.jsx)("div",{className:"flex-shrink-0",children:(0,Jt.jsx)("svg",{className:"h-5 w-5 text-red-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:(0,Jt.jsx)("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),(0,Jt.jsxs)("div",{className:"ml-3",children:[(0,Jt.jsx)("h3",{className:"text-sm font-medium text-red-800",children:"Warning"}),(0,Jt.jsxs)("div",{className:"mt-2 text-sm text-red-700",children:[(0,Jt.jsxs)("p",{children:["Are you sure you want to delete the service ",(0,Jt.jsx)("strong",{children:V.name}),"? This action cannot be undone."]}),"active"===V.status&&(0,Jt.jsx)("p",{className:"mt-2",children:"This service is currently active and may be in use by existing service requests."})]})]})]})}),(0,Jt.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,Jt.jsx)(Ij,{variant:"outline",onClick:Fe,children:"Cancel"}),(0,Jt.jsx)(Ij,{variant:"danger",onClick:async()=>{if(V&&V.id)try{await Fy(Cg(Cv,"available_services",V.id)),Ut.success("Service deleted successfully!"),Me(),R(!1),z(null)}catch(KV){console.error("Error deleting service:",KV),Ut.error("Error deleting service: "+KV.message)}else R(!1)},children:"Delete Service"})]})]})})}),(0,Jt.jsx)(RO,{appear:!0,show:Y,as:r.Fragment,children:(0,Jt.jsx)(aV,{as:"div",className:"fixed inset-0 z-50 overflow-y-auto",onClose:()=>Q(!1),children:(0,Jt.jsxs)("div",{className:"flex min-h-screen items-center justify-center px-4 text-center",children:[(0,Jt.jsx)(RO.Child,{as:r.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,Jt.jsx)(aV.Overlay,{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"})}),(0,Jt.jsx)(RO.Child,{as:r.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",enterTo:"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 translate-y-0 sm:scale-100",leaveTo:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",children:(0,Jt.jsxs)("div",{className:"inline-block transform overflow-hidden rounded-lg bg-white px-6 py-4 text-left align-middle shadow-xl transition-all sm:max-w-lg sm:w-full",children:[(0,Jt.jsx)(aV.Title,{as:"h3",className:"text-lg font-medium leading-6 text-gray-900",children:"Image"}),(0,Jt.jsx)("div",{className:"mt-2",children:(0,Jt.jsx)("img",{src:re,alt:"Request",className:"w-full h-auto rounded-md",onError:e=>{e.target.src="/placeholder-image.png",e.target.alt="Failed to load image"}})}),(0,Jt.jsx)("div",{className:"mt-4 flex justify-end",children:(0,Jt.jsx)("button",{type:"button",className:"inline-flex justify-center rounded-md border border-transparent bg-blue-100 px-4 py-2 text-sm font-medium text-blue-900 hover:bg-blue-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2",onClick:()=>Q(!1),children:"Close"})})]})})]})})}),(0,Jt.jsx)(RO,{appear:!0,show:$,as:r.Fragment,children:(0,Jt.jsx)(aV,{as:"div",className:"fixed inset-0 z-50 overflow-y-auto",onClose:()=>H(!1),children:(0,Jt.jsxs)("div",{className:"flex min-h-screen items-center justify-center px-4 text-center",children:[(0,Jt.jsx)(RO.Child,{as:r.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,Jt.jsx)(aV.Overlay,{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"})}),(0,Jt.jsx)(RO.Child,{as:r.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",enterTo:"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 translate-y-0 sm:scale-100",leaveTo:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",children:(0,Jt.jsxs)("div",{className:"inline-block transform overflow-hidden rounded-lg bg-white px-6 py-4 text-left align-middle shadow-xl transition-all sm:max-w-lg sm:w-full",children:[(0,Jt.jsx)(aV.Title,{as:"h3",className:"text-lg font-medium leading-6 text-gray-900",children:"Comment"}),(0,Jt.jsx)("div",{className:"mt-2",children:(0,Jt.jsx)("p",{className:"text-sm text-gray-500",children:te})}),(0,Jt.jsx)("div",{className:"mt-4 flex justify-end",children:(0,Jt.jsx)("button",{type:"button",className:"inline-flex justify-center rounded-md border border-transparent bg-blue-100 px-4 py-2 text-sm font-medium text-blue-900 hover:bg-blue-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2",onClick:()=>H(!1),children:"Close"})})]})})]})})}),(0,Jt.jsx)(RO,{appear:!0,show:K,as:r.Fragment,children:(0,Jt.jsx)(aV,{as:"div",className:"fixed inset-0 z-50 overflow-y-auto",onClose:()=>G(!1),children:(0,Jt.jsxs)("div",{className:"flex min-h-screen items-center justify-center px-4 text-center",children:[(0,Jt.jsx)(RO.Child,{as:r.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,Jt.jsx)(aV.Overlay,{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"})}),(0,Jt.jsx)(RO.Child,{as:r.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",enterTo:"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 translate-y-0 sm:scale-100",leaveTo:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",children:(0,Jt.jsxs)("div",{className:"inline-block transform overflow-hidden rounded-lg bg-white px-6 py-4 text-left align-middle shadow-xl transition-all sm:max-w-lg sm:w-full",children:[(0,Jt.jsx)(aV.Title,{as:"h3",className:"text-lg font-medium leading-6 text-gray-900",children:"No Comment Available"}),(0,Jt.jsx)("div",{className:"mt-2",children:(0,Jt.jsx)("p",{className:"text-sm text-gray-500",children:"There are no comments available for this request."})}),(0,Jt.jsx)("div",{className:"mt-4 flex justify-end",children:(0,Jt.jsx)("button",{type:"button",className:"inline-flex justify-center rounded-md border border-transparent bg-blue-100 px-4 py-2 text-sm font-medium text-blue-900 hover:bg-blue-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2",onClick:()=>G(!1),children:"Close"})})]})})]})})}),(0,Jt.jsx)(RO,{appear:!0,show:W,as:r.Fragment,children:(0,Jt.jsx)(aV,{as:"div",className:"fixed inset-0 z-50 overflow-y-auto",onClose:()=>q(!1),children:(0,Jt.jsxs)("div",{className:"flex min-h-screen items-center justify-center px-4 text-center",children:[(0,Jt.jsx)(RO.Child,{as:r.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,Jt.jsx)(aV.Overlay,{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"})}),(0,Jt.jsx)(RO.Child,{as:r.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",enterTo:"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 translate-y-0 sm:scale-100",leaveTo:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",children:(0,Jt.jsxs)("div",{className:"inline-block transform overflow-hidden rounded-lg bg-white px-6 py-4 text-left align-middle shadow-xl transition-all sm:max-w-lg sm:w-full",children:[(0,Jt.jsx)(aV.Title,{as:"h3",className:"text-lg font-medium leading-6 text-gray-900",children:"Notify Resident"}),(0,Jt.jsxs)("div",{className:"mt-2",children:[(0,Jt.jsxs)("p",{className:"text-sm text-gray-500",children:["Send a notification to ",oe.residentName," that ",oe.staffName," is on the way to address their issue."]}),(0,Jt.jsxs)("div",{className:"mt-4",children:[(0,Jt.jsx)("p",{className:"text-sm font-medium text-gray-700",children:"Issue:"}),(0,Jt.jsx)("p",{className:"text-sm text-gray-500",children:oe.issue})]})]}),(0,Jt.jsxs)("div",{className:"mt-4 flex justify-end space-x-2",children:[(0,Jt.jsx)("button",{type:"button",className:"inline-flex justify-center rounded-md border border-transparent bg-gray-100 px-4 py-2 text-sm font-medium text-gray-900 hover:bg-gray-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-gray-500 focus-visible:ring-offset-2",onClick:()=>q(!1),children:"Cancel"}),(0,Jt.jsx)("button",{type:"button",className:"inline-flex justify-center rounded-md border border-transparent bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2",onClick:()=>Ve(oe),children:"Send Notification"})]})]})})]})})}),(0,Jt.jsx)(zj,{isOpen:y,onClose:()=>v(!1),title:"View Service",children:(0,Jt.jsxs)("div",{className:"space-y-4",children:[(0,Jt.jsxs)("div",{children:[(0,Jt.jsxs)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:["Service Name ",(0,Jt.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Jt.jsx)("input",{type:"text",name:"name",id:"name",value:S.name,disabled:!0,className:"mt-1 block w-full rounded-md border-gray-300 bg-gray-50 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",readOnly:!0}),j.name&&(0,Jt.jsx)("p",{className:"mt-1 text-sm text-red-600",children:j.name})]}),(0,Jt.jsxs)("div",{children:[(0,Jt.jsxs)("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700",children:["Description ",(0,Jt.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Jt.jsx)("textarea",{name:"description",id:"description",rows:3,value:S.description,disabled:!0,readOnly:!0,className:"mt-1 block w-full rounded-md border-gray-300 bg-gray-50 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"}),j.description&&(0,Jt.jsx)("p",{className:"mt-1 text-sm text-red-600",children:j.description})]}),(0,Jt.jsxs)("div",{children:[(0,Jt.jsxs)("label",{htmlFor:"price",className:"block text-sm font-medium text-gray-700",children:["Price ",(0,Jt.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Jt.jsxs)("div",{className:"relative mt-1 rounded-md shadow-sm",children:[(0,Jt.jsx)("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none",children:(0,Jt.jsx)("span",{className:"text-gray-500 sm:text-sm",children:"\u20b1"})}),(0,Jt.jsx)("input",{type:"text",name:"price",id:"price",value:S.price.replace("\u20b1",""),disabled:!0,readOnly:!0,className:"pl-7 block w-full rounded-md border-gray-300 bg-gray-50 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"})]}),j.price&&(0,Jt.jsx)("p",{className:"mt-1 text-sm text-red-600",children:j.price})]}),(0,Jt.jsxs)("div",{children:[(0,Jt.jsxs)("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-700",children:["Category ",(0,Jt.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Jt.jsxs)("select",{name:"category",id:"category",value:S.category,disabled:!0,className:"mt-1 block w-full rounded-md border-gray-300 bg-gray-50 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",children:[(0,Jt.jsx)("option",{value:"general",children:"General"}),ce.map((e=>(0,Jt.jsx)("option",{value:e.name.toLowerCase(),children:e.name},e.id))),(0,Jt.jsx)("option",{value:"other",children:"Other"})]}),j.category&&(0,Jt.jsx)("p",{className:"mt-1 text-sm text-red-600",children:j.category})]}),(0,Jt.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,Jt.jsxs)("div",{children:[(0,Jt.jsxs)("label",{htmlFor:"estimated_time",className:"block text-sm font-medium text-gray-700",children:["Estimated Time ",(0,Jt.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Jt.jsx)("input",{type:"text",name:"estimated_time",id:"estimated_time",value:S.estimated_time,disabled:!0,readOnly:!0,placeholder:"e.g., 2-3",className:"mt-1 block w-full rounded-md border-gray-300 bg-gray-50 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"}),j.estimated_time&&(0,Jt.jsx)("p",{className:"mt-1 text-sm text-red-600",children:j.estimated_time})]}),(0,Jt.jsxs)("div",{children:[(0,Jt.jsx)("label",{htmlFor:"duration_unit",className:"block text-sm font-medium text-gray-700",children:"Duration Unit"}),(0,Jt.jsxs)("select",{name:"duration_unit",id:"duration_unit",value:S.duration_unit,disabled:!0,className:"mt-1 block w-full rounded-md border-gray-300 bg-gray-50 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",children:[(0,Jt.jsx)("option",{value:"minutes",children:"Minutes"}),(0,Jt.jsx)("option",{value:"hours",children:"Hours"}),(0,Jt.jsx)("option",{value:"days",children:"Days"}),(0,Jt.jsx)("option",{value:"weeks",children:"Weeks"})]})]})]}),(0,Jt.jsxs)("div",{children:[(0,Jt.jsx)("label",{htmlFor:"status",className:"block text-sm font-medium text-gray-700",children:"Status"}),(0,Jt.jsxs)("select",{name:"status",id:"status",value:S.status,disabled:!0,className:"mt-1 block w-full rounded-md border-gray-300 bg-gray-50 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",children:[(0,Jt.jsx)("option",{value:"active",children:"Active"}),(0,Jt.jsx)("option",{value:"inactive",children:"Inactive"})]}),(0,Jt.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"Active services can be requested by homeowners, inactive services will not appear in their service request options."})]}),(0,Jt.jsx)("div",{className:"flex justify-end space-x-3 pt-4",children:(0,Jt.jsx)(Ij,{variant:"primary",onClick:()=>{v(!1),C({})},children:"Close"})})]})}),(0,Jt.jsx)(zj,{isOpen:xe,onClose:()=>be(!1),title:"New Service Request",children:(0,Jt.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),(()=>{const e={};if(we.resident_name){const t=Se.find((e=>e.id===we.resident_name));t&&"Bad"===t.record_status&&(e.resident_name="This homeowner has a bad record status")}else e.resident_name="Please select a homeowner";return we.house_no.trim()||(e.house_no="House number is required"),we.type_of_request||(e.type_of_request="Please select a request type"),we.issue.trim()||(e.issue="Issue description is required"),we.scheduled_time&&!we.scheduled_date&&(e.scheduled_time="Please select a date along with the time"),0===Object.keys(e).length})())try{s(!0);const e=Se.find((e=>e.id===we.resident_name)),t={house_no:we.house_no,fullName:e?e.fullName:"Unknown",resident_name:e?e.fullName:"Unknown",resident_id:we.resident_name,type_of_request:we.type_of_request,issue:we.issue,additional_notes:we.additional_notes||null,scheduled_date:we.scheduled_date||null,scheduled_time:we.scheduled_time||null,status:"Pending",created_at:Hy(),last_updated:Hy()};await Vy(jg(Cv,"services"),t),_e({house_no:"",resident_name:"",type_of_request:"",issue:"",additional_notes:"",scheduled_date:"",scheduled_time:"",status:"Pending"}),be(!1),Te(),Ut.success("Service request submitted successfully")}catch(KV){console.error("Error submitting service request:",KV),Ut.error("Failed to submit service request")}finally{s(!1)}},className:"space-y-4",children:[(0,Jt.jsxs)("div",{children:[(0,Jt.jsxs)("label",{htmlFor:"resident_name",className:"block text-sm font-medium text-gray-700",children:["Homeowner ",(0,Jt.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Jt.jsxs)("select",{id:"resident_name",name:"resident_name",value:we.resident_name,onChange:Oe,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",required:!0,children:[(0,Jt.jsx)("option",{value:"",children:"Select a homeowner"}),Se.map((e=>(0,Jt.jsxs)("option",{value:e.id,children:[e.fullName," ","Bad"===e.record_status?"(Bad Record)":""]},e.id)))]}),ke.resident_name&&(0,Jt.jsx)("p",{className:"mt-1 text-sm text-red-500",children:ke.resident_name})]}),(0,Jt.jsxs)("div",{children:[(0,Jt.jsxs)("label",{htmlFor:"house_no",className:"block text-sm font-medium text-gray-700",children:["House Number ",(0,Jt.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Jt.jsx)("input",{type:"text",id:"house_no",name:"house_no",value:we.house_no,onChange:Oe,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",placeholder:"e.g., 123",required:!0}),ke.house_no&&(0,Jt.jsx)("p",{className:"mt-1 text-sm text-red-500",children:ke.house_no})]}),(0,Jt.jsxs)("div",{children:[(0,Jt.jsxs)("label",{htmlFor:"type_of_request",className:"block text-sm font-medium text-gray-700",children:["Request Type ",(0,Jt.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Jt.jsxs)("select",{id:"type_of_request",name:"type_of_request",value:we.type_of_request,onChange:Oe,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",required:!0,children:[(0,Jt.jsx)("option",{value:"",children:"Select request type"}),ce.map((e=>(0,Jt.jsx)("option",{value:e.name,children:e.name},e.id)))]}),ke.type_of_request&&(0,Jt.jsx)("p",{className:"mt-1 text-sm text-red-500",children:ke.type_of_request})]}),(0,Jt.jsxs)("div",{children:[(0,Jt.jsxs)("label",{htmlFor:"issue",className:"block text-sm font-medium text-gray-700",children:["Issue Description ",(0,Jt.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Jt.jsx)("textarea",{id:"issue",name:"issue",rows:3,value:we.issue,onChange:Oe,placeholder:"Please describe the issue in detail",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",required:!0}),ke.issue&&(0,Jt.jsx)("p",{className:"mt-1 text-sm text-red-500",children:ke.issue})]}),(0,Jt.jsxs)("div",{children:[(0,Jt.jsx)("label",{htmlFor:"additional_notes",className:"block text-sm font-medium text-gray-700",children:"Additional Notes"}),(0,Jt.jsx)("textarea",{id:"additional_notes",name:"additional_notes",rows:2,value:we.additional_notes,onChange:Oe,placeholder:"Any additional information that might help with the service request",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"}),(0,Jt.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"Optional: Include any special instructions or context that might be helpful"})]}),(0,Jt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Jt.jsxs)("div",{children:[(0,Jt.jsx)("label",{htmlFor:"scheduled_date",className:"block text-sm font-medium text-gray-700",children:"Preferred Date"}),(0,Jt.jsx)("input",{type:"date",id:"scheduled_date",name:"scheduled_date",value:we.scheduled_date,onChange:Oe,min:(new Date).toISOString().split("T")[0],className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"}),(0,Jt.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"When would you prefer the service to be performed?"})]}),(0,Jt.jsxs)("div",{children:[(0,Jt.jsx)("label",{htmlFor:"scheduled_time",className:"block text-sm font-medium text-gray-700",children:"Preferred Time"}),(0,Jt.jsx)("input",{type:"time",id:"scheduled_time",name:"scheduled_time",value:we.scheduled_time,onChange:Oe,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"}),ke.scheduled_time&&(0,Jt.jsx)("p",{className:"mt-1 text-sm text-red-500",children:ke.scheduled_time})]})]}),(0,Jt.jsxs)("div",{className:"pt-4 flex justify-end space-x-3",children:[(0,Jt.jsx)(Ij,{variant:"outline",onClick:()=>be(!1),type:"button",children:"Cancel"}),(0,Jt.jsx)(Ij,{variant:"primary",type:"submit",children:"Submit Request"})]})]})}),(0,Jt.jsx)(zj,{isOpen:L,onClose:()=>D(!1),title:"Confirm Status Change",children:(0,Jt.jsxs)("div",{className:"space-y-4",children:[(0,Jt.jsx)("p",{className:"text-gray-700",children:"Are you sure you want to change this service's status?"}),V&&"active"===V.status?(0,Jt.jsx)("div",{className:"bg-yellow-50 p-3 rounded-lg border border-yellow-200 mb-3",children:(0,Jt.jsxs)("div",{className:"flex items-start",children:[(0,Jt.jsx)("div",{className:"flex-shrink-0",children:(0,Jt.jsx)("svg",{className:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor",children:(0,Jt.jsx)("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),(0,Jt.jsxs)("div",{className:"ml-3",children:[(0,Jt.jsx)("h3",{className:"text-sm font-medium text-yellow-800",children:"Important Note"}),(0,Jt.jsx)("div",{className:"mt-2 text-sm text-yellow-700",children:(0,Jt.jsx)("p",{children:"Making this service inactive will hide it from homeowners requesting services. Any existing requests for this service will not be affected."})})]})]})}):(0,Jt.jsx)("div",{className:"bg-blue-50 p-3 rounded-lg border border-blue-200 mb-3",children:(0,Jt.jsxs)("div",{className:"flex items-start",children:[(0,Jt.jsx)("div",{className:"flex-shrink-0",children:(0,Jt.jsx)("svg",{className:"h-5 w-5 text-blue-400",viewBox:"0 0 20 20",fill:"currentColor",children:(0,Jt.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),(0,Jt.jsxs)("div",{className:"ml-3",children:[(0,Jt.jsx)("h3",{className:"text-sm font-medium text-blue-800",children:"Information"}),(0,Jt.jsx)("div",{className:"mt-2 text-sm text-blue-700",children:(0,Jt.jsx)("p",{children:"Making this service active will allow homeowners to request it."})})]})]})}),(0,Jt.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,Jt.jsx)(Ij,{variant:"outline",onClick:()=>D(!1),children:"Cancel"}),(0,Jt.jsx)(Ij,{variant:V&&"active"===V.status?"danger":"success",onClick:()=>De(V.id,"active"===V.status?"inactive":"active"),children:V&&"active"===V.status?"Make Inactive":"Make Active"})]})]})}),(0,Jt.jsxs)(zj,{isOpen:O,onClose:()=>{F(!1),he({name:"",description:"",active:!0}),ge(!1),ve(null),me({})},title:pe?"Edit Service Type":"Add New Service Type",children:[(0,Jt.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),(()=>{const e={};return de.name.trim()||(e.name="Service type name is required"),me(e),0===Object.keys(e).length})())try{pe?(await Oy(Cg(Cv,"service_types",ye),{name:de.name.trim(),description:de.description.trim(),active:de.active,updatedAt:Hy()}),Ut.success("Service type updated successfully")):(await Vy(jg(Cv,"service_types"),{name:de.name.trim(),description:de.description.trim(),active:de.active,createdAt:Hy(),updatedAt:Hy()}),Ut.success("Service type added successfully")),he({name:"",description:"",active:!0}),ge(!1),ve(null),me({}),Ie(),pe&&F(!1)}catch(KV){console.error("Error saving service type:",KV),Ut.error("Failed to save service type")}},className:"space-y-4",children:[(0,Jt.jsxs)("div",{children:[(0,Jt.jsxs)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:["Service Type Name ",(0,Jt.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Jt.jsx)("input",{type:"text",name:"name",id:"name",value:de.name,onChange:Le,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 "+(fe.name?"border-red-300":""),placeholder:"Plumbing, Electrical, etc."}),fe.name&&(0,Jt.jsx)("p",{className:"mt-1 text-sm text-red-600",children:fe.name})]}),(0,Jt.jsxs)("div",{children:[(0,Jt.jsx)("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700",children:"Description"}),(0,Jt.jsx)("textarea",{name:"description",id:"description",rows:3,value:de.description,onChange:Le,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",placeholder:"Optional description of this service type"})]}),(0,Jt.jsxs)("div",{className:"mt-4",children:[(0,Jt.jsxs)("div",{className:"flex items-center",children:[(0,Jt.jsx)("input",{type:"checkbox",name:"active",id:"active",checked:de.active,onChange:e=>he({...de,active:e.target.checked}),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,Jt.jsx)("label",{htmlFor:"active",className:"ml-2 block text-sm text-gray-900",children:"Active"})]}),(0,Jt.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"Active service types can be selected when creating new requests"})]}),(0,Jt.jsxs)("div",{className:"flex justify-between pt-4",children:[(0,Jt.jsx)(Ij,{type:"button",variant:"secondary",onClick:()=>{F(!1),he({name:"",description:"",active:!0}),ge(!1),ve(null),me({})},children:"Cancel"}),(0,Jt.jsxs)(Ij,{type:"submit",variant:"primary",children:[pe?"Update":"Add"," Service Type"]})]})]}),ce.length>0&&(0,Jt.jsxs)("div",{className:"mt-8",children:[(0,Jt.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-3",children:"Existing Service Types"}),(0,Jt.jsx)("div",{className:"overflow-auto max-h-64 border rounded-md",children:(0,Jt.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Jt.jsx)("thead",{className:"bg-gray-50 sticky top-0",children:(0,Jt.jsxs)("tr",{children:[(0,Jt.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),(0,Jt.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,Jt.jsx)("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,Jt.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:ce.map((e=>(0,Jt.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,Jt.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:[e.name,e.description&&(0,Jt.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:e.description})]}),(0,Jt.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:(0,Jt.jsx)("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${e.active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"} cursor-pointer`,onClick:()=>(async e=>{try{const t=!e.active;await Oy(Cg(Cv,"service_types",e.id),{active:t,updatedAt:Hy()}),Ut.success(`Service type ${t?"activated":"deactivated"} successfully`),Ie()}catch(KV){console.error("Error toggling service type status:",KV),Ut.error("Failed to update service type status")}})(e),children:e.active?"Active":"Inactive"})}),(0,Jt.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[(0,Jt.jsx)("button",{onClick:()=>(e=>{he({name:e.name,description:e.description||"",active:void 0===e.active||e.active}),me({}),ge(!0),ve(e.id),F(!0)})(e),className:"text-blue-600 hover:text-blue-900 mr-3",children:"Edit"}),(0,Jt.jsx)("button",{onClick:()=>(async e=>{try{await Fy(Cg(Cv,"service_types",e)),Ut.success("Service type deleted successfully"),Ie()}catch(KV){console.error("Error deleting service type:",KV),Ut.error("Failed to delete service type")}})(e.id),className:"text-red-600 hover:text-red-900",children:"Delete"})]})]},e.id)))})]})})]})]})]})})};const lV=r.forwardRef((function(e,t){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor","aria-hidden":"true",ref:t},e),r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11 5.882V19.24a1.76 1.76 0 01-3.417.592l-2.147-6.15M18 13a3 3 0 100-6M5.436 13.683A4.001 4.001 0 017 6h1.832c4.1 0 7.625-1.234 9.168-3v14c-1.543-1.766-5.067-3-9.168-3H7a3.988 3.988 0 01-1.564-.317z"}))}));const cV=r.forwardRef((function(e,t){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor","aria-hidden":"true",ref:t},e),r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"}))}));const uV=r.forwardRef((function(e,t){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor","aria-hidden":"true",ref:t},e),r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"}))}));const dV=r.forwardRef((function(e,t){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor","aria-hidden":"true",ref:t},e),r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"}))}));const hV=function(){const[e,t]=(0,r.useState)([]),[n,s]=(0,r.useState)(!0),[i,a]=(0,r.useState)(!1),[o,l]=(0,r.useState)(!1),[c,u]=(0,r.useState)(null),[d,h]=(0,r.useState)({title:"",content:"",type:"Notice",status:"Active",isVisible:!0,visibleTo:"both",targetAudience:"all"});(0,r.useEffect)((()=>{document.title="Announcements",f()}),[]);const f=async()=>{try{const e=(await Ly(jg(Cv,"announcements"))).docs.map((e=>{var t,n;return{id:e.id,...e.data(),type:e.data().type||"Notice",status:e.data().status||"Active",isVisible:void 0===e.data().isVisible||e.data().isVisible,visibleTo:e.data().visibleTo||"both",date:(null===(t=e.data().timestamp)||void 0===t||null===(n=t.toDate())||void 0===n?void 0:n.toLocaleDateString())||(new Date).toLocaleDateString()}}));t(e.sort(((e,t)=>new Date(t.date)-new Date(e.date))))}catch(KV){Ut.error("Error fetching announcements: "+KV.message)}finally{s(!1)}},m=()=>{h({title:"",content:"",type:"Notice",status:"Active",isVisible:!0,visibleTo:"both",targetAudience:"all"}),u(null)},p=()=>{a(!1),l(!1),m()},g=e=>{if(!e)return"bg-gray-100 text-gray-800";switch(e.toLowerCase()){case"notice":return"bg-blue-100 text-blue-800";case"update":return"bg-green-100 text-green-800";case"urgent":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},y=e=>{switch(e){case"homeowner":return"Visible to Homeowners";case"guard":return"Visible to Guards";default:return"Visible to All"}};return(0,Jt.jsx)(Cx,{children:(0,Jt.jsxs)("div",{className:"pt-20 px-6 max-w-7xl mx-auto",children:[(0,Jt.jsx)("div",{className:"bg-white dark:bg-gray-800 shadow-lg rounded-lg p-6 mb-8 border-l-4 border-blue-500",children:(0,Jt.jsxs)("div",{className:"flex flex-wrap justify-between items-start",children:[(0,Jt.jsxs)("div",{children:[(0,Jt.jsxs)("h1",{className:"text-3xl font-bold text-gray-800 dark:text-white flex items-center",children:[(0,Jt.jsx)(lV,{className:"h-8 w-8 mr-3 text-blue-500"}),"Announcements"]}),(0,Jt.jsx)("p",{className:"text-gray-600 dark:text-gray-300 mt-2",children:"Create and manage community announcements"})]}),(0,Jt.jsxs)("button",{onClick:f,disabled:n,className:`flex items-center px-4 py-2 rounded-lg text-sm ${n?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-blue-50 text-blue-600 hover:bg-blue-100"} transition-colors mt-2 sm:mt-0`,children:[(0,Jt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-2 "+(n?"animate-spin":""),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Jt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),n?"Refreshing...":"Refresh Data"]})]})}),(0,Jt.jsx)("div",{className:"flex justify-between items-center mb-6",children:(0,Jt.jsxs)("button",{onClick:()=>{l(!1),m(),a(!0)},className:"flex items-center bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-all shadow-sm",children:[(0,Jt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Jt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Create Announcement"]})}),i&&(0,Jt.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75 flex items-center justify-center z-50",children:(0,Jt.jsxs)("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-xl shadow-2xl w-full max-w-lg border border-gray-100 dark:border-gray-700 animate-fadeIn",children:[(0,Jt.jsxs)("div",{className:"flex justify-between items-center mb-6 border-b pb-3",children:[(0,Jt.jsxs)("h2",{className:"text-xl font-bold text-gray-800 dark:text-white flex items-center",children:[(0,Jt.jsx)(lV,{className:"h-5 w-5 mr-2 text-blue-500"}),o?"Edit Announcement":"New Announcement"]}),(0,Jt.jsx)("button",{onClick:p,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full transition-colors",children:(0,Jt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Jt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,Jt.jsxs)("form",{onSubmit:o?async e=>{e.preventDefault();try{await Oy(Cg(Cv,"announcements",c),{...d,updatedAt:Hy()}),Ut.success("Announcement updated successfully"),a(!1),l(!1),m(),f()}catch(KV){Ut.error("Error updating announcement: "+KV.message)}}:async e=>{e.preventDefault();try{await Vy(jg(Cv,"announcements"),{...d,timestamp:Hy(),createdAt:Hy(),updatedAt:Hy()}),Ut.success("Announcement posted successfully"),a(!1),m(),f()}catch(KV){Ut.error("Error posting announcement: "+KV.message)}},className:"space-y-5",children:[(0,Jt.jsxs)("div",{children:[(0,Jt.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Title"}),(0,Jt.jsx)("input",{type:"text",required:!0,value:d.title,onChange:e=>h({...d,title:e.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter announcement title"})]}),(0,Jt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Jt.jsxs)("div",{children:[(0,Jt.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Type"}),(0,Jt.jsxs)("select",{required:!0,value:d.type,onChange:e=>h({...d,type:e.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,Jt.jsx)("option",{value:"Notice",children:"Notice"}),(0,Jt.jsx)("option",{value:"Update",children:"Update"}),(0,Jt.jsx)("option",{value:"Urgent",children:"Urgent"})]})]}),(0,Jt.jsxs)("div",{children:[(0,Jt.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Status"}),(0,Jt.jsxs)("select",{required:!0,value:d.status,onChange:e=>h({...d,status:e.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,Jt.jsx)("option",{value:"Active",children:"Active"}),(0,Jt.jsx)("option",{value:"Inactive",children:"Inactive"})]})]})]}),(0,Jt.jsxs)("div",{children:[(0,Jt.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Content"}),(0,Jt.jsx)("textarea",{required:!0,rows:"4",value:d.content,onChange:e=>h({...d,content:e.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter announcement content"})]}),(0,Jt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Jt.jsxs)("div",{children:[(0,Jt.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Visible To"}),(0,Jt.jsxs)("select",{required:!0,value:d.visibleTo,onChange:e=>h({...d,visibleTo:e.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,Jt.jsx)("option",{value:"both",children:"Everyone"}),(0,Jt.jsx)("option",{value:"homeowner",children:"Homeowners Only"}),(0,Jt.jsx)("option",{value:"guard",children:"Guards Only"})]})]}),(0,Jt.jsxs)("div",{children:[(0,Jt.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Target Audience"}),(0,Jt.jsxs)("select",{required:!0,value:d.targetAudience,onChange:e=>h({...d,targetAudience:e.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,Jt.jsx)("option",{value:"all",children:"All"}),(0,Jt.jsx)("option",{value:"guard",children:"For Guards"}),(0,Jt.jsx)("option",{value:"homeowner",children:"For Homeowners"})]})]})]}),(0,Jt.jsxs)("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4 border border-blue-100 dark:border-blue-800",children:[(0,Jt.jsxs)("label",{className:"flex items-center text-sm font-medium text-gray-700 dark:text-gray-300",children:[(0,Jt.jsx)("input",{type:"checkbox",checked:d.isVisible,onChange:e=>h({...d,isVisible:e.target.checked}),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 dark:border-gray-600 rounded mr-2"}),"Visible in App"]}),(0,Jt.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1 ml-6",children:"When unchecked, the announcement will be hidden from all users."})]}),(0,Jt.jsxs)("div",{className:"flex justify-end space-x-3 mt-6",children:[(0,Jt.jsx)("button",{type:"button",onClick:p,className:"px-5 py-2.5 rounded-lg border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 font-medium transition-colors",children:"Cancel"}),(0,Jt.jsx)("button",{type:"submit",className:"px-5 py-2.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium shadow-sm hover:shadow transition-all flex items-center",children:o?(0,Jt.jsxs)(Jt.Fragment,{children:[(0,Jt.jsx)(cV,{className:"h-4 w-4 mr-1.5"}),"Update Announcement"]}):(0,Jt.jsxs)(Jt.Fragment,{children:[(0,Jt.jsx)(lV,{className:"h-4 w-4 mr-1.5"}),"Post Announcement"]})})]})]})]})}),(0,Jt.jsx)("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden border border-gray-100",children:n?(0,Jt.jsxs)("div",{className:"flex flex-col items-center justify-center py-12",children:[(0,Jt.jsx)("div",{className:"w-12 h-12 border-4 border-t-blue-500 border-blue-200 rounded-full animate-spin mb-4"}),(0,Jt.jsx)("p",{className:"text-gray-500",children:"Loading announcements..."})]}):0===e.length?(0,Jt.jsxs)("div",{className:"flex flex-col items-center justify-center py-16 text-gray-400",children:[(0,Jt.jsx)(lV,{className:"h-16 w-16 mb-4 text-gray-300"}),(0,Jt.jsx)("p",{className:"text-lg font-medium",children:"No announcements yet"}),(0,Jt.jsx)("p",{className:"text-sm text-gray-400",children:"Create your first announcement to get started"}),(0,Jt.jsx)("button",{onClick:()=>{l(!1),m(),a(!0)},className:"mt-4 px-4 py-2 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 transition-colors",children:"Create Announcement"})]}):(0,Jt.jsx)("div",{className:"divide-y divide-gray-100",children:e.map((e=>(0,Jt.jsx)("div",{className:"p-6 transition-colors hover:bg-blue-50/30",children:(0,Jt.jsxs)("div",{className:"flex items-start justify-between flex-wrap gap-4",children:[(0,Jt.jsxs)("div",{className:"flex items-start space-x-4 flex-1 min-w-0",children:[(0,Jt.jsx)("div",{className:"flex-shrink-0 mt-1",children:(0,Jt.jsx)("div",{className:"w-10 h-10 rounded-full flex items-center justify-center \n                          "+("Urgent"===e.type?"bg-red-100":"Update"===e.type?"bg-green-100":"bg-blue-100"),children:(0,Jt.jsx)(lV,{className:"h-6 w-6 \n                            "+("Urgent"===e.type?"text-red-500":"Update"===e.type?"text-green-500":"text-blue-500")})})}),(0,Jt.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Jt.jsxs)("div",{className:"flex flex-wrap items-center gap-2 mb-2",children:[(0,Jt.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:e.title}),(0,Jt.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,Jt.jsx)("span",{className:`px-2 py-0.5 text-xs font-medium rounded-full ${g(e.type)}`,children:e.type||"Notice"}),(0,Jt.jsx)("span",{className:"px-2 py-0.5 text-xs font-medium rounded-full "+("Active"===e.status?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:e.status})]})]}),(0,Jt.jsx)("p",{className:"text-gray-600 text-sm break-words whitespace-pre-line mb-3 line-clamp-3",children:e.content}),(0,Jt.jsxs)("div",{className:"flex flex-wrap items-center gap-3 text-xs text-gray-500",children:[(0,Jt.jsxs)("div",{className:"flex items-center",children:[(0,Jt.jsx)(uV,{className:"h-3.5 w-3.5 mr-1"}),e.date]}),(0,Jt.jsx)("span",{className:"px-2 py-0.5 rounded-full "+(e.isVisible?"bg-purple-100 text-purple-800":"bg-gray-100 text-gray-800"),children:e.isVisible?y(e.visibleTo):"Hidden"}),(0,Jt.jsx)("span",{className:"px-2 py-0.5 rounded-full "+("guard"===e.targetAudience?"bg-blue-100 text-blue-800":"homeowner"===e.targetAudience?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:"guard"===e.targetAudience?"\ud83d\udc6e For Guards":"homeowner"===e.targetAudience?"\ud83c\udfe0 For Homeowners":"\ud83d\udce2 For All"})]})]})]}),(0,Jt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Jt.jsxs)("button",{onClick:()=>(e=>{h({title:e.title||"",content:e.content||"",type:e.type||"Notice",status:e.status||"Active",isVisible:void 0===e.isVisible||e.isVisible,visibleTo:e.visibleTo||"both",targetAudience:e.targetAudience||"all"}),u(e.id),l(!0),a(!0)})(e),className:"p-2 bg-blue-50 text-blue-600 rounded-lg hover:bg-blue-100 transition-colors flex items-center",children:[(0,Jt.jsx)(cV,{className:"h-4 w-4"}),(0,Jt.jsx)("span",{className:"sr-only",children:"Edit"})]}),(0,Jt.jsxs)("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this announcement?"))try{await Fy(Cg(Cv,"announcements",e)),Ut.success("Announcement deleted successfully"),f()}catch(KV){Ut.error("Error deleting announcement: "+KV.message)}})(e.id),className:"p-2 bg-red-50 text-red-600 rounded-lg hover:bg-red-100 transition-colors flex items-center",children:[(0,Jt.jsx)(dV,{className:"h-4 w-4"}),(0,Jt.jsx)("span",{className:"sr-only",children:"Delete"})]})]})]})},e.id)))})})]})})},fV=()=>{const[e,t]=(0,r.useState)([]),[n,s]=(0,r.useState)(null),[i,a]=(0,r.useState)(!1),[o,l]=(0,r.useState)(!0),[c,u]=(0,r.useState)(null),[d,h]=(0,r.useState)(""),[f,m]=(0,r.useState)(""),[p,g]=(0,r.useState)([]),[y,v]=(0,r.useState)(!1),[x,b]=(0,r.useState)("date"),[w,_]=(0,r.useState)("desc"),[k,N]=(0,r.useState)(0);(0,r.useEffect)((()=>{document.title="Feedbacks";(async()=>{try{l(!0),u(null);const e=py(jg(Cv,"services"),yy("has_feedback","==",!0)),n=await Ly(e);if(n.empty)return t([]),void g([]);const r=[],s=new Set;n.docs.forEach((e=>{const t=e.data();if(t.has_feedback&&t.feedback_text){const i=t.service_provider||t.type_of_request||"Unknown Service";s.add(i);let a="Unknown date";try{const e=t.feedback_date||t.updatedAt||t.created_at;e&&(a=zD(e.toDate(),"MMM d, yyyy - h:mm a"))}catch(n){console.error("Error formatting date:",n)}r.push({id:e.id,userId:t.uid||"",feedback:t.feedback_text||t.comment||t.additional_notes||"No feedback provided",rating:t.rating||0,serviceName:i,timestamp:t.feedback_date||t.updatedAt||t.created_at,date:a,userName:t.fullName||`${t.firstName||""} ${t.lastName||""}`.trim()||"Anonymous",houseNo:t.house_no||"",issue:t.issue||"",type_of_request:t.type_of_request||""})}}));const i=r.sort(((e,t)=>e.timestamp&&t.timestamp?t.timestamp.seconds-e.timestamp.seconds:0));t(i),g(Array.from(s).sort()),k>0&&Ut.success("Feedback data refreshed successfully")}catch(KV){console.error("Error fetching feedback:",KV),u("Failed to load feedback data. Please try again."),Ut.error("Failed to load feedback data. Please try again later.")}finally{l(!1)}})()}),[k]);const S=()=>{N((e=>e+1))},E=e=>Array(5).fill(0).map(((t,n)=>n<e?(0,Jt.jsx)(dx,{className:"text-amber-500"},n):(0,Jt.jsx)(Nx,{className:"text-gray-400"},n))),j=()=>{a(!1),s(null)},C=(e=>e.sort(((e,t)=>e.timestamp&&t.timestamp?"desc"===w?t.timestamp.seconds-e.timestamp.seconds:e.timestamp.seconds-t.timestamp.seconds:0)))(e.filter((e=>{const t=""===d||e.rating===parseInt(d),n=""===f||e.serviceName===f||e.type_of_request===f;return t&&n}))),T=()=>{h(""),m("")};return(0,Jt.jsxs)(Cx,{children:[(0,Jt.jsxs)("div",{className:"pt-20 px-6 max-w-7xl mx-auto",children:[(0,Jt.jsxs)("div",{className:"bg-white dark:bg-gray-800 shadow-lg rounded-lg p-6 mb-8 border-l-4 border-blue-500",children:[(0,Jt.jsxs)("h1",{className:"text-3xl font-bold text-gray-800 dark:text-white flex items-center",children:[(0,Jt.jsx)(Yv,{className:"mr-3 text-blue-500"}),"User Feedbacks"]}),(0,Jt.jsx)("p",{className:"text-gray-600 dark:text-gray-300 mt-2",children:"View and manage feedback from community members"})]}),(0,Jt.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,Jt.jsxs)("button",{onClick:()=>{v(!y)},className:"flex items-center bg-blue-50 text-blue-600 hover:bg-blue-100 px-4 py-2 rounded-lg transition-all shadow-sm",children:[(0,Jt.jsx)(nx,{className:"mr-2"}),(0,Jt.jsx)("span",{children:y?"Hide Filters":"Show Filters"})]}),(0,Jt.jsxs)("div",{className:"text-sm text-gray-600",children:["Total Feedbacks: ",(0,Jt.jsx)("span",{className:"font-semibold",children:e.length})]})]}),y&&(0,Jt.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6 mb-8 border border-gray-100 transition-all",children:[(0,Jt.jsx)("h3",{className:"font-semibold text-gray-700 mb-4 border-b pb-2",children:"Filter Options"}),(0,Jt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,Jt.jsxs)("div",{children:[(0,Jt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Filter by Rating"}),(0,Jt.jsxs)("div",{className:"relative",children:[(0,Jt.jsxs)("select",{value:d,onChange:e=>h(e.target.value),className:"block w-full pl-3 pr-10 py-2.5 text-base border border-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-lg bg-gray-50 hover:bg-white transition-colors shadow-sm",children:[(0,Jt.jsx)("option",{value:"",children:"All Ratings"}),[1,2,3,4,5].map((e=>(0,Jt.jsxs)("option",{value:e,children:[e," ",1===e?"Star":"Stars"]},e)))]}),(0,Jt.jsx)("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none",children:(0,Jt.jsx)(dx,{className:"text-amber-500"})})]})]}),(0,Jt.jsxs)("div",{children:[(0,Jt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Filter by Service"}),(0,Jt.jsx)("div",{className:"relative",children:(0,Jt.jsxs)("select",{value:f,onChange:e=>m(e.target.value),className:"block w-full pl-3 pr-10 py-2.5 text-base border border-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-lg bg-gray-50 hover:bg-white transition-colors shadow-sm",children:[(0,Jt.jsx)("option",{value:"",children:"All Services"}),p.map((e=>(0,Jt.jsx)("option",{value:e,children:e},e)))]})})]}),(0,Jt.jsx)("div",{className:"flex items-end",children:(0,Jt.jsxs)("button",{onClick:T,className:"px-4 py-2.5 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors flex items-center shadow-sm",children:[(0,Jt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Jt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Reset Filters"]})})]}),(0,Jt.jsx)("div",{className:"mt-6 pt-4 border-t border-gray-100",children:(0,Jt.jsxs)("p",{className:"text-sm text-gray-600 flex items-center justify-end",children:[(0,Jt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Jt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Showing ",(0,Jt.jsx)("span",{className:"font-medium mx-1",children:C.length})," of ",(0,Jt.jsx)("span",{className:"font-medium mx-1",children:e.length})," feedbacks"]})})]}),(0,Jt.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6 overflow-hidden border border-gray-100",children:[(0,Jt.jsx)("div",{className:"flex justify-end mb-4",children:(0,Jt.jsxs)("button",{onClick:S,disabled:o,className:`flex items-center px-4 py-2 rounded-lg text-sm ${o?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-blue-50 text-blue-600 hover:bg-blue-100"} transition-colors`,children:[(0,Jt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-2 "+(o?"animate-spin":""),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Jt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),o?"Refreshing...":"Refresh Data"]})}),o?(0,Jt.jsxs)("div",{className:"flex flex-col items-center justify-center py-12",children:[(0,Jt.jsx)(ux,{className:"animate-spin text-blue-500 text-4xl mb-4"}),(0,Jt.jsx)("p",{className:"text-gray-500",children:"Loading feedbacks..."})]}):c?(0,Jt.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 text-red-500",children:[(0,Jt.jsx)(Zv,{className:"text-4xl mb-4"}),(0,Jt.jsx)("p",{className:"text-lg font-medium",children:c}),(0,Jt.jsx)("button",{onClick:S,className:"mt-4 px-4 py-2 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 transition-colors",children:"Try Again"})]}):0===C.length?(0,Jt.jsxs)("div",{className:"flex flex-col items-center justify-center py-16 text-gray-400",children:[(0,Jt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-16 w-16 mb-4 text-gray-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Jt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),(0,Jt.jsx)("p",{className:"text-lg font-medium",children:0===e.length?"No feedback has been submitted yet.":"No feedback matches your current filters."}),e.length>0&&(0,Jt.jsxs)("button",{onClick:T,className:"mt-3 text-blue-500 hover:text-blue-700 flex items-center",children:[(0,Jt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Jt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Reset Filters"]})]}):(0,Jt.jsx)("div",{className:"overflow-x-auto rounded-lg",children:(0,Jt.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Jt.jsx)("thead",{className:"bg-gray-50",children:(0,Jt.jsxs)("tr",{children:[(0,Jt.jsx)("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"User"}),(0,Jt.jsx)("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Feedback"}),(0,Jt.jsx)("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Rating"}),(0,Jt.jsx)("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Service Name"}),(0,Jt.jsx)("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider cursor-pointer hover:bg-gray-100 transition-colors",onClick:()=>_((e=>"desc"===e?"asc":"desc")),children:(0,Jt.jsxs)("div",{className:"flex items-center",children:["Date",(0,Jt.jsx)("span",{className:"ml-2 bg-gray-200 rounded-full p-1",children:"desc"===w?(0,Jt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Jt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})}):(0,Jt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Jt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 15l7-7 7 7"})})})]})})]})}),(0,Jt.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:C.map((e=>(0,Jt.jsxs)("tr",{className:"hover:bg-gray-50 transition-colors",children:[(0,Jt.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Jt.jsxs)("div",{className:"flex items-center",children:[(0,Jt.jsx)("div",{className:"flex-shrink-0 h-9 w-9 bg-blue-100 rounded-full flex items-center justify-center text-blue-600 font-semibold uppercase",children:e.userName.charAt(0)}),(0,Jt.jsxs)("div",{className:"ml-3",children:[(0,Jt.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.userName}),e.houseNo&&(0,Jt.jsxs)("div",{className:"text-xs text-gray-500",children:["House #",e.houseNo]})]})]})}),(0,Jt.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Jt.jsxs)("button",{onClick:()=>(e=>{s(e),a(!0)})(e),className:"text-blue-600 hover:text-blue-800 hover:bg-blue-50 p-2 rounded-lg transition-colors flex items-center",title:"View Feedback",children:[(0,Jt.jsx)(Yv,{size:16,className:"mr-2"}),(0,Jt.jsx)("span",{children:"View"})]})}),(0,Jt.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Jt.jsx)("div",{className:"flex",children:E(e.rating)})}),(0,Jt.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,Jt.jsx)("span",{className:"px-3 py-1 inline-flex text-sm leading-5 font-medium rounded-full bg-blue-50 text-blue-700",children:e.serviceName}),e.type_of_request&&e.type_of_request!==e.serviceName&&(0,Jt.jsx)("div",{className:"mt-1 text-xs text-gray-500",children:e.type_of_request})]}),(0,Jt.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:(0,Jt.jsxs)("div",{className:"flex items-center",children:[(0,Jt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Jt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),e.date]})})]},e.id)))})]})})]})]}),i&&n&&(0,Jt.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-60 backdrop-blur-sm flex items-center justify-center z-50 modal-backdrop",onClick:e=>{e.target.classList.contains("modal-backdrop")&&j()},children:(0,Jt.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-0 max-w-lg w-full mx-4 shadow-2xl transform transition-all animate-fadeIn overflow-hidden",onClick:e=>e.stopPropagation(),children:[(0,Jt.jsxs)("div",{className:"bg-blue-500 text-white p-6 relative",children:[(0,Jt.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Jt.jsx)("h2",{className:"text-xl font-bold",children:"Feedback Details"}),(0,Jt.jsx)("button",{onClick:j,className:"text-white hover:text-gray-200 transition-colors","aria-label":"Close dialog",children:(0,Jt.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,Jt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),(0,Jt.jsxs)("div",{className:"flex items-center mt-4",children:[(0,Jt.jsx)("div",{className:"flex space-x-1 bg-white bg-opacity-20 rounded-lg px-3 py-2",children:E(n.rating)}),(0,Jt.jsxs)("span",{className:"ml-3 font-medium",children:[n.rating," out of 5"]})]})]}),(0,Jt.jsxs)("div",{className:"p-6",children:[(0,Jt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[(0,Jt.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4",children:[(0,Jt.jsx)("h3",{className:"text-sm text-gray-500 dark:text-gray-400 mb-1",children:"From"}),(0,Jt.jsxs)("div",{className:"flex items-center",children:[(0,Jt.jsx)("div",{className:"flex-shrink-0 h-10 w-10 bg-blue-100 dark:bg-blue-900 rounded-full flex items-center justify-center text-blue-600 dark:text-blue-300 font-semibold uppercase",children:n.userName.charAt(0)}),(0,Jt.jsxs)("div",{className:"ml-3",children:[(0,Jt.jsx)("p",{className:"font-medium text-gray-800 dark:text-gray-200",children:n.userName}),n.houseNo&&(0,Jt.jsxs)("p",{className:"text-xs text-gray-500",children:["House #",n.houseNo]})]})]})]}),(0,Jt.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4",children:[(0,Jt.jsx)("h3",{className:"text-sm text-gray-500 dark:text-gray-400 mb-1",children:"Service"}),(0,Jt.jsxs)("div",{children:[(0,Jt.jsx)("span",{className:"px-3 py-1 inline-flex text-sm leading-5 font-medium rounded-full bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200",children:n.serviceName}),n.type_of_request&&n.type_of_request!==n.serviceName&&(0,Jt.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:n.type_of_request})]})]})]}),(0,Jt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[(0,Jt.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4",children:[(0,Jt.jsx)("h3",{className:"text-sm text-gray-500 dark:text-gray-400 mb-1",children:"Date"}),(0,Jt.jsxs)("div",{className:"flex items-center",children:[(0,Jt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Jt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),(0,Jt.jsx)("p",{className:"ml-2 font-medium text-gray-800 dark:text-gray-200",children:n.date})]})]}),n.issue&&(0,Jt.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4",children:[(0,Jt.jsx)("h3",{className:"text-sm text-gray-500 dark:text-gray-400 mb-1",children:"Service Issue"}),(0,Jt.jsx)("p",{className:"text-gray-800 dark:text-gray-200 text-sm",children:n.issue})]})]}),(0,Jt.jsxs)("div",{children:[(0,Jt.jsx)("h3",{className:"text-sm text-gray-500 dark:text-gray-400 mb-1",children:"Feedback Message"}),(0,Jt.jsx)("div",{className:"mt-2 p-4 bg-gray-50 dark:bg-gray-700 rounded-lg border border-gray-100 dark:border-gray-600 text-gray-700 dark:text-gray-200",children:n.feedback})]}),(0,Jt.jsx)("div",{className:"mt-8 text-right",children:(0,Jt.jsx)("button",{onClick:j,className:"px-5 py-2.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-all shadow-md",children:"Close"})})]})]})})]})};const mV=function(){var e;const[t,n]=(0,r.useState)([]),[s,i]=(0,r.useState)(!0),[a,o]=(0,r.useState)(!1),[l,c]=(0,r.useState)(!1),[u,d]=(0,r.useState)(null),[h,f]=(0,r.useState)(!1),[m,p]=(0,r.useState)(!1),[g,y]=(0,r.useState)(null),[v,x]=(0,r.useState)(0),[b,w]=(0,r.useState)(!1),[_,k]=(0,r.useState)({name:"",username:"",email:"",password:"",contactNumber:"",role:"Guard",shift_status:"Off-duty",shift_start:"",shift_end:"",isActive:!0,fcmToken:""}),[N,S]=(0,r.useState)("");(0,r.useEffect)((()=>{document.title="Guard Accounts",E()}),[v]);const E=async()=>{i(!0);try{const e=py(jg(Cv,"guards"),yy("role","==","Guard")),t=(await Ly(e)).docs.map((e=>({id:e.id,...e.data()})));n(t)}catch(KV){console.error("Error fetching guards: ",KV),Ut.error("Error loading guards")}finally{i(!1)}},j=e=>{const t=e.target.value;k({..._,username:t,email:t?`${t}@guard.com`:""})},C=()=>{c(!1),d(null),f(!1)},T=async e=>{if(window.confirm("Are you sure you want to delete this guard account? This action cannot be undone.")){y(e);try{await Fy(Cg(Cv,"guards",e)),Ut.success("Guard account deleted successfully!"),n((t=>t.filter((t=>t.id!==e))))}catch(KV){console.error("Error deleting guard: ",KV),Ut.error(KV.message||"Failed to delete guard account")}finally{y(null)}}},A=e=>{if(!e)return"";const[t,n]=e.split(":"),r=parseInt(t,10);return`${r%12||12}:${n} ${r>=12?"PM":"AM"}`},I=t.filter((e=>{var t,n,r,s;if(!N)return!0;const i=N.toLowerCase();return(null===(t=e.name)||void 0===t?void 0:t.toLowerCase().includes(i))||(null===(n=e.username)||void 0===n?void 0:n.toLowerCase().includes(i))||(null===(r=e.email)||void 0===r?void 0:r.toLowerCase().includes(i))||(null===(s=e.contactNumber)||void 0===s?void 0:s.toLowerCase().includes(i))})),M=t.filter((e=>"On-duty"===e.shift_status)).length,P=(t.filter((e=>e.shift_start&&e.shift_end)).length,t.filter((e=>e.isActive)).length);return(0,Jt.jsx)(Cx,{children:(0,Jt.jsxs)("div",{className:"pt-20 px-6 max-w-7xl mx-auto",children:[(0,Jt.jsxs)("div",{className:"bg-white dark:bg-gray-800 shadow-lg rounded-lg p-6 mb-8 border-l-4 border-blue-500",children:[(0,Jt.jsxs)("div",{className:"flex flex-wrap justify-between items-start",children:[(0,Jt.jsxs)("div",{children:[(0,Jt.jsxs)("h1",{className:"text-3xl font-bold text-gray-800 dark:text-white flex items-center",children:[(0,Jt.jsx)(bx,{className:"mr-3 text-blue-500 h-8 w-8"}),"Guard Accounts"]}),(0,Jt.jsx)("p",{className:"text-gray-600 dark:text-gray-300 mt-2",children:"Manage security guard accounts and credentials"})]}),(0,Jt.jsxs)("div",{className:"flex mt-4 md:mt-0",children:[(0,Jt.jsxs)("button",{onClick:()=>o(!0),className:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg flex items-center shadow-md transition-colors",children:[(0,Jt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Jt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add New Guard"]}),(0,Jt.jsx)("button",{onClick:()=>{w(!0),E().finally((()=>{w(!1)}))},className:"ml-3 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-200 px-3 py-2 rounded-lg flex items-center shadow-sm transition-colors",disabled:b,children:(0,Jt.jsx)(fx,{className:"h-5 w-5 "+(b?"animate-spin text-blue-500":"text-gray-500 dark:text-gray-400")})})]})]}),(0,Jt.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 mt-8",children:[(0,Jt.jsx)("div",{className:"bg-blue-50 dark:bg-blue-900/30 p-4 rounded-lg border border-blue-100 dark:border-blue-800",children:(0,Jt.jsxs)("div",{className:"flex items-center",children:[(0,Jt.jsx)("div",{className:"bg-blue-100 dark:bg-blue-800 p-3 rounded-full",children:(0,Jt.jsx)(bx,{className:"h-6 w-6 text-blue-600 dark:text-blue-400"})}),(0,Jt.jsxs)("div",{className:"ml-4",children:[(0,Jt.jsx)("h2",{className:"font-semibold text-gray-800 dark:text-white",children:"Total Guards"}),(0,Jt.jsx)("p",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:t.length})]})]})}),(0,Jt.jsx)("div",{className:"bg-green-50 dark:bg-green-900/30 p-4 rounded-lg border border-green-100 dark:border-green-800",children:(0,Jt.jsxs)("div",{className:"flex items-center",children:[(0,Jt.jsx)("div",{className:"bg-green-100 dark:bg-green-800 p-3 rounded-full",children:(0,Jt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-green-600 dark:text-green-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Jt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})})}),(0,Jt.jsxs)("div",{className:"ml-4",children:[(0,Jt.jsx)("h2",{className:"font-semibold text-gray-800 dark:text-white",children:"On Duty"}),(0,Jt.jsx)("p",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:M})]})]})}),(0,Jt.jsx)("div",{className:"bg-indigo-50 dark:bg-indigo-900/30 p-4 rounded-lg border border-indigo-100 dark:border-indigo-800",children:(0,Jt.jsxs)("div",{className:"flex items-center",children:[(0,Jt.jsx)("div",{className:"bg-indigo-100 dark:bg-indigo-800 p-3 rounded-full",children:(0,Jt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-indigo-600 dark:text-indigo-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Jt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,Jt.jsxs)("div",{className:"ml-4",children:[(0,Jt.jsx)("h2",{className:"font-semibold text-gray-800 dark:text-white",children:"Active Accounts"}),(0,Jt.jsx)("p",{className:"text-2xl font-bold text-indigo-600 dark:text-indigo-400",children:P})]})]})})]})]}),(0,Jt.jsx)("div",{className:"flex flex-col md:flex-row justify-between mb-6 gap-4",children:(0,Jt.jsxs)("div",{className:"relative rounded-md shadow-sm w-full md:w-80",children:[(0,Jt.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,Jt.jsx)(lx,{className:"h-4 w-4 text-gray-400"})}),(0,Jt.jsx)("input",{type:"text",value:N,onChange:e=>S(e.target.value),placeholder:"Search guards...",className:"pl-10 w-full px-4 py-2 rounded-md border border-gray-300 focus:ring-blue-500 focus:border-blue-500"})]})}),a&&(0,Jt.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50",children:(0,Jt.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-4xl mx-4 overflow-hidden",children:(0,Jt.jsxs)("div",{className:"p-6",children:[(0,Jt.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,Jt.jsx)("h2",{className:"text-2xl font-semibold text-gray-800 dark:text-white",children:"Add New Guard"}),(0,Jt.jsx)("button",{onClick:()=>o(!1),className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:(0,Jt.jsx)(px,{className:"h-5 w-5"})})]}),(0,Jt.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),p(!0);try{const e=(await ga(jv,_.email,_.password)).user.uid;await Dy(Cg(Cv,"guards",e),{..._,id:e,password:null,createdAt:Hy(),updatedAt:Hy()}),Ut.success("Guard account created successfully!"),o(!1),k({name:"",username:"",email:"",password:"",contactNumber:"",role:"Guard",shift_status:"Off-duty",shift_start:"",shift_end:"",isActive:!0,fcmToken:""}),E()}catch(KV){console.error("Error creating guard account: ",KV),Ut.error(KV.message||"Failed to create guard account")}finally{p(!1)}},className:"space-y-6",children:[(0,Jt.jsxs)("div",{children:[(0,Jt.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1.5",children:"Full Name"}),(0,Jt.jsx)("input",{type:"text",required:!0,value:_.name,onChange:e=>k({..._,name:e.target.value}),className:"w-full px-4 py-2.5 rounded-lg border border-gray-300 dark:border-gray-600 focus:ring-2 focus:ring-blue-500 focus:border-transparent shadow-sm",placeholder:"Enter guard's full name"})]}),(0,Jt.jsxs)("div",{children:[(0,Jt.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1.5",children:"Username"}),(0,Jt.jsx)("input",{type:"text",required:!0,value:_.username,onChange:j,className:"w-full px-4 py-2.5 rounded-lg border border-gray-300 dark:border-gray-600 focus:ring-2 focus:ring-blue-500 focus:border-transparent shadow-sm",placeholder:"Enter username"})]}),(0,Jt.jsxs)("div",{children:[(0,Jt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),(0,Jt.jsx)("input",{type:"email",value:_.email,onChange:e=>k({..._,email:e.target.value}),className:"w-full px-4 py-2 rounded-md border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:_.username?`${_.username}@guard.com`:"guard@guard.com"}),(0,Jt.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"Auto-generated from username"})]}),(0,Jt.jsxs)("div",{children:[(0,Jt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),(0,Jt.jsx)("input",{type:"password",required:!0,value:_.password,onChange:e=>k({..._,password:e.target.value}),className:"w-full px-4 py-2 rounded-md border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Create a strong password"}),(0,Jt.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"Must be at least 6 characters"})]}),(0,Jt.jsxs)("div",{children:[(0,Jt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Contact Number"}),(0,Jt.jsx)("input",{type:"tel",value:_.contactNumber,onChange:e=>k({..._,contactNumber:e.target.value}),className:"w-full px-4 py-2 rounded-md border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g. 09123456789"})]}),(0,Jt.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,Jt.jsxs)("div",{children:[(0,Jt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Shift Start"}),(0,Jt.jsxs)("div",{className:"mt-1 relative rounded-md shadow-sm",children:[(0,Jt.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,Jt.jsx)(Gv,{className:"h-4 w-4 text-gray-400"})}),(0,Jt.jsx)("input",{type:"time",value:_.shift_start,onChange:e=>k({..._,shift_start:e.target.value}),className:"pl-10 w-full px-4 py-2 rounded-md border border-gray-300 focus:ring-blue-500 focus:border-blue-500"})]})]}),(0,Jt.jsxs)("div",{children:[(0,Jt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Shift End"}),(0,Jt.jsxs)("div",{className:"mt-1 relative rounded-md shadow-sm",children:[(0,Jt.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,Jt.jsx)(Gv,{className:"h-4 w-4 text-gray-400"})}),(0,Jt.jsx)("input",{type:"time",value:_.shift_end,onChange:e=>k({..._,shift_end:e.target.value}),className:"pl-10 w-full px-4 py-2 rounded-md border border-gray-300 focus:ring-blue-500 focus:border-blue-500"})]})]})]}),(0,Jt.jsx)("div",{className:"pt-4 border-t border-gray-200",children:(0,Jt.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,Jt.jsx)("button",{type:"button",onClick:()=>o(!1),disabled:m,className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors",children:"Cancel"}),(0,Jt.jsx)("button",{type:"submit",disabled:m,className:`px-4 py-2 rounded-lg text-white ${m?"bg-blue-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"} transition-colors inline-flex items-center`,children:m?(0,Jt.jsxs)(Jt.Fragment,{children:[(0,Jt.jsx)(ux,{className:"animate-spin -ml-1 mr-2 h-4 w-4"}),"Creating..."]}):(0,Jt.jsx)(Jt.Fragment,{children:"Add Guard"})})]})})]})]})})}),l&&u&&(0,Jt.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50",children:(0,Jt.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg w-full max-w-md",children:[(0,Jt.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,Jt.jsx)("h2",{className:"text-lg font-semibold",children:h?"Edit Guard":"Guard Details"}),(0,Jt.jsx)("button",{onClick:C,className:"text-gray-500 hover:text-gray-700",children:(0,Jt.jsx)(px,{})})]}),h?(0,Jt.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),u){p(!0);try{const e=Cg(Cv,"guards",u.id);await Oy(e,{name:_.name,username:_.username,email:_.email,contactNumber:_.contactNumber,shift_start:_.shift_start,shift_end:_.shift_end,updatedAt:Hy()}),Ut.success("Guard information updated successfully!"),E(),C()}catch(KV){console.error("Error updating guard: ",KV),Ut.error(KV.message||"Failed to update guard information")}finally{p(!1)}}},className:"space-y-4",children:[(0,Jt.jsxs)("div",{children:[(0,Jt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),(0,Jt.jsx)("input",{type:"text",required:!0,value:_.name,onChange:e=>k({..._,name:e.target.value}),className:"w-full px-4 py-2 rounded-md border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,Jt.jsxs)("div",{children:[(0,Jt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Username"}),(0,Jt.jsx)("input",{type:"text",required:!0,value:_.username,onChange:j,className:"w-full px-4 py-2 rounded-md border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,Jt.jsxs)("div",{children:[(0,Jt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),(0,Jt.jsx)("input",{type:"email",value:_.email,onChange:e=>k({..._,email:e.target.value}),className:"w-full px-4 py-2 rounded-md border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,Jt.jsxs)("div",{children:[(0,Jt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Contact Number"}),(0,Jt.jsx)("input",{type:"tel",value:_.contactNumber,onChange:e=>k({..._,contactNumber:e.target.value}),className:"w-full px-4 py-2 rounded-md border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g. 09123456789"})]}),(0,Jt.jsxs)("div",{children:[(0,Jt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Shift Start"}),(0,Jt.jsx)("input",{type:"time",value:_.shift_start,onChange:e=>k({..._,shift_start:e.target.value}),className:"w-full px-4 py-2 rounded-md border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,Jt.jsxs)("div",{children:[(0,Jt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Shift End"}),(0,Jt.jsx)("input",{type:"time",value:_.shift_end,onChange:e=>k({..._,shift_end:e.target.value}),className:"w-full px-4 py-2 rounded-md border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,Jt.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,Jt.jsx)("button",{type:"button",onClick:()=>{f(!1)},className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:"Cancel"}),(0,Jt.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",disabled:m,children:m?(0,Jt.jsxs)("div",{className:"flex items-center",children:[(0,Jt.jsx)(ux,{className:"animate-spin mr-2"}),"Updating..."]}):"Update Guard"})]})]}):(0,Jt.jsxs)("div",{className:"space-y-6",children:[(0,Jt.jsx)("div",{className:"flex items-center justify-center mb-4",children:(0,Jt.jsx)("div",{className:"h-20 w-20 rounded-full bg-blue-100 text-blue-600 flex items-center justify-center text-2xl font-semibold",children:(null===u||void 0===u||null===(e=u.name)||void 0===e?void 0:e.charAt(0).toUpperCase())||"G"})}),(0,Jt.jsxs)("div",{children:[(0,Jt.jsx)("p",{className:"text-sm text-gray-500",children:"Name"}),(0,Jt.jsx)("p",{className:"font-medium",children:(null===u||void 0===u?void 0:u.name)||"N/A"})]}),(0,Jt.jsxs)("div",{children:[(0,Jt.jsx)("p",{className:"text-sm text-gray-500",children:"Username"}),(0,Jt.jsx)("p",{className:"font-medium",children:(null===u||void 0===u?void 0:u.username)||"N/A"})]}),(0,Jt.jsxs)("div",{children:[(0,Jt.jsx)("p",{className:"text-sm text-gray-500",children:"Email"}),(0,Jt.jsx)("p",{className:"font-medium",children:(null===u||void 0===u?void 0:u.email)||"N/A"})]}),(0,Jt.jsxs)("div",{children:[(0,Jt.jsx)("p",{className:"text-sm text-gray-500",children:"Contact"}),(0,Jt.jsx)("p",{className:"font-medium",children:(null===u||void 0===u?void 0:u.contactNumber)||"N/A"})]}),(0,Jt.jsxs)("div",{children:[(0,Jt.jsx)("p",{className:"text-sm text-gray-500",children:"Shift"}),(0,Jt.jsx)("p",{className:"font-medium",children:null!==u&&void 0!==u&&u.shift_start&&null!==u&&void 0!==u&&u.shift_end?`${A(null===u||void 0===u?void 0:u.shift_start)} - ${A(null===u||void 0===u?void 0:u.shift_end)}`:"Not set"})]}),(0,Jt.jsxs)("div",{children:[(0,Jt.jsx)("p",{className:"text-sm text-gray-500",children:"Status"}),(0,Jt.jsxs)("div",{className:"flex items-center mt-1",children:[(0,Jt.jsx)("span",{className:"px-2 py-1 text-xs font-semibold rounded-full mr-2 "+("On-duty"===(null===u||void 0===u?void 0:u.shift_status)?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:(null===u||void 0===u?void 0:u.shift_status)||"Off-duty"}),(0,Jt.jsx)("span",{className:"inline-flex h-2 w-2 rounded-full "+(null!==u&&void 0!==u&&u.isActive?"bg-green-500":"bg-gray-300")}),(0,Jt.jsx)("span",{className:"ml-1 text-xs text-gray-500",children:null!==u&&void 0!==u&&u.isActive?"Active":"Inactive"})]})]}),(0,Jt.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,Jt.jsxs)("button",{onClick:()=>{u&&f(!0)},className:"px-4 py-2 bg-blue-50 text-blue-600 rounded-lg hover:bg-blue-100 transition-colors",children:[(0,Jt.jsx)(Jv,{className:"inline mr-1"})," Edit"]}),(0,Jt.jsxs)("button",{onClick:()=>{C(),T(u.id)},className:"px-4 py-2 bg-red-50 text-red-600 rounded-lg hover:bg-red-100 transition-colors",children:[(0,Jt.jsx)(vx,{className:"inline mr-1"})," Delete"]})]})]})]})}),(0,Jt.jsx)("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden border border-gray-200",children:s?(0,Jt.jsxs)("div",{className:"p-12 text-center",children:[(0,Jt.jsx)(ux,{className:"animate-spin text-blue-500 mx-auto h-8 w-8 mb-4"}),(0,Jt.jsx)("p",{className:"text-gray-600",children:"Loading guards..."})]}):(0,Jt.jsx)("div",{className:"overflow-x-auto",children:(0,Jt.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Jt.jsx)("thead",{className:"bg-gray-50",children:(0,Jt.jsxs)("tr",{children:[(0,Jt.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Guard"}),(0,Jt.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Shift Time"}),(0,Jt.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,Jt.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,Jt.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:0===I.length?(0,Jt.jsx)("tr",{children:(0,Jt.jsxs)("td",{colSpan:"4",className:"px-6 py-12 text-center text-gray-500",children:[(0,Jt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-12 w-12 mx-auto text-gray-400 mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Jt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),(0,Jt.jsx)("p",{className:"text-lg font-medium",children:"No guards found"}),(0,Jt.jsx)("p",{className:"mt-1",children:"Try adjusting your search criteria or add a new guard."})]})}):I.map((e=>{var t;return(0,Jt.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,Jt.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Jt.jsxs)("div",{className:"flex items-center",children:[(0,Jt.jsx)("div",{className:"flex-shrink-0 h-10 w-10 bg-blue-100 rounded-full flex items-center justify-center",children:(0,Jt.jsx)("span",{className:"text-lg font-medium text-blue-700",children:(null===(t=e.name)||void 0===t?void 0:t.charAt(0).toUpperCase())||"G"})}),(0,Jt.jsxs)("div",{className:"ml-4",children:[(0,Jt.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.name}),(0,Jt.jsx)("div",{className:"text-sm text-gray-500",children:e.email})]})]})}),(0,Jt.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:e.shift_start&&e.shift_end?(0,Jt.jsxs)("span",{className:"text-sm text-gray-900",children:[A(e.shift_start)," - ",A(e.shift_end)]}):(0,Jt.jsx)("span",{className:"text-sm text-gray-500",children:"Not set"})}),(0,Jt.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Jt.jsxs)("div",{className:"flex items-center",children:[(0,Jt.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full mr-2 "+("On-duty"===e.shift_status?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.shift_status||"Off-duty"}),(0,Jt.jsx)("span",{className:"inline-flex h-2 w-2 rounded-full "+(e.isActive?"bg-green-500":"bg-gray-300")})]})}),(0,Jt.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:(0,Jt.jsxs)("div",{className:"flex space-x-2",children:[(0,Jt.jsx)("button",{onClick:()=>(e=>{d(e),k({name:e.name||"",username:e.username||"",email:e.email||"",contactNumber:e.contactNumber||"",role:e.role||"Guard",shift_status:e.shift_status||"Off-duty",shift_start:e.shift_start||"",shift_end:e.shift_end||"",isActive:void 0===e.isActive||e.isActive}),c(!0),f(!1)})(e),className:"text-blue-600 hover:text-blue-900","aria-label":`View ${e.name}`,children:(0,Jt.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[(0,Jt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),(0,Jt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),(0,Jt.jsx)("button",{onClick:()=>(async(e,t)=>{y(e);try{const r=Cg(Cv,"guards",e);await Oy(r,{isActive:!t,updatedAt:Hy()}),Ut.success(`Guard ${t?"deactivated":"activated"} successfully!`),n((n=>n.map((n=>n.id===e?{...n,isActive:!t}:n))))}catch(KV){console.error("Error toggling guard status: ",KV),Ut.error("Failed to update guard status")}finally{y(null)}})(e.id,e.isActive),className:""+(e.isActive?"text-green-600 hover:text-green-900":"text-gray-400 hover:text-gray-600"),disabled:g===e.id,"aria-label":`${e.isActive?"Deactivate":"Activate"} ${e.name}`,children:g===e.id?(0,Jt.jsx)(ux,{className:"animate-spin h-5 w-5 text-gray-400"}):e.isActive?(0,Jt.jsx)(yx,{className:"h-5 w-5"}):(0,Jt.jsx)(gx,{className:"h-5 w-5"})}),(0,Jt.jsx)("button",{onClick:()=>T(e.id),className:"text-red-600 hover:text-red-900",disabled:g===e.id,"aria-label":`Delete ${e.name}`,children:(0,Jt.jsx)(vx,{className:"h-4 w-4"})})]})})]},e.id)}))})]})})})]})})};var pV,gV=Object.defineProperty,yV=Object.getOwnPropertySymbols,vV=Object.prototype.hasOwnProperty,xV=Object.prototype.propertyIsEnumerable,bV=(e,t,n)=>t in e?gV(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,wV=(e,t)=>{for(var n in t||(t={}))vV.call(t,n)&&bV(e,n,t[n]);if(yV)for(var n of yV(t))xV.call(t,n)&&bV(e,n,t[n]);return e},_V=(e,t)=>{var n={};for(var r in e)vV.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&yV)for(var r of yV(e))t.indexOf(r)<0&&xV.call(e,r)&&(n[r]=e[r]);return n};(e=>{const t=class t{constructor(e,n,r,i){if(this.version=e,this.errorCorrectionLevel=n,this.modules=[],this.isFunction=[],e<t.MIN_VERSION||e>t.MAX_VERSION)throw new RangeError("Version value out of range");if(i<-1||i>7)throw new RangeError("Mask value out of range");this.size=4*e+17;let a=[];for(let t=0;t<this.size;t++)a.push(!1);for(let t=0;t<this.size;t++)this.modules.push(a.slice()),this.isFunction.push(a.slice());this.drawFunctionPatterns();const o=this.addEccAndInterleave(r);if(this.drawCodewords(o),-1==i){let e=1e9;for(let t=0;t<8;t++){this.applyMask(t),this.drawFormatBits(t);const n=this.getPenaltyScore();n<e&&(i=t,e=n),this.applyMask(t)}}s(0<=i&&i<=7),this.mask=i,this.applyMask(i),this.drawFormatBits(i),this.isFunction=[]}static encodeText(n,r){const s=e.QrSegment.makeSegments(n);return t.encodeSegments(s,r)}static encodeBinary(n,r){const s=e.QrSegment.makeBytes(n);return t.encodeSegments([s],r)}static encodeSegments(e,r){let i,o,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:40,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:-1,d=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];if(!(t.MIN_VERSION<=l&&l<=c&&c<=t.MAX_VERSION)||u<-1||u>7)throw new RangeError("Invalid value");for(i=l;;i++){const n=8*t.getNumDataCodewords(i,r),s=a.getTotalBits(e,i);if(s<=n){o=s;break}if(i>=c)throw new RangeError("Data too long")}for(const n of[t.Ecc.MEDIUM,t.Ecc.QUARTILE,t.Ecc.HIGH])d&&o<=8*t.getNumDataCodewords(i,n)&&(r=n);let h=[];for(const t of e){n(t.mode.modeBits,4,h),n(t.numChars,t.mode.numCharCountBits(i),h);for(const e of t.getData())h.push(e)}s(h.length==o);const f=8*t.getNumDataCodewords(i,r);s(h.length<=f),n(0,Math.min(4,f-h.length),h),n(0,(8-h.length%8)%8,h),s(h.length%8==0);for(let t=236;h.length<f;t^=253)n(t,8,h);let m=[];for(;8*m.length<h.length;)m.push(0);return h.forEach(((e,t)=>m[t>>>3]|=e<<7-(7&t))),new t(i,r,m,u)}getModule(e,t){return 0<=e&&e<this.size&&0<=t&&t<this.size&&this.modules[t][e]}getModules(){return this.modules}drawFunctionPatterns(){for(let n=0;n<this.size;n++)this.setFunctionModule(6,n,n%2==0),this.setFunctionModule(n,6,n%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const e=this.getAlignmentPatternPositions(),t=e.length;for(let n=0;n<t;n++)for(let r=0;r<t;r++)0==n&&0==r||0==n&&r==t-1||n==t-1&&0==r||this.drawAlignmentPattern(e[n],e[r]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(e){const t=this.errorCorrectionLevel.formatBits<<3|e;let n=t;for(let r=0;r<10;r++)n=n<<1^1335*(n>>>9);const i=21522^(t<<10|n);s(i>>>15==0);for(let s=0;s<=5;s++)this.setFunctionModule(8,s,r(i,s));this.setFunctionModule(8,7,r(i,6)),this.setFunctionModule(8,8,r(i,7)),this.setFunctionModule(7,8,r(i,8));for(let s=9;s<15;s++)this.setFunctionModule(14-s,8,r(i,s));for(let s=0;s<8;s++)this.setFunctionModule(this.size-1-s,8,r(i,s));for(let s=8;s<15;s++)this.setFunctionModule(8,this.size-15+s,r(i,s));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let e=this.version;for(let n=0;n<12;n++)e=e<<1^7973*(e>>>11);const t=this.version<<12|e;s(t>>>18==0);for(let n=0;n<18;n++){const e=r(t,n),s=this.size-11+n%3,i=Math.floor(n/3);this.setFunctionModule(s,i,e),this.setFunctionModule(i,s,e)}}drawFinderPattern(e,t){for(let n=-4;n<=4;n++)for(let r=-4;r<=4;r++){const s=Math.max(Math.abs(r),Math.abs(n)),i=e+r,a=t+n;0<=i&&i<this.size&&0<=a&&a<this.size&&this.setFunctionModule(i,a,2!=s&&4!=s)}}drawAlignmentPattern(e,t){for(let n=-2;n<=2;n++)for(let r=-2;r<=2;r++)this.setFunctionModule(e+r,t+n,1!=Math.max(Math.abs(r),Math.abs(n)))}setFunctionModule(e,t,n){this.modules[t][e]=n,this.isFunction[t][e]=!0}addEccAndInterleave(e){const n=this.version,r=this.errorCorrectionLevel;if(e.length!=t.getNumDataCodewords(n,r))throw new RangeError("Invalid argument");const i=t.NUM_ERROR_CORRECTION_BLOCKS[r.ordinal][n],a=t.ECC_CODEWORDS_PER_BLOCK[r.ordinal][n],o=Math.floor(t.getNumRawDataModules(n)/8),l=i-o%i,c=Math.floor(o/i);let u=[];const d=t.reedSolomonComputeDivisor(a);for(let s=0,f=0;s<i;s++){let n=e.slice(f,f+c-a+(s<l?0:1));f+=n.length;const r=t.reedSolomonComputeRemainder(n,d);s<l&&n.push(0),u.push(n.concat(r))}let h=[];for(let t=0;t<u[0].length;t++)u.forEach(((e,n)=>{(t!=c-a||n>=l)&&h.push(e[t])}));return s(h.length==o),h}drawCodewords(e){if(e.length!=Math.floor(t.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let n=0;for(let t=this.size-1;t>=1;t-=2){6==t&&(t=5);for(let s=0;s<this.size;s++)for(let i=0;i<2;i++){const a=t-i,o=0==(t+1&2)?this.size-1-s:s;!this.isFunction[o][a]&&n<8*e.length&&(this.modules[o][a]=r(e[n>>>3],7-(7&n)),n++)}}s(n==8*e.length)}applyMask(e){if(e<0||e>7)throw new RangeError("Mask value out of range");for(let t=0;t<this.size;t++)for(let n=0;n<this.size;n++){let r;switch(e){case 0:r=(n+t)%2==0;break;case 1:r=t%2==0;break;case 2:r=n%3==0;break;case 3:r=(n+t)%3==0;break;case 4:r=(Math.floor(n/3)+Math.floor(t/2))%2==0;break;case 5:r=n*t%2+n*t%3==0;break;case 6:r=(n*t%2+n*t%3)%2==0;break;case 7:r=((n+t)%2+n*t%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[t][n]&&r&&(this.modules[t][n]=!this.modules[t][n])}}getPenaltyScore(){let e=0;for(let s=0;s<this.size;s++){let n=!1,r=0,i=[0,0,0,0,0,0,0];for(let a=0;a<this.size;a++)this.modules[s][a]==n?(r++,5==r?e+=t.PENALTY_N1:r>5&&e++):(this.finderPenaltyAddHistory(r,i),n||(e+=this.finderPenaltyCountPatterns(i)*t.PENALTY_N3),n=this.modules[s][a],r=1);e+=this.finderPenaltyTerminateAndCount(n,r,i)*t.PENALTY_N3}for(let s=0;s<this.size;s++){let n=!1,r=0,i=[0,0,0,0,0,0,0];for(let a=0;a<this.size;a++)this.modules[a][s]==n?(r++,5==r?e+=t.PENALTY_N1:r>5&&e++):(this.finderPenaltyAddHistory(r,i),n||(e+=this.finderPenaltyCountPatterns(i)*t.PENALTY_N3),n=this.modules[a][s],r=1);e+=this.finderPenaltyTerminateAndCount(n,r,i)*t.PENALTY_N3}for(let s=0;s<this.size-1;s++)for(let n=0;n<this.size-1;n++){const r=this.modules[s][n];r==this.modules[s][n+1]&&r==this.modules[s+1][n]&&r==this.modules[s+1][n+1]&&(e+=t.PENALTY_N2)}let n=0;for(const t of this.modules)n=t.reduce(((e,t)=>e+(t?1:0)),n);const r=this.size*this.size,i=Math.ceil(Math.abs(20*n-10*r)/r)-1;return s(0<=i&&i<=9),e+=i*t.PENALTY_N4,s(0<=e&&e<=2568888),e}getAlignmentPatternPositions(){if(1==this.version)return[];{const e=Math.floor(this.version/7)+2,t=32==this.version?26:2*Math.ceil((4*this.version+4)/(2*e-2));let n=[6];for(let r=this.size-7;n.length<e;r-=t)n.splice(1,0,r);return n}}static getNumRawDataModules(e){if(e<t.MIN_VERSION||e>t.MAX_VERSION)throw new RangeError("Version number out of range");let n=(16*e+128)*e+64;if(e>=2){const t=Math.floor(e/7)+2;n-=(25*t-10)*t-55,e>=7&&(n-=36)}return s(208<=n&&n<=29648),n}static getNumDataCodewords(e,n){return Math.floor(t.getNumRawDataModules(e)/8)-t.ECC_CODEWORDS_PER_BLOCK[n.ordinal][e]*t.NUM_ERROR_CORRECTION_BLOCKS[n.ordinal][e]}static reedSolomonComputeDivisor(e){if(e<1||e>255)throw new RangeError("Degree out of range");let n=[];for(let t=0;t<e-1;t++)n.push(0);n.push(1);let r=1;for(let s=0;s<e;s++){for(let e=0;e<n.length;e++)n[e]=t.reedSolomonMultiply(n[e],r),e+1<n.length&&(n[e]^=n[e+1]);r=t.reedSolomonMultiply(r,2)}return n}static reedSolomonComputeRemainder(e,n){let r=n.map((e=>0));for(const s of e){const e=s^r.shift();r.push(0),n.forEach(((n,s)=>r[s]^=t.reedSolomonMultiply(n,e)))}return r}static reedSolomonMultiply(e,t){if(e>>>8!=0||t>>>8!=0)throw new RangeError("Byte out of range");let n=0;for(let r=7;r>=0;r--)n=n<<1^285*(n>>>7),n^=(t>>>r&1)*e;return s(n>>>8==0),n}finderPenaltyCountPatterns(e){const t=e[1];s(t<=3*this.size);const n=t>0&&e[2]==t&&e[3]==3*t&&e[4]==t&&e[5]==t;return(n&&e[0]>=4*t&&e[6]>=t?1:0)+(n&&e[6]>=4*t&&e[0]>=t?1:0)}finderPenaltyTerminateAndCount(e,t,n){return e&&(this.finderPenaltyAddHistory(t,n),t=0),t+=this.size,this.finderPenaltyAddHistory(t,n),this.finderPenaltyCountPatterns(n)}finderPenaltyAddHistory(e,t){0==t[0]&&(e+=this.size),t.pop(),t.unshift(e)}};t.MIN_VERSION=1,t.MAX_VERSION=40,t.PENALTY_N1=3,t.PENALTY_N2=3,t.PENALTY_N3=40,t.PENALTY_N4=10,t.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],t.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]];function n(e,t,n){if(t<0||t>31||e>>>t!=0)throw new RangeError("Value out of range");for(let r=t-1;r>=0;r--)n.push(e>>>r&1)}function r(e,t){return 0!=(e>>>t&1)}function s(e){if(!e)throw new Error("Assertion error")}e.QrCode=t;const i=class e{constructor(e,t,n){if(this.mode=e,this.numChars=t,this.bitData=n,t<0)throw new RangeError("Invalid argument");this.bitData=n.slice()}static makeBytes(t){let r=[];for(const e of t)n(e,8,r);return new e(e.Mode.BYTE,t.length,r)}static makeNumeric(t){if(!e.isNumeric(t))throw new RangeError("String contains non-numeric characters");let r=[];for(let e=0;e<t.length;){const s=Math.min(t.length-e,3);n(parseInt(t.substring(e,e+s),10),3*s+1,r),e+=s}return new e(e.Mode.NUMERIC,t.length,r)}static makeAlphanumeric(t){if(!e.isAlphanumeric(t))throw new RangeError("String contains unencodable characters in alphanumeric mode");let r,s=[];for(r=0;r+2<=t.length;r+=2){let i=45*e.ALPHANUMERIC_CHARSET.indexOf(t.charAt(r));i+=e.ALPHANUMERIC_CHARSET.indexOf(t.charAt(r+1)),n(i,11,s)}return r<t.length&&n(e.ALPHANUMERIC_CHARSET.indexOf(t.charAt(r)),6,s),new e(e.Mode.ALPHANUMERIC,t.length,s)}static makeSegments(t){return""==t?[]:e.isNumeric(t)?[e.makeNumeric(t)]:e.isAlphanumeric(t)?[e.makeAlphanumeric(t)]:[e.makeBytes(e.toUtf8ByteArray(t))]}static makeEci(t){let r=[];if(t<0)throw new RangeError("ECI assignment value out of range");if(t<128)n(t,8,r);else if(t<16384)n(2,2,r),n(t,14,r);else{if(!(t<1e6))throw new RangeError("ECI assignment value out of range");n(6,3,r),n(t,21,r)}return new e(e.Mode.ECI,0,r)}static isNumeric(t){return e.NUMERIC_REGEX.test(t)}static isAlphanumeric(t){return e.ALPHANUMERIC_REGEX.test(t)}getData(){return this.bitData.slice()}static getTotalBits(e,t){let n=0;for(const r of e){const e=r.mode.numCharCountBits(t);if(r.numChars>=1<<e)return 1/0;n+=4+e+r.bitData.length}return n}static toUtf8ByteArray(e){e=encodeURI(e);let t=[];for(let n=0;n<e.length;n++)"%"!=e.charAt(n)?t.push(e.charCodeAt(n)):(t.push(parseInt(e.substring(n+1,n+3),16)),n+=2);return t}};i.NUMERIC_REGEX=/^[0-9]*$/,i.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,i.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let a=i;e.QrSegment=i})(pV||(pV={})),(e=>{let t;(e=>{const t=class{constructor(e,t){this.ordinal=e,this.formatBits=t}};t.LOW=new t(0,1),t.MEDIUM=new t(1,0),t.QUARTILE=new t(2,3),t.HIGH=new t(3,2);e.Ecc=t})(t=e.QrCode||(e.QrCode={}))})(pV||(pV={})),(e=>{let t;(e=>{const t=class{constructor(e,t){this.modeBits=e,this.numBitsCharCount=t}numCharCountBits(e){return this.numBitsCharCount[Math.floor((e+7)/17)]}};t.NUMERIC=new t(1,[10,12,14]),t.ALPHANUMERIC=new t(2,[9,11,13]),t.BYTE=new t(4,[8,16,16]),t.KANJI=new t(8,[8,10,12]),t.ECI=new t(7,[0,0,0]);e.Mode=t})(t=e.QrSegment||(e.QrSegment={}))})(pV||(pV={}));var kV=pV,NV={L:kV.QrCode.Ecc.LOW,M:kV.QrCode.Ecc.MEDIUM,Q:kV.QrCode.Ecc.QUARTILE,H:kV.QrCode.Ecc.HIGH},SV=128,EV="L",jV="#FFFFFF",CV="#000000",TV=!1,AV=1;function IV(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=[];return e.forEach((function(e,r){let s=null;e.forEach((function(i,a){if(!i&&null!==s)return n.push(`M${s+t} ${r+t}h${a-s}v1H${s+t}z`),void(s=null);if(a!==e.length-1)i&&null===s&&(s=a);else{if(!i)return;null===s?n.push(`M${a+t},${r+t} h1v1H${a+t}z`):n.push(`M${s+t},${r+t} h${a+1-s}v1H${s+t}z`)}}))})),n.join("")}function MV(e,t){return e.slice().map(((e,n)=>n<t.y||n>=t.y+t.h?e:e.map(((e,n)=>(n<t.x||n>=t.x+t.w)&&e))))}function PV(e){let{value:t,level:n,minVersion:s,includeMargin:i,marginSize:a,imageSettings:o,size:l,boostLevel:c}=e,u=r.useMemo((()=>{const e=(Array.isArray(t)?t:[t]).reduce(((e,t)=>(e.push(...kV.QrSegment.makeSegments(t)),e)),[]);return kV.QrCode.encodeSegments(e,NV[n],s,void 0,void 0,c)}),[t,n,s,c]);const{cells:d,margin:h,numCells:f,calculatedImageSettings:m}=r.useMemo((()=>{let e=u.getModules();const t=function(e,t){return null!=t?Math.max(Math.floor(t),0):e?4:0}(i,a),n=e.length+2*t,r=function(e,t,n,r){if(null==r)return null;const s=e.length+2*n,i=Math.floor(.1*t),a=s/t,o=(r.width||i)*a,l=(r.height||i)*a,c=null==r.x?e.length/2-o/2:r.x*a,u=null==r.y?e.length/2-l/2:r.y*a,d=null==r.opacity?1:r.opacity;let h=null;if(r.excavate){let e=Math.floor(c),t=Math.floor(u);h={x:e,y:t,w:Math.ceil(o+c-e),h:Math.ceil(l+u-t)}}return{x:c,y:u,h:l,w:o,excavation:h,opacity:d,crossOrigin:r.crossOrigin}}(e,l,t,o);return{cells:e,margin:t,numCells:n,calculatedImageSettings:r}}),[u,l,o,i,a]);return{qrcode:u,margin:h,cells:d,numCells:f,calculatedImageSettings:m}}var RV=function(){try{(new Path2D).addPath(new Path2D)}catch(hF){return!1}return!0}(),LV=r.forwardRef((function(e,t){const n=e,{value:s,size:i=SV,level:a=EV,bgColor:o=jV,fgColor:l=CV,includeMargin:c=TV,minVersion:u=AV,boostLevel:d,marginSize:h,imageSettings:f}=n,m=_V(n,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:p}=m,g=_V(m,["style"]),y=null==f?void 0:f.src,v=r.useRef(null),x=r.useRef(null),b=r.useCallback((e=>{v.current=e,"function"===typeof t?t(e):t&&(t.current=e)}),[t]),[w,_]=r.useState(!1),{margin:k,cells:N,numCells:S,calculatedImageSettings:E}=PV({value:s,level:a,minVersion:u,boostLevel:d,includeMargin:c,marginSize:h,imageSettings:f,size:i});r.useEffect((()=>{if(null!=v.current){const e=v.current,t=e.getContext("2d");if(!t)return;let n=N;const r=x.current,s=null!=E&&null!==r&&r.complete&&0!==r.naturalHeight&&0!==r.naturalWidth;s&&null!=E.excavation&&(n=MV(N,E.excavation));const a=window.devicePixelRatio||1;e.height=e.width=i*a;const c=i/S*a;t.scale(c,c),t.fillStyle=o,t.fillRect(0,0,S,S),t.fillStyle=l,RV?t.fill(new Path2D(IV(n,k))):N.forEach((function(e,n){e.forEach((function(e,r){e&&t.fillRect(r+k,n+k,1,1)}))})),E&&(t.globalAlpha=E.opacity),s&&t.drawImage(r,E.x+k,E.y+k,E.w,E.h)}})),r.useEffect((()=>{_(!1)}),[y]);const j=wV({height:i,width:i},p);let C=null;return null!=y&&(C=r.createElement("img",{src:y,key:y,style:{display:"none"},onLoad:()=>{_(!0)},ref:x,crossOrigin:null==E?void 0:E.crossOrigin})),r.createElement(r.Fragment,null,r.createElement("canvas",wV({style:j,height:i,width:i,ref:b,role:"img"},g)),C)}));LV.displayName="QRCodeCanvas",r.forwardRef((function(e,t){const n=e,{value:s,size:i=SV,level:a=EV,bgColor:o=jV,fgColor:l=CV,includeMargin:c=TV,minVersion:u=AV,boostLevel:d,title:h,marginSize:f,imageSettings:m}=n,p=_V(n,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:g,cells:y,numCells:v,calculatedImageSettings:x}=PV({value:s,level:a,minVersion:u,boostLevel:d,includeMargin:c,marginSize:f,imageSettings:m,size:i});let b=y,w=null;null!=m&&null!=x&&(null!=x.excavation&&(b=MV(y,x.excavation)),w=r.createElement("image",{href:m.src,height:x.h,width:x.w,x:x.x+g,y:x.y+g,preserveAspectRatio:"none",opacity:x.opacity,crossOrigin:x.crossOrigin}));const _=IV(b,g);return r.createElement("svg",wV({height:i,width:i,viewBox:`0 0 ${v} ${v}`,ref:t,role:"img"},p),!!h&&r.createElement("title",null,h),r.createElement("path",{fill:o,d:`M0,0 h${v}v${v}H0z`,shapeRendering:"crispEdges"}),r.createElement("path",{fill:l,d:_,shapeRendering:"crispEdges"}),w)})).displayName="QRCodeSVG";const DV=Bj({title:"Visitor Logs",icon:(0,Jt.jsx)(ox,{size:24}),fullWidth:!0})((function(){const[e,t]=(0,r.useState)([]),[n,s]=(0,r.useState)(!0),[i,a]=(0,r.useState)(""),[o,l]=(0,r.useState)(!1),[c,u]=(0,r.useState)(null),[d,h]=(0,r.useState)(null),[f,m]=(0,r.useState)(""),[p,g]=(0,r.useState)(new Date),[y,v]=(0,r.useState)({}),[x,b]=(0,r.useState)({}),[w,_]=(0,r.useState)(Date.now()),[k,N]=(0,r.useState)(0),[S,E]=(0,r.useState)(0),[j,C]=(0,r.useState)("created_at"),[T,A]=(0,r.useState)("desc"),[I,M]=(0,r.useState)(0);(0,r.useEffect)((()=>{const e=setInterval((()=>{g(new Date)}),1e3);return()=>clearInterval(e)}),[]);const P=p.toLocaleDateString(),R=p.toLocaleTimeString("en-US",{hour:"numeric",minute:"numeric",second:"numeric",hour12:!0});(0,r.useEffect)((()=>{document.title="Visitor Logs",O();const e=setInterval(O,6e5);return()=>clearInterval(e)}),[]);const L=(0,r.useCallback)((async e=>{if(y[e])return y[e];try{const t=await Py(Cg(Cv,"users",e));if(t.exists()){const n=t.data(),r=n.firstName&&n.lastName?`${n.firstName} ${n.lastName}`:n.name||n.username||"Unknown";return v((t=>({...t,[e]:{name:r,data:n}}))),{name:r,data:n}}return null}catch(KV){return console.error("Error fetching user data:",KV),null}}),[y]),D=(0,r.useCallback)((async e=>{if(x[e])return x[e];try{const t=await Py(Cg(Cv,"guards",e));if(t.exists()){const n=t.data(),r=n.name||n.username||"Unknown Guard";return b((t=>({...t,[e]:{name:r,data:n}}))),{name:r,data:n}}return null}catch(KV){return console.error("Error fetching guard data:",KV),null}}),[x]),O=async()=>{s(!0);try{const e=py(jg(Cv,"visitor_qr_codes"),by("created_at","desc")),n=await Ly(e),r=py(jg(Cv,"visitor_logs")),s=await Ly(r),i={};s.docs.forEach((e=>{const t=e.data();t.qr_code_id&&(i[t.qr_code_id]={scanned_by_guard:t.scanned_by_guard,scan_timestamp:t.scan_timestamp})}));const a=n.docs.map((e=>{const t=e.data(),n=i[e.id]||{};return{id:e.id,...t,scanned_by:n.scanned_by_guard||t.scanned_by,scanned_at:n.scan_timestamp||t.scanned_at}})),o=a.filter((e=>e.created_by)).map((e=>L(e.created_by))),l=a.filter((e=>e.scanned_by)).map((e=>D(e.scanned_by)));await Promise.all([...o,...l]);const c=new Date;c.setHours(0,0,0,0);a.filter((e=>{if(!e.visit_date&&!e.created_at)return!1;if(e.visit_date&&"string"===typeof e.visit_date)try{const t=e.visit_date.split("/");if(3===t.length){return new Date(t[2],t[1]-1,t[0])>=c}}catch(hF){console.error("Error parsing visit date:",hF)}if(e.visit_date&&e.visit_date.seconds){return new Date(1e3*e.visit_date.seconds)>=c}if(e.created_at&&e.created_at.seconds){return new Date(1e3*e.created_at.seconds)>=c}return!1})).length;const u=a.filter((e=>e.scanned_at)).length,d=(a.length>0&&Math.round(u/a.length*100),new Date),h=d.getMonth(),f=d.getFullYear(),m=a.filter((e=>{if(!e.visit_date&&!e.created_at)return!1;if(e.visit_date&&"string"===typeof e.visit_date)try{const t=e.visit_date.split("/");if(3===t.length){const e=new Date(t[2],t[1]-1,t[0]);return e.getMonth()===h&&e.getFullYear()===f}}catch(hF){console.error("Error parsing visit date:",hF)}if(e.visit_date&&e.visit_date.seconds){const t=new Date(1e3*e.visit_date.seconds);return t.getMonth()===h&&t.getFullYear()===f}if(e.created_at&&e.created_at.seconds){const t=new Date(1e3*e.created_at.seconds);return t.getMonth()===h&&t.getFullYear()===f}return!1})).length,p=a.filter((e=>e.scanned_by&&e.scanned_at)).length;N(m),E(p),t(a)}catch(KV){Ut.error("Error fetching visitors: "+KV.message)}finally{s(!1)}},F=e=>{if(!e)return{date:"N/A",time:""};if(e.seconds&&e.nanoseconds){const t=new Date(1e3*e.seconds);return{date:t.toLocaleDateString(),time:t.toLocaleTimeString("en-US",{hour:"numeric",minute:"numeric",hour12:!0})}}if("string"===typeof e)try{const t=e.split("/");if(3===t.length){const e=new Date(t[2],t[1]-1,t[0]);if(!isNaN(e.getTime()))return{date:e.toLocaleDateString(),time:"12:00 PM"}}const n=new Date(e);if(!isNaN(n.getTime()))return{date:n.toLocaleDateString(),time:n.toLocaleTimeString("en-US",{hour:"numeric",minute:"numeric",hour12:!0})}}catch(hF){console.error("Error parsing date string:",hF)}return{date:"Invalid date",time:""}},V=e=>{var t;return e?(null===(t=y[e])||void 0===t?void 0:t.name)||"Loading...":"Unknown"},z=[...e.filter((e=>{var t,n,r,s;const a=((null===(t=e.first_name)||void 0===t?void 0:t.toLowerCase())||"").includes(i.toLowerCase())||((null===(n=e.last_name)||void 0===n?void 0:n.toLowerCase())||"").includes(i.toLowerCase())||((null===(r=e.contact)||void 0===r?void 0:r.toLowerCase())||"").includes(i.toLowerCase())||((null===(s=e.purpose)||void 0===s?void 0:s.toLowerCase())||"").includes(i.toLowerCase());let o=!0;if(f){o=(e.visit_date?new Date(1e3*e.visit_date.seconds).toDateString():e.created_at?new Date(1e3*e.created_at.seconds).toDateString():"")===new Date(f).toDateString()}return a&&o}))].sort(((e,t)=>{var n,r,s,i,a,o;switch(j){case"name":const l=`${e.first_name} ${e.last_name}`.toLowerCase(),c=`${t.first_name} ${t.last_name}`.toLowerCase();return"asc"===T?l.localeCompare(c):c.localeCompare(l);case"visit_date":const u=(null===(n=e.visit_date)||void 0===n?void 0:n.seconds)||(null===(r=e.created_at)||void 0===r?void 0:r.seconds)||0,d=(null===(s=t.visit_date)||void 0===s?void 0:s.seconds)||(null===(i=t.created_at)||void 0===i?void 0:i.seconds)||0;return"asc"===T?u-d:d-u;case"status":const h=e.scanned_at?1:0,f=t.scanned_at?1:0;return"asc"===T?h-f:f-h;default:const m=(null===(a=e.created_at)||void 0===a?void 0:a.seconds)||0,p=(null===(o=t.created_at)||void 0===o?void 0:o.seconds)||0;return"asc"===T?m-p:p-m}})),U=e=>{if(e.scanned_at)return"success";if(e.visit_date&&"object"===typeof e.visit_date&&e.visit_date.seconds){const t=new Date(1e3*e.visit_date.seconds),n=new Date;if(n.setHours(0,0,0,0),t>=n)return"primary"}return"warning"},B=e=>{if(e.scanned_at)return"Scanned";if(e.visit_date&&"object"===typeof e.visit_date&&e.visit_date.seconds){const t=new Date(1e3*e.visit_date.seconds),n=new Date;if(n.setHours(0,0,0,0),t>=n)return"Upcoming"}return"Pending"};return(0,Jt.jsxs)("div",{className:"space-y-6",children:[(0,Jt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[(0,Jt.jsx)(Fj,{title:"This Month's Visitors",value:k,icon:(0,Jt.jsx)(wx,{size:24}),iconColor:"primary",description:"Total visitors this month"}),(0,Jt.jsx)(Fj,{title:"Guard Scanned",value:S,icon:(0,Jt.jsx)(bx,{size:24}),iconColor:"success",description:"Visitors scanned by guards",trend:"up",trendValue:`${Math.round(S/(k||1)*100)}%`,trendText:"scan rate"}),(0,Jt.jsx)(Fj,{title:"Current Time",value:R,icon:(0,Jt.jsx)(Gv,{size:24}),iconColor:"secondary",description:`Current date: ${P}`})]}),(0,Jt.jsxs)("div",{className:"flex flex-col md:flex-row justify-between gap-4 mb-6",children:[(0,Jt.jsx)("div",{className:"w-full md:w-1/2",children:(0,Jt.jsx)(Uj,{placeholder:"Search visitors by name, purpose, or contact...",value:i,onChange:e=>a(e.target.value)})}),(0,Jt.jsxs)("div",{className:"w-full md:w-1/2 flex gap-2",children:[(0,Jt.jsx)("input",{type:"date",value:f,onChange:e=>m(e.target.value),className:"block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm focus:border-primary dark:focus:border-secondary focus:ring focus:ring-primary/20 dark:focus:ring-secondary/20 dark:bg-gray-700 dark:text-white"}),(0,Jt.jsx)(Ij,{variant:"outline",onClick:()=>m(""),disabled:!f,children:"Clear Filter"}),(0,Jt.jsxs)("button",{onClick:()=>{M((e=>e+1))},disabled:n,className:`flex items-center px-4 py-2 rounded-lg text-sm ${n?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-blue-50 text-blue-600 hover:bg-blue-100"} transition-colors`,children:[(0,Jt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-2 "+(n?"animate-spin":""),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Jt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),n?"Refreshing...":"Refresh Data"]})]})]}),(0,Jt.jsxs)(Cj,{children:[(0,Jt.jsx)(Tj,{title:"Visitor Logs",icon:(0,Jt.jsx)(ox,{size:20})}),(0,Jt.jsx)(Aj,{children:n?(0,Jt.jsx)("div",{className:"flex justify-center items-center p-8",children:(0,Jt.jsx)(ux,{className:"animate-spin text-primary h-8 w-8"})}):(0,Jt.jsxs)(Jt.Fragment,{children:[(0,Jt.jsxs)(Mj,{children:[(0,Jt.jsx)(Pj,{children:(0,Jt.jsxs)("tr",{children:[(0,Jt.jsx)(Oj,{children:"Visitor Name"}),(0,Jt.jsx)(Oj,{children:"Contact"}),(0,Jt.jsx)(Oj,{children:"Purpose"}),(0,Jt.jsx)(Oj,{children:"Created By"}),(0,Jt.jsx)(Oj,{children:"Visit Date"}),(0,Jt.jsx)(Oj,{children:"Status"}),(0,Jt.jsx)(Oj,{children:"Actions"})]})}),(0,Jt.jsx)(Rj,{children:0===z.length?(0,Jt.jsx)(Lj,{children:(0,Jt.jsx)(Dj,{colSpan:7,className:"text-center py-6",children:"No visitors found"})}):z.map((e=>(0,Jt.jsxs)(Lj,{children:[(0,Jt.jsxs)(Dj,{className:"font-medium",children:[e.first_name," ",e.last_name]}),(0,Jt.jsx)(Dj,{children:e.contact||"N/A"}),(0,Jt.jsx)(Dj,{children:e.purpose||"N/A"}),(0,Jt.jsx)(Dj,{children:V(e.created_by)}),(0,Jt.jsx)(Dj,{children:F(e.visit_date||e.created_at).date}),(0,Jt.jsx)(Dj,{children:(0,Jt.jsx)(Vj,{variant:U(e),children:B(e)})}),(0,Jt.jsx)(Dj,{children:(0,Jt.jsxs)(Ij,{variant:"primary",size:"sm",onClick:()=>(e=>{u(e),l(!0)})(e),children:[(0,Jt.jsx)(ox,{className:"mr-1"})," QR Code"]})})]},e.id)))})]}),(0,Jt.jsxs)("div",{className:"mt-4 text-sm text-gray-500 dark:text-gray-400",children:["Showing ",z.length," of ",e.length," visitors"]})]})})]}),(0,Jt.jsx)(zj,{isOpen:o,onClose:()=>l(!1),title:"Visitor QR Code",footer:(0,Jt.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,Jt.jsxs)(Ij,{variant:"outline",onClick:()=>{_(Date.now()),Ut.success("QR Code regenerated with new time signature")},children:[(0,Jt.jsx)(ox,{className:"mr-2"})," Regenerate"]}),(0,Jt.jsxs)(Ij,{variant:"secondary",onClick:()=>{const e=document.getElementById("visitor-qrcode");if(e){const t=e.toDataURL("image/png"),n=document.createElement("a");n.download=`visitor-${c.first_name}-${c.last_name}.png`,n.href=t,n.click()}},children:[(0,Jt.jsx)(Xv,{className:"mr-2"})," Download"]}),(0,Jt.jsxs)(Ij,{variant:"primary",onClick:()=>{const e=document.getElementById("visitor-qrcode");if(e){const t=e.toDataURL("image/png"),n=new window.jspdf.jsPDF;n.addImage(t,"PNG",10,10,190,0),n.save(`visitor-${c.first_name}-${c.last_name}.pdf`)}},children:[(0,Jt.jsx)(ax,{className:"mr-2"})," Print"]})]}),children:c&&(0,Jt.jsxs)("div",{className:"flex flex-col items-center space-y-4",children:[(0,Jt.jsx)("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:(0,Jt.jsx)(LV,{id:"visitor-qrcode",value:JSON.stringify({id:c.id,name:`${c.first_name} ${c.last_name}`,contact:c.contact,purpose:c.purpose,visit_date:c.visit_date?"string"===typeof c.visit_date?c.visit_date:new Date(1e3*c.visit_date.seconds).toISOString():(new Date).toISOString(),timestamp:(new Date).toISOString(),key:w}),size:200,level:"H",includeMargin:!0})}),(0,Jt.jsxs)("div",{className:"text-center",children:[(0,Jt.jsxs)("h3",{className:"font-semibold text-lg",children:[c.first_name," ",c.last_name]}),(0,Jt.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Contact: ",c.contact||"N/A"]}),(0,Jt.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Purpose: ",c.purpose||"N/A"]}),(0,Jt.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Created: ",F(c.created_at).date," ",F(c.created_at).time]}),(0,Jt.jsxs)("div",{className:"mt-2 py-2 border-t border-gray-200 dark:border-gray-700",children:[(0,Jt.jsxs)("p",{className:"text-sm font-medium",children:["Status: "," ",(0,Jt.jsx)(Vj,{variant:U(c),children:B(c)})]}),c.scanned_at&&(0,Jt.jsxs)(Jt.Fragment,{children:[(0,Jt.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Scanned at: ",F(c.scanned_at).date," ",F(c.scanned_at).time]}),(0,Jt.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Scanned by: ",(e=>{var t;return e?(null===(t=x[e])||void 0===t?void 0:t.name)||"Loading...":"Not scanned"})(c.scanned_by)]})]}),(0,Jt.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Visit Date: ",F(c.visit_date||c.created_at).date]})]})]})]})})]})})),OV=()=>{const[e,t]=(0,r.useState)([]),[n,s]=(0,r.useState)([]),[i,a]=(0,r.useState)(!0),[o,l]=(0,r.useState)("All"),[c,u]=(0,r.useState)(""),[d,h]=(0,r.useState)(!1),[f,m]=(0,r.useState)(null),[p,g]=(0,r.useState)(""),[y,v]=(0,r.useState)(!1),[x,b]=(0,r.useState)(!1),[w,_]=(0,r.useState)("1"),[k,N]=(0,r.useState)(""),[S,E]=(0,r.useState)(!0),[j,C]=(0,r.useState)(!1),T={1:20,2:25,3:15,4:22,5:18};(0,r.useEffect)((()=>{document.title="Lot Monitoring",I(),A()}),[]);const A=async()=>{try{const e=py(jg(Cv,"users")),t=(await Ly(e)).docs.filter((e=>"Homeowner"===e.data().role)).map((e=>({id:e.id,username:e.data().username||"Unknown",firstName:e.data().firstName||"",lastName:e.data().lastName||"",house_no:e.data().house_no||null,email:e.data().email||""})));s(t)}catch(KV){console.error("Error fetching users:",KV),Ut.error("Failed to fetch user data: "+KV.message)}},I=async()=>{try{a(!0);const e=[];Object.keys(T).forEach((t=>{for(let n=1;n<=T[t];n++){const r=`B${t}-L${n.toString().padStart(2,"0")}`,s=100*parseInt(t)+n;e.push({id:r,block:parseInt(t),lot:n,house_no:s,status:"Vacant",house_owner:null,owner_id:null,houseModel:"Standard",created_at:null})}}));const n=py(jg(Cv,"users")),r=await Ly(n),s={};r.docs.forEach((e=>{const t=e.data();t.house_no&&(s[t.house_no]={owner_id:e.id,house_owner:t.username||`${t.firstName||""} ${t.lastName||""}`.trim()||"Unknown",houseModel:t.houseModel||"Standard"})}));for(let t of e)s[t.house_no]&&(t.house_owner=s[t.house_no].house_owner,t.owner_id=s[t.house_no].owner_id,t.status="Occupied",t.houseModel=s[t.house_no].houseModel);try{const t=py(jg(Cv,"lots"));(await Ly(t)).docs.forEach((t=>{const n=t.data(),r=n.house_no;if(r){const t=e.findIndex((e=>e.house_no===r));-1!==t&&(e[t]={...e[t],status:n.status||e[t].status,description:n.description,price:n.price,size:n.size,created_at:n.created_at})}}))}catch(KV){console.log("Lots collection may not exist yet:",KV)}t(e)}catch(KV){console.error("Error fetching lots:",KV),Ut.error("Failed to fetch lot data: "+KV.message)}finally{a(!1)}},M=("All"===o?e:e.filter((e=>e.status===o))).filter((e=>{var t,n;return(null===(t=e.house_no)||void 0===t?void 0:t.toString().toLowerCase().includes(c.toLowerCase()))||(null===(n=e.house_owner)||void 0===n?void 0:n.toString().toLowerCase().includes(c.toLowerCase()))||`Block ${e.block} Lot ${e.lot}`.toLowerCase().includes(c.toLowerCase())})),P={};M.forEach((e=>{P[e.block]||(P[e.block]=[]),P[e.block].push(e)}));const R={total:e.length,vacant:e.filter((e=>"Vacant"===e.status)).length,occupied:e.filter((e=>"Occupied"===e.status)).length,forSale:e.filter((e=>"For Sale"===e.status)).length,reserved:e.filter((e=>"Reserved"===e.status)).length};return(0,Jt.jsx)(Cx,{children:(0,Jt.jsxs)("div",{className:"pt-20 px-6 max-w-7xl mx-auto",children:[(0,Jt.jsxs)("div",{className:"bg-white dark:bg-gray-800 shadow-lg rounded-lg p-6 mb-8 border-l-4 border-blue-500",children:[(0,Jt.jsxs)("h1",{className:"text-3xl font-bold text-gray-800 dark:text-white flex items-center",children:[(0,Jt.jsx)(rx,{className:"mr-3 text-blue-500 text-2xl"}),"Lot Monitoring"]}),(0,Jt.jsx)("p",{className:"text-gray-600 dark:text-gray-300 mt-2",children:"Monitor and manage residential lots in Dulalia Homes"})]}),(0,Jt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-5 gap-4 mb-8",children:[(0,Jt.jsx)("div",{className:"bg-white rounded-lg shadow-md p-4 border-l-4 border-blue-500",children:(0,Jt.jsxs)("div",{className:"flex items-center",children:[(0,Jt.jsx)("div",{className:"p-3 bg-blue-100 rounded-full",children:(0,Jt.jsx)(rx,{className:"h-5 w-5 text-blue-600"})}),(0,Jt.jsxs)("div",{className:"ml-3",children:[(0,Jt.jsx)("h2",{className:"text-xs font-medium text-gray-600",children:"Total Lots"}),(0,Jt.jsx)("p",{className:"text-xl font-semibold text-gray-900",children:R.total})]})]})}),(0,Jt.jsx)("div",{className:"bg-white rounded-lg shadow-md p-4 border-l-4 border-green-500",children:(0,Jt.jsxs)("div",{className:"flex items-center",children:[(0,Jt.jsx)("div",{className:"p-3 bg-green-100 rounded-full",children:(0,Jt.jsx)(rx,{className:"h-5 w-5 text-green-600"})}),(0,Jt.jsxs)("div",{className:"ml-3",children:[(0,Jt.jsx)("h2",{className:"text-xs font-medium text-gray-600",children:"Occupied"}),(0,Jt.jsx)("p",{className:"text-xl font-semibold text-gray-900",children:R.occupied})]})]})}),(0,Jt.jsx)("div",{className:"bg-white rounded-lg shadow-md p-4 border-l-4 border-gray-400",children:(0,Jt.jsxs)("div",{className:"flex items-center",children:[(0,Jt.jsx)("div",{className:"p-3 bg-gray-100 rounded-full",children:(0,Jt.jsx)(rx,{className:"h-5 w-5 text-gray-600"})}),(0,Jt.jsxs)("div",{className:"ml-3",children:[(0,Jt.jsx)("h2",{className:"text-xs font-medium text-gray-600",children:"Vacant"}),(0,Jt.jsx)("p",{className:"text-xl font-semibold text-gray-900",children:R.vacant})]})]})}),(0,Jt.jsx)("div",{className:"bg-white rounded-lg shadow-md p-4 border-l-4 border-yellow-500",children:(0,Jt.jsxs)("div",{className:"flex items-center",children:[(0,Jt.jsx)("div",{className:"p-3 bg-yellow-100 rounded-full",children:(0,Jt.jsx)(rx,{className:"h-5 w-5 text-yellow-600"})}),(0,Jt.jsxs)("div",{className:"ml-3",children:[(0,Jt.jsx)("h2",{className:"text-xs font-medium text-gray-600",children:"For Sale"}),(0,Jt.jsx)("p",{className:"text-xl font-semibold text-gray-900",children:R.forSale})]})]})}),(0,Jt.jsx)("div",{className:"bg-white rounded-lg shadow-md p-4 border-l-4 border-purple-500",children:(0,Jt.jsxs)("div",{className:"flex items-center",children:[(0,Jt.jsx)("div",{className:"p-3 bg-purple-100 rounded-full",children:(0,Jt.jsx)(rx,{className:"h-5 w-5 text-purple-600"})}),(0,Jt.jsxs)("div",{className:"ml-3",children:[(0,Jt.jsx)("h2",{className:"text-xs font-medium text-gray-600",children:"Reserved"}),(0,Jt.jsx)("p",{className:"text-xl font-semibold text-gray-900",children:R.reserved})]})]})})]}),(0,Jt.jsx)("div",{className:"bg-white rounded-lg shadow-md p-6 mb-8",children:(0,Jt.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[(0,Jt.jsxs)("div",{className:"relative w-full md:w-1/3",children:[(0,Jt.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,Jt.jsx)(lx,{className:"h-5 w-5 text-gray-400"})}),(0,Jt.jsx)("input",{type:"text",value:c,onChange:e=>u(e.target.value),placeholder:"Search by block, lot, number or owner...",className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]}),(0,Jt.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,Jt.jsx)("select",{value:o,onChange:e=>l(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-md leading-5 bg-white focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm w-32",children:["All","Vacant","Occupied","For Sale","Reserved"].map((e=>(0,Jt.jsx)("option",{value:e,children:e},e)))}),(0,Jt.jsxs)("button",{onClick:()=>I(),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 flex items-center",children:[(0,Jt.jsx)("svg",{className:"h-4 w-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,Jt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Refresh"]}),(0,Jt.jsxs)("button",{onClick:()=>b(!0),className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 flex items-center",children:[(0,Jt.jsx)(xx,{className:"mr-2"})," Add New Lot"]})]})]})}),(0,Jt.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,Jt.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Lot Monitoring Map"}),i?(0,Jt.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,Jt.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):0===M.length?(0,Jt.jsxs)("div",{className:"text-center py-12",children:[(0,Jt.jsx)(rx,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,Jt.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No lots found"}),(0,Jt.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"No lots match your current search and filter criteria."})]}):(0,Jt.jsxs)(Jt.Fragment,{children:[(0,Jt.jsxs)("div",{className:"mb-6 flex flex-wrap gap-4",children:[(0,Jt.jsxs)("div",{className:"flex items-center",children:[(0,Jt.jsx)("div",{className:"w-4 h-4 rounded mr-2 bg-green-500"}),(0,Jt.jsx)("span",{className:"text-sm",children:"Occupied"})]}),(0,Jt.jsxs)("div",{className:"flex items-center",children:[(0,Jt.jsx)("div",{className:"w-4 h-4 rounded mr-2 bg-gray-300"}),(0,Jt.jsx)("span",{className:"text-sm",children:"Vacant"})]}),(0,Jt.jsxs)("div",{className:"flex items-center",children:[(0,Jt.jsx)("div",{className:"w-4 h-4 rounded mr-2 bg-yellow-500"}),(0,Jt.jsx)("span",{className:"text-sm",children:"For Sale"})]}),(0,Jt.jsxs)("div",{className:"flex items-center",children:[(0,Jt.jsx)("div",{className:"w-4 h-4 rounded mr-2 bg-purple-500"}),(0,Jt.jsx)("span",{className:"text-sm",children:"Reserved"})]})]}),Object.keys(P).sort(((e,t)=>parseInt(e)-parseInt(t))).map((e=>(0,Jt.jsxs)("div",{className:"mb-10",children:[(0,Jt.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,Jt.jsxs)("h3",{className:"text-lg font-semibold text-blue-800",children:["Block ",e]}),(0,Jt.jsxs)("span",{className:"text-sm text-gray-500",children:[P[e].length," lots"]})]}),(0,Jt.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-3",children:P[e].sort(((e,t)=>e.lot-t.lot)).map((e=>{let t;switch(e.status){case"Occupied":t="bg-green-500";break;case"For Sale":t="bg-yellow-500";break;case"Reserved":t="bg-purple-500";break;default:t="bg-gray-300"}return(0,Jt.jsxs)("div",{className:"relative p-3 border rounded-lg hover:shadow-md transition-shadow",onClick:()=>{m(e),h(!0),g("")},children:[(0,Jt.jsx)("div",{className:`absolute top-0 right-0 w-3 h-3 rounded-full ${t} m-2`}),(0,Jt.jsx)("div",{className:"mb-2",children:(0,Jt.jsxs)("span",{className:"text-xs font-semibold bg-blue-100 text-blue-800 px-2 py-0.5 rounded",children:["B",e.block,"-L",e.lot.toString().padStart(2,"0")]})}),(0,Jt.jsxs)("div",{className:"flex items-center mb-2",children:[(0,Jt.jsx)("div",{className:"flex-shrink-0 h-8 w-8 flex items-center justify-center rounded-full bg-blue-100",children:(0,Jt.jsx)(rx,{className:"h-4 w-4 text-blue-600"})}),(0,Jt.jsxs)("div",{className:"ml-2",children:[(0,Jt.jsxs)("p",{className:"text-sm font-medium",children:["#",e.house_no]}),(0,Jt.jsx)("p",{className:"text-xs text-gray-500",children:e.houseModel||"Standard"})]})]}),(0,Jt.jsxs)("div",{className:"border-t pt-2",children:[(0,Jt.jsx)("p",{className:"text-xs text-gray-500",children:"Owner"}),(0,Jt.jsx)("p",{className:"text-sm font-medium truncate",children:e.house_owner||"None (Vacant)"}),(0,Jt.jsx)("button",{className:"mt-2 w-full text-xs py-1 rounded hover:bg-opacity-80 flex items-center justify-center "+("Occupied"===e.status?"bg-green-100 text-green-700":"For Sale"===e.status?"bg-yellow-100 text-yellow-700":"Reserved"===e.status?"bg-purple-100 text-purple-700":"bg-blue-100 text-blue-700"),children:"Vacant"===e.status?(0,Jt.jsxs)(Jt.Fragment,{children:[(0,Jt.jsx)(xx,{className:"mr-1 h-3 w-3"}),"Assign"]}):"Occupied"===e.status?(0,Jt.jsxs)(Jt.Fragment,{children:[(0,Jt.jsx)(wx,{className:"mr-1 h-3 w-3"}),"Manage"]}):"For Sale"===e.status?(0,Jt.jsxs)(Jt.Fragment,{children:[(0,Jt.jsx)(mx,{className:"mr-1 h-3 w-3"}),"For Sale"]}):(0,Jt.jsxs)(Jt.Fragment,{children:[(0,Jt.jsx)(Gv,{className:"mr-1 h-3 w-3"}),"Reserved"]})})]})]},e.id)}))})]},e)))]})]}),d&&f&&(0,Jt.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,Jt.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md",children:[(0,Jt.jsxs)("div",{className:"px-6 py-4 border-b flex justify-between items-center",children:[(0,Jt.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Occupied"===f.status?"Manage Occupied Lot":f.house_owner?"Manage Assigned Lot":"Manage Lot Status"}),(0,Jt.jsx)("button",{onClick:()=>h(!1),className:"text-gray-400 hover:text-gray-500 focus:outline-none",children:(0,Jt.jsx)(px,{})})]}),(0,Jt.jsxs)("div",{className:"px-6 py-4",children:[(0,Jt.jsxs)("div",{className:"mb-4",children:[(0,Jt.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Selected Lot"}),(0,Jt.jsxs)("div",{className:"p-3 bg-blue-50 rounded-lg",children:[(0,Jt.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,Jt.jsxs)("span",{className:"font-medium",children:["Block ",f.block,", Lot ",f.lot]}),(0,Jt.jsxs)("span",{className:"px-2 py-1 text-xs rounded-full font-medium bg-blue-100 text-blue-800",children:["#",f.house_no]})]}),(0,Jt.jsxs)("p",{className:"text-sm text-gray-600",children:["Status: ",(0,Jt.jsx)("span",{className:"Occupied"===f.status?"text-green-600":"For Sale"===f.status?"text-yellow-600":"Reserved"===f.status?"text-purple-600":"text-gray-600",children:f.status})]}),f.house_owner&&(0,Jt.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:["Current Owner: ",f.house_owner]})]})]}),"Occupied"===f.status?(0,Jt.jsxs)("div",{className:"mb-4",children:[(0,Jt.jsx)("div",{className:"bg-yellow-50 p-3 rounded-lg border border-yellow-200 mb-3",children:(0,Jt.jsxs)("div",{className:"flex items-start",children:[(0,Jt.jsx)("div",{className:"flex-shrink-0",children:(0,Jt.jsx)("svg",{className:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor",children:(0,Jt.jsx)("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),(0,Jt.jsxs)("div",{className:"ml-3",children:[(0,Jt.jsx)("h3",{className:"text-sm font-medium text-yellow-800",children:"Homeowner Leaving Notice"}),(0,Jt.jsx)("div",{className:"mt-2 text-sm text-yellow-700",children:(0,Jt.jsx)("p",{children:"This action will mark the lot as vacant and remove the current homeowner association. This should only be done when a homeowner is leaving Dulalia Homes."})})]})]})}),(0,Jt.jsx)("button",{type:"button",onClick:()=>g("remove"),className:"w-full py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:"Mark Lot as Vacant (Remove Homeowner)"})]}):(0,Jt.jsxs)(Jt.Fragment,{children:[(0,Jt.jsxs)("div",{className:"mb-4",children:[(0,Jt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Change Lot Status"}),(0,Jt.jsxs)("select",{value:f.status,onChange:e=>{m({...f,status:e.target.value}),"Vacant"!==e.target.value?g("status-change"):g("")},className:"block w-full px-3 py-2 border border-gray-300 rounded-md leading-5 bg-white focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",children:[(0,Jt.jsx)("option",{value:"Vacant",children:"Vacant"}),(0,Jt.jsx)("option",{value:"For Sale",children:"For Sale"}),(0,Jt.jsx)("option",{value:"Reserved",children:"Reserved"})]})]}),"Vacant"===f.status&&(0,Jt.jsxs)("div",{className:"mb-4",children:[(0,Jt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Assign to Homeowner (Optional)"}),(0,Jt.jsxs)("select",{value:p,onChange:e=>g(e.target.value),className:"block w-full px-3 py-2 border border-gray-300 rounded-md leading-5 bg-white focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",children:[(0,Jt.jsx)("option",{value:"",children:"-- Select a homeowner --"}),n.filter((e=>!e.house_no||e.house_no===f.house_no)).map((e=>(0,Jt.jsxs)("option",{value:e.id,children:[e.firstName," ",e.lastName," (",e.username||e.email,")"]},e.id)))]}),(0,Jt.jsx)("p",{className:"mt-2 text-xs text-gray-500",children:"Only showing homeowners who don't already have an assigned lot."})]})]}),(0,Jt.jsxs)("div",{className:"mt-6 flex justify-end space-x-3",children:[(0,Jt.jsx)("button",{onClick:()=>h(!1),className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Cancel"}),(0,Jt.jsx)("button",{onClick:async()=>{if(f){v(!0);try{const e=`B${f.block}-L${f.lot.toString().padStart(2,"0")}`,t=Cg(Cv,"lots",e);if("Occupied"===f.status&&"remove"===p){if(await Dy(t,{status:"Vacant",owner_id:null,house_owner:null,last_updated:Hy()},{merge:!0}),f.owner_id){const e=Cg(Cv,"users",f.owner_id);try{(await Py(e)).exists()&&await Oy(e,{house_no:null,block:null,lot:null,last_updated:Hy()})}catch(KV){console.error("Error updating user record:",KV)}}Ut.success("Lot marked as vacant and homeowner removed")}else if("status-change"===p)await Dy(t,{house_no:f.house_no,block:f.block,lot:f.lot,status:f.status,last_updated:Hy()},{merge:!0}),Ut.success(`Lot status updated to ${f.status}`);else if(p){const e=Cg(Cv,"users",p),n=await Py(e);if(!n.exists())return void Ut.error("Selected user does not exist");await Oy(e,{house_no:f.house_no,block:f.block,lot:f.lot,last_updated:Hy()}),await Dy(t,{house_no:f.house_no,block:f.block,lot:f.lot,status:"Occupied",owner_id:p,house_owner:n.data().username||`${n.data().firstName||""} ${n.data().lastName||""}`.trim()||"Unknown",houseModel:n.data().houseModel||"Standard",last_updated:Hy(),created_at:Hy()},{merge:!0}),Ut.success("Lot assigned to homeowner successfully")}h(!1),I(),A()}catch(KV){console.error("Error updating lot:",KV),Ut.error("Failed to update lot: "+KV.message)}finally{v(!1)}}else Ut.error("No lot selected")},disabled:y||"Vacant"===f.status&&!p&&"remove"!==p,className:"px-4 py-2 rounded-md text-sm font-medium text-white focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 "+(y||"Vacant"===f.status&&!p&&"remove"!==p?"bg-blue-300 cursor-not-allowed":"remove"===p?"bg-red-600 hover:bg-red-700":"bg-blue-600 hover:bg-blue-700"),children:y?(0,Jt.jsxs)(Jt.Fragment,{children:[(0,Jt.jsx)("span",{className:"inline-block animate-spin mr-2",children:"\u27f3"}),"Processing..."]}):"Occupied"===f.status?"Mark as Vacant":"status-change"===p?`Update Status to ${f.status}`:p?"Assign Lot":"Save Changes"})]})]})]})}),x&&(0,Jt.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,Jt.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md",children:[(0,Jt.jsxs)("div",{className:"px-6 py-4 border-b flex justify-between items-center",children:[(0,Jt.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Add New Lot"}),(0,Jt.jsx)("button",{onClick:()=>b(!1),className:"text-gray-400 hover:text-gray-500 focus:outline-none",children:(0,Jt.jsx)(px,{})})]}),(0,Jt.jsxs)("div",{className:"px-6 py-4",children:[(0,Jt.jsxs)("div",{className:"mb-4",children:[(0,Jt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Select Block"}),(0,Jt.jsx)("select",{value:w,onChange:e=>_(e.target.value),className:"block w-full px-3 py-2 border border-gray-300 rounded-md leading-5 bg-white focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",children:Object.keys(T).map((e=>(0,Jt.jsxs)("option",{value:e,children:["Block ",e]},e)))}),(0,Jt.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"Each block has a different layout and maximum number of lots."})]}),(0,Jt.jsxs)("div",{className:"mb-4",children:[(0,Jt.jsxs)("div",{className:"flex items-center",children:[(0,Jt.jsx)("input",{id:"autoLotNumber",name:"autoLotNumber",type:"checkbox",checked:S,onChange:e=>E(e.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,Jt.jsx)("label",{htmlFor:"autoLotNumber",className:"ml-2 block text-sm font-medium text-gray-700",children:"Automatically assign lot number (recommended)"})]}),(0,Jt.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"This will find the next available lot number in the selected block."})]}),!S&&(0,Jt.jsxs)("div",{className:"mb-4",children:[(0,Jt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Lot Number"}),(0,Jt.jsx)("input",{type:"number",value:k,onChange:e=>N(e.target.value),min:"1",max:T[w],className:"block w-full px-3 py-2 border border-gray-300 rounded-md leading-5 bg-white focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:`Enter lot number (1-${T[w]})`}),(0,Jt.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"Manual lot number assignment may cause conflicts if not careful."})]}),(0,Jt.jsxs)("div",{className:"mt-6 flex justify-end space-x-3",children:[(0,Jt.jsx)("button",{onClick:()=>b(!1),className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Cancel"}),(0,Jt.jsx)("button",{onClick:async()=>{C(!0);try{const t=S?(t=>{const n=e.filter((e=>e.block===parseInt(t)));if(0===n.length)return 1;const r=n.map((e=>e.lot)),s=Math.max(...r);for(let e=1;e<=s;e++)if(!r.includes(e))return e;return s+1})(w):parseInt(k);if(t<=0||t>T[w])return Ut.error(`Lot number must be between 1 and ${T[w]}`),void C(!1);const n=parseInt(w);if(e.find((e=>e.block===n&&e.lot===t)))return Ut.error(`Block ${n}, Lot ${t} already exists.`),void C(!1);const r=100*n+t,s=`B${n}-L${t.toString().padStart(2,"0")}`,i=Cg(Cv,"lots",s);await Dy(i,{house_no:r,block:n,lot:t,status:"Vacant",owner_id:null,house_owner:null,houseModel:"Standard",created_at:Hy(),last_updated:Hy()}),Ut.success(`Successfully created new lot: Block ${n}, Lot ${t} (House #${r})`),b(!1),I(),N("")}catch(KV){console.error("Error adding new lot:",KV),Ut.error("Failed to add new lot: "+KV.message)}finally{C(!1)}},disabled:j||!S&&!k,className:"px-4 py-2 rounded-md text-sm font-medium text-white focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 "+(j||!S&&!k?"bg-green-300 cursor-not-allowed":"bg-green-600 hover:bg-green-700"),children:j?(0,Jt.jsxs)(Jt.Fragment,{children:[(0,Jt.jsx)("span",{className:"inline-block animate-spin mr-2",children:"\u27f3"}),"Creating..."]}):"Create New Lot"})]})]})]})})]})})},FV=()=>{try{if(!localStorage.getItem("adminToken"))return!1;const e=localStorage.getItem("adminLastLogin");return!(e&&Date.now()-parseInt(e,10)>864e5)||(localStorage.removeItem("adminToken"),localStorage.removeItem("adminLastLogin"),!1)}catch(KV){return console.error("Auth check error:",KV),!1}},VV=e=>{let{children:t}=e;const[n,s]=r.useState(!0),[i,a]=r.useState(!1);return r.useEffect((()=>{const e=FV();a(e),s(!1)}),[]),n?(0,Jt.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:"Verifying..."}):i?t:(0,Jt.jsx)(ve,{to:"/login",replace:!0})},zV=()=>{const[e,t]=r.useState(!0),[n,s]=r.useState(!1);return r.useEffect((()=>{const e=FV();s(e),t(!1)}),[]),e?(0,Jt.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:"Loading..."}):n?(0,Jt.jsx)(ve,{to:"/admin/dashboard",replace:!0}):(0,Jt.jsx)(ve,{to:"/login",replace:!0})},UV=e=>{let{children:t}=e;const[n,s]=r.useState(!1);return n?(0,Jt.jsx)("div",{className:"flex items-center justify-center min-h-screen text-red-500",children:(0,Jt.jsxs)("div",{children:[(0,Jt.jsx)("h2",{children:"Something went wrong."}),(0,Jt.jsx)("button",{onClick:()=>s(!1),className:"mt-2 px-4 py-2 bg-blue-500 text-white rounded",children:"Try again"})]})}):t};const BV=function(){return(0,Jt.jsx)(en,{children:(0,Jt.jsx)(rn,{children:(0,Jt.jsx)(nt,{children:(0,Jt.jsxs)(an,{children:[" ",(0,Jt.jsx)(Xt,{}),(0,Jt.jsx)(r.Suspense,{fallback:(0,Jt.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:"Loading app..."}),children:(0,Jt.jsx)(UV,{children:(0,Jt.jsxs)(we,{children:[(0,Jt.jsx)(xe,{path:"/",element:(0,Jt.jsx)(zV,{})}),(0,Jt.jsx)(xe,{path:"/login",element:(0,Jt.jsx)(Ex,{})}),(0,Jt.jsx)(xe,{path:"/admin/dashboard",element:(0,Jt.jsx)(VV,{children:(0,Jt.jsx)(CL,{})})}),(0,Jt.jsx)(xe,{path:"/admin/inventory",element:(0,Jt.jsx)(VV,{children:(0,Jt.jsx)(ML,{})})}),(0,Jt.jsx)(xe,{path:"/admin/staff",element:(0,Jt.jsx)(VV,{children:(0,Jt.jsx)(PL,{})})}),(0,Jt.jsx)(xe,{path:"/admin/user-accounts",element:(0,Jt.jsx)(VV,{children:(0,Jt.jsx)(RL,{})})}),(0,Jt.jsx)(xe,{path:"/admin/facility-requests",element:(0,Jt.jsx)(VV,{children:(0,Jt.jsx)(BD,{})})}),(0,Jt.jsx)(xe,{path:"/admin/service-requests",element:(0,Jt.jsx)(VV,{children:(0,Jt.jsx)(oV,{})})}),(0,Jt.jsx)(xe,{path:"/admin/announcements",element:(0,Jt.jsx)(VV,{children:(0,Jt.jsx)(hV,{})})}),(0,Jt.jsx)(xe,{path:"/admin/feedback",element:(0,Jt.jsx)(VV,{children:(0,Jt.jsx)(fV,{})})}),(0,Jt.jsx)(xe,{path:"/admin/guard-accounts",element:(0,Jt.jsx)(VV,{children:(0,Jt.jsx)(mV,{})})}),(0,Jt.jsx)(xe,{path:"/admin/visitor-logs",element:(0,Jt.jsx)(VV,{children:(0,Jt.jsx)(DV,{})})}),(0,Jt.jsx)(xe,{path:"/admin/lot-monitoring",element:(0,Jt.jsx)(VV,{children:(0,Jt.jsx)(OV,{})})}),(0,Jt.jsx)(xe,{path:"*",element:(0,Jt.jsx)(ve,{to:"/",replace:!0})})]})})})]})})})})};class $V extends r.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null}}componentDidMount(){this.errorHandler=e=>{console.error("Window Error:",e.error),this.logError(e.error,"Window Error")},this.rejectionHandler=e=>{console.error("Unhandled Promise Rejection:",e.reason),this.logError(new Error(`Promise Rejection: ${e.reason}`),"Promise Rejection")},window.addEventListener("error",this.errorHandler),window.addEventListener("unhandledrejection",this.rejectionHandler),console.log("ErrorBoundary mounted - Debugging enabled"),console.log("Environment:","production")}componentWillUnmount(){window.removeEventListener("error",this.errorHandler),window.removeEventListener("unhandledrejection",this.rejectionHandler)}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){this.logError(e,"React Component Error",t),this.props.onError&&this.props.onError(e,t)}logError(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;console.error(`Error in ${t}:`,e),n&&console.error("Component Stack:",n.componentStack),this.showErrorBanner(e.message||"An unknown error occurred"),this.setState({hasError:!0,error:e,errorInfo:n})}showErrorBanner(e){if(!document.getElementById("error-banner")){const t=document.createElement("div");t.id="error-banner",t.style.position="fixed",t.style.top="0",t.style.left="0",t.style.right="0",t.style.backgroundColor="#f44336",t.style.color="white",t.style.padding="20px",t.style.zIndex="9999",t.style.textAlign="center";const n=document.createElement("button");n.innerText="\xd7",n.style.position="absolute",n.style.right="10px",n.style.top="10px",n.style.background="transparent",n.style.border="none",n.style.color="white",n.style.fontSize="20px",n.style.cursor="pointer",n.onclick=()=>t.remove();const r=document.createElement("span");r.innerText=`Error: ${e}`;const s=document.createElement("button");s.innerText="Reload App",s.style.marginLeft="20px",s.style.padding="5px 10px",s.style.backgroundColor="white",s.style.color="#f44336",s.style.border="none",s.style.borderRadius="4px",s.style.cursor="pointer",s.onclick=()=>window.location.reload(!0),t.appendChild(n),t.appendChild(r),t.appendChild(s),document.body.appendChild(t)}}render(){var e;return this.state.hasError?(0,Jt.jsxs)("div",{style:{padding:"20px",margin:"20px auto",maxWidth:"600px",backgroundColor:"#f8f9fa",border:"1px solid #dee2e6",borderRadius:"8px",textAlign:"center"},children:[(0,Jt.jsx)("h2",{style:{color:"#dc3545"},children:"Something went wrong"}),(0,Jt.jsx)("p",{style:{marginBottom:"20px"},children:(null===(e=this.state.error)||void 0===e?void 0:e.message)||"An unknown error occurred"}),this.state.errorInfo&&(0,Jt.jsxs)("details",{style:{whiteSpace:"pre-wrap",textAlign:"left",backgroundColor:"#f1f3f5",padding:"10px",borderRadius:"4px",marginBottom:"20px"},children:[(0,Jt.jsx)("summary",{children:"Error Details"}),this.state.errorInfo.componentStack]}),(0,Jt.jsx)("button",{onClick:()=>window.location.reload(!0),style:{padding:"8px 16px",backgroundColor:"#0d6efd",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Reload Application"})]}):this.props.children}}const HV=$V,WV=(e,t)=>{console.error(`Error in ${t}:`,e)};new URLSearchParams(window.location.search).has("clearAuth")&&(localStorage.removeItem("adminToken"),console.log("Auth tokens cleared")),document.addEventListener("DOMContentLoaded",(()=>{console.log("DOM fully loaded");const e=document.getElementById("root");e&&(e.style.minHeight="100vh",e.style.display="flex",e.style.flexDirection="column")}));try{console.log("Starting application render");const e=document.getElementById("root");if(!e)throw new Error("Root element not found in the DOM");i.createRoot(e).render((0,Jt.jsx)(HV,{onError:e=>{WV(e,"Root ErrorBoundary"),console.error("Full error stack:",e.stack)},children:(0,Jt.jsxs)(r.StrictMode,{children:["  ",(0,Jt.jsx)(BV,{})]})})),console.log("Application rendered successfully")}catch(GV){WV(GV,"Application initialization"),document.addEventListener("DOMContentLoaded",(()=>{const e=document.getElementById("root");e&&(e.innerHTML=`\n        <div style="padding: 20px; text-align: center;">\n          <h2>Error Loading Application</h2>\n          <p>${GV.message||"Unknown error occurred"}</p>\n          <p>Please check the console for more details.</p>\n          <button onclick="window.location.reload(true)" style="padding: 8px 16px; background-color: #4a90e2; color: white; border: none; border-radius: 4px; margin-top: 10px; cursor: pointer;">\n            Reload Application\n          </button>\n        </div>\n      `)}))}})();